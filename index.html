<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>Apocalyptic World</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.36.1): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url('data:application/octet-stream;base64,d09GRgABAAAAADLAAA8AAAAAWHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IEkIY21hcAAAAdgAAAG8AAAF3rob9jFjdnQgAAADlAAAABMAAAAgBtX/BGZwZ20AAAOoAAAFkAAAC3CKkZBZZ2FzcAAACTgAAAAIAAAACAAAABBnbHlmAAAJQAAAI6gAADv+gJOpzGhlYWQAACzoAAAAMwAAADYY1IZaaGhlYQAALRwAAAAgAAAAJAfCBClobXR4AAAtPAAAAJEAAAFMBfb/0WxvY2EAAC3QAAAAqAAAAKhjiHI5bWF4cAAALngAAAAgAAAAIAFjDA9uYW1lAAAumAAAAY0AAAL94+zEpHBvc3QAADAoAAACHAAAA11cG/YjcHJlcAAAMkQAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZNZgnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGF4EMgf9z2KIYg5imAYUZgTJAQDSIQumAHic7dTVbltRAETR7dpNCikzQ8rMzMxt/M39mHnsU1/TfZz5jFpaV7pXJunMDLAZmOqaZjD5y4Tx+uPTyeL5lG2L5zN+L94zG8+ztr7ulXH1fra4bvK9M79xiWW2sNXPbWeFHexkF7vZw172sZ8DHOQQhznCUY5xnBOc5BSnOcNZVjnHeS5wkUtc5gpX/f3r3OAmt7jNHe5yj/s84CGPeMwTnvKM57zgJa94zRve8o73fOAjn/jMF77yje/84Ce/WGPun1zi/2tlXKbp3Xyc44bFyZanSWokJDXOOjXSk/LUSXn+pEwCKTNBaqQqZU5IjX+XMjukTBEp80TKZJEyY6RMGylzR8oEkjKLpEwlKfNJyqSSMrOkTC8pc0zKRJMy26RMOSnzTsrkk7IDpGwDKXtByoaQsiukbA0p+0PKJpGyU6RsFyl7RmosQcrukbKFpOwjKZtJyo6Ssq2k7C0pG0zKLpOy1aTsNymbTsrOk7L9pNwBUi4CKbeBlCtByr0g5XKQckNIuSak3BVSLgwpt4aUq0PK/SHlEpFyk0i5TqTcKVIuFim3i5QrRso9I+WykXLjXOYNzP8BuAPUwHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icrXsLcFzlleZ//v+++nb37dfte/VotVrdrW5JltuKpO6WJVluPyXbsmOEbGRjO4KVjWPZlsM4QIU4IYGlgCE2yxqKIQkJg2GreKQCTCZb1CZkiswjzOwOmSTATNVWTZLdDUwSMrVDsomD23vOf69assFAqgbk+773P4//nPOdc/5mwNjFl8WjosbaWblmxiOmIlTGYXzb11M7Z2ohAMbZCcZ5iG9prZl4whfwGju05xtttitUdwXYEUgkbQtWga5lC+XBaqJI285qpb8dVEc8Gnm5L5QM/f58yAlB399a7dD0mWAmdAqaMvBmKPKX9TdDwSjod9yhx03FAPcvI6Gk2lV33XoXUtKgL8C6Wa0WSzXbVjhg6JoqIPShCK0FOvOuE48K1V4B1VUQAVevugmP7Fz2CmTzW5/8+ZGP/+Kp7h/8oI4MuOZ7M5B9IvujH2Wf+PnCAjzn8ZK6AieMKRcvXnxWWSWCzGARlPcqtqs21WZzEBFgYIVDAYWzVJIrXBlH+hXGlWNM00GAJmYZ8sKBzTJFVZVppijqDFMVdTIWLa0o5JrdaHusPZGIG1IjFhQGK2mAZEe56kJnR1bTY7ZT7eivFGODBTdma3pHtlCNDVbwmgMHx/aO4R8ffeet5/ZCG6TfuV03IaSJU3oIzKsGO9+5PV+BwU5xqnOQx1aO8fW71yvD9fPn55/fA22PmsaFvfSgwZ8wzPiFvZ2DUMnzJ2hHVDMmHucPsSRrq7UQo4DMAV/AW7CANw/Zru3NIx20bBEpXwukArlxxOPReibaG63/SyQyiftzcBy3k1HuOHgjEgFHnkYfh4VodDJC4138Ff8hv5PlWbrWmm2O6grNEgGNCWGnbFtRm1Z04gzQPPWvkqMWF4eWU8DB267Df+gNe84bBvfRpfNI5Ny5yAmHDh5/PPLuByMlekDS9DsRR73nWHetwBShSO5PqCBQONO4E2wGlSvYZG6gMzeQ09SWFZC0tWION3oOVVXGTbGM+hrAzQj0O25yoN8R8YzzRsaZdzLwhpsGPEm783hAJ9+kq286eDX5pn/VydDjvk7i8EuchU21JJ3DNOqFzeABmywPcNXxhu/wB+3whrqwVw7Cn1j8vPfdDH6O7PR3fDV/Cb85wua/waSit309grZJHHOhHEQ9CA7zTGVCUb0ZvXzc1lrRe5Af+4An0aSL9op0IU9y6vRFtAYGKy7KJGFbQrdg2dXqGAwWilld0zUy9xLqd6A/zeFuy7gzYFmBOwOhZ6NNhZakm8YTI7S1pyM1mM032V26qevXGlzZ8+TKvROlB/BBkO9ACDalB7OZuBnuC5tRcAItpalENNOfhajVH1A2a1HjbHZ4N4r54oWLz4qPoe4jrMo2sonapm5QRQBQ3XycKVxwRRxjQuVCnWc6mrzOZ5FvBiraOmia5FubYRpok8n0ioRTKOQMNbWiszxYWAFZrQ1sB+dDJTFYghzyiBN3oB857ndIAha4Se/+YGUtjAkXXUO2xPE2eoe3TWPeMOXmzNi+j9w1HghvVbSAmu4c6nFac6MgbzXFU2baDr1241+98TfHtU/9t7df+MzU4msmfPYj06Wbw8Gqohda0/FkSyiyvtPGG/FsMKq1pLqmPvndkye/+y+08eYIHEJZpFmJra2Nop/VWuKcCwPvgRhnGlOFps6iIdAEmFVAKh53jblZyBU6nAFdbfX03tGwioZ9oGnEyDSWTQCyFzhoR+s/jdjgWLmc3L2K21zEmXCsM5aDm4g9Ny5v0PZVb+dY9Rcd/sl5eTiPj0nTaeiU+BhhW2qbuzJcUy2Nc2gCrjBkxWCqZiArGgOuwSzjAlDb5L91XfpvfYbpij6ZRIUWYoVcLqC2+UqNLddsMrekY3GZztVl2uQjpl4xjedIM+Uybc/r5viShuHgcgXuwQtpuoMHz8utCe/s8S+Y/7xMaYu2DX1yDrez3lp3cyyKdop+HLcLi878Uh9SKOSlj73cOIUFRVKVKHhaSS9JP452RCcYoJ3w85bz8Ckp9VN4xeZj9atpH4FnPCV4OtiDNIVYCrWwsbauK81VxUlaQnA+riFBisoUsiU0LbQpASCmmRAwg1MNJoH19uQ6WpriUV1jIQjphA5QjosiTfiy1tF+kPJKMTFYpAu6lkx40odnTv7VjYtC/QtTJyGH9HmMnKamGrcaqmaagRsMUwR9WeLmwsQREvIRevSvYa8uVFXo9Sc0w5A8/Rp5+jcxhXLuYAOIx/pbY+ggFp0FV8lNoLNAEQvyDkwBZR9T1ZC6xR0qFgsybix3DJcR7iIGwCsCHHQM0nYKVSBXQZPnqG7KDZiqrn8K524gpN9ghAx42k4GsvF3nohnA0kbnglkC9mrl7h4Db2TommKcVE1QOPRd97K5WJxsKO5nIjHbHtx/og3kK8iWys1he/EkKlqCbFOB6iKQp5Q5Yp6DB0AsjmPvHEFSGsoFraPaVpI2zLc2lmudErjJ/eeQwbKPoRBZulcwhwXYc6i1SdiEpiCF+KrFOIrAzKaHdhQ79tw4MAGuJv4rt8sQQu80jloGnnDfNVJBa+vn1WjSg1d8NHrg44FbTgdJ5+T77yy/gDI5wY7633yTbI7+CdyMDyEL2paDd0BvZjyfIYXH2/H+aqjDfXUisgnk3rFYMePoyZBegWanQpM5hKdlUSU1JnoQH2iG1d90IYADi0JPV2/oxMEeB7apm+aBngFw/ObMjzHzv7dgzyOh48fHZnmO9c8Wv+2RAGwHiP20UNnzx46mvYxyaMixDpZX22lQqQgRDqG4kYcMo92cpypAOo0Ti+iSYXJRGc5l8wvQhPfqpE0SYa7nDwkeQyh26OOlbecqVumoCwJ8+mDm+9/5T4eOyOt+4wk8WjavYTIG+7nD5Li2cWv8zGkMYoz51q2u3Y1JQSwfcumSn9JUxW0CZIWQ5isqKCo8zoGFPybx/lyHD2w4AaCBw7Ap1HIxAaHyZlr1tXG1owMt7h5Ox5QmxF4Iv6vDhaQoTFAYADuYIlnLa7b7RwtiOBDtVK1dbyCMXXxn5azOIIKfLFKaQP9K3HKIMYEQosvhkIWH23TQ9wIpCq9M4WxycnJsQIUYrEJ/bPGuOZohfHVzdmMaAmHm418c7DU3xdoyYPebFktPJtpHu7fefjw4R0VHiNTa06ZUTPe09a1sdTUVNrYtbo3nth11VW7tBa1d/U1a1t71rdG2u1IJNkWDYdbUs0pnnFT+OloWzISsdsjqVpvy9prqrNjed41POfPx2+J7TIXaWP5Wgf5bvToBEvpppQYOXPOJoda4gTQE6TsNK8sAvUSSHBFygfnfM9wL+8aK/Bddv0tZ8SufyKZ7ml7s20iCWdsPpPu4YVaXuur/2M6WX8riReTE21vtPUAnn4iyTxdf0vJ+/QM0pwsUL4D5BmUBQEeXpaU4W6RtExzN1In7eT9qHPpIoUdqAzSrdyHIPo1JNRps1uioCWJyIm2U/JG8oO4aZMXozF8b4RupRd5JJv7Nn8ZeUyxjlrakhJHcwO2gHMUDgGLR0MmS0GrIoMRWos0K81LUnPZYgmkw6sM8HtCoQTaT9y0Wu3f/MZuCYfijhMPhUVQNdL2hY8kMroS/8UvEqqeSfC/xzPV07k3vsqyrL+2ykYnhJjEz45OLIdbu4ncrbrWhImzltU7oqqaXAEdMWiHxPsSdvuF70K6/xf6FejjL13YBvFVP+UXrkwnyelZjBcltoLypQIoEmsoiDUw4C2QFS/I/J6yx5ybWOOqaMad0kJlKo+ElAdLqvRTMqOsgucuM64j3hgHU1H1mIkQ084Oje3eXT1lZwL1nwaD0BZMNfFTcHpv+sf7v6LEo4oZMlRbFNqH9tb60nEN0UkQ0mYawZNpR878eFuD1lWsl/Jb9J5iMbPlDKnkh3raBmS66U1M9Jm5rKUmMel1dKLOcxrVSgf5dJqU4o0g0pJyTlV37x4bytpCATOG8VUT4+m9cPoURiakE34ZMes/wbB0Roun+2p7h9oLSlwzQqZq2eIr+xe2/Rhp5QF8hHn5Hh/FfM9ibs32UrNG+l22ZbrnJ8N+fERAcD6YCp6nuPc2Aq/vWXiMfzKaye/BDfzTLPwe33MT8ns4P/y0uiLBdyZw3qRvNvGZegjF6H+escXvreOnkD7zm7IkADTbJEkU4sdw1jmwzpTj42smHLB82ijenjfx9YsXkccR+B5+I1azGtQk+4maTpnLlsBL75E7O1IPea+mzfPmUwQt00FJoG+nPxN/zruZzZprTljyx2GpXiHdYWBZtcINeB+2xVP16/GT9euDwf00TbqgK5gK7QvCmfp/wPn15WDa3BcM1l/Hy8F9wZQ31nf4Q2IjjrXyG+BnzXnMmqXiTuB5CLa01gINjvb8mesSTwHuSAEtzm8anp+uvwbdprkfhUs0wCNIxH6TP1l/vf6aPDThK0TXI5I+tjj+SX/8wIcaPxWX4y+CqsCiEIiAIzhsKrgfh+6qv+4L4RETPl6/zqMKukki9AA96OseZb3Zk7UKVKxZKt65tpR1J9p1sTGgP5Z4ah+KEzl73R/xEfr+I8H5fchlN/Jr0n0c3fSGkrz+vbhd5m2ZWltThDeKUaKh3WTZXWauS+WomBdMkjGvOCRuT9YfcIZxk0x24/5cT3q8redxe8TpTsLn03b9LIaFo/I0eQ7uxtjQm6rffI4elnTcJfbwX/qRFyG+Vw+SaJdyFIpugk0WXCcnaZFo1323viNAWHZPvk1+ugfjTf2sbcPR5LDT442bhwPj6Z5z9qi9wr8B85Ji51yXb3tISxlpSUtaZEYnFX8ZbHI6C8vk4ll2h5/YdRQbM0CUbSmXHsd5rH5zWz7fBnc/5iA1NLANwyQZ2+5JjiYfQ4mle+BxJA1prT9g+770dv4zTz9RnTPp+JlY4DJKoroOucmyT4fnsGIeFC3H9EtmB+qnGyP6413tPvs4BhIwipskDKakeIg+KKTgbl92JBkkHn1J3c8t+9ia2vBKhMFkGBJtEjrGDIzKE1SeAgTJiDAVRYpKmSGwMlksJor5gUWgjKlXYS0gurS4neaYflXJnaWBUjDKNAVhkWoF1WhHz7uJ2PapE8NHJkulySPD62/qVmLapMq10a997JqvnphQarc8dO3UQ2smYr38pfOWszK6fTs+eBKfHy4j8t2uWNrWnbDx5CNfe+TkxrHVE/EEW4ynxM9H2FhtpAeE2tnGFUH1J4xXChxD5hACLNXbLgOA3WU353rI37Y44SipbwdxwED/mEC0rOmuIzmlGkw7SBzNxZ6NN3519+zXRhV1Uosp3TdtGD68s4eXJo8uzHVtjyXc85gC9MYmRh+euuaRk+vhAG43Tm3RLGW7Clp52Oesq3N7dKVjnW9KxCdWjyFvi/nUs+Ja5CnPxtn+2t4NnVwLrELw76JqDMz1MacMGJoR0I5RVsA1lR/DLEdonLJLQWnOMcSamKlrszLnWWZ3mzcVOjsrnYWynTfVNmQ6aQFxrWtL9SQtgjqsojbxf5lp+qquSF1rVGyk02qZZEEKRkPdlv9ff3LVQ6MTFMas8xSft3fNVbd+vqg1KaF5w7RwBsirUye24UVXDS3oIcj/nz+56mF6qQlUAQ++gGoNytcxFG7P98DWMXMoHIL/6l/Z7p1riv8ko2oiyiru129WsSrmUjO1XdtWc0Pr7miOoWOV9YUQ07WQPmsCisWYDge5puAUAI3NIk6EQACmaQ+BGRaAwOSemV1TH90+vnlDrZBNFOi/nEUlLL96lYx5VZLqB5zDQLFQzGm6KuUX89L6YqxRuaPsCwXYTlJE1EVJt9ycWTo8bereoW7Wv38ewfOzmgI/N42Kn53LatjTxUCv85zbEyg+Y5hTcDddq99M2ysc8/51lABfjZ++8KvSxvUlnpCj7U+mIG3vR8yhXSbXEbaB3cDmatdds4lrhi9Z8hskNo2hkI+RQHWN6fMIUwKGFZiNhDmCNq6BoR1gejCoTzNdD86woB6cPDh33YFr91w99dHJLePr1tp525NylKZkzJtthLplN+ADzhOxjpiN1trRPwb/vhKfqIcMg8Mr3DDqd38o4cM36y9KWa+Tsn7v4/ocj134Vcg2TZsf/ABFKH4tYwrtObZYYxoF3QiQC+PjATwUho5+W8MkQlOOqUDxnlMNjZpsfB8zjJCxZe2afKeTjXeuboqT2XcOlsACB6XROFhWch7AeNy/VsZfx4fO5Aj8EjTVRPjLdtrmTS1NX7Azce6kmjZnnHf+1iuBiG0duzsmQTiZPzfjEoTGAqZ7xqt/nmmai8gXOWb0/sG9z8vyyPNOZjKDf9DlRgmQR93keVlHOU/9RTkfH8W8ieTQzWpsc21DGRM0Xw4soAUWDEDPtMB0oS9I5qeXC0PhMySPyTWjuYFctn9JEgWLp6FSXdz71TeSgzuQBmnXVHPXGqWhIhXkF+H2lQXxVqiSO5OthN9CQQSazmBOhdycwSgoZRJvQ28Yz8SVltDiwd3PUxMLN9De1dWehinH5783RvA9xhpyoHgnWAfGvE3sqtqOFT25rGIoMB4GBa0NAaepg2KYyiwVijQqFKGtopEeUFFYgQCboj0jZ8cCk7U1Q2W3MBBLjMRi0SCKxO0od6gD6Muon6Q35JGLDZS9DEpfLNZTA4aqrmrD0rwHCAO8Cs/Ur4a3J0Lql9WU4RfBJiYySfg+cviqaczLvipt59LuhbjXflPdSuRLUUd/9VV422jRv6SF/NbehYrcQ1p2AZ6jd80L5+kSRwE3WV+OVGTs9GvnU6yLDbJsrZ2aE+iijskqPtuHgTAktgz0r+xtaUaslZRRH6FKlRJrBwO9bK+lef8YXipg7j8GSJjM+GRPmSApRv6n//T4VrH3qqbRaNxoqoxSNMfwD6MV18yPulftrX+xZ7gXeka7vMCPgf2aQ8+N4bPuaKz7lg2LIGjjTT3x4T4jvubPYKL+cFtPTxscwm0DA+yVNaMjbFNt/cE9k+sUpoxgas8Gu1qjhG7GqUu+oAFel8B2gTDcgt+54If2XXv1VVsmVvRkM4m4TnnrYCGLtt5foc4F2rWO/NrIbxENvBHUy0WJBYqEg8hbyklAxoATvupfHMCZ3wAHaASEAFz/Y7pUPh+ZumWK7z65G1KGftgMJro0NbIzrOvbm1sCuhL9tBGKtrof1aLaZkdRjS4zYhzSDTDVw4bldnrPGtubWgKGiH0adR1JuR9VI/qErSgB72HMk0emp2+anr6F7kfTydZ+zdKSO0EdDRuTqaip3xAIjapaLa1aWqg/kmqNQEiXzza3ZFbqId3euezR4Iiqbkj5j7ZEIeTX7X4n9vLvLmKL2mAXILVUp0WPoyLCVJVGQ+/yNlGhjP8PNLq4y9vNy9rPrn+eW36OaPmdX0nTF7EIpu9XPlvW1XMgOiHbSHIL1ji1nsbpBdbAyXtlTRwjSHuCqyJvkjfAVEiMe317oeLEURlNKa/CI7tfVLxLp5qb4tFwUFVYJ3R6/STHqy1Xi1R9RLvvd6lSPIba14rZoo6zwa3w/7L18OGzRwC+N7B52+HD2zYPfA8OP3iIH9kyjkd4Fdwj9x85skUPzfXhQd9cSN96mB+97yjgoYUXvZ7kxYu/UW7mL7Eo+rwKK9byTKWsSWWz6N8VBaZxB5ShgDJZHerscm0J6L1at2fNGPH4CqQNZ+gAGTeaPZVNBB52IJ7nt/uI3N/B0707Do+8vmEH37rpdTLX8eEDd47Xr564Y3aIj+67azM8Q4dwYHjpHbJoOu1/8OkH++lk4s59Y2Lo+tsevG1ukA/N3uHb9f9TbkFebNRET61I/GEuOEtdCkxKcdfISpPptmSn01kdVNF4Y4NjHF1rWnh0cxWZKImsJdKcKPPIkZR5RIoYkcJ7dh665dDOHqV/4jgc2ILXkYz77zgwypGsH1zKst/L+ir6nJVsPdtR2zaC4aQTZC9CR4p0jigDQ6gmexJcUeeXdbS0xY7WslzDdpPF8uryAPX0L+tqoVNFD5QrFi7rbKGXwYnkJGCpwra4XMZe1th6JZcOCL0VgV445HepqL+l5jVdKMHP1VeH89a/WtYaK2/9Z/g4noyFYduzjf6WpSS0FIKDRovrC4aaQ9ZArQ9b1r/K58P0Yhi/4Msl4WPhFbUuzCTBb1OitsjmCVsAn+Qs3eokTJ1FeEQlI1nGXNlfnbS8tcc/sYz4wU8vsbd+lr/UII5u7mncOYBJ+WKc+5jsETe/L03AXCfmN4IlTVnCOYiVSxyWr5h45up7d/Lpu568c7ey4zRcu6yjzk9P3Xvu3im5qb9yaf98ab2AwZIsy0Zrq6nXxkG22zi121ScGiC71IoiZwcZqlAmzUCmvaU5GgkkzaQfoNCjlKimWnxvGhtR5b4r0roYFX59BZLFsvVB5NMRIVAGQ65bJoBsRuaFbLJM/0n3nZCLlZaWYKj+efWy88WezKv+yiG5dKnN23mX2uUJbi5bY+Rc4XgxBrHXGnlYb637gwLPEuXVBmD1ViiIyzgRfl5f9NddvfoB9NDxw0clWD9KV0FbdhMMjzfc+H7uJXEG8fo6Ns4O1q5fU+KCCq16PhXG3JuJcczFw6GwEaLSBXkQwNwF4DgLs1AgHDqA2FToAXEgCDpj+jTudDaDgUmnGsaG9bWx1UOVctJGzBlDf2HJWgZyh1HHkeV53RK5WC6Gc8fr45AzKSByxwlWHShTsxydSgfVLhALUZsXOiS8w0TlVOdJ006bC4ZayA43j7cN9WCqeCgYDTvGJzKnKG0Jn7ou6KSC18Frs8FUk2Jch1frv65/kWLdMMbf2fWfDKac4HFdaYpb8HY9ZDXZhnEylEgHP7t2L6YMcO46M22b111HA113zoFBDJQUpy/WLx6B36K+MxQdmlHBKerm0BIJKqUu68GgoLY0VSpexdChJiDC1WpC9qwK1cQYpS7U0BW0JAzeMrX6P+hRI2Dy4z/hqqmb4gS3jG8GLT77P1Ue5E4wfOFTFoioAS8NYVYZhv9umJapaPV6hct6wHdkHiowcqVYnvUivt5Qa+3vK/X2dBXy2Uy6pclBE4pR4XkwxWHTtq93vH+tv0l2U6pFvbNRePWrv51uBFbBWmgHbw/upXv+0LnRc1AxL/RjLrVgmvx/yP0Fq1KJxarV2A+PHct2HDvWwbvxJIYX60/THfzHrcdGH7shQm/iC2l6E/fXRumtaPU/ybeyx+p34UkVL0LJv9PAUHOomzL1w8q9uZaYoV3SIOoujHBKKii60eKMxhJHXUMgTQW0InVqqErq22AbYN6BHOMkFCMtlpWLDDc/0NM23tYLZ1uGMX5ZrWfPtkQj+chQ61lZiH+gZSiai0Sbz4JhDbeswXd2PSVr8E/twqtr8KXdu690Q2KpI6jHMMuhBjdRdbG9iQslEae6YVhDV7gBdOiHgK4iKtSERkv4yOpAP8ZMpimmNqtSRuUFG50FDD2AeaYRNrasGS0P2LTwuGDncpRJNtZ5Fpev85SVhMY6T3ewBJrtjAFIs8XZi95eSXOXLJkW75wKaXmE7afkst1TsjBDJxP3v3I//kG6Z9R+ce7WnfcfrvHRo6fPnT46CpteTMJZ7yXKMb2XTlHieMpspgUYLz+k3UsJV/LFTWNH7vvT08eHlfWHHtx+69yLSbZMRhHWhDn2SG0oYCC3qE/B0qAKuZqPg+b5XkErlwWmYkKlMkNY2eLmUAqF3OJinmKjrPIhuK1/W/IJ6z8kh5K1D2aK+/UTWqOzkz1fC4xVOgKKKqgjZqKV9nhTGGOgUGnZjiK4Mq8jJFKOMwJ0UxSLdlO/Ymvrtq8H3/UG+nBNcG0e7Vh79xt/yOf37KklDMPYaeyc3LZ1y8hwT671KoP8BApooL9agOqYUm2FATeRptTcdeQGxexmC3pWyw2u5ZSr4l9xsLCKW+DaaeqxVskXZql+XdTggY9NDrcHk331MoTzqZSj3fGlCe3GxJQT6IsGjeBkQOGQO53v+VKSb9E1EVMQ5vKs2/R7axiimWAmiVCh4/MZ1eYrecvvMWx9oa71KppmNkVhBs6G6m+veHkw8amOFi0QFY4pTI7RrikRxSd1jgBaCeytDEHmYSsUN/HTEEyqQVQ6ppY4937ER/nPmMXaWK6W8TvQy1cj+s28wcIlS70LHqQsSoS5rB18abP70ubwv0VMqrRhJALnb2SJXZ76vg7pAPc9++oF2+s8XzLyZUMt/3ajhy35encPGy4n+lIy4Xvvou1JERMJFmTa8zqHldSwlaBa9k6VC63heDzM/3cYttfndDMiKlbIwCN7eV2F8FS61toUNZhCzHltUoKChwg/yah6WVnr8jIXJer+ultoizj14CWn/GfvvEU5uIjTdtnx8nw86K1TlzWF5QsXBhYXGlw+3rLk/5IB/G8+gzZuYUagPa8ByoUaWfiRIuA35I4CrJOMVariLtOCaKD+Ryq3gvWTwSDci1AAfVtQi7zzsmWE4F5Vq/+RPKDe8714vX5SVSVGuXjxa2K/iCyN42qyOkbLkXwt6FIjmt5sRsHC11VB2yANZQl1HL+GWjFC9Em4Vx7Q2oKTeB2+oKkeL3xEkBU015zWlri4VEBrpICIlwZ7Eso2mgSVKs8GLeJN5YsLnmn7Lh7/45KS6ncSg5I/Por8NcaWi7UW27Te2JeyTGPqPg3VS9j2CzJyeznjn1qaGXCrpsq8ro655n7+1zi3WwkBRkGuRl5e3eMyi6L0TvDJcnYwTnM14fWG5Xyh5nXVLya56BmNJRUi25oYoiGRJBGXdaO+Rb1Y9R861mlZYzodsf21K8/wZ1mC8I75Hr9viTsF+fsW5BzxTSO1IFQNz6DJvnC/lPv9L6Ab4KcvfJU6gC94y9NfMP31s7i5XY5RIn6LJqKRxjAKDuOVppiQA65ycUhaEvVeQya8dVuF6uCYKClVFADVGd5FyGt9RTWAAgg50ahiNFm2YkcCarHv3QTW/6Jna0TY0VA0FEpnMkbciKJ0RGSrrMN/XzzKfy7p3saOsq21cUl7FVQ2Dboqxg8D38S4hnxooL2bGRU1qurqAtP1Q1M7xzd3Sd4MKlx9aN7cxtWq/1OQAi25ohrK0s0ilVHwbgmKVNGWD1T/IMmcmd2u68h5MhPsLpW6Mf7ZEUPfceC+0zfhdXy9uTm5cQffujnZrMQFzmZdv+n0HyDOnl33Z4RjOcFoIL338N50IIpBxBEd9+2+7fV+vGGHQ5Y18NCTDw1EwkITYRu/JwZe9fPMI+IfxFUsyjbSqvKhAcwt168pdedsTBbTzZxTnRzRxQyV/if8uggP8y2VcpqWw7iyTmgJOy3GuEu5oK35P5xC0L6GZFag308hopD9/6r3KyoE7rKG5Tqi3D9z8s6TM/3+7mEeeCxiPDanxdWDjxmRxwKIeebmVFVePajGtTl5VaWLcGDdLdMVpbTvxD0n9pWUyvQtew1RfioQFOU/1vU/Lotg4KmyMEz9nnuM2OINTVu8ETPuuUeXPuNZUcFYEmd9rFRbYSxfVUjLiN9dFerqyvd2yKWFBEEB548Fup3m1PWnBQHUERnjyKYur0O1v1pBfvl30u2Hnj4EwydOw/CBOyd23vd4+YefpuUbvHb84elmO9HXD1P3Tq1f48YM5VZ17msH5/d1fPtmWQndeOwTd1EnZNeXbtwsoBRbcbJ29T3T0GbGDO+3J95aen6KxViWDVCHL8i5wsPAxPLfE1FDb55RmQnmCYgrEoijOyX+6KeDoE66Tt5ONjkSgheKBA9LqL6qpqchU0E7QaSYtJ3+irSVimrrmpLJU3ej0gsK6vTRXbdlEXtnb9u17Z9B+Un9m9Hg5rmoE93YF4zCPwZ31H9b/6f6b3cEgzvAgAIYO4IwfMe64Q03nOX3fXzD8Lo7brzrLtiCz85tCkajwb6N0b9LJD738MOfSxTs2x7mj3yGsEgjzzBYB9Xw2hGCYAZOzYWG2uR6nFlvxlJeEZfO732ziNsX84be4ffMGz7/gRmQb1dyTX8Q/dtArU8Hb8Wybmgod53NBlQOilxbg9mPCIstK3sTAzE7O5BMJuTKkvJgwfulBskXM0CBMymXLQrpkSoDMVmJ6aA2QjGG4SJkRk38g5sd61dtYGoQ4St+jHY+U23r4aVWOEjtseoMnDgvfwCEm2+hp6r/X91AK4zYkU3HMVEaxnR3qBfqPzn+/wHPnsOreJxjYGRgYABi1vIsoXh+m68M3MwvgCIMt5YoxkDp2P9f/2exVDAHAbkcDEwgUQAz1Qu/AHicY2BkYGAO+p/FwMBS9v/r/68sFQxAERQQDACh8QbyeJxdT0sVwzAMy49AkAxAkbT3UQiAITGAISmAYQiA9th4ttUs7Q568UeSlVidiwSkB3PUPg+ESd6ZD/+8v7HyrtzwghY89ZB6BcyrYqc6RZhw48YhaA1Wc/v1PQtdeXJ/HppUmFM597nvBVK7D+Z+E8/uQZLBgDyaz3Llvxx02S3c/Hv813JrznryZP4F+6lSfQAAAAAAAAAAUAC2ATABaAGyAfoCJAKwAzYDmgQSBFwExgUyBbQF/AZOBvwHRAe2B/YISgigCPIJGglCCWQJignACgAKQAp2CroLAAtGC4oL8gxcDPINng5iDuYPag/6EF4RIBGGEeQSShKYEyQTbhOyFAoUYhS+FVoVphYoFooXHBeGGFoYnhjGGOwZChlOGXgZrBneGhwaWhqgGtIbLhvyHHQc2B1QHZ4d/wABAAAAUwBtAAYAAAAAAAIAIAAwAHMAAAB2C3AAAAAAeJx1kN9q2zAUh39q0441YxcbjN3tXJWWEcc1lEGvWkLbXZeSu8JUV/6T2VKQlY48w95ifYa9zt6jd/vFESUUYiP5O5/O8ZEE4AP+QWH9nHKsWeEdozXv4A0uIu/Sf488IN9G3sMQPyLv0/+MfICv+BV5iI/4wz+owVtGM/yNrPBZfYm8g/fqW+Rd+svIA/Jd5D18UovI+/S/Ix9gqp4iD3GoniduvvR1WQU5mhxLlmap3C/FUdVWN6IXoXK+k3MpnA2maVySuza0ZlToUZ07292YctFov6k2eWp8VzsrJ0m6qa+NNV4H87Dq1j2WWQiFFN61chX7yNy7mclDUoUwPxuPN/tjAoc5lvCoUaJCgOCI9pjfDGk/BPfMEGaus2pYaDQ0GgtWVP1Kx/ico2BkaQ0zGnKCnHNL09KNuK451721rLqhLfmfht5vzdrmp7Sr3nUfC07YL92afU1r+wrd7/Dh5WwdHrmLjDawanUK3+9acPXqPML7Wq3NaHL6pL+1QHuGMd8t5/8PvPGO3QAAAHicbZLnlpswEIV9DRiwvZtseu89Ib333vvmBWRZYMVC0pHEEufpg8BO/kTncOfTaLgMOtPr97o17P1/baKPACEiDBAjQYohRhhjDevYhu3YwA7sxC7sxh7sxT7sxwEcxCEcxhEcxTEcxwmcxCmcxhmcxTmcxwVcxCVkuIwruIpruI4buIlbuI07uIt7uI8HeIhHeIwneIpneI4XeIlXeI03eIt3eI8P+IhP+Iwv+Ipv+I5N/OiF1hEz9JKxUrtFrDl1lWF9NR9QIikToRaVjUouKxvOmNBjLxnlhgo2DbnM1djLKrNGnGPScSUzItzGv93yPP2bSQSX84z9cqFQdJ56yZRmMhW8mLlJJSaBI0XYPDaZKDUviZmvr6DrNjJMi0WcK1MTM02mqpbZlJtEsNx5SI238jSodJtoS7qv+BpPw67IY9xU+dg5TXjROTWwdGrIOzWhT+uA0jolxqjaZrSOnCF2Nmq16651EYpMm1fakAul9SJQeR5QVYQlk1VkZ8SwoVNFIVjWnKQrlBGdMToftdoZjrs77DajqXKrS02YEFxbbtdWkG0x44JJVUS5aBqKSlJwmhDrmOF2Hv9Wqsy4TNqoKhfmSrrQKuNSL5nvPG6p0s0AkEWkSWVZMy1Kx3ljk03qLuZ14lTmB8gNGmByGrGfjLrhlhJV2f7SaIneNF1ypQNbybBUSgZswQaWEUNngeay1/sD4l/60HicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA=') format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0\00a0"}[data-icon-after]:after{content:"\00a0\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}@media (prefers-reduced-motion:reduce){#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay:not(.open){-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<tw-storydata name="Apocalyptic World" startnode="70" creator="Twine" creator-version="2.3.16" ifid="5DE2DC6F-7DF3-4BEE-8F7A-6E811082E2A9" zoom="0.6" format="SugarCube" format-version="2.36.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">#ui-dialog-body {
    max-height: 88vh;
}

#textbox--testcode {
 	background: #111; 
}

#notify {
 z-index:9999999999; 
}
.img-no-w img {
 	max-height: none !important; 
}

.wanted-unique {
    width: 32px;
    height: 32px;
    position: absolute;
    top: -14px;
    right: -16px;
    z-index: 999;
}

.enemy-img img {
 	min-width: auto !important;
}

.passage video {
 	width: 100%; 
}

.say img {
 	max-width: 20% !important; 
  	min-height: auto !important;
}

.flag-bg {
    width: 145px;
    height: 296px;
    background-size: contain;
  	position: relative;
  	text-align: center;
}

.flag-bg img {
    width: 70% !important;
  	padding-top: 35px !important;
}

.link-desc {
    padding-left: 20px;
    font-size: 11px;
    color: #ccc;
}

@media only screen and (max-width: 800px) {
  	.o-text { 
	 	font-size: 10px !important;
	  	padding-top: 10px !important;
  	}
}

div#companions-list {
    margin-top: 20px;
  	display: justify-content;
}

.companion {
	border: 1px solid #f1c40f;
    border-radius: 20px;
    overflow: hidden;
    height: 30px;
    width: 30px;
}

.companion div.girl_info_picture {
	 margin-left: -28px;
  	zoom: 57%;
  	margin-top:-9px;
}

div.girl_info_picture {
    width: 97px;
    padding: 20px;
    position: relative;
    zoom: 150%;
    padding-bottom: 0px;
    margin-top: -22px; 
}

div#girl_hair {
	  height: 59px;
	  background-repeat: no-repeat;
	  top: 0px;
	  position: absolute;
	  width: 80px;
	  top: 14px;
	  left: 31px;
	  z-index: 3;
	}
	
	div#girl_body {
    	height: 153px;
   	 	background-repeat: no-repeat;

	}
	
	div#girl_top {
  		position: absolute;
	  height: 100px;
	  width: 38px;
	  top: 54px;
	  left: 38px;
	  background-repeat: no-repeat;
	  z-index: 2;
	}
	
	div#girl_hair.girl_body_hair_black {
		top: 15px;
    	left: 37px;
	}
	
	div#girl_hair.girl_body_hair_blonde {
		top: 16px;
    	left: 38px;
	}
	
	div#girl_hair.girl_body_hair_red {
		top: 13px;
    	left: 20px;
	}
	
	div#girl_top.top1 {
		top: 46px;
    	left: 39px;
	}
	
	div#girl_top.top2 {
		top: 47px;
    	left: 35px;
	}
	
	div#girl_top.top3 {
		top: 47px;
    	left: 36px;
	}

	div#girl_top.top4 {
		top: 47px;
		left: 37px;
	}

	div#girl_bot {
		position: absolute;
		height: 100px;
		width: 38px;
		top: 79px;
		left: 33px;
		background-repeat: no-repeat;
		z-index: 1;
	}

.trait.tooltip {
    display: inline-block;
    border: 1px solid #666;
    border-radius: 11px;
    background: #666;
    padding: 0px 10px;
    font-size: 11px;
}

span.name-no-click {
    display: block;
    padding-left: 19px;
}

strong.iitem {
	color: #f1c40f;
}
#date-div, #ingame-ui-buttons-side {
	background: #f1c40f;
    color: #2c3e50;
    padding: 10px 0px 10px 0px;
}

div#ingame-ui-buttons-side a, div#ingame-ui-buttons-side a:hover {
  	border: none;
    color: #2c3e50;
    border-bottom: 1px solid #000;
}

div#ingame-ui-buttons-side.cheatmenu a {
 	border-bottom: 1px solid #000 !important; 
}

div#ingame-ui-buttons-side a:first-of-type, div#ingame-ui-buttons-side a:first-of-type:hover {
  	border: none;
  	border-top: 1px solid #000;
}

div#ingame-ui-buttons-side a:hover {
 	background:#2c3e50;
  	color: white;
}

.caut-bar {
	height: 8px;
    width: 100%;
    background-color: #2c3e50;
    background-image: repeating-linear-gradient( 45deg, transparent, transparent 12px, #f1c40f 5px, #f1c40f 20px );
}

#blackjack-bj img {
	max-height: 225px;
}

#support img {
    position: absolute;
    top: -13px;
    right: -5px;
}

#support a {
    border: 1px solid #2c3e50;
    font-size: 25px;
    background: #f1c40f;
    color: white;
    padding: 4px;
    position: relative;
    display: block;
}

#support a:hover {
 	background: #D3AF1F !important; 
  	border: 1px solid #2c3e50 !important;
  	color: #2c3e50 !important;
}

.perk-item.tooltip {
    width: 50px;
}
.perk-item img {
 	width: 100%; 
}
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black;
}

.perk-item.tooltip .tooltiptext {
    left: -25px;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
  opacity: 0.8;
	top: 0;
	left: 0;
  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.trait.tooltip .tooltiptext {
    width: 169px;
    top: 22px;
    font-size: 11px; 
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}

#fight-enemies {
  	display: flex;
    justify-content: space-evenly;
}

.enemy-div {
 	position: relative;
    height: 270px;
  	width: 200px; 
  	text-align: center;
}

.workbench-item table {
  width: 100%;
}
.wanted-link {
	margin-top: 10px;
    position: relative;
    display: flex;
    justify-content: center;
}

.passage .wanted-link .link-internal {
 	width: 70%; 
}

.wanted-type {
    position: relative;
    color: black;
    margin-top: 53px;
    text-align: center;
}

.wanted-img {
    position: relative;
    margin: 0 auto;
    width: 82px;
}

.wanted-div {
	position: relative;
    height: 270px;
  	width: 200px;
}

.wanted-value {
    position: relative;
    color: black;
    text-align: center;
  	font-weight: bold;
}
.wanted-name {
    position: relative;
    color: black;
    text-align: center;
}

.wanted-bg {
	position:absolute;
}

#wanted-list .wanted-bg img {
 	width: 200px;
  	max-width: 200px;
}

#wanted-list {
	display: flex;
    justify-content: space-evenly;
}

#ui-dialog {
  max-width: 55em; 
  width: 93%;
}
.menu-grid .menu-col {
  position: relative;
}

.menu-grid .menu-col .grid-chars {
    position: absolute;
    z-index: 999;
    top: -10px;
  	right: -5px;
}

.menu-grid .menu-col .grid-chars img {
	position: relative;
    display: block;
    float: right;
    margin-right: 3px;
    height: 40px;
    width: 40px;
    border-radius: 30px;
    border: 1px solid white;
}


.say p:last-of-type {
    padding: 2em !important;
}

div#passage-farm-shop td {
    padding: 10px;
}

div[data-tags="sex"] #passages img {
	text-align: center; 
}

#welcome img {
  width: 100%;
  height: auto;
  max-height: none;
}
.workbench-item {
    background: #666;
    border-radius: 20px;
    padding: 0px 20px;
    box-shadow: 4px 2px 5px #666161;
    font-size: 11px;
    position: relative;
}

.workbench-item h3 {
 	margin-bottom: 5px; 
}
table#girl_info td {
    padding-right: 70px;
}

.action-image {
  text-align: center;
}
[data-tags="sex"] #passages img {
    max-height: 500px;
  	min-height: 300px;
    max-width: 100%;
    width: auto !important;
    text-align: center;
}

.inventory-item {
    width: 114px;
    text-align: center;
}

.Inventory {
  position: relative;
}

.clear {
  clear:both;
}

.inventory-img img {
    padding-top: 5px;
    width: 61%;
    text-align: center;
}

.inventory-img {
    border: 2px solid #ccc;
    border-radius: 50%;
    margin-right: 10px;
    box-shadow: 3px 3px 5px 1px #854545;
}

.inventory-title {
    padding-top: 5px;
}

#place-head img {
 display: block;  
  margin-left: auto; 
  margin-right: auto; 
  width: 100%; 
  border-radius: 5px;
}

.passage img {
  max-height: 400px;
  max-width: 100%;
  width: auto;
}
h1.ptitle {
      font-weight: bold;
    font-size: 200%;
    margin: 0.2em 0;
    text-align: center;
    border-bottom: 5px solid #000;
    border-radius: 0px 0px 35px 0px;
  text-transform: uppercase;
}

.passage .menu-grid a.link-internal {
  padding: 0;
  box-shadow: none;
  border-radius: 5px;
}
.passage .menu-grid a.link-internal:hover .menucont img {
 	opacity: 1; 
}
.menu-grid {
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
}
.menu-grid .menu-col {
    width: 32%;
    margin: 0.3rem;
    margin-bottom: 0.5rem;
    align-self: auto;
}
.o-text {
    font-family: 'Catamaran', sans-serif;
    letter-spacing: 2px;
    padding: 18px 0 3px 0;
    color: white;
    width: 100%;
    bottom: 0px;
    background-color: rgb(0 0 0 / 65%);
    position: absolute;
    top: 80%;
    left: 0%;
    right: 0%;
    text-align: center;
    font-size: 15px;
    padding-top: 20px;
}
.menucont {
    border-radius: 10px;
    background: gray;
    position: relative;
    width: 100%;
    max-width: 640px;
    line-height: 0;
}
.menucont.no-energy {
    opacity: 0.3;
    background: red;
}
.menucont img {
    max-width: 100%;
       -webkit-transition: .3s ease-in-out;
    transition: .3s ease-in-out;
  border-radius: 5px;
  opacity: 0.6;
}

html { 
     background: url('images/game/bg.jpg'); 
  background-size: cover;
  background-attachment: fixed; 
}

body {
  background: none;
}

#passages {
    max-width: 54em;
    margin: 0 auto;
    background: #1d1e1f;
    border-radius: 20px;
    padding: 20px;
    box-shadow: 5px 5px 35px #1d1e1f;
}

/* Say > */
.say{border:1px solid #eee;overflow:auto}.say img{max-width:20%;float:left;margin-right:1em}.say p:first-of-type{font-weight:700;margin:.2em 0;border-bottom:1px solid #eee}.say p:last-of-type{padding:.5em;margin:0}
/* < Say */

#cycle {
  width: 200px;
}

#cycle img {
    display: block;
    margin: auto;
    float: center;
    width: 50%;
    border: 2px solid white;
    border-radius: 5px;
}

.cycle {
  text-transform: capitalize;
}
#story-author {
	padding:0 !important;
  	margin:0 !important;
}
#story-caption {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

#ui-bar-body {
  line-height: 1;
}
#player-stats td {
    padding: 5px;
}
#additional-links a {
     display: block;
    padding: 0.25em 0.75em;
    border: 1px solid transparent;
    color: #eee;
    text-transform: uppercase;
}
#additional-links a:hover {
  background-color: #444;
  border-color: #eee;
}

.passage .link-internal, .link-button button {
	width: 97%;
  	border-radius: 18px;
    font-style: normal;
    font-size: 18px;
    font-weight: 600;
    text-align: left;
    transition-duration: 0.4s;
    padding-top: 0;
    padding-left: 18px;
    border: none;
    background-color: #7d0101;
    outline: none;
    display: block;
    color: white;
    margin-bottom: 5px;
    text-decoration: none;
}

table#slaves a, table#fight-table a {
	background: none;
  	color: #68d;
  	box-shadow: none;
  	width: auto;
    display: inline;
}

table#slaves a:hover, table#fight-table a:hover {
	background: none;
  	color: #8af;
  	box-shadow: none;
}

.passage .link-internal:hover {
	box-shadow: 0 2px 5px #fff;
}

.say {
    border: 1px solid #eee;
    overflow: auto;
    background: gray;
    border-radius: 50px;
  margin-bottom: 10px;
}

.box {
  width: 400px;
  background: #123;
  margin: 48px auto;
  padding: 16px;
  position: relative;
}

.box > img {
  width: 400px;
  height: 300px;
  opacity: .5;
  object-fit: cover;
}

.box::after {
  content: '';
  display: block;
  position: absolute;
  top: 40px;
  right: 40px;
  left: 40px;
  bottom: 47px;
  border: solid 4px white;
  border-bottom: 0;
}

.text {
  color: white; 
  position: absolute;
  text-align: center;
  bottom: 40px;
  left: 40px;
  right: 40px;
  white-space: nowrap;
  overflow: hidden;
  font-family: 'fjalla one', sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.text > div {
  width: 2000px;
  margin-left: -1 * (2000px - (400px - 40px)) / 2;
}

.innertext::before,
.innertext::after {
  content: '';
  display: inline-block;
  width: 600px;
  height: 4px;
  background: white;
  vertical-align: middle;
}
  
.innertext::before {
  margin-right: 16px;
}

.innertext::after {
  margin-left: 16px;
}

/* Simple Inventory, for SugarCube 2, by Chapel
v3.0.0-beta1, 2022-07-25, 19f255d958852e55a8a3afcde5c53331f0d938e8 */
ul.simple-inventory-list{margin:0 auto;padding:0}.simple-inventory-listing{list-style:none;padding:.3rem .3rem .3rem 1rem;display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr}.simple-inventory-listing:nth-child(2n){background-color:#000}.simple-inventory-listing>a,.simple-inventory-listing>span{display:inline-block}.all-listing.simple-inventory-listing{border-top:1px solid #fafafa;background-color:transparent}.drop-link{color:#e33}.drop-link:active,.drop-link:focus,.drop-link:hover{color:#f88}
/* End Simple Inventory */

/* notify.min.css, by chapel; for use with notify.js; v1.0.0 */
#notify{position:fixed;display:block;width:16em;right:-20em;top:2em;padding:.5em;background-color:#fff;color:#000;-webkit-transition:right .3s;-moz-transition:right .3s;-o-transition:right .3s;transition:right .3s}#notify.open{right:0}
/* end notify.min.css */</style><script role="script" id="twine-user-script" type="text/twine-javascript">Config.passages.nobr = true;
Config.saves.autosave = "autosave";
Config.history.maxStates = 5;
Config.macros.ifAssignmentError = false;

setup.items = {
	
};
setup.randomEvents = {
	travel: {
		Settlement: [{
			enabled: true,
			passage: 'Travel event: tree ambush',
			percentage: 5
		}],
		"Underground city": [{
			enabled: true,
			passage: 'Travel event: city ambush',
			percentage: 5
		}]
	}
};


$(document).on(':passagedisplay', function () {
	checkVideos();
	
	$('input[type="number"]').attr({
       "min" : 1
	}).keyup(function(e) {
		if (!Number($(this).val()) && $(this).val() !== '' || Number($(this).val()) && $(this).val() < 1) {
			$(this).val(1);
			return false;
		}
	});
});

$(document).on('click', (e) => {
  if ($(e.target).hasClass('macro-linkreplace')){
		checkVideos();
  }
});

$(document).scroll(function() {
  checkVideos();
});

function checkVideos() {
	setTimeout(function() { 
	  $('video').each(function(){
	  	  $(this)[0].pause();
		  $(this)[0].volume = SugarCube.settings.volume / 100;
		  if(!SugarCube.settings.autoplay) {
			  return;
		  }
		  if ($(this).visible()) {
			  $(this)[0].play();
		  } else {
			  $(this)[0].pause();
		  }
	  });
	}, 500);
}

window.hasTime = function (hours, minutes, max = '23:59') {
	var current = new Date(variables().gameDate);	
	var minTime = new Date(current);
	minTime.setHours(8);
	minTime.setMinutes(0);
	var maxTime = new Date(current);
	
	var maxTimeSplit = max.split(':');
	maxTime.setHours(maxTimeSplit[0]);
	maxTime.setMinutes(maxTimeSplit[1]);
	
	if(hours) {
		current.setHours(current.getHours() + hours);
	}
	if (minutes) {
		current.setMinutes(current.getMinutes() + minutes);
	}
	
	return current >= minTime && current <= maxTime;
};

window.timeBetween = function (from, to) {
	var current = new Date(variables().gameDate);
	
	var minTime = new Date(current);
	var minTimeSplit = from.split(':');
	minTime.setHours(minTimeSplit[0]);
	minTime.setMinutes(minTimeSplit[1]);
	if (current.getHours() < 8) {
		minTime.setDate(minTime.getDate() - 1);
	}
	
	var maxTime = new Date(current);
	var maxTimeSplit = to.split(':');
	if (from > to) {
		maxTime.setDate(maxTime.getDate() + 1);
	}
	maxTime.setHours(maxTimeSplit[0]);
	maxTime.setMinutes(maxTimeSplit[1]);
	if (current.getHours() < 8) {
		maxTime.setDate(maxTime.getDate() - 1);
	}
	
	return current >= minTime && current < maxTime;
};

window.isMetChar = function(name) {
	return (typeof variables().characters[name] !== 'undefined' && Object.keys(variables().characters[name]).length > 0 && typeof variables().characters[name].quests !== 'undefined');
};

window.randomInteger  = function(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
};

window.blackjackDeck = function() {
 	var suits = ["Spades", "Hearts", "Diamonds", "Clubs"];
    var values = ["2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"];
    var deck = new Array();
        for (var i = 0 ; i < values.length; i++)
        {
            for(var x = 0; x < suits.length; x++)
            {
                var weight = parseInt(values[i]);
                if (values[i] == "J" || values[i] == "Q" || values[i] == "K")
                    weight = 10;
                if (values[i] == "A")
                    weight = 11;
                var card = { value: values[i], vuit: suits[x], weight: weight };
                deck.push(card);
            }
        }
	
	return deck;
};

window.blackjackGiveCard = function(to) {
	var key = Math.floor((Math.random()*variables().blackjack.deck.length));
	
	to.push(variables().blackjack.deck[key]);
	variables().blackjack.deck.splice(key, 1);
};

window.blackjackCountCards  = function (who) {
	var count = 0;
	for (var bj_i = 0; bj_i < who.length; bj_i++) {
		count += parseInt(who[bj_i].weight);
	}
	
	return count;
};


setup.fightIsKilled = function (attacks) {
	for (var attacks_i = 0; attacks_i < attacks.length; attacks_i++) {
		if (attacks[attacks_i] !== 'hit') {
			return true;
		}
	}
	return false;
};

setup.perkHas = function (perk) {
	return typeof variables().player.perks !== 'undefined' && typeof variables().player.perks[perk] !== 'undefined';
};

setup.perkList = {
	drunk: {
		title: "You're drunk",
		desc: "You're drunk. Your strength is decreased and it's harder to get your dick hard",
		days: 0
	},
	beaten: {
		title: "Your body hurts",
		desc: "You got your ass beaten. Wake up with less energy",
		days: 3
	},
	bleeding: {
		title: "You're bleeding",
		desc: "You're bleeding. Use bandage or you will die",
		days: 2
	},
	fertility: {
		title: "Your sperm is overpowered",
		desc: "100% change to impregnate",
		days: 0
	}
};

setup.traits = {
	analslut: {
		title: 'Anal slut',
		description: 'Gets orgasm only from anal sex',
		gender: [0]
	},
	gardener: {
		title: 'Gardener',
		description: 'Gives additional bonus while assigned to garden'
	},
	cumslut: {
		title: 'Cumslut',
		description: 'Loves cum in mouth',
		gender: [0]
	},
	masochist: {
		title: 'Masochist',
		description: 'Likes to be punished',
	},
	deepthroat: {
		title: 'Deepthroat',
		description: 'Likes to get deepthroated'
	},
	woodcraft: {
		title: 'Woodcraft',
		description: 'Can gather more wood'
	},
	scavanger: {
		title: 'Scavanger',
		description: 'More likely to find stuff, and less likely to get into trouble'
	},
	breeder: {
    	title: 'Breeder',
    	description: '100% chance to get pregnant and pregnancy goes x2'
	},
	shopkeeper: {
		title: 'Shopkeeper',
		description: 'Can work in shop and manage your goods'
	},
	sadistic: {
		title: 'Sadistic',
		description: 'Display recurrent cruel behavior and aggression. Can be assigned as mistress if woman'
	},
	squirter: {
		title: 'Squirter',
		description: 'Ejaculates when gets orgasm',
		gender: [0]
	}
};

setup.gifts = {
	necklace_cheap: {
		rel: 5
	},
	flower: {
		rel: 3
	}
};

setup.inventoryManageable = {
	food: {
		price: 1,
		range: [1, 5],
		chance: 90
	},
	hay: {
		price: 1,
		range: [1, 5],
		chance: 80
	},
	wood: {
		price: 1,
		range: [1, 1],
		chance: 20
	},
	champagne: {
		price: 10,
		range: [1, 1],
		chance: 10
	},
	antibiotics: {
		price: 5,
		range: [1, 2],
		chance: 10
	},
	rope: {
		price: 1,
		range: [1,1],
		chance: 5
	},
	solar_panel: {
		price: 20,
		range: [1, 2],
		chance: 3
	},
	bandage: {
		price: 5,
		range: [1, 2],
		chance: 5
	},
	knife: {
		price: 30, 
		range: [1, 1],
		chance: 2
	},
	glass: {
		price: 2,
		range: [1, 2],
		chance: 3
	},
	plastic: {
		price: 4,
		range: [2, 4],
		chance: 5
	},
	milk: {
		price: 1,
		range: [1, 10],
		chance: 90
	}
};

setup.getPersonsForLocation = function (persons, location) {
	var tmpPersons = [];
	for (var i = 0 ; i < persons.length; i++) {
		if (persons[i].assignedTo === location) {
			tmpPersons.push(i);
		}	
	}
	return tmpPersons;
  };

setup.getBirthDate = function(yearsAgo) {
  var now = variables().gameDate;
  var earliestDate = new Date(now.getFullYear() - yearsAgo, 0, 1);
  var latestDate = new Date(now.getFullYear() - yearsAgo + 1, 0, 0);
  var randomTime = earliestDate.getTime() + Math.random() * (latestDate.getTime() - earliestDate.getTime());
  return new Date(randomTime);
};

setup.getAge = function(person, approx) {
  var startDate = person.birthDate;
  var startYear = startDate.getFullYear();
  var endYear = variables().gameDate.getFullYear();
  var startMonth = startDate.getMonth();
  var endMonth = variables().gameDate.getMonth();
  var startDay = startDate.getDate();
  var endDay = variables().gameDate.getDate();

  var yearsDiff = endYear - startYear;

  if (endMonth < startMonth || (endMonth === startMonth && endDay < startDay)) {
    yearsDiff--;
  }
  
  if (approx) {
  	var approxAdd = window.randomInteger(-6,6);
	person.age += approxAdd;
	if (person.age < 17) {
		person.age = 17;
	}
	yearsDiff = yearsDiff + ' (approx)';
  }
  
  return yearsDiff;
};


setup.assignedToCount = function(location) {
	var count = 0;
	for (var i = 0 ; i < variables().slaves.length; i++) {
		if (variables().slaves[i].assignedTo === location) {
			count++;
		}
	}
	for (var i = 0 ; i < variables().guests.length; i++) {
		if (variables().guests[i].assignedTo === location) {
			count++;
		}
	}
	
	return count;
};

setup.percentageChance = function(percentage) {
  var random = Math.random();
  var threshold = percentage / 100;
  return random < threshold;
};


setup.calculateDaysBetween = function (start, end) {
  var timezoneOffset = start.getTimezoneOffset() - end.getTimezoneOffset();
  var diff = end - start;
  var days = Math.floor(diff / (1000 * 60 * 60 * 24));
  var adjustedDays = days + (timezoneOffset / 60 / 24);
  return Math.round(adjustedDays,2);
};

setup.getRandomPersons = function(persons, limit = 2) {
	var randomIds = setup.getRandomPersonIds(persons, limit);
	var randomPersons = [];
	for (var i = 0; i < randomIds.length; i++) {
		randomPersons.push(persons[i]);
	}

  return randomPersons;
};

setup.getRandomPersonIds = function(persons, limit = 2) {
	var randomIds = [];
	var randomPersonList = clone(persons);
	while (randomIds.length < limit && randomPersonList) {
		var randomIndex = Math.floor(Math.random() * randomPersonList.length);
		if (!randomIds.includes(randomIndex)) {
		  	randomIds.push(randomIndex);
			delete randomPersonList[randomIndex];
		}
	}
  
  return randomIds;
};

setup.generateUniqueKey = function(npc) {
	var timestamp = Date.now();
 	var uniqueKey = npc.name + npc.beauty + timestamp.toString();
  	return uniqueKey;
};

setup.getNpcAgeDescription = function(npc) {
	var age = setup.getAge(npc);
	if(!npc.gender) {
		if (age < 3) {
			return 'baby';
		} else if (age < 18) {
			return 'kid';
		} else if(age < 20) {
			return 'teenage girl';
		} else if(age < 25) {
			return 'girl';
		} else if(age < 50) {
			return 'woman';
		}
		return 'mature woman';
	}
	if (age < 3) {
		return 'baby';
	} else if (age < 18) {
		return 'kid';
	} else if(age < 20) {
		return 'teenage boy';
	} else if(age < 25) {
		return 'man';
	} else if(age < 50) {
		return 'man';
	}
	
	return 'elderly man';
};

setup.objectSort = function(unordered) {
	return Object.entries(unordered)
  .sort(([keyA], [keyB]) => keyA > keyB)
  .reduce((obj, [key,value]) => Object.assign(obj, {[key]: value}), {});
};

setup.objectSortReverse = function(unordered) {
	return Object.entries(unordered)
  .sort(([keyA], [keyB]) => keyA > keyB).reverse()
  .reduce((obj, [key,value]) => Object.assign(obj, {[key]: value}), {});
};

setup.pronounceWho = function(npc) {
	if (npc.gender) {
		return 'him';
	}
	
	return 'her';
};

setup.pronounceWhos = function(npc) {
	if (npc.gender) {
		return 'his';
	}
	
	return 'her';
};

setup.pronounceWhat = function (npc) {
	if (npc.gender) {
		return 'he';
	}
	
	return 'she';
};

setup.getNpcById = function(id) {
	var npcList = variables().slaves.concat(variables().guests.concat(variables().nursery ?? []));
	
	for (var i = 0; i < npcList.length; i++) {
		if (npcList[i].id === id) {
			return npcList[i];
		}
	}
	
	return null;
};

window.ucfirst = function (text) {
	return text.slice(0,1).toUpperCase() + text.slice(1);
};

setup.getAvailablePersons18yo = function (persons) {
	var output = {};
	for (var i = 0; i < persons.length; i++) {		
		if (setup.getAge(persons[i]) < 18) {
			continue;
		}
		if (typeof output[persons[i].gender] === 'undefined') {
			output[persons[i].gender] = [];
		}
		output[persons[i].gender].push(i);
	}
	
	return output;
};

setup.shopGetDefaultInput = function (item, type)
{
	if (
		typeof variables().player.manageGoods === 'undefined' ||
		typeof variables().player.manageGoods[item] === 'undefined' || 
		typeof variables().player.manageGoods[item][type] === 'undefined'
	) {
		return 0;
	}
	
	return variables().player.manageGoods[item][type] ?? 0
};

setup.blinkScreen = function()
{
	$("#blink-screen").addClass('show').fadeOut(1400, function() {
    	$(this).removeClass("show");
	});
};

setup.displayName = function (npc) {
	return '<span class="gender-' + (!npc.gender ? 'girl' : 'guy') + '"><span class="glyph" data-balloon-length="medium" aria-label="Age: ' + setup.getAge(npc) + ', Beauty: ' + npc.beauty + ', Relationship: '+ npc.relationship+'" data-balloon-pos="up-left">' + npc.name + '</span></span>';
};

setup.getNpcByKey = function (key) {
	var splitKey = key.split(':');
	if (splitKey[0] === 'guest') {
		return variables().guests[splitKey[1]];
	} else if (splitKey[0] === 'slave') {
		return variables().slaves[splitKey[1]];
	}
	
	return '???';
};

setup.getRandomTraits = function (count = 1) {
	var shuffledTraits = Object.keys(setup.traits).sort((a, b) => 0.5 - Math.random());
	
	return shuffledTraits.slice(0, count);
};

setup.sortObjectKeysDescending = function(obj) {
  const sortedKeys = Object.keys(obj).map(Number).sort((a, b) => b - a);

  const sortedObject = {};
  for (const key of sortedKeys) {
    sortedObject[key] = obj[key];
  }

  return sortedObject;
};

setup.getRandomPersonIdsGirls = function(persons, limit = 2) {
	var randomIds = [];
	var randomPersonList = clone(persons);
	while (randomIds.length < limit && randomPersonList.length) {
		var randomIndex = Math.floor(Math.random() * randomPersonList.length);
		if (!randomIds.includes(randomIndex)) {			
			if ((randomPersonList[randomIndex] ?? false) && !randomPersonList[randomIndex].gender && setup.getAge(randomPersonList[randomIndex])) {
		  		randomIds.push(randomIndex);
			}
			randomPersonList.splice(randomIndex,1);
		}
	}
  
  return randomIds;
};

setup.getHornyPersons = function (persons) {
	var hornyPersons = {};
	for (var i = 0; i < persons.length; i++) {
		if (setup.getAge(persons[i]) >= 18 && persons[i].horny >= 80) {
			if (typeof hornyPersons[persons[i].gender] === 'undefined') {
				hornyPersons[persons[i].gender] = [];
			}
			hornyPersons[persons[i].gender].push(i);
		}
	}
	
	return hornyPersons;
};

setup.decrypt = function(encryptedText) {
  var decrypted = '';
  for (var i = 0; i < encryptedText.length; i++) {
    var char = encryptedText.charAt(i);
    if (char.match(/[a-zA-Z0-9]/)) {
      const charCode = char.charCodeAt(0);
      var offset = 0;

      if (char.match(/[a-z]/)) {
        offset = 97;
      } else if (char.match(/[A-Z]/)) {
        offset = 65;
      } else if (char.match(/[0-9]/)) {
        offset = 48;
      }

      var decryptedChar = String.fromCharCode(((charCode - offset - 1 + 36) % 36) + offset);
      decrypted += decryptedChar;
    } else {
      decrypted += char;
    }
  }
  return decrypted;
};
					 
					 
Save.onLoad.add(function (save) {
	if (typeof save.state.history[save.state.index].variables.characters.dom === 'undefined') {
        save.state.history[save.state.index].variables.characters.dom = {
			quests: {},
			relationship: 0
		};
    }
	if ((save.state.history[save.state.index].variables.game.location.settlement ?? false) && (save.state.history[save.state.index].variables.characters.octavia ?? false) && typeof save.state.history[save.state.index].variables.characters.octavia.quests === 'undefined') {
        save.state.history[save.state.index].variables.characters.octavia.quests = {};
    }
 	if (typeof save.state.history[save.state.index].variables.workersLimitGarden === 'undefined') {
        save.state.history[save.state.index].variables.workersLimitGarden = 8;
    }
	if (save.state.history[save.state.index].variables.workersLimitGarden !== 8) {
		save.state.history[save.state.index].variables.workersLimitGarden = 8;
	}
    if (typeof save.state.history[save.state.index].variables.characters.blair === 'undefined') {
        save.state.history[save.state.index].variables.characters.blair = {};
    }

	if (typeof save.state.history[save.state.index].variables.game.cabinName !== 'undefined') {
		save.state.history[save.state.index].variables.game.showFlag = true;
	}
	
	if (typeof save.state.history[save.state.index].variables.storage === 'undefined') {
		save.state.history[save.state.index].variables.game.showFlag = true;
	}
	
	if (typeof save.state.history[save.state.index].variables.startDate === 'undefined') {
		save.state.history[save.state.index].variables.startDate = new Date(save.state.history[save.state.index].variables.gameDate);
		var dateOffset = (24*60*60*1000) * save.state.history[save.state.index].variables.game.day;
		save.state.history[save.state.index].variables.startDate.setTime(save.state.history[save.state.index].variables.startDate.getTime() - dateOffset);
	}
	


	if ((save.state.history[save.state.index].variables.tmpGirl ?? null) && !Array.isArray(save.state.history[save.state.index].variables.tmpGirl.traits ?? [])) {
		save.state.history[save.state.index].variables.tmpGirl.traits = [];
	}

	
    save.state.history[save.state.index].variables.characters.rodger = (save.state.history[save.state.index].variables.characters.rodger ?? {});
    save.state.history[save.state.index].variables.characters.eve = (save.state.history[save.state.index].variables.characters.eve ?? {});
	if (typeof save.state.history[save.state.index].variables.characters.eve.name !== 'undefined' && typeof save.state.history[save.state.index].variables.characters.eve.quests === 'undefined') {
		save.state.history[save.state.index].variables.characters.eve.quests = {};
	}

    if (typeof save.state.history[save.state.index].variables.guests === 'undefined') {
        save.state.history[save.state.index].variables.guests = [];
        save.state.history[save.state.index].variables.guesthouseLimit = 3;
    }
    if (typeof save.state.history[save.state.index].variables.basementLimit === 'undefined') {
        save.state.history[save.state.index].variables.basementLimit = Math.max(3, save.state.history[save.state.index].variables.slaves.length);
    }
    if (typeof save.state.history[save.state.index].variables.player.reputation_bounty_hunter === 'undefined') {
        save.state.history[save.state.index].variables.player.reputation_bounty_hunter = 0;
    }
	
	if (!(save.state.history[save.state.index].variables.player.companions ?? false)) {
		save.state.history[save.state.index].variables.player.companions = {};
	}
	if (!(save.state.history[save.state.index].variables.player.stats ?? false)) {
		save.state.history[save.state.index].variables.player.stats = {};
	}

    for(var varsSlaveI = 0; varsSlaveI < save.state.history[save.state.index].variables.slaves.length; varsSlaveI++) {
        if (typeof save.state.history[save.state.index].variables.slaves[varsSlaveI].orgasms === 'undefined') {
            save.state.history[save.state.index].variables.slaves[varsSlaveI].orgasms = 0;
            save.state.history[save.state.index].variables.slaves[varsSlaveI].guys = 1;
        }
		
		if (typeof save.state.history[save.state.index].variables.slaves[varsSlaveI].id === 'undefined') {
			save.state.history[save.state.index].variables.slaves[varsSlaveI].id = setup.generateUniqueKey(save.state.history[save.state.index].variables.slaves[varsSlaveI])
		}
        if (typeof save.state.history[save.state.index].variables.slaves[varsSlaveI].pregnancy !== 'undefined') {
            save.state.history[save.state.index].variables.characters.vincent.quests.pregnancy = true;
        }
		
		if (typeof save.state.history[save.state.index].variables.slaves[varsSlaveI].endurance === 'undefined') {
            save.state.history[save.state.index].variables.slaves[varsSlaveI].endurance = 0;
        }

        if (typeof save.state.history[save.state.index].variables.slaves[varsSlaveI].birthDate === 'undefined') {
            save.state.history[save.state.index].variables.slaves[varsSlaveI].birthDate = setup.getBirthDate(save.state.history[save.state.index].variables.slaves[varsSlaveI].age);
            delete save.state.history[save.state.index].variables.slaves[varsSlaveI].age;
        }
		
		if (typeof save.state.history[save.state.index].variables.slaves[varsSlaveI].race === 'undefined') {
			save.state.history[save.state.index].variables.slaves[varsSlaveI].race = 'white';
			save.state.history[save.state.index].variables.slaves[varsSlaveI].breasts = 'medium';
		}
    }

    if (typeof save.state.history[save.state.index].variables.characters.blair.quests !== 'undefined' && typeof save.state.history[save.state.index].variables.characters.blair.quests.missing_friend_talked_day === 'undefined') {
        save.state.history[save.state.index].variables.characters.blair.quests.missing_friend_talked_day = save.state.history[save.state.index].variables.game.day;
    }

    if (typeof save.state.history[save.state.index].variables.locationEvents === 'undefined') {
        save.state.history[save.state.index].variables.locationEvents = {};
    }
	
	for(var saveGuestI = 0; saveGuestI < save.state.history[save.state.index].variables.guests.length; saveGuestI++) {
        if (typeof save.state.history[save.state.index].variables.guests[saveGuestI].birthDate === 'undefined') {
            save.state.history[save.state.index].variables.guests[saveGuestI].birthDate = setup.getBirthDate(save.state.history[save.state.index].variables.guests[saveGuestI].age);
            delete save.state.history[save.state.index].variables.guests[saveGuestI].age;
        }
		
		if (typeof save.state.history[save.state.index].variables.guests[saveGuestI].id === 'undefined') {
			save.state.history[save.state.index].variables.guests[saveGuestI].id = setup.generateUniqueKey(save.state.history[save.state.index].variables.guests[saveGuestI]);
		}
		
		if (typeof save.state.history[save.state.index].variables.guests[saveGuestI].race === 'undefined') {
			save.state.history[save.state.index].variables.guests[saveGuestI].race = 'white';
			save.state.history[save.state.index].variables.guests[saveGuestI].breasts = 'medium';
		}
		
		if (typeof save.state.history[save.state.index].variables.guests[saveGuestI].endurance === 'undefined') {
			save.state.history[save.state.index].variables.guests[saveGuestI].endurace = 0;
		}
		
    }
	
	for(var saveCharI in save.state.history[save.state.index].variables.characters) {
        if (typeof save.state.history[save.state.index].variables.characters[saveCharI].age !== 'undefined' && typeof save.state.history[save.state.index].variables.characters[saveCharI].birthDate === 'undefined') {
            save.state.history[save.state.index].variables.characters[saveCharI].birthDate = setup.getBirthDate(save.state.history[save.state.index].variables.characters[saveCharI].age);
            delete save.state.history[save.state.index].variables.characters[saveCharI].age;
        }
		if (typeof save.state.history[save.state.index].variables.characters[saveCharI].race === 'undefined') {
			save.state.history[save.state.index].variables.characters[saveCharI].race = 'white';
			save.state.history[save.state.index].variables.characters[saveCharI].breasts = 'medium';
		}
		
		if (!Array.isArray(save.state.history[save.state.index].variables.characters[saveCharI].traits ?? [])) {
			save.state.history[save.state.index].variables.characters[saveCharI].traits = [];
		}
    }
	
	for(var saveNurseryI in save.state.history[save.state.index].variables.nursery ?? []) {
        if (typeof save.state.history[save.state.index].variables.nursery[saveNurseryI].id === 'undefined') {
			save.state.history[save.state.index].variables.nursery[saveNurseryI].id = setup.generateUniqueKey(save.state.history[save.state.index].variables.nursery[saveNurseryI]);
		}
    }
	
	for(var saveWantedI = 0; saveWantedI < (save.state.history[save.state.index].variables.wanted ?? []).length; saveWantedI++) {
        if (typeof save.state.history[save.state.index].variables.wanted[saveWantedI].birthDate === 'undefined') {
            save.state.history[save.state.index].variables.wanted[saveWantedI].birthDate = setup.getBirthDate(save.state.history[save.state.index].variables.wanted[saveWantedI].age);
            delete save.state.history[save.state.index].variables.wanted[saveWantedI].age;
        }
		
		if (typeof save.state.history[save.state.index].variables.wanted[saveWantedI].race === 'undefined') {
			save.state.history[save.state.index].variables.wanted[saveWantedI].race = 'white';
			save.state.history[save.state.index].variables.wanted[saveWantedI].breasts = 'medium';
		}
    }
});
			 
			 
//Settings
Setting.addToggle("autoplay", {
	label : "Autoplay video",
	default: true
});

Setting.addList("sidebarBackground", {
    label   : "Sidebar background color",
    list    : ["yellow", "gray"],
    default : "yellow"
});


// volume slider, by chapel; for sugarcube 2 (mods by SjoerdHekking)
!function(){function setVolume(val){"number"!=typeof val&&(val=Number(val)),(Number.isNaN(val)||val<0)&&(val=.5),val>1&&(val=1),settings.volume=100*val,Setting.save(),$("input[name='volume']").val()!=settings.volume&&$("input[name='volume']").val(settings.volume);try{if(SimpleAudio)return"function"==typeof SimpleAudio.volume?SimpleAudio.volume(val):SimpleAudio.volume=val,val;throw new Error("Cannot access audio API.")}catch(err){return console.error(err.message,err),$.wiki("<<masteraudio volume "+val+">>"),val}}function updateVolume(){setVolume(settings.volume/100)}Setting.addRange("volume",{label:"Volume: ",min:0,max:100,step:1,default:50,onInit:updateVolume,onChange:updateVolume}),$(document).on("input","input[name='volume']",(function(){var change;setVolume(parseInt($("input[name='volume']").val())/100)})),Macro.add("volume",{handler:function(){var wrapper=$(document.createElement("span")),slider=$(document.createElement("input")),className="macro-"+this.name;slider.attr({id:"volume-control",type:"range",name:"volume",min:0,max:100,step:1,value:settings.volume}),wrapper.append(slider).addClass(className).appendTo(this.output)}})}();
// end volume slider

// dialog-api-macro-set.min.js, for SugarCube 2, by Chapel
// v1.3.0, 2022-07-21, 3bdbdfbe5ae47a46e4f4e52766d78701939ae9a6
;Macro.add("dialog",{tags:["onopen","onclose"],handler:function(){var t="",s=null,n=null,o=this.args.length>0?this.args[0]:"",e=this.args.length>1?this.args.slice(1).flatten():[];this.payload.forEach((function(o,e){0===e?t=o.contents:"onopen"===o.name?s=s?s+o.contents:o.contents:n=n?n+o.contents:o.contents})),e.push("macro-"+this.name),Dialog.setup(o,e.join(" ")),Dialog.wiki(t),s&&"string"==typeof s&&s.trim()&&$(document).one(":dialogopened",(function(){$.wiki(s)})),n&&"string"==typeof n&&n.trim()&&$(document).one(":dialogclosed",(function(){$.wiki(n)})),Dialog.open()}}),Macro.add("popup",{handler:function(){if(this.args.length<1)return this.error("need at least one argument; the passage to display");if(!Story.has(this.args[0]))return this.error("the passage "+this.args[0]+"does not exist");var t=this.args[0],s=this.args.length>1?this.args[1]:"",n=this.args.length>2?this.args.slice(2).flatten():[];n.push("macro-"+this.name),Dialog.setup(s,n.join(" ")),Dialog.wiki(Story.get(t).processText()),Dialog.open()}}),Macro.add("dialogclose",{skipArgs:!0,handler:function(){Dialog.close()}});
// end dialog-api-macro-set.min.js

/* Say > */
;!function(){"use strict";var a=new Map;function t(t,e,r){if(void 0===r&&e&&(r=e,e=null),State.length)throw new Error("addCharacter() -> must be called before story starts");t&&r?(a.has(t)&&console.error('addCharacter() -> overwriting character "'+t+'"'),a.set(t,{displayName:e,image:r})):console.error("addCharacter() -> invalid arguments")}function e(t,e,r,s){var n=$(document.createElement("div")).addClass(Util.slugify(e)+" say"),i=a.has(e)?a.get(e).image:null,o=$(document.createElement("img")).attr("src",s||i||"");o.attr("src")&&o.attr("src").trim()&&n.append(o);var c=e.toUpperFirst();return a.has(e)&&a.get(e).displayName&&(c=a.get(e).displayName),n.append($(document.createElement("p")).wiki(c)).append($(document.createElement("p")).wiki(r)),t&&(t instanceof $||(t=$(t)),n.appendTo(t)),n}setup.say=e,setup.addCharacter=t,Macro.add("character",{handler:function(){t(this.args[0],this.args[1],this.args[2])}}),$(document).one(":passagestart",(function(){var t=Array.from(a.keys());t.push("say"),Macro.add(t,{tags:null,handler:function(){"say"!==this.name?e(this.output,this.name,this.payload[0].contents):e(this.output,this.args[0],this.payload[0].contents,this.args[1])}})}))}();
/* < Say */

// Simple Inventory, for SugarCube 2, by Chapel
// v3.0.0-beta1, 2022-07-25, 19f255d958852e55a8a3afcde5c53331f0d938e8
;"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}!function(){var t={description:"",handler:null,displayName:"",consumable:!0,unique:!1,permanent:!1},e=new Map,n=function(){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:clone(t),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(_classCallCheck(this,n),!e||"string"!=typeof e)throw new Error("invalid item ID");if("object"!==_typeof(i))throw new Error("invalid item definition");Object.assign(this,Object.assign(t,i)),this.id=e,this.tags=r instanceof Array?r:"string"==typeof r?[r]:[]}return _createClass(n,[{key:"name",get:function(){return this.displayName||this.id},set:function(t){this.displayName=t}},{key:"use",value:function(){return"string"==typeof this.handler?$.wiki(this.handler):"function"==typeof this.handler&&this.handler(this),this}},{key:"inspect",value:function(){return Dialog.setup(this.name,"simple-inventory item-description"),Dialog.wiki(this.description),Dialog.open(),this}}],[{key:"is",value:function(t){return t instanceof n}},{key:"add",value:function(t,i,r){var a=new n(t,i,r);return e.set(t,a),a}},{key:"get",value:function(t){return e.get(t)}},{key:"has",value:function(t){return e.has(t)}},{key:"list",get:function(){return e}}]),n}();setup.Item=n,window.Item=window.Item||n}(),function(){var t=setup.Item,e=!1,n="&hellip;",i={inspect:"Inspect",use:"Use",drop:"Drop",stack:"stack",take:"Take",give:"Give",stackPre:"&nbsp;&times;&nbsp;",stackPost:"&nbsp;"},r={};function a(e){return t.has(e)&&t.get(e).unique}function s(e){return t.has(e)&&t.get(e).permanent}function o(t){return t&&"string"==typeof t&&t.trim()}var u=function(){function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,u),this.data=clone(t),this.tags=e instanceof Array?e:"string"==typeof e?[e]:[]}return _createClass(u,[{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.emit(t,this,e),this}},{key:"array",get:function(){var t=this,e=[];return Object.keys(this.data).forEach((function(n){if(e.push(n),t.data[n]>1)for(var i=1;i<t.data[n];i++)e.push(n)})),e}},{key:"list",get:function(){return Object.keys(this.data)}},{key:"length",get:function(){return this.array.length}},{key:"uniqueLength",get:function(){return this.list.length}},{key:"table",get:function(){return this.data}},{key:"count",value:function(t){return t?this.data[t]||0:this.length}},{key:"has",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.data[t]>=e}},{key:"hasAll",value:function(){var t=this,e=[].slice.call(arguments).flat(1/0);return e.every((function(e){return t.has(e)}))}},{key:"hasAny",value:function(){var t=this,e=[].slice.call(arguments).flat(1/0);return e.some((function(e){return t.has(e)}))}},{key:"compare",value:function(t){var e=this,n=u.itemset(t);return Object.keys(n).every((function(t){return e.has(t,n[t])}))}},{key:"merge",value:function(t){var e=this,n=u.itemset(t);return Object.keys(n).forEach((function(t){u.change(e,t,n[t])})),n}},{key:"unmerge",value:function(t){var e=this,n={},i=u.itemset(t);return Object.keys(i).forEach((function(t){e.has(t,i[t])?n[t]=i[t]:e.has(t)&&(n[t]=e.count(t)),u.change(e,t,i[t],!0)})),n}},{key:"pickup",value:function(){var t=this.merge(u.parseArgList.apply(null,arguments));return this.emit("update",{delta:t}),this}},{key:"drop",value:function(){var t=this.unmerge(u.parseArgList.apply(null,arguments));return this.emit("update",{delta:t}),this}},{key:"empty",value:function(){var t=clone(this.data);return this.data={},this.emit("update",{delta:t}),this}},{key:"transfer",value:function(t){var e=u.parseArgList.apply(null,[].slice.call(arguments).slice(1));if(!u.is(t))throw new TypeError("target inventory is not an inventory instance");var n=this.unmerge(e);return t.merge(n),this.emit("update",{target:t,delta:n}),this}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"iterate",value:function(t){var e=this;return"function"!=typeof t||this.list.forEach((function(n){t(n,e.data[n])})),this}},{key:"use",value:function(e){if(t.has(e)){var n=t.get(e);if(n.use(),n.consumable){u.change(this,e,1,!0);var i={};i[e]=1,this.emit("update",{delta:i})}return this.emit("use",{item:n}),this}}},{key:"clone",value:function(){return new u(this.data||{},this.tags||[])}},{key:"toJSON",value:function(){return JSON.reviveWrapper("new setup.Inventory("+JSON.stringify(this.data)+", "+JSON.stringify(this.tags)+")")}}],[{key:"confirm",get:function(){return e},set:function(t){e="string"==typeof t&&"all"===t.trim().toLowerCase()?"all":"string"==typeof t&&"stack"===t.trim().toLowerCase()?"stack":!!t}},{key:"emptyMessage",get:function(){return n},set:function(t){"string"==typeof t&&(n=t)}},{key:"strings",get:function(){return Object.assign(clone(i),r)},set:function(t){"object"===_typeof(t)&&(r=Object.assign(r,clone(t)))}},{key:"change",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0!==n){if(t instanceof u&&(t=t.data),"object"!==_typeof(t)){if(t)throw new TypeError("cannot access inventory data");t={}}if(!o(e))throw new TypeError("invalid item name/id");if("number"==typeof n&&!Number.isNaN(n)&&Number.isInteger(n)||(n=1),i&&(n*=-1),n>0){if(Object.keys(t).includes(e)&&a(e))return;Object.keys(t).includes(e)||(t[e]=0),t[e]+=n}else{if(s(e))return;Object.keys(t).includes(e)&&"number"==typeof t[e]&&(t[e]+=n),t[e]<=0&&delete t[e]}return t}}},{key:"itemset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u.is(t)&&(t=t.data),"object"!==_typeof(t))return{};var e={};return Object.keys(t).forEach((function(n){"number"==typeof t[n]&&Number.isInteger(t[n])&&0!==t[n]&&(e[n]=t[n])})),e}},{key:"parseArgList",value:function(){var t=[].slice.call(arguments).flat(1/0);if(t.length%2!=0)throw new Error("item sets should be pairs of item IDs and numbers");var e={};return t.forEach((function(n,i){i%2==0&&(e[n]=t[i+1])})),e}},{key:"is",value:function(t){return t instanceof u}},{key:"emit",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$(document).trigger(Object.assign({type:":inventory-"+t+".simple-inventory",inventory:e,target:null,delta:{},item:null},n))}},{key:"create",value:function(t,e){return new u(t,e)}}]),u}();setup.Inventory=u,window.Inventory=window.Inventory||u}(),function(){var t=setup.Item,e=setup.Inventory;function n(e){return t.has(e)&&t.get(e).permanent}function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Alert",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Are you sure?";if(!t||"function"!=typeof t)throw new Error("Invalid confirmation callback!");if(e.confirm)if("all"!==e.confirm||"all"===i)if("stack"!==e.confirm||i){var s={display:"inline-block",float:"right"},o=$(document.createElement("div")),u=$(document.createElement("p")).append(a),l=$(document.createElement("div")).addClass("confirmation-buttons"),c=$(document.createElement("button")).append("Okay").addClass("confirm-yes").css(Object.assign(s,{"margin-right":"0.5rem"})),d=$(document.createElement("button")).append("Cancel").addClass("confirm-no").css(s);t&&"function"==typeof t&&c.ariaClick(t),n&&"function"==typeof n&&d.ariaClick(n),l.append(d,c),o.append(u,l),Dialog.setup(r,"simple-inventory confirmation"),Dialog.append(o),Dialog.open()}else t();else t();else t()}function r(t){var e=$(document.createElement("span")).addClass("spacer");return t&&e.wiki(""+t),e}function a(n,i,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r=r||e.strings.inspect,$(document.createElement(a?"button":"a")).addClass("inspect-link").wiki(""+r).ariaClick((function(){t.get(i).inspect()}))}function s(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i=i||e.strings.use,$(document.createElement(r?"button":"a")).addClass("use-link").wiki(""+i).ariaClick((function(){t.use(n)}))}function o(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return r=r||(s?e.strings.give:e.strings.drop),$(document.createElement(a?"button":"a")).addClass("drop-link").wiki(""+r).ariaClick((function(){i((function(){s&&e.is(s)?t.transfer(s,n,1):t.drop(n,1),Dialog.close()}),(function(){Dialog.close()}))}))}function u(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return r=r||(s?e.strings.give:e.strings.drop)+"&nbsp;"+e.strings.stack,$(document.createElement(a?"button":"a")).addClass("stack-link drop-link").wiki(""+r).ariaClick((function(){i((function(){s&&e.is(s)?t.transfer(s,n,t.count(n)):t.drop(n,t.count(n)),Dialog.close()}),(function(){Dialog.close()}))}))}function l(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return n=n||(a?e.strings.give:e.strings.drop),$(document.createElement(r?"button":"a")).addClass("all-link drop-link").wiki(n+" all").ariaClick((function(){t.isEmpty()||i((function(){a&&e.is(a)?(a.merge(t),t.empty()):t.empty(),Dialog.close()}),(function(){Dialog.close()}),!0)}))}function c(t,n,i,r){return i=i||e.strings.stackPre,r=r||e.strings.stackPost,$(document.createElement("span")).addClass("item-count").append(""+i+(t.count(n)||0)+r)}function d(i){var d,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{description:!0,use:!0,transfer:null,drop:!0,all:!0,stack:!0,dropActionText:"",classes:""},p=$(document.createElement("ul")).addClass("simple-inventory-list");if(i.length){if(d=i.list.map((function(l){var d=[];return f.description&&t.has(l)&&t.get(l).description?d.push(a(i,l,t.has(l)?t.get(l).name:l)):d.push($(document.createElement("span")).append(t.has(l)?t.get(l).name:l).addClass("item-name")),d.push(c(i,l)),f.use&&t.has(l)&&t.get(l).handler?d.push(s(i,l)):d.push(r()),(f.transfer&&e.is(f.transfer)||f.drop)&&!n(l)?(d.push(o(i,l,f.dropActionText,!1,f.transfer||null)),i.count(l)>1&&f.stack?d.push(u(i,l,f.dropActionText+"&nbsp;"+e.strings.stack,!1,f.transfer||null)):d.push(r())):d.push(r()),$(document.createElement("li")).append(d).addClass("simple-inventory-listing")})),f.all){var h=$(document.createElement("li")).addClass("all-listing simple-inventory-listing").append([r("&mdash;"),r(),r(),l(i,f.dropActionText,!1,f.transfer||null)]);d.push(h)}}else d=$(document.createElement("li")).addClass("simple-inventory-listing").append($(document.createElement("span")).wiki(e.emptyMessage));return p.append(d),p}e.prototype.interface=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this,r=$(document.createElement("div")).addClass("simple-inventory-wrapper");return r.append(d(this,e)),$(document).on(":inventory-update.simple-inventory.gui-built-in",(function(){r.length?r.empty().append(d(i,e)):$(document).off(":inventory-update.simple-inventory.gui-built-in")})),n&&n instanceof $?t=n:n&&(t=$(n)),t&&r.appendTo(t),r}}(),function(){setup.Inventory,setup.Item;var t=".simple-inventory-userland",e=":inventory-update.simple-inventory"+t,n=":inventory-use.simple-inventory"+t;function i(t){return t&&"function"==typeof t}Object.assign(setup.Inventory,{events:{update:{on:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(t)&&$(document).on(e+n,t)},one:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(t)&&$(document).one(e+n,t)},off:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";$(document).off(e+t)}},use:{on:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(t)&&$(document).on(n+e,t)},one:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(t)&&$(document).one(n+e,t)},off:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";$(document).off(n+t)}}}})}(),function(){var t=function(t){if(!Story.has(t))return{};var e,n,i,r,a=(e=Story.get(t).text,i=function(t){return t.replace(/\r+/g,"\n").replace(/\n+/,"\n").replace(/ +/g," ").trim().split(/\n/g)}(e),r={},i.forEach((function(t){var e=function(t,e){return e=e||":",t.trim().split(e)}(t,n);r[e[0].trim()]=e[1].trim()})),r);return a}("inventory.strings");t.empty&&"string"==typeof t.empty&&t.empty.trim()&&(setup.Inventory.emptyMessage=t.empty,delete t.empty),setup.Inventory.strings=t||{}}(),function(){var t=setup.Item,e=setup.Inventory;function n(t){return t&&"string"==typeof t&&t.length>2&&("$"===t[0]||"_"===t[0])}function i(t){if(n(t)&&(t=State.getVar(t)),e.is(t))return t}Macro.add(["item","consumable"],{tags:["description","tags","unique","permanent"],handler:function(){var e,n,i,r,a=null,s=!1,o=!1,u=!1;if(State.length>0)return this.error("items must be defined in `StoryInit` or story JavaScript!");if(!this.args[0]||"string"!=typeof this.args[0]||!this.args[0].trim())return this.error("invalid item ID");if(e=this.args[0].trim(),"consumable"===this.name&&(a=this.payload[0].contents||null,s=!0),this.args[1]&&(n=this.args[1]),this.payload.length>1){var l=this.payload.find((function(t){return"description"===t.name})),c=this.payload.find((function(t){return"tags"===t.name})),d=this.payload.find((function(t){return"unique"===t.name})),f=this.payload.find((function(t){return"permanent"===t.name}));l&&(i=l.contents.trim()),c&&(r=c.args.flat(1/0)),d&&(o=!0),f&&(u=!0)}t.add(e,{displayName:n||"",description:i||"",handler:a,consumable:s,unique:o,permanent:u},r)}}),Macro.add("newinv",{handler:function(){var t=this.args.raw.trim().split(" ").first().replace(/["']/g,"").trim();if(!n(t))return this.error("argument must be a story or temporary variable!");State.setVar(t,new e({},this.args.flat(1/0).slice(1)))}}),Macro.add(["pickup","drop"],{handler:function(){var t=i(this.args[0]);return t?this.args.length<3?this.error("no items to pick up were provided"):void t[this.name](this.args.slice(1)):this.error("first argument must be a valid inventory!")}}),Macro.add("dropall",{handler:function(){var t=i(this.args[0]);if(!t)return this.error("first argument must be a valid inventory!");t.empty()}}),Macro.add(["transfer","merge","unmerge"],{handler:function(){var t=i(this.args[0]);if(!t)return this.error("first argument must be a valid inventory!");var e=i(this.args[1]);if(!e)return this.error("second argument must be a valid inventory!");if("transfer"===this.name){if(this.args.length<4)return this.error("no items to transfer were provided");t.transfer(e,this.args.slice(2))}else t[this.name](e)}}),Macro.add(["inv","take","give"],{handler:function(){var t=null,n=i(this.args[0]);if(!n)return this.error("first argument must be a valid inventory!");this.args[1]&&i(this.args[1])&&(t=i(this.args[1]));var r={description:this.args.includesAny("inspect","description"),use:this.args.includes("use"),transfer:t,drop:this.args.includes("drop"),all:this.args.includes("all"),stack:this.args.includes("stack"),dropActionText:"inv"===this.name?"Drop":e.strings[this.name.trim().toLowerCase()],classes:"macro-".concat(this.name)};n.interface(r,$(this.output))}})}(),function(){var t=setup.Item,e=setup.Inventory;function n(t,e,n){if("object"!==_typeof(e))throw new TypeError("the extension should be a plain generic object holding the properties and methods you want to add");Object.keys(e).forEach((function(i){if(t[i]&&!n)throw new Error('Cannot override existing property "'+i+'"!');t[i]=e[i]}))}Object.assign(e,{extend:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,t,i)},extendPrototype:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e.prototype,t,i)}}),Object.assign(t,{extend:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(t,e,i)},extendPrototype:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(t.prototype,e,i)}})}();
// End Simple Inventory

// cycles.min.js, for SugarCube 2, by Chapel
// v2.1.1, 2021-04-20, 53d1a20e9321b3782a303cf7dbe00f5c51e947db
;!function(){"use strict";var e="%%cycles",t=!0,r="cycles.pause",i="cycles.pause.menu",s="cycles.postdisplay";function n(){return State.variables[e]}function a(e,t){if(!(this instanceof a))return new a(e,t);if(!e||"object"!=typeof e)throw new Error("Cycle() -> invalid definition object");if(!e.name||"string"!=typeof e.name||!e.name.trim())throw new Error("Cycle() -> invalid name");if(this.name=e.name,!e.phases||!Array.isArray(e.phases)||e.phases.length<2)throw new Error("Cycle() -> phases should be an array of at least two strings");if(!e.phases.every((function(e){return e&&"string"==typeof e&&e.trim()})))throw new Error("Cycle() -> each phase should be a valid, non-empty string");this.phases=clone(e.phases),e.period=Number(e.period),(Number.isNaN(e.period)||e.period<1)&&(e.period=1),Number.isInteger(e.period)||(e.period=Math.trunc(e.period)),this.period=e.period,e.increment=Number(e.increment),(Number.isNaN(e.increment)||e.increment<1)&&(e.increment=1),Number.isInteger(e.increment)||(e.increment=Math.trunc(e.increment)),this.increment=e.increment,this.active=void 0===e.active||!!e.active,t=Number(t),(Number.isNaN(t)||t<0)&&(t=0),Number.isInteger(t)||(t=Math.trunc(t)),this.stack=t}State.variables[e]={},Object.assign(a,{is:function(e){return e instanceof a},add:function(e,t){if(!t||"object"!=typeof t)throw new Error("Cycle.add() -> invalid definition object");if(e&&"string"==typeof e&&e.trim())t.name=e;else if(!t.name||"string"!=typeof t.name||!t.name.trim())throw new Error("Cycle.add() -> invalid name");var r=new a(t,0);return n()[t.name]=r,r},has:function(e){var t=n();return t.hasOwnProperty(e)&&a.is(t[e])},get:function(e){return a.has(e)?n()[e]:null},del:function(e){return!!a.has(e)&&(delete n()[e],!0)},check:function(e){if(a.has(e)){var t=[].slice.call(arguments).flatten().slice(1);return a.get(e).check(t)}},clear:function(e){n()},_emit:function(e,t){$(document).trigger({type:":cycle-"+t,cycle:e})},_retrieveCycles:n}),Object.assign(a.prototype,{constructor:a,revive:function(){var e={};return Object.keys(this).forEach((function(t){e[t]=clone(this[t])}),this),e},clone:function(){return new a(this.revive(),this.stack)},toJSON:function(){return JSON.reviveWrapper("new setup.Cycle("+JSON.stringify(this.revive())+", "+this.stack+")")},current:function(){return this.phases[Math.trunc(this.stack/this.period)%this.phases.length]},length:function(){return this.period*this.phases.length},turns:function(){return this.period/this.increment},turnsTotal:function(){return this.length()/this.increment},update:function(e){e=Number(e),Number.isNaN(e)&&(e=this.increment);var t=this.current();return this.stack+=e,this.stack<0&&(this.stack=0),Number.isInteger(this.stack)||(this.stack=Math.trunc(this.stack)),t!==this.current()&&a._emit(this,"change"),this},reset:function(){return this.stack=0,a._emit(this,"reset"),this.update(0)},suspend:function(){var e=this.active;return this.active=!1,e!==this.active&&a._emit(this,"suspend"),this},resume:function(){var e=this.active;return this.active=!0,e!==this.active&&a._emit(this,"resume"),this},toggle:function(){return this.active?this.suspend():this.resume(),this},isSuspended:function(){return!this.active},editIncrement:function(e){return e=Number(e),(!Number.isNaN(e)||e>0)&&(Number.isInteger(e)||(e=Math.trunc(e)),this.increment=e),this.increment},check:function(){var e=[].slice.call(arguments).flatten();return e.includes(this.current())}}),postdisplay[s]=function(){var e;tags().includes(r)||e?e=!1:tags().includes(i)?e=!0:Object.keys(n()).forEach((function(e){var t=a.get(e);t.active&&t.update()}))},setup.Cycle=a,t&&(window.Cycle=window.Cycle||a),Macro.add("newcycle",{tags:["phase"],handler:function(){if(this.args.length<1)return this.error("A cycle must at least be given a name.");if(this.payload.length<2)return this.error("A cycle must be given at least two phases.");var e=this.payload.slice(1).map((function(e){return function(e){if(e.args.length<1)return null;var t=e.args.flatten();return t.every((function(e){return"string"==typeof e}))?t:null}(e)})).flatten();if(e.includes(null))return this.error("Each `<<phase>>` tag must be given a valid name.");try{a.add(this.args[0],{phases:e,period:this.args[1],increment:this.args[2],active:this.args[3]&&"string"==typeof this.args[3]&&"suspend"!==this.args[3].trim()})}catch(e){var t=e.message&&e.message.split("->")[1];return t=!!t&&t.trim(),this.error(t||e.message)}}}),Macro.add("editcycle",{handler:function(){if(this.args.length<1||"string"!=typeof this.args[0]||!this.args[0].trim())return this.error("You must name the cycle you wish to act on.");if(this.args.length<2)return this.error("You must provide an action to perform.");var e=a.get(this.args[0]);if(null===e)return this.error('Cannot find a cycle named "'+this.args[0]+'".');if(this.args.includes("suspend")?e.suspend():this.args.includes("toggle")?e.toggle():this.args.includes("resume")&&e.resume(),this.args.includes("increment")){var t=this.args[this.args.indexOf("increment")+1];"number"==typeof t&&e.editIncrement(t)}if(this.args.includesAny("reset","clear")&&e.reset(),this.args.includes("change")){var r=this.args[this.args.indexOf("change")+1];r=Number(r),!Number.isNaN(r)&&Number.isInteger(r)&&e.update(r)}}}),Macro.add("showcycle",{handler:function(){if(this.args.length<1||"string"!=typeof this.args[0]||!this.args[0].trim())return this.error("You must name the cycle you wish to act on.");var e=a.get(this.args[0]);if(null===e)return this.error('Cannot find a cycle named "'+this.args[0]+'".');var t=e.current();this.args.includes("uppercase")?t=t.toUpperCase():this.args.includes("lowercase")?t=t.toLowerCase():this.args.includes("upperfirst")&&(t=t.toUpperFirst()),$(document.createElement("span")).addClass("macro-"+this.name).append(t).appendTo(this.output)}})}();
// end cycles.min.js

// meters.min.js, for SugarCube 2, by Chapel
// v1.0.1, 2021-04-20, 53d1a20e9321b3782a303cf7dbe00f5c51e947db
;!function(){"use strict";var t=!0,e=!1,s=!1,i={full:"#2ECC40",empty:"#FF4136",back:"#DDDDDD",height:"12px",width:"180px",animate:400,easing:"swing",text:"#111111",label:"",align:"center"},n=["center","left","right"],r=["swing","linear"];function a(t,e){return t&&"string"==typeof t&&(t=t.toLowerCase().trim())?t:e||""}function o(t){return t<.5?2*t*t:(4-2*t)*t-1}function l(t,e){if(!(this instanceof l))return new l(t,e);var s=clone(i);this.settings=Object.assign(s,t),this.settings.align=a(this.settings.align),this.settings.easing=a(this.settings.easing),n.includes(this.settings.align)||(this.settings.align="center"),r.includes(this.settings.easing)||(this.settings.easing="swing"),e=Number(e),Number.isNaN(e)&&(e=1),e=Math.clamp(e,0,1),this.value=e;var h=$(document.createElement("div")).addClass("chapel-meter").attr({"data-val":e,"data-label":this.settings.label}).css({position:"relative","background-color":this.settings.back,height:this.settings.height,width:this.settings.width,overflow:"hidden"}),g=$(document.createElement("div")).addClass("meter-label").css({top:0,right:0,"font-size":this.settings.height,"font-weight":"bold","line-height":"100%",width:"100%",height:"100%","vertical-align":"middle","text-align":this.settings.align,color:this.settings.text,"z-index":1,position:"relative",bottom:"100%"}).wiki(this.settings.label).appendTo(h),u=$(document.createElement("div")).addClass("meter-top").css({"background-color":this.settings.full,opacity:o(this.value),width:"100%",height:"100%","z-index":0}),c=$(document.createElement("div")).addClass("meter-bottom").css({position:"absolute",top:0,left:0,"background-color":this.settings.empty,opacity:1,width:100*this.value+"%",height:"100%","z-index":0}).append(u).appendTo(h);this.$element=h,this.$bars={top:u,bottom:c},this.$label=g,g.css("font-size",parseInt(h.css("height"),10)<parseInt($(".passage").css("font-size"),10)?h.css("height"):$(".passage").css("font-size")),g.css("line-height",h.css("height"))}Object.assign(l,{_list:new Map,is:function(t){return t instanceof l},has:function(t){return l._list.has(t)&&l.is(l._list.get(t))},get:function(t){return l.has(t)?l._list.get(t):null},del:function(t){l.has(t)&&l._list.delete(t)},add:function(t,s,i){if(!l.has(t)||e){Object.assign(s,{id:t});var n=new l(s,i);return l._list.set(t,n),n}console.error('Meter "'+t+'" already exists.')},_emit:function(t,e){l.is(t)&&t.$element.trigger({type:":"+e,meter:t})}}),Object.assign(l.prototype,{constructor:l,_label:function(t){var e=this;function s(){e.$label.empty().wiki(e.settings.label),e.$label.css("font-size",parseInt(e.$element.css("height"),10)<parseInt(e.$element.parent().css("font-size"),10)?e.$element.css("height"):e.$element.parent().css("font-size")),e.$label.css("line-height",e.$element.css("height"))}return t?setTimeout(s,Engine.minDomActionDelay):s(),this},_width:function(){var t=this;return this.$bars.bottom.animate({width:100*this.value+"%"},this.settings.animate,this.settings.easing,(function(){l._emit(t,"meter-animation-complete")})),this},_color:function(){return this.$bars.top.animate({opacity:o(this.value)},this.settings.animate,this.settings.easing),this},animate:function(){return l._emit(this,"meter-animation-start"),this._color()._width()._label()},val:function(t){return void 0!==t&&(t=Number(t),Number.isNaN(t)&&(t=1),t=Math.clamp(t,0,1),this.value=t,this.animate()),this.value},options:function(t){return t&&"object"==typeof t&&Object.assign(this.settings,t),this.settings},unwrap:function(){return this.$element[0]},place:function(t,e){var s=$(document.createElement("span"));return t instanceof jQuery||(t=$(t)),t[0]||console.warn("meter#place() -> no valid target"),e&&"object"==typeof e&&(e.classes&&(Array.isArray(e.classes)||"string"==typeof e.classes)&&s.addClass(e.classes),e.attr&&"object"==typeof e.attr&&s.attr(e.attr)),t.append(s.append(this.$element)),this._label(!0),this},on:function(t,e){return"function"!=typeof e?this:t&&"string"==typeof t&&t.trim()?(t=t.split(" ").map((function(t){return(t=t.split(".")[0])+".userland"})).join(" "),this.$element.on(t,e),this):this},one:function(t,e){return"function"!=typeof e?this:t&&"string"==typeof t&&t.trim()?(t=t.split(" ").map((function(t){return(t=t.split(".")[0])+".userland"})).join(" "),this.$element.one(t,e),this):this},off:function(t){return t=t&&"string"==typeof t&&t.trim()?t.split(" ").map((function(t){return(t=t.split(".")[0])+".userland"})).join(" "):".userland",this.$element.off(t),this},click:function(t,e){return this.$element.ariaClick(t,e),this},clone:function(){return new l(this.settings,this.value)},toJSON:function(){return JSON.reviveWrapper("new setup.Meter("+JSON.stringify(this.settings)+", "+this.value+")")}}),setup.Meter=l,t&&(window.Meter=window.Meter||l),Macro.add("newmeter",{tags:["colors","sizing","animation","label"],handler:function(){if(State.length>0&&!s)return this.error("The `<<newmeter>>` macro must be called in your `StoryInit` special passage. Seriously. No excuses. --Love, Chapel");if(this.args.length<1)return this.error("The `<<newmeter>>` macro requires at least one argument: a meter name.");var t=this.args[0],i=null,n=null,r=null,a=null;if("string"!=typeof t)return this.error("Invalid meter name.");if(t=t.trim(),l.has(t)&&!e)return this.error('Cannot clobber the existing meter "'+t+'".');this.payload.length&&(i=this.payload.find((function(t){return"colors"===t.name})),n=this.payload.find((function(t){return"sizing"===t.name})),r=this.payload.find((function(t){return"animation"===t.name})),a=this.payload.find((function(t){return"label"===t.name})));var o={};if(i){if(!i.args.length)return this.error("No arguments passed to the `<<colors>>` tag.");switch(i.args.length){case 1:o.empty=i.args[0],o.full="transparent";break;case 2:o.full=i.args[0],o.empty=i.args[1];break;default:o.full=i.args[0],o.empty=i.args[1],o.back=i.args[2]}}if(n){if(!n.args.length)return this.error("No arguments passed to the `<<sizing>>` tag.");o.width=n.args[0],n.args[1]&&(o.height=n.args[1])}if(r){if(!r.args.length)return this.error("No arguments passed to the `<<animation>>` tag.");if("boolean"!=typeof r.args[0]||r.args[0]){if("string"!=typeof r.args[0])return this.error("The argument to the `<<animation>>` tag should be `true`, `false`, or a valid CSS time value.");o.animate=Util.fromCssTime(r.args[0])}else o.animate=0;r.args[1]&&["swing","linear"].includes(r.args[1])&&(o.easing=r.args[1])}if(a){var h=a.args[0];if(!h||"string"!=typeof h)return this.error("The labelText argument for the `<<label>>` tag is required.");o.label=h.trim(),a.args[1]&&"string"==typeof a.args[1]&&(o.text=a.args[1]),a.args[2]&&"string"==typeof a.args[2]&&(o.align=a.args[2])}l.add(t,o,this.args[1])}}),Macro.add("showmeter",{handler:function(){if(this.args.length<1)return this.error("This macro requires at least one argument: the meter's name.");var t=this.args[0];if("string"!=typeof t)return this.error("Invalid meter name.");t=t.trim();var e=l.get(t);if(!e||!l.is(e))return this.error('The meter "'+t+'" does not exist.');"number"==typeof this.args[1]&&e.val(this.args[1]),e.place(this.output,{classes:"macro-"+this.name,attr:{id:"meter-"+Util.slugify(t)}})}}),Macro.add("updatemeter",{handler:function(){if(this.args.length<2)return this.error("This macro requires two arguments: the meter's name and a value.");var t=this.args[0];if("string"!=typeof t)return this.error("Invalid meter name.");t=t.trim();var e=l.get(t);if(!e||!l.is(e))return this.error('The meter "'+t+'" does not exist.');e.val(this.args[1]);}})}();
// end meters.min.js

// visible
!function(t){var i=t(window);t.fn.visible=function(t,e,o){if(!(this.length<1)){var r=this.length>1?this.eq(0):this,n=r.get(0),f=i.width(),h=i.height(),o=o?o:"both",l=e===!0?n.offsetWidth*n.offsetHeight:!0;if("function"==typeof n.getBoundingClientRect){var g=n.getBoundingClientRect(),u=g.top>=0&&g.top<h,s=g.bottom>0&&g.bottom<=h,c=g.left>=0&&g.left<f,a=g.right>0&&g.right<=f,v=t?u||s:u&&s,b=t?c||a:c&&a;if("both"===o)return l&&v&&b;if("vertical"===o)return l&&v;if("horizontal"===o)return l&&b}else{var d=i.scrollTop(),p=d+h,w=i.scrollLeft(),m=w+f,y=r.offset(),z=y.top,B=z+r.height(),C=y.left,R=C+r.width(),j=t===!0?B:z,q=t===!0?z:B,H=t===!0?R:C,L=t===!0?C:R;if("both"===o)return!!l&&p>=q&&j>=d&&m>=L&&H>=w;if("vertical"===o)return!!l&&p>=q&&j>=d;if("horizontal"===o)return!!l&&m>=L&&H>=w}}}}(jQuery);
// visible end

$(document).on(':passageend', function (e) {
  	State.variables.mcCache = 'dpetxpsui';  	
});

// notify.min.js, for SugarCube 2, by Chapel
// v1.1.1, 2022-07-21, 3bdbdfbe5ae47a46e4f4e52766d78701939ae9a6
;!function(){var s=/\d+m?s$/;function e(s,e,t){"string"==typeof s&&("number"!=typeof e&&(e=!1),$(document).trigger({type:":notify",message:s,delay:e,class:t||""}))}$(document.body).append("<div id='notify'></div>"),$(document).on(":notify",(function(s){s.message&&"string"==typeof s.message&&(s.message.trim(),s.class?"string"==typeof s.class?s.class="open macro-notify "+s.class:Array.isArray(s.class)?s.class="open macro-notify "+s.class.join(" "):s.class="open macro-notify":s.class="open macro-notify",s.delay?("number"!=typeof s.delay&&(s.delay=Number(s.delay)),Number.isNaN(s.delay)&&(s.delay=2e3)):s.delay=2e3,$("#notify").empty().wiki(s.message).addClass(s.class),setTimeout((function(){$("#notify").removeClass()}),s.delay))})),Macro.add("notify",{tags:null,handler:function(){var t=this.payload[0].contents,a=!1,n=!1;if(this.args.length>0){var i=s.test(this.args[0]);"number"==typeof this.args[0]||i?(a=i?Util.fromCssTime(this.args[0]):this.args[0],n=this.args.length>1&&this.args.slice(1).flatten()):n=this.args.flatten().join(" ")}e(t,a,n)}}),setup.notify=e}();
// end notify.min.js</script><tw-tag name="Assets" color="yellow"></tw-tag>,<tw-tag name="Place" color="purple"></tw-tag>,<tw-tag name="TODO" color="green"></tw-tag>,<tw-tag name="WIP" color="red"></tw-tag>,<tw-tag name="grammar" color="blue"></tw-tag>,<tw-tag name="javascript" color="yellow"></tw-tag>,<tw-tag name="js" color="yellow"></tw-tag>,<tw-tag name="sex" color="green"></tw-tag><tw-passagedata pid="1" name="Intro" tags="" position="144,292" size="100,100">
You&#39;re an 18 year old gamer who pretty much spends all day in his room playing video games blah-blah-blah.. You live with your grandfather who&#39;s ex-military and even has his own nuclear bunker as a hobby.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/playing.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

You&#39;ve always thought that he&#39;s some sort of madman. An ex-military with a bunker but without a single weapon there...
&lt;br /&gt;&lt;br /&gt;
Anyway, days go by and the situation in Europe keeps escalating. Each day there are more and more threats of nuclear war. You, as always, think that it&#39;s just bullshit and will never happen.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/war.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
What is your name? &lt;&lt;textbox &quot;$player.name&quot; &quot;Tony&quot;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;[[Continue|Intro2]]&lt;/center&gt;</tw-passagedata><tw-passagedata pid="2" name="Intro2" tags="" position="259,291" size="100,100">Days go by and talks about nuclear war calm down. But one day, without any warning, you hear a loud nuclear alarm siren. You jump off your pc and over to the window to look outside. Your eyes are wide with amazement from seeing the red colors in the skies.
&lt;br/&gt;
You didn&#39;t even get a warning on TV!
&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/crowd.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you look outside through your window you see the street in front of your bunker is in total chaos. Cars are crashing and being abandoned on the roads and people are running in all directions.
&lt;br /&gt;&lt;br /&gt;
After a few seconds, your grandfather slams open the bedroom door and loudly screams at you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;grandfather&gt;&gt;&lt;b&gt;&lt;&lt;print $player.name&gt;&gt; RUN! GET TO THE BUNKER!&lt;/b&gt;&lt;&lt;/grandfather&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You feel adrenaline rushing through you and while turning toward the door you take one last look around your room. You notice a few things laying on your bed and decide to take the first item that comes to mind.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/bag.jpg&#39;]]
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Pick up the cs-go knife&#39;&gt;&gt;
	&lt;&lt;&lt;&lt;pickup $backpack &quot;csgo_knife&quot; 1&gt;&gt;
	&lt;&lt;goto [[Intro3]]&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Pick up porn magazine&#39;&gt;&gt;
	&lt;&lt;pickup $backpack &quot;porn_magazine&quot; 1&gt;&gt;
	&lt;&lt;goto [[Intro3]]&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Pick up laptop&#39;&gt;&gt;
	&lt;&lt;pickup $backpack &quot;laptop&quot; 1&gt;&gt;
	&lt;&lt;goto [[Intro3]]&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;/center&gt;</tw-passagedata><tw-passagedata pid="3" name="Intro3" tags="" position="372,292" size="100,100">You rush downstairs and outside as you see that a nuclear bomb has been dropped on the city next to yours.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/bomb.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You run as fast as you can, following your grandfather to the bunker.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/shelter.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[[Continue|Intro4]]
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="4" name="Intro4" tags="" position="485,288" size="100,100">After &lt;strong&gt;15 years&lt;/strong&gt; living together in the bunker you both slowly start to hate each other. Food rations are getting low and in the last few days neither of you have eaten anything. You feel your stomach pressing against your spine. 
After a few more days you wake up and see that your grandfather has died peacefully in his sleep.
&lt;br /&gt;&lt;br /&gt;
You&#39;re left alone without food and barely standing. You imagine a cooked steak while looking at your grandfather but decide to shake it off.
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;intro/body.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You take another look at him and some thoughts are going through your head as you try to cover his dead body...&lt;br /&gt;
You know you won&#39;t be able to survive much longer here.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Eat your grandfather&#39;&gt;&gt;
	&lt;&lt;set $player.cannibal to 1&gt;&gt;
	&lt;&lt;goto &#39;Intro5&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

[[Go back to sleep|Intro5]]



</tw-passagedata><tw-passagedata pid="5" name="Intro5" tags="" position="596,289" size="100,100">You wake up &lt;&lt;if $player.cannibal&gt;&gt;&lt;strong&gt;with full stomach&lt;/strong&gt;&lt;&lt;else&gt;&gt;&lt;strong&gt;more hungrier&lt;/strong&gt; than day before&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You decide that you can&#39;t stay here anymore and need to get out or you&#39;ll go mad. Without hesitation you open the hatch and run outside as bright light shines into your eyes. For a moment you go blind.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/door_open.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You walk toward main street and look around. Nothing is left and the whole city is just rubble.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/empty_city.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You fully understand that it&#39;s not safe here and that a nearby forest would be more suitable for survival. At least you can try...
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[[Go outside the city to nearest forest|Intro6]]
&lt;/center&gt;



</tw-passagedata><tw-passagedata pid="6" name="StoryInit" tags="" position="4,12" size="100,100">&lt;&lt;script&gt;&gt;
if (document.location.href.toLowerCase().includes(&quot;/maris/appdata/local&quot;)) {
	setup.Path = &quot;C:/Users/maris/Desktop/Game - Twine/&quot;;
	if (navigator.userAgent.match(/firefox/i)) {
		setup.Path = &#39;file:///&#39; + setup.Path;
	}
} else { 
	setup.Path = &quot;&quot;;
}
setup.ImagePath = setup.Path + &quot;images/&quot;;
setup.videoPath = setup.Path + &quot;videos/&quot;;
setup.audioPath = setup.Path + &quot;sounds/&quot;;

importScripts(setup.Path + &quot;js/actions.js&quot;)
	.then(function() {
	}).catch(function(error) {  // eslint-disable-line
		alert(&quot;Error: Could not find file &#39;actions.js&#39;.&quot;);
	}
);

importStyles(setup.Path + &quot;custom.css&quot;)
	.then(function() {
	}).catch(function(error) {  // eslint-disable-line
		alert(&quot;Error: Could not find file &#39;custom.css&#39;.&quot;);
	}
);

importScripts(&quot;https://www.googletagmanager.com/gtag/js?id=G-XVQJZNSBZ6&quot;)
     .then(function() {
         window.dataLayer = window.dataLayer || [];
         window.gtag = function (){ dataLayer.push(arguments); };
         gtag(&#39;js&#39;, new Date());
         gtag(&#39;config&#39;, &#39;G-XVQJZNSBZ6&#39;);  
     }).catch(function(error) {
         console.log(&quot;Error: Could not load &#39;gtag.js&#39;.&quot;);
     }
 );

&lt;&lt;/script&gt;&gt;
&lt;&lt;set $game to {}, $game.cycle to {}&gt;&gt;
&lt;&lt;set $game.location to {
  forest: false,
  farm: false,
  basement: false,
  underground: false,
  workbench: false,
  greenhouse: false,
  streets: false,
  slave_market: false,
  bar: false,
  guesthouse: false,
  settlement: false,
  bathhouse: false
}&gt;&gt;
&lt;&lt;set
  $player to {},
  $player.name to &quot;&quot;,
  $player.money to 0, 
  $player.strength to 0, 
  $player.int to 0, 
  $player.cannibal to 0, 
  $player.reputation = 0, 
  $player.reputation_bounty_hunter = 0,
  $player.goodwill = 0,
  $player.sexp = 0,
  $player.showered to false,
  $player.mast to false,
  $player.drunk = 0,
  $player.gambler = 0,
  $player.endurance = 0,
  $player.companions = {},
  $player.quests = {},
  $player.stats = {}
&gt;&gt;


&lt;&lt;set $game.day = 0&gt;&gt;
&lt;&lt;set $slaves to []&gt;&gt;
&lt;&lt;set $tmpGirl to {}&gt;&gt;
&lt;&lt;set $tmpGirlkey to 0&gt;&gt;
&lt;&lt;set $morningMessages to []&gt;&gt;
&lt;&lt;set $charactersInLocation to {}&gt;&gt;
&lt;&lt;set $charsInGrid = []&gt;&gt;
&lt;&lt;set $basementLimit = 3&gt;&gt;
&lt;&lt;set $guesthouseLimit = 3&gt;&gt;
&lt;&lt;set $workersLimitGarden = 8&gt;&gt;
&lt;&lt;set $undergroundEvent = false&gt;&gt;
&lt;&lt;set $guests = []&gt;&gt;
&lt;&lt;set 
$characters to {
	vincent: {
		quests: {},
		relationship: 0
	}, 
	blair: {},
	rose: {},
	eve: {
		relationship: 0,
		quests: {}	
	},
	rodger: {
		relationship: 0,
		quests: {}
	},
	dom: {
		relationship: 0,
		quests: {}
	},
	isabel: {
		relationship: 0,
		quests: {}
	},
	octavia: {
		relationship: 0,
		quests: {}
	}
}&gt;&gt;
&lt;&lt;set $locationEvents = {}&gt;&gt;
&lt;&lt;character &#39;grandfather&#39; setup.ImagePath+&#39;/people/grandfather/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;you&#39; &quot;$player.name&quot; setup.ImagePath+&#39;/people/you/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;vincent&#39; setup.ImagePath+&#39;/people/vincent/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;boris&#39; setup.ImagePath+&#39;/people/boris/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;blair&#39; setup.ImagePath+&#39;/people/blair/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;dom&#39; setup.ImagePath+&#39;/people/dom/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;eve&#39; setup.ImagePath+&#39;/people/eve/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;rodger&#39; setup.ImagePath+&#39;/people/rodger/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;octavia&#39; setup.ImagePath+&#39;/people/octavia/avatar.png&#39;&gt;&gt;

&lt;&lt;character &#39;anonguy&#39; &#39;Guy&#39; setup.ImagePath+&#39;/people/anonguy.png&#39;&gt;&gt;
&lt;&lt;character &#39;anongirl&#39; &#39;Girl&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;

&lt;&lt;character &#39;harper&#39; setup.ImagePath+&#39;/people/harper/avatar.png&#39;&gt;&gt;
&lt;&lt;character &#39;isabel&#39; setup.ImagePath+&#39;/people/isabel.png&#39;&gt;&gt;
&lt;&lt;character &#39;laura&#39; setup.ImagePath+&#39;/people/laura/avatar.jpg&#39;&gt;&gt;

&lt;&lt;set $player.energy to 100, $player.maxEnergy to 100&gt;&gt;
&lt;&lt;newmeter &#39;$energyBar&#39; &#39;$player.energy / $player.maxEnergy&#39;&gt;&gt;
	&lt;&lt;sizing &#39;100%&#39;&gt;&gt;
    &lt;&lt;label &#39;$player.energy&#39;&gt;&gt;
&lt;&lt;/newmeter&gt;&gt;
&lt;&lt;set $player.hunger to 100, $player.maxHunger to 100&gt;&gt;
&lt;&lt;newmeter &#39;$hungerBar&#39; 1&gt;&gt;
	&lt;&lt;sizing &#39;100%&#39;&gt;&gt;
    &lt;&lt;label &#39;$player.hunger&#39;&gt;&gt;
	&lt;&lt;colors &#39;yellow&#39; &#39;red&#39; &#39;black&#39;&gt;&gt;
&lt;&lt;/newmeter&gt;&gt;
&lt;&lt;set $player.horny to 100&gt;&gt;
&lt;&lt;newmeter &#39;$hornyBar&#39; 1&gt;&gt;
	&lt;&lt;sizing &#39;100%&#39;&gt;&gt;
    &lt;&lt;label &#39;$player.horny&#39;&gt;&gt;
	&lt;&lt;colors &#39;#ff00ee&#39; &#39;#ff00ee&#39; &#39;black&#39;&gt;&gt;
&lt;&lt;/newmeter&gt;&gt;

&lt;&lt;newinv $backpack&gt;&gt;
&lt;&lt;newinv $storage&gt;&gt;
&lt;&lt;set $backpack to Inventory.create()&gt;&gt;
&lt;&lt;set $storage to Inventory.create()&gt;&gt;
&lt;&lt;include &quot;Inventory items&quot;&gt;&gt;

&lt;&lt;cacheaudio &quot;bg&quot; setup.audioPath+&#39;bg1.mp3&#39;&gt;&gt;
</tw-passagedata><tw-passagedata pid="7" name="StoryBanner??" tags="" position="121,11" size="100,100">&lt;img src=&quot;https://twinery.org/homepage/img/logo.svg&quot; width=&quot;64&quot; height=&quot;64&quot;&gt;

</tw-passagedata><tw-passagedata pid="8" name="StorySubtitle" tags="" position="337,9" size="100,100">&lt;div id=&quot;version&quot;&gt;v.0.22&lt;/div&gt;</tw-passagedata><tw-passagedata pid="9" name="Intro6" tags="" position="707,290" size="100,100">You walk through the city without seeing a single soul. Soon you reach the forest and decide to go in and look for food. You find an overgrown path and decide to follow it. For hours you keep going without finding anything. You continue walking till the sun goes down and, as soon as you&#39;re ready to accept your fate and give up, you notice an old wood cabin grown back into the trees. 
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/wood-cabin.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
[[Check cabin|Intro8]]</tw-passagedata><tw-passagedata pid="10" name="Intro8" tags="" position="849,285" size="100,100">You go inside and without thinking about any stealth just start digging 
through each drawer and cabinet to find something edible. You get lucky 
and find 4 cans of food.  You instantly eat 2 of them and just lie down on the floor falling asleep. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;pickup $backpack &#39;food&#39; 2&gt;&gt;
&lt;center&gt;
&lt;&lt;link &#39;Sleep&#39;&gt;&gt;
	&lt;&lt;set $game.introFinished to true&gt;&gt;
	&lt;&lt;sleep&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="11" name="Wood cabin" tags="Place" position="953,626" size="200,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;div class=&quot;menu-grid&quot;&gt;   
  &lt;&lt;grid cabin bedroom Bedroom &#39;Your room&#39;&gt;&gt;
  &lt;&lt;if hasTime(0, 30)&gt;&gt;
  	&lt;&lt;grid cabin shower Shower-room Shower&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if (hasTime(0, 30) || $player.hunger != $player.maxHunger)&gt;&gt;
  	&lt;&lt;grid cabin kitchen Kitchen-room Kitchen&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.workbench ?? false) &amp;&amp; hasTime(0, 30)&gt;&gt;
    &lt;&lt;grid cabin workbench Workbench Workbench false 1&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.basement ?? false) &amp;&amp; hasTime(0, 30)&gt;&gt;
    &lt;&lt;grid cabin basement Basement Basement false 1&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.greenhouse ?? false) &amp;&amp; hasTime(0, 30)&gt;&gt;
    &lt;&lt;grid cabin greenhouse Greenhouse Greenhouse false 1&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.guesthouse ?? false) &amp;&amp; hasTime(0, 30)&gt;&gt;
    &lt;&lt;grid cabin guesthouse &#39;Guest house&#39; &#39;Guest house&#39; false 1&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.bathhouse ?? false) &amp;&amp; hasTime(0, 30)&gt;&gt;
    &lt;&lt;grid cabin bathhouse &#39;Bathhouse&#39; &#39;Bathhouse&#39; false 1&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.nursery ?? false) &amp;&amp; hasTime(0, 30)&gt;&gt;
    &lt;&lt;grid cabin nursery &#39;Nursery&#39; &#39;Nursery&#39; false 1&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.shop ?? false) &amp;&amp; hasTime(0, 30)&gt;&gt;
    &lt;&lt;grid cabin shop &#39;Shop&#39; &#39;Shop&#39; false 1&gt;&gt;
  &lt;&lt;/if&gt;&gt;
   &lt;&lt;grid cabin fireplace &#39;Fire place&#39; &#39;Fire place&#39;&gt;&gt;
   &lt;&lt;grid cabin outside Outside Outside&gt;&gt;
&lt;/div&gt;


&lt;&lt;set _percentageUninvitedCouple = 5&gt;&gt;
&lt;&lt;set _percentageFoodForager = 2&gt;&gt;
&lt;&lt;if setup.getPersonsForLocation($guests, &#39;guard&#39;)&gt;&gt;
	&lt;&lt;set _percentageUninvitedCouple = 1&gt;&gt;
	&lt;&lt;set _percentageFoodForager = 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if !($locationEvents.cabin ?? false)&gt;&gt;
	&lt;&lt;if $game.lone_survivor&gt;&gt;
		&lt;&lt;set $game.lone_survivor = false&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;if setup.percentageChance(20)&gt;&gt;
			&lt;&lt;goto &#39;Event: A lone survivor: steal&#39;&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Event: A lone survivor: gift&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt; 
	&lt;&lt;elseif (setup.getAvailablePersons18yo($guests)[0] ?? []).length &gt;= 4 &amp;&amp; setup.percentageChance(30) &amp;&amp; !$player.quests.bathhouse_talk &amp;&amp; $game.day &gt; 80&gt;&gt;
		&lt;&lt;set $player.quests.bathhouse_talk = true&gt;&gt;
		&lt;&lt;goto &#39;Event: Bathhouse talk&#39;&gt;&gt;
	&lt;&lt;elseif setup.getPersonsForLocation($guests, &#39;garden&#39;).length &gt;= 4 &amp;&amp; setup.percentageChance(5) &amp;&amp; $backpack.count(&#39;food&#39;) &gt; 0 &amp;&amp; (!$game.rotten_rations_day || ($game.rotten_rations_day + 7) &lt; $game.day)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: Rotten Rations&#39;&gt;&gt;
	&lt;&lt;elseif setup.getPersonsForLocation($guests, &#39;garden&#39;).length &gt;= 2 &amp;&amp; setup.percentageChance(1)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: Common capital&#39;&gt;&gt;
	&lt;&lt;elseif $game.cabinName &amp;&amp; setup.percentageChance(5)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: A lone survivor&#39;&gt;&gt;
	&lt;&lt;elseif $game.cabinName &amp;&amp; setup.percentageChance(2) &amp;&amp; (!$game.baby_merchant_day || ($game.baby_merchant_day + 60) &lt; $game.day)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: Baby merchant&#39;&gt;&gt;
	&lt;&lt;elseif $game.cabinName &amp;&amp; setup.percentageChance(1)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: Base attack&#39;&gt;&gt;
	&lt;&lt;elseif $game.cabinName &amp;&amp; isMetChar(&#39;rodger&#39;) &amp;&amp; ($characters.rodger.quests.horse ?? false) &amp;&amp; !$player.horse &amp;&amp; setup.percentageChance(1)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: Horse merchant&#39;&gt;&gt;
	&lt;&lt;elseif ($backpack.count(&#39;food&#39;) || $storage.count(&#39;food&#39;)) &amp;&amp; setup.percentageChance(_percentageFoodForager)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: Food forager&#39;&gt;&gt;
	&lt;&lt;elseif ($backpack.count(&#39;food&#39;) || $storage.count(&#39;food&#39;)) &amp;&amp; timeBetween(&#39;19:00&#39;, &#39;23:00&#39;) &amp;&amp; setup.percentageChance(_percentageUninvitedCouple)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: The uninvited couple&#39;&gt;&gt;
	&lt;&lt;elseif setup.getPersonsForLocation($guests, &#39;guard&#39;).length &amp;&amp; setup.percentageChance(5) &amp;&amp; timeBetween(&#39;08:00&#39;, &#39;12:00&#39;)&gt;&gt;
		&lt;&lt;set $locationEvents.cabin = true&gt;&gt;
		&lt;&lt;goto &#39;Event: guard caught intruder&#39;&gt;&gt;
	&lt;&lt;elseif isMetChar(&#39;laura&#39;) &amp;&amp; !$characters.laura.quests.successful_test &amp;&amp; $characters.laura.quests.metOnDay &lt; ($game.day - 3)&gt;&gt;
		&lt;&lt;goto &#39;Laura - successful test&#39;&gt;&gt;
	&lt;&lt;elseif isMetChar(&#39;laura&#39;) &amp;&amp; $characters.laura.quests.successful_test &amp;&amp; !$characters.laura.quests.first_vials &amp;&amp; $characters.laura.quests.lastTestDay &lt; ($game.day - 5)&gt;&gt;
		&lt;&lt;goto &#39;Laura - first vials&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		
	&lt;&lt;/if&gt;&gt;
	
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="12" name="StoryCaption" tags="" position="456,11" size="100,100">&lt;div id=&quot;blink-screen&quot;&gt;&lt;/div&gt;
&lt;link href=&#39;https://css.gg/css&#39; rel=&#39;stylesheet&#39;&gt;
&lt;div id=&quot;sidebar-wrapper&quot; @class=&quot;&#39;&#39; + settings.sidebarBackground + &#39;&#39;&quot;&gt; 
&lt;&lt;if $game.introFinished&gt;&gt;
&lt;center&gt;&lt;div style=&quot;position: relative;&quot; id=&quot;sidebar-content&quot;&gt;
	&lt;&lt;if $game.showFlag&gt;&gt;&lt;&lt;flag&gt;&gt;&lt;&lt;/if&gt;&gt;
	&lt;&lt;if ($player.horse ?? false)&gt;&gt;
		&lt;div id=&quot;horse-avatar&quot;&gt;&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;/div&gt;&lt;/center&gt;
&lt;br /&gt;
&lt;&lt;set _uiBarGameDate = $gameDate.getDate() + &#39; &#39; + $gameDate.toLocaleString(&#39;default&#39;, { month: &#39;long&#39; }) + &#39;, &#39; + $gameDate.getFullYear()&gt;&gt;
&lt;div id=&quot;t1&quot; class=&quot;grid-s-def&quot;&gt;
	&lt;span class=&quot;grid-i-cs4 caut-bar&quot;&gt;&lt;/span&gt;
	&lt;span class=&quot;grid-i-rs3&quot;&gt;&lt;&lt;timeCycle&gt;&gt;[img[setup.ImagePath+&#39;game/&#39; + variables().timeCycle + &#39;.png&#39;]]&lt;&lt;timeCycle&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;grid-i-rs3 grid-i-pos-hc&quot;&gt;&lt;hr class=&quot;vdark&quot;&gt;&lt;/span&gt;
	&lt;span class=&quot;glyph&quot;&gt;&amp;#57414;&lt;/span&gt;&lt;span&gt;&lt;&lt;timeDay&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;glyph&quot;&gt;&amp;#57429;&lt;/span&gt;&lt;span&gt;&lt;&lt;time24hr&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; @aria-label=&quot;&#39;&#39; + _uiBarGameDate + &#39;&#39;&quot; data-balloon-pos=&quot;left&quot;&gt;&amp;#57425;&lt;/span&gt;
	&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; @aria-label=&quot;&#39;&#39; + _uiBarGameDate + &#39;&#39;&quot; data-balloon-pos=&quot;left&quot;&gt; Day &lt;&lt;gameDay&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;grid-i-cs4 caut-bar&quot;&gt;&lt;/span&gt;
&lt;/div&gt;


&lt;div id=&quot;companions-list&quot;&gt;
	&lt;&lt;companionList&gt;&gt;
&lt;/div&gt;
&lt;br /&gt;
&lt;div id=&quot;t2&quot;&gt;
&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; aria-label=&quot;Energy&quot; data-balloon-pos=&quot;right&quot;&gt;&amp;#59667;&lt;/span&gt;&lt;&lt;showmeter &#39;$energyBar&#39; &#39;$player.energy / $player.maxEnergy&#39;&gt;&gt;
&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; aria-label=&quot;Satiety&quot; data-balloon-pos=&quot;right&quot;&gt;&amp;#57976;&lt;/span&gt;&lt;&lt;showmeter &#39;$hungerBar&#39; &#39;$player.hunger / $player.maxHunger&#39;&gt;&gt;
&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; aria-label=&quot;Horny&quot; data-balloon-pos=&quot;right&quot;&gt;&amp;#59448;&lt;/span&gt;&lt;&lt;showmeter &#39;$hornyBar&#39; &#39;$player.horny / $player.maxHorny&#39;&gt;&gt;
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;


&lt;div id=&quot;t3&quot; class=&quot;grid-s-def&quot;&gt;
&lt;span class=&quot;grid-i-cs5 caut-bar&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;money&quot;&gt;$player.money&lt;/span&gt;
&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; aria-label=&quot;Bottle caps&quot; data-balloon-pos=&quot;up-left&quot;&gt;&amp;#57888;&lt;/span&gt;
&lt;span class=&quot;grid-i-pos-hc&quot;&gt;&lt;hr class=&quot;vdark&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; aria-label=&quot;Food amount&quot; data-balloon-pos=&quot;up-right&quot;&gt;&amp;#57975;&lt;/span&gt;
&lt;span class=&quot;food&quot;&gt;&lt;&lt;=($backpack.count(&#39;food&#39;) + $storage.count(&#39;food&#39;))&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;grid-i-cs5 grid-i-pos-vc&quot;&gt;&lt;hr class=&quot;dark&quot;&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;div id=&quot;t3s&quot; class=&quot;grid-s-def&quot;&gt;
	&lt;!--//##Later can be hidden in tooltip##//--&gt;
	&lt;span&gt;STR&lt;/span&gt;
	&lt;span&gt;END&lt;/span&gt;
	&lt;span&gt;INT&lt;/span&gt;
	&lt;!--//##########################//--&gt;
	&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; aria-label=&quot;Determines your luck capturing girl or hiting power in fights&quot; data-balloon-pos=&quot;right&quot;&gt;&amp;#58260;&lt;/span&gt;
	&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; aria-label=&quot;Determines how much defense you have in fights&quot; data-balloon-pos=&quot;up-left&quot;&gt;&amp;#59506;&lt;/span&gt;
	&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;medium&quot; aria-label=&quot;For high-end crafting you need more intelegence&quot; data-balloon-pos=&quot;up-right&quot;&gt;&amp;#57448;&lt;/span&gt;
	&lt;span&gt;$player.strength&lt;/span&gt;
	&lt;span&gt;&lt;&lt;=($player.endurance ?? 0)&gt;&gt;&lt;/span&gt;
	&lt;span&gt;$player.int&lt;/span&gt;
&lt;/div&gt;
&lt;div id=&quot;t3m&quot; class=&quot;grid-s-def&quot;&gt;
&lt;span class=&quot;grid-i-cs5 grid-i-pos-vc&quot;&gt;&lt;hr class=&quot;dark&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;small&quot; aria-label=&quot;Journal&quot; data-balloon-pos=&quot;up-left&quot;&gt;
&lt;&lt;link &quot;&amp;#58760;&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Dialog.setup(&quot;Journal&quot;, &quot;Journal&quot;); Dialog.wiki(Story.get(&quot;Journal&quot;).processText()); Dialog.open();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;
&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;small&quot; aria-label=&quot;Inventory&quot; data-balloon-pos=&quot;up-right&quot;&gt;
&lt;&lt;link &quot;&amp;#58705;&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Dialog.setup(&quot;Inventory&quot;, &quot;Inventory&quot;); Dialog.wiki(Story.get(&quot;Inventory&quot;).processText()); Dialog.open();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;
&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;small&quot; aria-label=&quot;Cheats&quot; data-balloon-pos=&quot;up-right&quot;&gt;
&lt;&lt;link &quot;&amp;#58949;&quot;&gt;&gt;&lt;&lt;script&gt;&gt;Dialog.setup(&quot;Cheat menu&quot;, &quot;Cheat menu&quot;); Dialog.wiki(Story.get(&quot;Cheat menu&quot;).processText()); Dialog.open();&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;
&lt;span class=&quot;grid-i-cs5 caut-bar&quot;&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;&lt;perkList&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;support&quot;&gt;
  &lt;&lt;link &quot;SUPPORT [img[setup.ImagePath+&#39;game/misc/support.png&#39;]]
&quot;&gt;&gt;
	  &lt;&lt;script&gt;&gt;
		Dialog.setup(&quot;Support&quot;, &quot;Support&quot;);
		Dialog.wiki(Story.get(&quot;Support&quot;).processText());
		Dialog.open();
	  &lt;&lt;/script&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  
  &lt;&lt;link &quot;CHANGELOG&quot;&gt;&gt;
	  &lt;&lt;script&gt;&gt;
		Dialog.setup(&quot;Changelog&quot;, &quot;Changelog&quot;);
		Dialog.wiki(Story.get(&quot;Changelog&quot;).processText());
		Dialog.open();
	  &lt;&lt;/script&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;/div&gt;
</tw-passagedata><tw-passagedata pid="13" name="Shower-room" tags="Place" position="966,507" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SHOWER&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/shower_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
&lt;&lt;if $player.showered is false &amp;&amp; hasTime(0, 30)&gt;&gt;
	&lt;&lt;link &#39;Take a shower&#39;&gt;&gt;
		&lt;&lt;addmins 30&gt;&gt;
		&lt;&lt;set _energy = $game.hotShower ? 20 : 10&gt;&gt;
		&lt;&lt;energy _energy&gt;&gt;
		&lt;&lt;goto &#39;Shower-action&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $player.mast is false &amp;&amp; hasTime(0, 30)&gt;&gt;
	&lt;&lt;link &#39;Masturbate&#39;&gt;&gt;
		&lt;&lt;addmins 30&gt;&gt;
		&lt;&lt;goto &#39;Shower-action-mast&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Back|Wood cabin]]
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="14" name="Inventory" tags="" position="563,9" size="100,100">&lt;div id=&quot;inventory&quot;&gt;
    &lt;&lt;for _item, _amount range $backpack.table&gt;&gt;
		&lt;&lt;capture _item, _amount&gt;&gt;
		  &lt;&lt;set $icon = _item&gt;&gt;
		  &lt;&lt;if $icon.indexOf(&quot;blueprint&quot;) !== -1&gt;&gt;
			  &lt;&lt;set $icon = &#39;blueprint&#39;&gt;&gt;
		  &lt;&lt;/if&gt;&gt;
		  &lt;div class=&#39;inventory-item tooltip&#39;&gt;
			  &lt;div class=&#39;inventory-img&#39;&gt;
				  [img[setup.ImagePath+&#39;game/inventory/&#39; + $icon + &#39;.png&#39;]]
			  &lt;/div&gt;
			  &lt;div class=&#39;inventory-title&#39;&gt;
				  &lt;&lt;= Item.get(_item).name&gt;&gt; 
				  &lt;&lt;if !Item.get(_item).unique&gt;&gt;
					  &lt;span class=&#39;inventory-amount&#39;&gt;x_amount&lt;/span&gt;
				  &lt;&lt;/if&gt;&gt;
			  &lt;/div&gt;
			  &lt;&lt;if Item.get(_item).description&gt;&gt;
				&lt;span class=&quot;tooltiptext&quot;&gt;&lt;&lt;=Item.get(_item).description&gt;&gt;&lt;/span&gt;
			  &lt;&lt;/if&gt;&gt;

			  &lt;&lt;if Item.get(_item).consumable&gt;&gt;
			  	  &lt;div&gt;
					&lt;&lt;link &#39;Use&#39;&gt;&gt;
					  &lt;&lt;run $backpack.use(_item)&gt;&gt;
					  &lt;&lt;script&gt;&gt;Dialog.close();&lt;&lt;/script&gt;&gt;
					  &lt;&lt;script&gt;&gt;state.display(state.active.title, null, &quot;back&quot;)&lt;&lt;/script&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				  &lt;/div&gt;
			  &lt;&lt;/if&gt;&gt;
			  &lt;div&gt;
				&lt;&lt;link &#39;Drop&#39;&gt;&gt;
					&lt;&lt;dialog &#39;Drop&#39;&gt;&gt;	
						How much do you want to drop &lt;&lt;=Item.get(_item).name&gt;&gt;? &lt;&lt;textbox &quot;_dropAmount&quot; _amount&gt;&gt;
						&lt;&lt;link &#39;OK&#39;&gt;&gt;
							&lt;&lt;drop $backpack _item _dropAmount&gt;&gt;
							&lt;&lt;script&gt;&gt;
									Dialog.setup(&quot;Inventory&quot;, &quot;Inventory&quot;);
									Dialog.wiki(Story.get(&quot;Inventory&quot;).processText());
									Dialog.open();
							&lt;&lt;/script&gt;&gt;
						&lt;&lt;/link&gt;&gt;
					&lt;&lt;/dialog&gt;&gt;	
				&lt;&lt;/link&gt;&gt;
			  &lt;/div&gt;
		  &lt;/div&gt;
		&lt;&lt;/capture&gt;&gt;
    &lt;&lt;/for&gt;&gt;
&lt;/div&gt;

&lt;style&gt;
#inventory {
	display: grid;
	grid-template-columns: repeat(6, 1fr);
	grid-column-gap: 10px;
	grid-row-gap: 10px;
}

.inventory-item {
	 flex: 0 0 33.3333%;
}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="15" name="Widget - player" tags="widget" position="141,639" size="100,100">&lt;&lt;widget energy&gt;&gt;
  &lt;&lt;set $player.energy += $args[0]&gt;&gt;
  &lt;&lt;if $player.energy &gt; $player.maxEnergy &gt;&gt;
	  &lt;&lt;set $player.energy = $player.maxEnergy&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if variables().player.energy &lt; 0&gt;&gt; 
  	&lt;&lt;set $player.energy = 0&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;updatemeter &#39;$energyBar&#39; &#96;$player.energy / $player.maxEnergy&#96;&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget money&gt;&gt;
&lt;&lt;set $player.money += $args[0]&gt;&gt;
&lt;&lt;if $player.money &lt; 0 &gt;&gt;
	&lt;&lt;set $player.money = 0&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget horny&gt;&gt;
	&lt;&lt;set $addHorny = $args[0]&gt;&gt;
	&lt;&lt;if setup.perkHas(&#39;drunk&#39;)&gt;&gt;
		&lt;&lt;set $addHorny = Math.round($addHorny / 2, 0)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $player.horny += $addHorny&gt;&gt;
	&lt;&lt;if $player.horny &gt; 100&gt;&gt;
		&lt;&lt;set $player.horny = 100&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;updatemeter &#39;$hornyBar&#39; &#96;$player.horny / 100&#96;&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget horny_reset&gt;&gt;
	&lt;&lt;set $player.horny = 0&gt;&gt;
	&lt;&lt;updatemeter &#39;$hornyBar&#39; &#96;$player.horny / 100&#96;&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget addPerk&gt;&gt;
	&lt;&lt;if typeof $player.perks === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $player.perks = {}&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if $args[0] === &#39;drunk&#39;&gt;&gt;
		&lt;&lt;set $player.perks[&#39;drunk&#39;] = true&gt;&gt;
	&lt;&lt;elseif $args[0] === &#39;bleeding&#39;&gt;&gt;
		&lt;&lt;set $player.perks[&#39;bleeding&#39;] = {
			day: $game.day
		}&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget perkAdd&gt;&gt;
	&lt;&lt;if typeof $player.perks === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $player.perks = {}&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if typeof $player.perks[$args[0]] === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $player.perks[$args[0]] = $game.day + setup.perkList[$args[0]].days&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget perkList&gt;&gt;
	&lt;&lt;if Object.keys(($player.perks ?? {})).length &gt; 0&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;for _perkItem, _perkI range ($player.perks ?? {})&gt;&gt;
		&lt;&lt;capture _perkItem&gt;&gt;
			&lt;div class=&quot;perk-item tooltip&quot;&gt;
				&lt;div class=&#39;perk-img&#39;&gt;
					[img[setup.ImagePath+&#39;game/perks/&#39; + _perkItem + &#39;.png&#39;]]
		    	&lt;/div&gt;
				&lt;span class=&quot;tooltiptext&quot;&gt;&lt;&lt;=setup.perkList[_perkItem].title&gt;&gt;&lt;/span&gt;
			&lt;/div&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget companionAdd&gt;&gt;
	&lt;&lt;if typeof $player.companions === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $player.companions = {}&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $player.companions[$args[0] + &#39;:&#39; + $args[1]] = true&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget companionRemove&gt;&gt;
	&lt;&lt;run delete $player.companions[$args[0]]&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget companionList&gt;&gt;
	&lt;&lt;for _comp, _compI range $player.companions&gt;&gt;
		&lt;&lt;set _compKey = _comp.split(&#39;:&#39;)&gt;&gt;
		&lt;&lt;capture _comp, _compKey&gt;&gt;
			&lt;&lt;set _girlVisual = $guests[_compKey[1]]&gt;&gt;
			&lt;div class=&quot;companion tooltip&quot; @title=&quot;&#39;&#39; + $guests[_compKey[1]].name + &#39;&#39;&quot;&gt;
				&lt;div class=&quot;girl_info_picture&quot;&gt;
					&lt;&lt;include &#39;Girl visual&#39;&gt;&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;&lt;link &#39;x&#39;&gt;&gt;
					&lt;&lt;dialog &#39;Remove companion&#39;&gt;&gt;
						Remove &lt;&lt;=$guests[_compKey[1]].name&gt;&gt; from companions?
						&lt;br /&gt;
						&lt;&lt;link &#39;Yes&#39;&gt;&gt;
							&lt;&lt;companionRemove _comp&gt;&gt;
							&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
							&lt;&lt;dialogclose&gt;&gt;
						&lt;&lt;/link&gt;&gt;	
					&lt;&lt;/dialog&gt;&gt;
				&lt;&lt;/link&gt;&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget companionRearange&gt;&gt;
	&lt;&lt;for _compR, _compIR range $player.companions&gt;&gt;
		&lt;&lt;set _compKeyR = _compR.split(&#39;:&#39;)&gt;&gt;
		&lt;&lt;if _compKeyR[1] &gt; $args[0]&gt;&gt;
			&lt;&lt;run delete $player.companions[_compR]&gt;&gt;
			&lt;&lt;set _compKeyR[1]--&gt;&gt;
			&lt;&lt;set $player.companions[_compKeyR.join(&#39;:&#39;)] = true&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget setPlayerStats&gt;&gt;
	&lt;&lt;if typeof $player[$args[0]] === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $player[$args[0]] = 0&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;set $player[$args[0]] += $args[1]&gt;&gt;
&lt;&lt;/widget&gt;&gt;	

&lt;&lt;widget linkdesc container&gt;&gt;
	&lt;&lt;set _linkDescId = ($args[0] ?? &#39;&#39;)&gt;&gt;
	&lt;&lt;run console.log(_linkDescId)&gt;&gt;
	&lt;div @id=&quot;&#39;&#39; + _linkDescId + &#39;&#39;&quot; class=&quot;link-desc&quot;&gt;
		&lt;&lt;=_contents&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget setNpcStats&gt;&gt;
	&lt;&lt;if $args[0] === &#39;guest&#39;&gt;&gt;
		&lt;&lt;if $args[3] &gt; 0&gt;&gt;
			&lt;&lt;set $guests[$args[1]][$args[2]] = Math.min(100, $guests[$args[1]][$args[2]] + $args[3])&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;set _maxMin = ($args[2] === &#39;relationship&#39; ? -100 : 0)&gt;&gt;
			&lt;&lt;set $guests[$args[1]][$args[2]] = Math.max(_maxMin, ($guests[$args[1]][$args[2]] - Math.abs($args[3])))&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif $args[0] === &#39;slave&#39;&gt;&gt;
		&lt;&lt;if $args[3] &gt; 0&gt;&gt;
			&lt;&lt;set $slaves[$args[1]][$args[2]] = Math.min(100, $slaves[$args[1]][$args[2]] + $args[3])&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;set _maxMin = ($args[2] === &#39;relationship&#39; ? -100 : 0)&gt;&gt;
			&lt;&lt;set $slaves[$args[1]][$args[2]] = Math.max(_maxMin, ($slaves[$args[1]][$args[2]] - Math.abs($args[3])))&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget flag&gt;&gt;
	&lt;div class=&quot;flag-bg&quot; @style=&quot;&#39;background-image: url(\&#39;&#39; + setup.ImagePath+&#39;game/misc/flag/bg_&#39; + $game.flagBg + &#39;.png\&#39;)&#39;&quot;&gt;
		[img[setup.ImagePath+&#39;game/misc/flag/icon_&#39; + $game.flagIcon + &#39;.png&#39;]]
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget cabinName&gt;&gt;
	&lt;&lt;=$game.cabinName ?? &#39;Cabin&#39;&gt;&gt;
&lt;&lt;/widget&gt;&gt;
 
&lt;&lt;widget gameDay&gt;&gt;
	&lt;&lt;set _start = clone(variables().startDate)&gt;&gt;
	&lt;&lt;set _end = clone(variables().gameDate)&gt;&gt;
	
	&lt;&lt;run _start.setHours(0,0,0,0)&gt;&gt;
	&lt;&lt;set _diff = _start.getTimezoneOffset() - _end.getTimezoneOffset()&gt;&gt;
	&lt;&lt;if _diff&gt;&gt;
		&lt;&lt;run _end.setMinutes(_end.getMinutes() + _diff)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;set _days = setup.calculateDaysBetween(_start, _end)&gt;&gt;
	&lt;&lt;= _days&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget showFamilyTree&gt;&gt;
	&lt;&lt;if $args[0].mother&gt;&gt;
		&lt;&lt;set _motherNpc = setup.getNpcById($args[0].mother)&gt;&gt;
		Mother: &lt;&lt;=(_motherNpc ? _motherNpc.name : &#39;dead&#39;)&gt;&gt;
		&lt;br /&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $args[0].father&gt;&gt;
		&lt;&lt;if $args[0].father === &#39;mc&#39;&gt;&gt;
			Father: You
		&lt;&lt;else&gt;&gt;
			Father: &lt;&lt;=setup.getNpcById($args[0].father)name ?? &#39;dead&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;br /&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $args[0].husband&gt;&gt;
		Husband: 
		&lt;&lt;if $args[0].husband === &#39;mc&#39;&gt;&gt;
			You
		&lt;&lt;else&gt;&gt;
			&lt;&lt;=setup.getNpcById($args[0].father)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $args[0].kids&gt;&gt;
		Childs: &lt;br /&gt;
		&lt;&lt;for _familyTreeChildI, _familyTreeChild range $args[0].kids&gt;&gt;
			&lt;&lt;set _familyMember = setup.getNpcById(_familyTreeChild)&gt;&gt;
			&lt;&lt;if _familyMember&gt;&gt;
				&lt;&lt;=_familyMember.name&gt;&gt; (&lt;&lt;=setup.getAge(_familyMember)&gt;&gt;)
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget statsAdd&gt;&gt;
	&lt;&lt;if typeof $player.stats[$args[0]] === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $player.stats[$args[0]] = 0&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $player.stats[$args[0]]++&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget notPatreon&gt;&gt;
	&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
	&lt;div id=&quot;patreon-content&quot;&gt;
	Patreon content! To get access to this even you need to be &lt;&lt;link &#39;supporter&#39;&gt;&gt;
		 &lt;&lt;script&gt;&gt;
		Dialog.setup(&quot;Support&quot;, &quot;Support&quot;);
		Dialog.wiki(Story.get(&quot;Support&quot;).processText());
		Dialog.open();
	  &lt;&lt;/script&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
	&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget notPatreonIcon&gt;&gt;
	&lt;span class=&quot;glyph&quot; data-balloon-length=&quot;small&quot; aria-label=&quot;Patreon content&quot; data-balloon-pos=&quot;up-left&quot;&gt;
		[img[setup.ImagePath+&#39;game/misc/support.png&#39;]]
	&lt;/span&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget warning&gt;&gt;
	&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
	&lt;div id=&quot;patreon-content&quot;&gt;
		&lt;&lt;=$args[0]&gt;&gt;
	&lt;/div&gt;
	&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;
</tw-passagedata><tw-passagedata pid="16" name="Widget - sleep" tags="widget" position="20,634" size="100,100">&lt;&lt;widget sleep&gt;&gt;
	&lt;&lt;set $morningMessages = {
		main: [],
		shop: [],
		slaves: []
	}&gt;&gt;
	&lt;&lt;set $game.sickPeople = []&gt;&gt;
	&lt;&lt;run delete $tmpGirlViewBack&gt;&gt;
	&lt;&lt;run delete $tmpGirlBack&gt;&gt;
	&lt;&lt;set $pregnancyHappening = null&gt;&gt;
	&lt;&lt;set $scavengingDidntReturn = null&gt;&gt;
	&lt;&lt;set $energyPenalty = 0&gt;&gt;
	&lt;&lt;if $gameDate.getHours() &lt; 8&gt;&gt;
		&lt;&lt;set $addDay = 0&gt;&gt;
		&lt;&lt;set $energyPenalty = 8 - $gameDate.getHours()&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set $addDay = 1&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;run 
		$gameDate.setDate($gameDate.getDate() + $addDay);
		$gameDate.setHours(8);
		$gameDate.setMinutes(0);
	&gt;&gt;
	
	&lt;&lt;if typeof $storage === &#39;undefined&#39;&gt;&gt;
  		&lt;&lt;newinv $storage&gt;&gt;
  		&lt;&lt;set $storage to Inventory.create()&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set _isStorageAvailable = ($game.location.shop ?? false)&gt;&gt;

  &lt;&lt;set $player.energy = $player.maxEnergy&gt;&gt;
  &lt;&lt;if $storage.has(&#39;food&#39;)&gt;&gt;
  		&lt;&lt;drop $storage &#39;food&#39; 1&gt;&gt;
		&lt;&lt;set $player.hunger = 100&gt;&gt;
  &lt;&lt;elseif $backpack.has(&#39;food&#39;)&gt;&gt;
  		&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt;
		&lt;&lt;set $player.hunger = 100&gt;&gt;
  &lt;&lt;else&gt;&gt;
  	  &lt;&lt;set $player.hunger -= 30&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set $player.mast to false&gt;&gt;
  &lt;&lt;set $player.showered to false&gt;&gt;
  &lt;&lt;set $player.fight_today to false&gt;&gt;
  &lt;&lt;set $player.drunk = 0&gt;&gt;
  &lt;&lt;set $player.nap = false&gt;&gt;
  &lt;&lt;horny 5&gt;&gt;
  &lt;&lt;set $game.day += 1&gt;&gt;
  
  &lt;&lt;for _locationEventI, _locationEvent range ($locationEvents ?? {})&gt;&gt;
  	&lt;&lt;set $locationEvents[_locationEventI] = false&gt;&gt;
  &lt;&lt;/for&gt;&gt;
  
&lt;&lt;set $giveFood = (($game.location.greenhouse ?? false) ? 2 : 1)&gt;&gt;

// Horse
&lt;&lt;if ($player.horse ?? false)&gt;&gt;
	&lt;&lt;if typeof $characters.horse === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $characters.horse = {
			name: $player.horse,
			food: 100
		}&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $characters.horse.food -= 40&gt;&gt;
	&lt;&lt;if $storage.has(&#39;hay&#39;)&gt;&gt;
		&lt;&lt;drop $storage &#39;hay&#39; 1&gt;&gt;
		&lt;&lt;set $characters.horse.food = 100&gt;&gt;
	&lt;&lt;elseif $backpack.has(&#39;hay&#39;)&gt;&gt;
		&lt;&lt;drop $backpack &#39;hay&#39; 1&gt;&gt;
		&lt;&lt;set $characters.horse.food = 100&gt;&gt;
	&lt;&lt;elseif $characters.horse.food &gt;0&gt;&gt;
		&lt;&lt;set $morningMessages.main.push(&#39;Your horse is starving&#39;)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if $characters.horse.food &lt;= 0&gt;&gt;
		&lt;&lt;run delete $player.horse&gt;&gt;
		&lt;&lt;run delete $characters.horse&gt;&gt;
		&lt;&lt;set $morningMessages.main.push(&#39;Your horse died of starvation&#39;)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;for _i to 0; _i lt $slaves.length; _i++&gt;&gt;
	&lt;&lt;capture _i&gt;&gt;
		&lt;&lt;set $slaves[_i].talked to false&gt;&gt;
		&lt;&lt;set $slaves[_i].milked to false&gt;&gt;
		&lt;&lt;set $slaves[_i].groped to false&gt;&gt;
		&lt;&lt;set $slaves[_i].washed = false&gt;&gt;
		&lt;&lt;set $slaves[_i].workout to false&gt;&gt;
		&lt;&lt;set $slaves[_i].gift = false&gt;&gt;
		&lt;&lt;set $slaves[_i].offerSlave = false&gt;&gt;
		&lt;&lt;if $slaves[_i].horny &lt; 80&gt;&gt;
			&lt;&lt;set $slaves[_i].horny++&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Wash beauty
		&lt;&lt;if typeof $slaves[_i].washDays !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $slaves[_i].washDays--&gt;&gt;
			&lt;&lt;set $slaves[_i].beauty -= $slaves[_i].washBeauty&gt;&gt;
			&lt;&lt;if $slaves[_i].washDays&gt;&gt;
				&lt;&lt;run delete $slaves[_i].washDays&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Pregnancy
		&lt;&lt;if typeof $slaves[_i].pregnancy !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $slaves[_i].pregnancy++&gt;&gt;
			&lt;&lt;if ($slaves[_i].traits ?? []).includes(&#39;breeder&#39;)&gt;&gt;
				&lt;&lt;set $slaves[_i].pregnancy++&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $slaves[_i].pregnancy == 8&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Slave &#39; + $slaves[_i].name + &#39; told you that &lt;strong&gt;she is pregnant&lt;/strong&gt;&#39;)&gt;&gt;
				&lt;&lt;set $characters.vincent.quests.pregnancy = true&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			
			&lt;&lt;if $slaves[_i].pregnancy &gt; 30 &amp;&amp; $slaves[_i].assignedTo === &#39;streets&#39; &amp;&amp; setup.percentageChance(10)&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Slave &#39; + $slaves[_i].name + &#39; woke up with her blood all over her. &lt;strong class=&quot;iitem&quot;&gt;She had miscarriage&lt;/strong&gt;&#39;)&gt;&gt;
				&lt;&lt;run delete $slaves[_i].pregnancy&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			
			&lt;&lt;if !$pregnancyHappening &amp;&amp; $slaves[_i].pregnancy &gt; 260 &amp;&amp; ($slaves[_i].pregnancy &gt; 280 || randomInteger(1,3) === 3)&gt;&gt;
				&lt;&lt;set $tmpGirl = $slaves[_i]&gt;&gt;
				&lt;&lt;set $pregnancyHappening = {
					type: &#39;slave&#39;,
					id: _i
				}&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Assigned jobs
		&lt;&lt;set _isSick = (typeof $slaves[_i].sick !== &#39;undefined&#39;)&gt;&gt;
		&lt;&lt;if $slaves[_i].assignedTo === &#39;garden&#39; &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;set $slaves[_i].gardenDay++&gt;&gt;
			&lt;&lt;set _foodGive = $giveFood&gt;&gt;
			&lt;&lt;if ($slaves[_i].traits ?? []).includes(&#39;gardener&#39;)&gt;&gt;
				&lt;&lt;set _foodGive++&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $slaves[_i].gardenDay == 3&gt;&gt;
				&lt;&lt;set $slaves[_i].gardenDay = 0&gt;&gt;
				&lt;&lt;if _isStorageAvailable&gt;&gt;
					&lt;&lt;pickup $storage &#39;food&#39; _foodGive&gt;&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;pickup $backpack &#39;food&#39; _foodGive&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Slave &#39; + $slaves[_i].name + &#39; managed to grow &lt;strong&gt;&#39; + _foodGive + &#39;&lt;/strong&gt; food in the garden&#39;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $slaves[_i].assignedTo === &#39;streets&#39; &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;set _girlChanceToDie = 5&gt;&gt;
			&lt;&lt;if ($slaves[_i].endurace ?? 0) &gt; 10&gt;&gt;
				&lt;&lt;set _girlChanceToDie = 4&gt;&gt;
			&lt;&lt;elseif ($slaves[_i].endurace ?? 0) &gt; 20&gt;&gt;
				&lt;&lt;set _girlChanceToDie = 3&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			
			&lt;&lt;if $characters.dom.quests.accepted_deal&gt;&gt;
				&lt;&lt;set _girlChanceToDie = 1&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if setup.percentageChance(_girlChanceToDie) &amp;&amp; (!$characters.dom.quests.accepted_deal || setup.percentageChance(50))&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Slave &#39; + $slaves[_i].name + &#39; &lt;strong class=&quot;iitem&quot;&gt;was found dead&lt;/strong&gt; in the streets&#39;)&gt;&gt;
				&lt;&lt;set $slaves.splice(_i, 1)&gt;&gt;
				&lt;&lt;set _i--&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;if randomInteger(0, 1) === 0&gt;&gt;
					&lt;&lt;set _moneyEarned = randomInteger(4, 8)&gt;&gt;
					&lt;&lt;set _moneyEarnedTax = 80&gt;&gt;
					&lt;&lt;if $characters.dom.quests.accepted_deal&gt;&gt;
						&lt;&lt;set _moneyEarnedTax = 40&gt;&gt;
					&lt;&lt;/if&gt;&gt;
					&lt;&lt;set _moneyEarned = _moneyEarned - Math.round((_moneyEarnedTax / 100) * _moneyEarned, 0)&gt;&gt;
					&lt;&lt;set _moneyEarned += Math.round($slaves[_i].sub / 25, 0)&gt;&gt;
					&lt;&lt;set _moneyEarned += Math.round($slaves[_i].pussy / 25, 0)&gt;&gt;
					&lt;&lt;set _moneyEarned += Math.round($slaves[_i].anal / 25, 0)&gt;&gt;
					&lt;&lt;set $player.money += _moneyEarned&gt;&gt;
					&lt;&lt;set $morningMessages.main.push(&#39;Slave &#39; + $slaves[_i].name + &#39; had client in the streets. She got you &lt;strong&gt;&#39; + _moneyEarned + &#39;&lt;/strong&gt; caps&#39;)&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Starvation
		&lt;&lt;if $slaves[_i].food &lt;= 10&gt;&gt;
			&lt;&lt;if $storage.has(&#39;food&#39;)&gt;&gt;
				&lt;&lt;drop $storage &#39;food&#39; 1&gt;&gt; 
				&lt;&lt;set $slaves[_i].food to 100&gt;&gt;
			&lt;&lt;elseif $backpack.has(&#39;food&#39;)&gt;&gt;
				&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt; 
				&lt;&lt;set $slaves[_i].food to 100&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Slave &#39; + $slaves[_i].name + &#39; died of hunger. You dont have enough food&#39;)&gt;&gt;
				&lt;&lt;set $slaves.splice(_i, 1)&gt;&gt;
				&lt;&lt;set _i--&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if setup.getAge($slaves[_i]) &gt; 3&gt;&gt;
			&lt;&lt;set $slaves[_i].food -= 30&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Sick
		&lt;&lt;if _isSick&gt;&gt;
			&lt;&lt;set $slaves[_i].sick.days--&gt;&gt;
			&lt;&lt;if $slaves[_i].sick.days &lt;= 0&gt;&gt;
				&lt;&lt;run delete $slaves[_i].sick&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;run $slaves.filter(n=&gt;n)&gt;&gt;
&lt;&lt;set $scavengingDidntReturn = null&gt;&gt;
&lt;&lt;for _guestI to 0; _guestI lt ($guests ?? []).length; _guestI++&gt;&gt;
	&lt;&lt;capture _guestI&gt;&gt;
		&lt;&lt;set $guests[_guestI].talked to false&gt;&gt;
		&lt;&lt;set $guests[_guestI].milked to false&gt;&gt;
		&lt;&lt;set $guests[_guestI].groped to false&gt;&gt;
		&lt;&lt;set $guests[_guestI].workout to false&gt;&gt;
		&lt;&lt;set $guests[_guestI].washed = false&gt;&gt;
		&lt;&lt;set $guests[_guestI].gift = false&gt;&gt;
		&lt;&lt;set $guests[_guestI].washedBathhouse = false&gt;&gt;
		&lt;&lt;if $guests[_guestI].horny &lt; 80&gt;&gt;
			&lt;&lt;set $guests[_guestI].horny++&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Wash beauty
		&lt;&lt;if typeof $guests[_guestI].washDays !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $guests[_guestI].washDays--&gt;&gt;
			&lt;&lt;set $guests[_guestI].beauty -= $guests[_guestI].washBeauty&gt;&gt;
			&lt;&lt;if $guests[_guestI].washDays&gt;&gt;
				&lt;&lt;run delete $guests[_guestI].washDays&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Leave
		&lt;&lt;if $guests[_guestI].relationship &lt; 0&gt;&gt;
			&lt;&lt;companionRemove &#39;guest:&#39; + _guestI&gt;&gt;
			&lt;&lt;companionRearange _guestI&gt;&gt;
			&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; was missing in the morning. She probably decided to leave this place&#39;)&gt;&gt;
			&lt;&lt;set $guests.splice(_guestI, 1)&gt;&gt;
			&lt;&lt;set _guestI--&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Pregnancy
		&lt;&lt;if typeof $guests[_guestI].pregnancy !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $guests[_guestI].pregnancy++&gt;&gt;
			&lt;&lt;if ($guests[_guestI].traits ?? []).includes(&#39;breeder&#39;)&gt;&gt;
				&lt;&lt;set $guests[_guestI].pregnancy++&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $guests[_guestI].pregnancy == 8&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; told you that &lt;strong&gt;she is pregnant&lt;/strong&gt;&#39;)&gt;&gt;
				&lt;&lt;set $characters.vincent.quests.pregnancy = true&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			
			&lt;&lt;if $guests[_guestI].pregnancy &gt; 30 &amp;&amp; $guests[_guestI].assignedTo === &#39;streets&#39; &amp;&amp; setup.percentageChance(1)&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; woke up with her blood all over her. &lt;strong class=&quot;iitem&quot;&gt;She had miscarriage&lt;/strong&gt;&#39;)&gt;&gt;
				&lt;&lt;run delete $guests[_guestI].pregnancy&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			
			&lt;&lt;if !$pregnancyHappening &amp;&amp; $guests[_guestI].pregnancy &gt; 260 &amp;&amp; ($guests[_guestI].pregnancy &gt; 280 || randomInteger(1,3) === 3)&gt;&gt;
				&lt;&lt;set $tmpGirl = $guests[_guestI]&gt;&gt;
				&lt;&lt;set $pregnancyHappening = {
					type: &#39;guest&#39;,
					id: _guestI
				}&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;set _isSick = (typeof $guests[_guestI].sick !== &#39;undefined&#39;)&gt;&gt;
		// Assigned jobs
		&lt;&lt;if $guests[_guestI].assignedTo === &#39;garden&#39; &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;set $guests[_guestI].gardenDay++&gt;&gt;
			&lt;&lt;set _foodGive = $giveFood&gt;&gt;
			&lt;&lt;if ($guests[_guestI].traits ?? []).includes(&#39;gardener&#39;)&gt;&gt;
				&lt;&lt;set _foodGive++&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $guests[_guestI].gardenDay == 3&gt;&gt;
				&lt;&lt;set $guests[_guestI].gardenDay = 0&gt;&gt;
				&lt;&lt;if _isStorageAvailable&gt;&gt;
					&lt;&lt;pickup $storage &#39;food&#39; _foodGive&gt;&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;pickup $backpack &#39;food&#39; _foodGive&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; managed to grow &lt;strong&gt;&#39; + _foodGive + &#39;&lt;/strong&gt; food in the garden&#39;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		
		&lt;&lt;if $guests[_guestI].assignedTo === &#39;streets&#39; &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;set _girlChanceToDie = 5&gt;&gt;
			&lt;&lt;if ($guests[_guestI].endurace ?? 0) &gt; 10&gt;&gt;
				&lt;&lt;set _girlChanceToDie = 4&gt;&gt;
			&lt;&lt;elseif ($guests[_guestI].endurace ?? 0) &gt; 20&gt;&gt;
				&lt;&lt;set _girlChanceToDie = 3&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			
			&lt;&lt;if $characters.dom.quests.accepted_deal&gt;&gt;
				&lt;&lt;set _girlChanceToDie = 1&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if setup.percentageChance(_girlChanceToDie) &amp;&amp; (!$characters.dom.quests.accepted_deal || setup.percentageChance(50))&gt;&gt;
				&lt;&lt;set _compKeyRemove = &#39;guest:&#39; + _guestI&gt;&gt;
				&lt;&lt;companionRemove &#96;_compKeyRemove&#96;&gt;&gt;
				&lt;&lt;companionRearange _guestI&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; &lt;strong class=&quot;iitem&quot;&gt;was found dead&lt;/strong&gt; in the streets&#39;)&gt;&gt;
				&lt;&lt;set $guests.splice(_i, 1)&gt;&gt;
				&lt;&lt;set _i--&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;if randomInteger(0, 1) === 0&gt;&gt;
					&lt;&lt;set _moneyEarned = randomInteger(4, 8)&gt;&gt;
					&lt;&lt;set _moneyEarnedTax = 80&gt;&gt;
					&lt;&lt;if $characters.dom.quests.accepted_deal&gt;&gt;
						&lt;&lt;set _moneyEarnedTax = 40&gt;&gt;
					&lt;&lt;/if&gt;&gt;
					&lt;&lt;set _moneyEarned = _moneyEarned - Math.round((_moneyEarnedTax / 100) * _moneyEarned, 0)&gt;&gt;
					&lt;&lt;set _moneyEarned += Math.round($guests[_guestI].sub / 25, 0)&gt;&gt;
					&lt;&lt;set _moneyEarned += Math.round($guests[_guestI].pussy / 25, 0)&gt;&gt;
					&lt;&lt;set _moneyEarned += Math.round($guests[_guestI].anal / 25, 0)&gt;&gt;
					&lt;&lt;set $player.money += _moneyEarned&gt;&gt;
					&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; had client in the streets. She got you &lt;strong&gt;&#39; + _moneyEarned + &#39;&lt;/strong&gt; caps&#39;)&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		
		&lt;&lt;if $guests[_guestI].assignedTo === &#39;forest&#39; &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;set _giveWood = ($guests[_guestI].strength &gt; 30 ? 2 : 1)&gt;&gt;
			&lt;&lt;if ($guests[_guestI].traits ?? []).includes(&#39;woodcraft&#39;)&gt;&gt;
				&lt;&lt;set _giveWood++&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if _isStorageAvailable&gt;&gt;
				&lt;&lt;pickup $storage &#39;wood&#39; _giveWood&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;pickup $backpack &#39;wood&#39; _giveWood&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; managed to collect &lt;strong&gt;&#39; + _giveWood + &#39;&lt;/strong&gt; wood in the forest&#39;)&gt;&gt;
			&lt;&lt;if setup.percentageChance(10)&gt;&gt;
				&lt;&lt;if _isStorageAvailable&gt;&gt;
					&lt;&lt;pickup $storage &#39;food&#39; 1&gt;&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;pickup $backpack &#39;food&#39; 1&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; managed to find some berries while working in the forest. &lt;strong class=&quot;iitem&quot;&gt;+1 food&lt;/strong&gt;&#39;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $guests[_guestI].assignedTo === &#39;scavenging&#39; &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;set _chanceOfNotComingHome = 10&gt;&gt;
			&lt;&lt;if $guests[_guestI].strength &gt;= 30&gt;&gt;
				&lt;&lt;set _changeOfNotComingHome -=5&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if ($guests[_guestI].traits ?? []).includes(&#39;scavanger&#39;)&gt;&gt;
				&lt;&lt;set _chanceOfNotComingHome -=4&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $guests[_guestI].gender&gt;&gt;
				&lt;&lt;set _chanceOfNotComingHome = 0&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if setup.percentageChance(_chanceOfNotComingHome) &amp;&amp; !$scavengingDidntReturn &amp;&amp; !$pregnancyHappening&gt;&gt;
				&lt;&lt;set $scavengingDidntReturn = _guestI&gt;&gt;
			&lt;&lt;else&gt;&gt;
			  &lt;&lt;set _randomItem = either(&#39;plastic&#39;, &#39;glass&#39;, &#39;rope&#39;, &#39;duck_tape&#39;, &#39;necklace_cheap&#39;)&gt;&gt;
			  &lt;&lt;set _giveCount = 1&gt;&gt;
			  &lt;&lt;if ($guests[_guestI].traits ?? []).includes(&#39;scavanger&#39;) &amp;&amp; setup.percentageChance(50)&gt;&gt;
				&lt;&lt;set _giveCount++&gt;&gt;
			  &lt;&lt;/if&gt;&gt;
			  &lt;&lt;if _isStorageAvailable&gt;&gt;
			  	&lt;&lt;pickup $storage _randomItem _giveCount&gt;&gt;
			  &lt;&lt;else&gt;&gt;
			  	&lt;&lt;pickup $backpack _randomItem _giveCount&gt;&gt;
			  &lt;&lt;/if&gt;&gt;
			  &lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; managed to collect &lt;strong&gt;&#39; + _giveCount + &#39; &#39; + _randomItem + &#39;&lt;/strong&gt; while scavenging&#39;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;if $guests[_guestI].assignedTo === &#39;mistress&#39; &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;for _mistressSlaveI, _mistressSlave range $slaves&gt;&gt;
				&lt;&lt;if setup.getAge(_mistressSlave) &lt; 18&gt;&gt;
					&lt;&lt;continue&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;if setup.percentageChance(30) &amp;&amp; _mistressSlave.sub &lt; 100&gt;&gt;
					&lt;&lt;set $morningMessages.slaves.push(&#39;Mistress &#39; + $guests[_guestI].name + &#39; increased &#39; + setup.displayName(_mistressSlave) + &#39;\&#39;s submission&#39;)&gt;&gt;
					&lt;&lt;set $slaves[_mistressSlaveI].sub = Math.min(100, ($slaves[_mistressSlaveI].sub + 1))&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/for&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Starvation
		&lt;&lt;if $guests[_guestI].food &lt;= 10&gt;&gt;
			&lt;&lt;if $storage.has(&#39;food&#39;)&gt;&gt;
				&lt;&lt;drop $storage &#39;food&#39; 1&gt;&gt; 
				&lt;&lt;set $guests[_guestI].food to 100&gt;&gt;
			&lt;&lt;elseif $backpack.has(&#39;food&#39;)&gt;&gt;
				&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt; 
				&lt;&lt;set $guests[_guestI].food to 100&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set _compKeyRemove = &#39;guest:&#39; + _guestI&gt;&gt;
				&lt;&lt;companionRemove &#96;_compKeyRemove&#96;&gt;&gt;
				&lt;&lt;companionRearange _guestI&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_guestI].name + &#39; left because you have not enough food&#39;)&gt;&gt;
				&lt;&lt;set $guests.splice(_guestI, 1)&gt;&gt;
				&lt;&lt;set _guestI--&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if setup.getAge($guests[_guestI]) &gt; 3&gt;&gt;
			&lt;&lt;set $guests[_guestI].food -= 30&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		// Sick
		&lt;&lt;if _isSick&gt;&gt;
			&lt;&lt;set $guests[_guestI].sick.days--&gt;&gt;
			&lt;&lt;if $guests[_guestI].sick.days &lt;= 0&gt;&gt;
				&lt;&lt;run delete $guests[_guestI].sick&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;for _nurseryI to 0; _nurseryI lt ($nursery ?? []).length; _nurseryI++&gt;&gt;
	&lt;&lt;capture _nurseryI&gt;&gt;
		// Starvation
		&lt;&lt;if $nursery[_nurseryI].food &lt;= 10&gt;&gt;
			&lt;&lt;if $storage.has(&#39;food&#39;)&gt;&gt;
				&lt;&lt;drop $storage &#39;food&#39; 1&gt;&gt; 
				&lt;&lt;set $nursery[_nurseryI].food to 100&gt;&gt;
			&lt;&lt;elseif $backpack.has(&#39;food&#39;)&gt;&gt;
				&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt; 
				&lt;&lt;set $nursery[_nurseryI].food to 100&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set $morningMessages.main.push(&#39;Kid &#39; + $nursery[_nurseryI].name + &#39; died because do not have enough food&#39;)&gt;&gt;
				&lt;&lt;set $nursery.splice(_nurseryI, 1)&gt;&gt;
				&lt;&lt;set _nurseryI--&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if setup.getAge($nursery[_nurseryI]) &gt; 3&gt;&gt;
			&lt;&lt;set $nursery[_nurseryI].food -= 30&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;if setup.getAge($nursery[_nurseryI]) &gt;= 18&gt;&gt;
			&lt;&lt;set $morningMessages.main.push(&#39;Kid &#39; + $nursery[_nurseryI].name + &#39; has grown up and moved to the guest house&#39;)&gt;&gt;
			&lt;&lt;run $guests.push($nursery[_nurseryI])&gt;&gt;
			&lt;&lt;set $nursery.splice(_nurseryI, 1)&gt;&gt;
			&lt;&lt;set _nurseryI--&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;for _charI, _char range $characters&gt;&gt;
	&lt;&lt;if typeof $characters[_charI].quests !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $characters[_charI].talked = false&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;set $sleepDead = null&gt;&gt;

// Perks
&lt;&lt;for _playerPerk, _playerPerkDay range ($player.perks ?? {})&gt;&gt;
	&lt;&lt;capture _playerPerkDay, _playerPerk&gt;&gt;
		&lt;&lt;if _playerPerkDay &lt; $game.day&gt;&gt;
			&lt;&lt;if _playerPerk === &#39;bleeding&#39;&gt;&gt;
				&lt;&lt;set $sleepDead = &#39;bleed out&#39;&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;run delete $player.perks[_playerPerk]&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;if _playerPerk === &#39;beaten&#39;&gt;&gt;
			&lt;&lt;set $player.energy -= 50&gt;&gt;
			&lt;&lt;updatemeter &#39;$energyBar&#39; &#96;$player.energy / $player.maxEnergy&#96;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

// Sick (Rotten food)
&lt;&lt;if $game.foodRotten&gt;&gt;
	&lt;&lt;set _foodRottenGuests = setup.getRandomPersonIds($guests, randomInteger(1,3))&gt;&gt;
	&lt;&lt;for _rottenFoodKey, _rottenFoodId range _foodRottenGuests&gt;&gt;
		&lt;&lt;set $guests[_rottenFoodId].sick = {
			days: 2,
			desc: &#39;Food poisoning&#39;,
			id: &#39;food_poisoning&#39;
		}&gt;&gt;
		&lt;&lt;set $morningMessages.main.push(&#39;Guest &#39; + $guests[_rottenFoodId].name + &#39; got sick with food poisoning&#39;)&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;set _foodRottenSlaves = setup.getRandomPersonIds($slaves, randomInteger(1,3))&gt;&gt;
	&lt;&lt;for _rottenFoodKey, _rottenFoodId range _foodRottenSlaves&gt;&gt;
		&lt;&lt;set $slaves[_rottenFoodId].sick = {
			days: 2,
			desc: &#39;Food poisoning&#39;,
			id: &#39;food_poisoning&#39;
		}&gt;&gt;
		&lt;&lt;set $morningMessages.main.push(&#39;Slave &#39; + $slaves[_rottenFoodId].name + &#39; got sick with food poisoning&#39;)&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;run delete $game.foodRotten&gt;&gt;
&lt;&lt;/if&gt;&gt;

// Manage goods
&lt;&lt;set _shopKeeperId = setup.getPersonsForLocation($guests, &#39;shop&#39;)&gt;&gt;
&lt;&lt;if _shopKeeperId.length&gt;&gt;
	&lt;&lt;set _shopKeeper = $guests[_shopKeeperId[0]]&gt;&gt;
	&lt;&lt;for _manageGoodsName, _manageGoods range ($player.manageGoods ?? {})&gt;&gt;
		&lt;&lt;if _manageGoods.min &amp;&amp; $storage.count(_manageGoodsName) &lt; _manageGoods.min&gt;&gt;
			&lt;&lt;if setup.percentageChance(setup.inventoryManageable[_manageGoodsName].chance)&gt;&gt;
				&lt;&lt;set _amount = randomInteger(setup.inventoryManageable[_manageGoodsName].range[0], setup.inventoryManageable[_manageGoodsName].range[1])&gt;&gt;
				&lt;&lt;set _totalPrice = setup.inventoryManageable[_manageGoodsName].price * _amount&gt;&gt;
				&lt;&lt;if $player.money &gt;= _totalPrice&gt;&gt;
					&lt;&lt;pickup $storage _manageGoodsName _amount&gt;&gt;
					&lt;&lt;set $player.money -= _totalPrice&gt;&gt;
					&lt;&lt;set $morningMessages.shop.push(&#39;Shopkeper &#39; + setup.displayName(_shopKeeper) + &#39; managed to buy &#39; + _amount + &#39; &#39; + Item.get(_manageGoodsName).name + &#39; for $&#39; + _totalPrice)&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if _manageGoods.max &amp;&amp; $storage.count(_manageGoodsName) &gt; _manageGoods.max&gt;&gt;
			&lt;&lt;if setup.percentageChance(setup.inventoryManageable[_manageGoodsName].chance)&gt;&gt;
				&lt;&lt;set _amount = randomInteger(setup.inventoryManageable[_manageGoodsName].range[0], setup.inventoryManageable[_manageGoodsName].range[1])&gt;&gt;
				&lt;&lt;set _totalPrice = setup.inventoryManageable[_manageGoodsName].price * _amount&gt;&gt;
				&lt;&lt;set $player.money += _totalPrice&gt;&gt;
				&lt;&lt;set $morningMessages.shop.push(&#39;Shopkeper &#39; + setup.displayName(_shopKeeper) + &#39; managed to sell &#39; + _amount + &#39; &#39; + Item.get(_manageGoodsName).name + &#39; for $&#39; + _totalPrice)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.hunger &lt;= 0 &amp;&amp; !$sleepDead&gt;&gt;
	&lt;&lt;set $sleepDead = &#39;hunger&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if !$sleepDead&gt;&gt;
&lt;&lt;set $player.showered to false&gt;&gt;
	&lt;&lt;updatemeter &#39;$energyBar&#39; &#96;$player.energy / $player.maxEnergy&#96;&gt;&gt;
	&lt;&lt;updatemeter &#39;$hungerBar&#39; &#96;$player.hunger / $player.maxHunger&#96;&gt;&gt;
	&lt;&lt;if $args[0]&gt;&gt;
		&lt;&lt;set $morningMessages = []&gt;&gt;
		&lt;&lt;goto $args[0]&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &quot;Bedroom-sleep&quot;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set $game.death_reason = $sleepDead&gt;&gt;
	&lt;&lt;goto &quot;Dead&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="17" name="Shower-action" tags="" position="964,390" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SHOWER&lt;/h1&gt;
&lt;&lt;set $player.showered to true&gt;&gt;
&lt;&lt;if $game.hotShower is true&gt;&gt;
    &lt;center&gt;[img[setup.ImagePath+&#39;places/cabin/hot_shower.webp&#39;]]&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;Your energy increased by 20&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;center&gt;[img[setup.ImagePath+&#39;places/cabin/cold_shower.webp&#39;]]&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You take a freezing cold shower!
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;Your energy increased by 10&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[[Back|Shower-room]]
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="18" name="Shower-action-mast" tags="" position="964,277" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SHOWER&lt;/h1&gt;
&lt;&lt;set $player.mast to true&gt;&gt;
&lt;center&gt;[img[setup.ImagePath+&#39;places/cabin/mast1.webp&#39;]]&lt;/center&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[[Back|Shower-room]]
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="19" name="Bedroom" tags="Place" position="1084,512" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/bedroom_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;

&lt;&lt;if $charactersInLocation[&#39;bedroom&#39;].includes(&#39;blair&#39;) &amp;&amp; timeBetween(&#39;22:00&#39;,&#39;23:59&#39;)&gt;&gt;
	&lt;&lt;link &#39;Talk with Blair&#39;&gt;&gt;
		&lt;&lt;goto &#39;Blair - bedroom talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &quot;Sleep&quot;&gt;&gt;&lt;&lt;sleep&gt;&gt;&lt;&lt;/link&gt;&gt;

&lt;&lt;if timeBetween(&#39;08:00&#39;,&#39;23:00&#39;) &amp;&amp; !$player.nap&gt;&gt;
	&lt;&lt;link &#39;Take a nap&#39;&gt;&gt;
		&lt;&lt;set $player.nap = true&gt;&gt;
		&lt;&lt;addhours 1&gt;&gt;
		&lt;&lt;energy 20&gt;&gt;
		&lt;&lt;goto &#39;Bedroom&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if timeBetween(&#39;08:00&#39;,&#39;23:00&#39;)&gt;&gt;
	&lt;&lt;link &#39;Wait an hour&#39;&gt;&gt;
		&lt;&lt;addhours 1&gt;&gt;
		&lt;&lt;goto &#39;Bedroom&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;STATS&#39;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		Dialog.setup(&quot;Stats&quot;, &quot;Stats&quot;);
		Dialog.wiki(Story.get(&quot;MC stats&quot;).processText());
		Dialog.open();
	  &lt;&lt;/script&gt;&gt;
&lt;&lt;/link&gt;&gt;

[[Back|Wood cabin]]
&lt;/center&gt;

&lt;&lt;if !($locationEvents.bedroom ?? false)&gt;&gt;
	&lt;&lt;if timeBetween(&#39;20:00&#39;, &#39;23:00&#39;) &amp;&amp; setup.percentageChance(10)&gt;&gt;
		&lt;&lt;set _hornyGuests = setup.getHornyPersons($guests)&gt;&gt;
		&lt;&lt;if (_hornyGuests[0] ?? false)&gt;&gt;
			&lt;&lt;set $guestId = _hornyGuests[0][Math.floor(Math.random()*_hornyGuests[0].length)]&gt;&gt;
			&lt;&lt;set $locationEvents.bedroom = true&gt;&gt;
			&lt;&lt;goto &#39;Bedroom: horny guest&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="20" name="Bedroom-sleep" tags="autosave" position="1083,396" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;&lt;if $game.day &gt; 5 &amp;&amp; !($game.location.basement ?? false)&gt;&gt;
	&lt;&lt;goto &#39;Basement find&#39;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;center&gt;
	&lt;&lt;if $player.horny &gt;= 40&gt;&gt;
		&lt;&lt;actionDream&gt;&gt;
	  	&lt;br /&gt;&lt;br /&gt;
	  	You went to bed horny and dream about fucking another girl.
	&lt;&lt;else&gt;&gt;
	  [img[setup.ImagePath+&#39;places/cabin/wake_up.webp&#39;]]
	  &lt;br /&gt;&lt;br /&gt;
	  You wake up tired and exhausted but ready to explore the world some more.
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $morningMessages.main.length &gt; 0 || $morningMessages.shop.length &gt; 0&gt;&gt;
		&lt;h3&gt;Some things have been happened&lt;/h3&gt;
		&lt;br /&gt;
		&lt;&lt;for _morningMessageType, _morningMessages range ($morningMessages ?? {})&gt;&gt;
			&lt;&lt;if _morningMessages.length&gt;&gt;
			  &lt;div @class=&quot;&#39;morning-messages &#39; + _morningMessagesType + &#39;&#39;&quot;&gt;
			  	&lt;fieldset&gt;
					&lt;legend&gt;&lt;&lt;=_morningMessageType&gt;&gt; (&lt;&lt;=_morningMessages.length&gt;&gt;)&lt;/legend&gt;
				  &lt;&lt;for _i to 0; _i lt _morningMessages.length; _i++&gt;&gt;
					  &lt;div class=&quot;morning-message&quot;&gt;
						  &lt;&lt;print _morningMessages[_i]&gt;&gt;
					  &lt;/div&gt;
				  &lt;&lt;/for&gt;&gt;
				&lt;/fieldset&gt;
			  &lt;/div&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Wake up&#39;&gt;&gt;
		&lt;&lt;set _randomSleepEventInteger = randomInteger(0,2)&gt;&gt;		
		&lt;&lt;if ($characters.blair.quests ?? false) &amp;&amp; $characters.blair.quests.missing_friend_found_finished_thanked &amp;&amp; !$characters.blair.quests.bj &amp;&amp; _randomSleepEventInteger === 0&gt;&gt;
			&lt;&lt;goto &#39;Blair quest - morning bj&#39;&gt;&gt;
			&lt;&lt;set $characters.blair.quests.bj = true&gt;&gt;
		&lt;&lt;elseif $pregnancyHappening&gt;&gt;
			&lt;&lt;goto &#39;Childbirth&#39;&gt;&gt;
		&lt;&lt;elseif $scavengingDidntReturn !== null&gt;&gt;
			&lt;&lt;goto &#39;Scavenging - didnt came home&#39;&gt;&gt;
		&lt;&lt;elseif setup.getRandomPersonIdsGirls($guests, 1) &amp;&amp; ($characters.blair.quests ?? false) &amp;&amp; $characters.blair.relationship &gt; 70 &amp;&amp; setup.percentageChance(5)&gt;&gt;
			&lt;&lt;goto &#39;Blair - morning surprise&#39;&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;/center&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="21" name="Dead" tags="" position="1355,17" size="100,100">&lt;center&gt;
	[img[setup.ImagePath+&#39;game/misc/death.png&#39;]]
	&lt;br /&gt;&lt;br /&gt;
	Died because of &lt;strong&gt;&lt;&lt;print $game.death_reason&gt;&gt;&lt;/strong&gt;
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="22" name="Outside" tags="Place" position="1191,630" size="200,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;div class=&quot;menu-grid&quot;&gt;
	&lt;&lt;set _cabinName = $game.cabinName ?? &#39;Cabin&#39;&gt;&gt;
	&lt;&lt;set _cabinImg = $game.cabinName ? &#39;gate&#39; : &#39;cabin&#39;&gt;&gt;
  &lt;&lt;grid outside &#96;_cabinImg&#96; &#39;Wood cabin&#39; &#96;_cabinName&#96;&gt;&gt;
  &lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;20:00&#39;) ? 60 : 6)&gt;&gt;
  &lt;&lt;grid outside explore Explore Explore 30 $isDisabled&gt;&gt;
  &lt;&lt;if ($game.location.forest ?? false)&gt;&gt;
      &lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;20:00&#39;) ? 30 : 1)&gt;&gt;
	  &lt;&lt;grid outside forest Forest Forest 30 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.farm ?? false)&gt;&gt;
  	&lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;17:00&#39;) ? 30 : 1)&gt;&gt;
    &lt;&lt;grid outside farm Farm Farm 0 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.underground ?? false)&gt;&gt;
  	&lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;22:00&#39;) ? 30 : 4)&gt;&gt;
    &lt;&lt;grid outside underground &#39;Underground city&#39; &#39;Underground city&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.settlement ?? false)&gt;&gt;
  	&lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;18:00&#39;) ? 30 : 4)&gt;&gt;
    &lt;&lt;grid outside settlement &#39;Settlement&#39; &#39;Settlement&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="23" name="Explore" tags="Place" position="1809,629" size="200,100">&lt;&lt;set $randomNumber to Math.floor(Math.random() * 100) + 1&gt;&gt;
&lt;&lt;run console.log(&#39;Explore&#39;, $randomNumber)&gt;&gt;
&lt;&lt;energy -60&gt;&gt;
&lt;&lt;if (!$game.location.forest)&gt;&gt;
	&lt;&lt;goto &quot;Explore forest first time&quot;&gt;&gt;
&lt;&lt;elseif (!$game.location.farm)&gt;&gt;
	&lt;&lt;goto &quot;Explore farm first time&quot;&gt;&gt;
&lt;&lt;elseif ($game.day &gt; 5 &amp;&amp; !$game.location.workbench &amp;&amp; $randomNumber &lt;= 50)&gt;&gt;
	&lt;&lt;goto &quot;Explore workbench&quot;&gt;&gt;
&lt;&lt;elseif $game.day &gt;= 200 &amp;&amp; !isMetChar(&#39;laura&#39;)&gt;&gt;
	&lt;&lt;goto &#39;Laura - toxic rain&#39;&gt;&gt;
&lt;&lt;elseif ($game.day &gt; 6 &amp;&amp; $randomNumber &lt;= 25)&gt;&gt;
    &lt;&lt;goto &quot;Random event - meet girl #3&quot;&gt;&gt;
&lt;&lt;elseif ($game.day &gt; 4 &amp;&amp; $randomNumber &lt;= 35)&gt;&gt;
	&lt;&lt;goto &quot;Random event - ambush #2&quot;&gt;&gt;
&lt;&lt;elseif ($game.day &gt; 10 &amp;&amp; !$randomNumber &lt;= 40 &amp;&amp; !$backpack.has(&#39;blueprint_hot_shower&#39;))&gt;&gt;
	&lt;&lt;goto &quot;Random event - find hot shower blueprint #7&quot;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 38&gt;&gt;
	&lt;&lt;goto &#39;Random event #15 ammo box&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 40&gt;&gt;
	&lt;&lt;goto &#39;Explore event: The Lost Child&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 41&gt;&gt;
	&lt;&lt;goto &#39;Explore event: The Elderly Refugee&#39;&gt;&gt;
&lt;&lt;elseif ($randomNumber &lt;= 42)&gt;&gt;
    &lt;&lt;goto &quot;Random event - quicksand #4&quot;&gt;&gt;
&lt;&lt;elseif ($randomNumber &lt;= 45)&gt;&gt;
	&lt;&lt;goto &#39;Random event - bikes #14&#39;&gt;&gt;
&lt;&lt;elseif ($randomNumber &lt; 52)&gt;&gt;
	&lt;&lt;goto &#39;Explore event: wolves&#39;&gt;&gt;
&lt;&lt;elseif ($randomNumber &lt;= 55)&gt;&gt;
    &lt;&lt;goto &quot;Random event - dead guy #1&quot;&gt;&gt;
&lt;&lt;elseif ($randomNumber &lt;= 60)&gt;&gt;
    &lt;&lt;goto &quot;Random event - teacher #6&quot;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 65&gt;&gt;
	&lt;&lt;goto &quot;Random event - dig grave #12&quot;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 68&gt;&gt;
	&lt;&lt;goto &#39;Explore event: The Dying Elderly Survivor&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 69 &amp;&amp; Object.keys($player.companions ?? {}).length &gt; 0&gt;&gt;
	&lt;&lt;goto &#39;Explore event: toxic waste&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 70&gt;&gt;
	&lt;&lt;goto &#39;Explore event: The Enslaved Settlement&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 71&gt;&gt;
	&lt;&lt;goto &#39;Explore event: mysterious illness settlement&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 72&gt;&gt;
	&lt;&lt;goto &#39;Explore event: Waterfall&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 73&gt;&gt;
	&lt;&lt;goto &#39;Explore event: Old couple&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 74&gt;&gt;
	&lt;&lt;goto &quot;Random event - food #8&quot;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 75&gt;&gt;
	&lt;&lt;goto &#39;Explore event: Tits bar&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 76&gt;&gt;
	&lt;&lt;goto &quot;Random event - solar panel #5&quot;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 77&gt;&gt;
	&lt;&lt;goto &#39;Explore event: Abandoned mall&#39;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 88&gt;&gt;
	&lt;&lt;goto &quot;Random event - no face #10&quot;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 93&gt;&gt;
	&lt;&lt;run console.log(&#39;#1&#39;)&gt;&gt;
	&lt;&lt;goto &quot;Random event - hospital #13&quot;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 98&gt;&gt;
	&lt;&lt;run console.log(&#39;#2&#39;)&gt;&gt;
	&lt;&lt;goto &quot;Random event - beak humans #11&quot;&gt;&gt;
&lt;&lt;elseif $randomNumber &lt;= 100&gt;&gt;
	&lt;&lt;run console.log(&#39;#3&#39;)&gt;&gt;
	&lt;&lt;goto &quot;Random event - wood #9&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/forest_walk.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You found nothing wondering around
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[[Back|Outside]]
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="24" name="Explore forest first time" tags="" position="1922,748" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $game.location.forest to true&gt;&gt;
&lt;center&gt;[img[setup.ImagePath+&#39;places/forest/walk_pov.webp&#39;]]&lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
You notice a few good trails you&#39;ll need to check out later. As you walk around you manage to collect &lt;strong class=&quot;iitem&quot;&gt;2 pieces of wood&lt;/strong&gt;. Maybe you&#39;ll get lucky and find some berries or more wood next time.
&lt;&lt;pickup $backpack &#39;wood&#39; 2&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[[Back|Outside]]
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="25" name="Forest" tags="Place" position="1811,749" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
	&lt;table id=&quot;slaves&quot;&gt;
	&lt;&lt;for _guestI, _guest range $guests&gt;&gt;
		&lt;&lt;capture _guestI, _guest&gt;&gt;
			&lt;&lt;if _guest.assignedTo !== &#39;forest&#39; || !timeBetween(&#39;08:00&#39;, &#39;18:00&#39;) || typeof _guest.sick !== &#39;undefined&#39;&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;		
			&lt;tr&gt;
				&lt;td style=&quot;width: 300px&quot;&gt;
					&lt;&lt;if _guest.gender || setup.getAge(_guest) &lt; 17&gt;&gt;
						&lt;span class=&quot;name-no-click&quot;&gt;&lt;&lt;=_guest.name&gt;&gt;&lt;/span&gt;
					&lt;&lt;else&gt;&gt;
						&lt;&lt;link _guest.name&gt;&gt;
						  &lt;&lt;set $tmpGirl to _guest&gt;&gt;
						  &lt;&lt;set $tmpGirl.location = &#39;forest&#39;&gt;&gt;
						  &lt;&lt;set $tmpGirlBack = &#39;Forest&#39;&gt;&gt;
						  &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
						  &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
						  &lt;&lt;set $tmpGirlViewBack = &#39;Girl view - guest&#39; &gt;&gt;
						  &lt;&lt;set $guestId = _guestI&gt;&gt;
						  &lt;&lt;run delete $slaveId&gt;&gt;
						  &lt;&lt;goto &#39;Girl view - guest&#39;&gt;&gt;
					  	&lt;&lt;/link&gt;&gt;
						
						&lt;&lt;if _guest.pregnancy &gt;= 7&gt;&gt;
						  (pregnant &lt;&lt;=_guest.pregnancy&gt;&gt; days)
						&lt;&lt;/if&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;if !_guest.gender &amp;&amp; setup.getAge(_guest) &gt;= 17&gt;&gt;
						Beauty score: &lt;&lt;=_guest.beauty&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					Age: &lt;&lt;=setup.getAge(_guest)&gt;&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
&lt;&lt;if $player.energy &gt;= 40 &amp;&amp; hasTime(2)&gt;&gt;
  &lt;&lt;link &#39;Get wood&#39;&gt;&gt;
	  &lt;&lt;addhours 2&gt;&gt;
	  &lt;&lt;goto &#39;Forest-action-chop-wood&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.energy &gt;= 40 &amp;&amp; hasTime(1)&gt;&gt;
	&lt;&lt;link &#39;Pick up berries&#39;&gt;&gt;
		&lt;&lt;addhours 1&gt;&gt;
		&lt;&lt;goto &#39;Forest-action-berries&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $characters.vincent.quests.pregnancy_talked &amp;&amp; $player.energy &gt;= 30 &amp;&amp; hasTime(1)&gt;&gt;
	&lt;&lt;link &#39;Search for glowing mushrooms&#39;&gt;&gt;
		&lt;&lt;addhours 1&gt;&gt;
		&lt;&lt;goto &#39;Forest - mushrooms&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.energy &gt;= 20 &amp;&amp; hasTime(10) &amp;&amp; $backpack.has(&#39;bow&#39;)&gt;&gt;
	&lt;&lt;link &#39;Go hunt&#39;&gt;&gt;
    	&lt;&lt;if setup.percentageChance(70)&gt;&gt;
        		&lt;&lt;set _huntEnemy = &#39;deer&#39;&gt;&gt;
        &lt;&lt;else&gt;&gt;
        		&lt;&lt;set _huntEnemy = &#39;wolf&#39;&gt;&gt;
        &lt;&lt;/if&gt;&gt;
		&lt;&lt;energy -20&gt;&gt;
		&lt;&lt;addhours 10&gt;&gt;
		&lt;&lt;shooterGame null _huntEnemy null &#39;Forest - hunt&#39; &#39;Forest - hunt&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Back|Outside]]
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="26" name="Forest-action-chop-wood" tags="" position="2044,747" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;

&lt;&lt;if $backpack.has(&#39;axe&#39;)&gt;&gt;
	&lt;&lt;set _getWood = Math.min(Math.round(6 * ($player.strength / 10), 0), 30)&gt;&gt;
	&lt;&lt;set _getWood = Math.max(_getWood, 6)&gt;&gt;
    &lt;&lt;energy -40&gt;&gt;
	&lt;&lt;pickup $backpack &quot;wood&quot; _getWood&gt;&gt;
 &lt;center&gt;[img[setup.ImagePath+&#39;places/forest/chop_wood&#39;+ Math.floor(Math.random() * 2)+&#39;.webp&#39;]]&lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
 &lt;strong&gt;You managed to get &lt;&lt;=_getWood&gt;&gt; wood because you used axe.&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set _getWood = Math.min(Math.round(2 * ($player.strength / 10), 0), 10)&gt;&gt;
	&lt;&lt;set _getWood = Math.max(_getWood, 2)&gt;&gt;
	&lt;&lt;energy -40&gt;&gt;
	&lt;&lt;pickup $backpack &quot;wood&quot; _getWood&gt;&gt;
 &lt;center&gt;[img[setup.ImagePath+&#39;places/forest/get_branches.webp&#39;]]&lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
 &lt;strong&gt;You managed to get &lt;&lt;=_getWood&gt;&gt; wood.&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Outside]]

&lt;&lt;addmins 180&gt;&gt;</tw-passagedata><tw-passagedata pid="27" name="Widget - grid " tags="widget" position="23,748" size="100,100">&lt;&lt;widget grid&gt;&gt;

&lt;div class=&quot;menu-col&quot;&gt; 
	&lt;&lt;if (($args[4] &amp;&amp; $args[4] &gt; 0 &amp;&amp; $player.energy &lt; $args[4]) || (typeof $args[5] !== &#39;undefined&#39; &amp;&amp; !hasTime($args[5]))) &amp;&amp; (typeof $args[6] === &#39;undefined&#39; &amp;&amp; $args[5] &gt; 24)&gt;&gt;
		&lt;div class=&quot;menucont no-energy&quot;&gt;
  			[img[setup.ImagePath+&#39;places/&#39;+$args[0]+&#39;/&#39;+$args[1]+&#39;.jpg&#39;]]
	  		&lt;span class=&quot;o-text&quot;&gt;$args[3]&lt;/span&gt; 
		&lt;/div&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;if typeof $charactersInLocation[$args[1]] !== &#39;undefined&#39;&gt;&gt;
			&lt;div class=&quot;grid-chars&quot;&gt;
			  &lt;&lt;for _i to 0; _i lt $charactersInLocation[$args[1]].length; _i++&gt;&gt;
					[img[setup.ImagePath + $game.avatars[$charactersInLocation[$args[1]][_i]]]]	
			  &lt;&lt;/for&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/if&gt;&gt;
	  &lt;&lt;link &#39;&lt;div class=&quot;menucont&quot;&gt;[img[setup.ImagePath+&quot;places/&quot;+$args[0]+&quot;/&quot;+$args[1]+&quot;.jpg&quot;]]&lt;span class=&quot;o-text&quot;&gt;$args[3]&lt;/span&gt;&lt;/div&gt;&#39;&gt;&gt;
	  	&lt;&lt;if $args[5]&gt;&gt;
			&lt;&lt;if ($player.horse ?? false) &amp;&amp; $args[0] !== &#39;cabin&#39;&gt;&gt;
				&lt;&lt;set $args[5] = $args[5] / 2&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $args[0] === &#39;cabin&#39;&gt;&gt;
				&lt;&lt;set $args[5] = $args[5] / 6&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $args[5] &lt; 1&gt;&gt;
				&lt;&lt;set _travelMins = ($args[5] * 60)&gt;&gt;
				&lt;&lt;addmins &#96;_travelMins&#96;&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;addhours $args[5]&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if typeof setup.randomEvents[&#39;travel&#39;][$args[2]] !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;for _randomEventI, _randomEvent range setup.randomEvents[&#39;travel&#39;][$args[2]]&gt;&gt;
				&lt;&lt;if _randomEvent.enabled &amp;&amp; setup.percentageChance(_randomEvent.percentage)&gt;&gt;
					&lt;&lt;set _randomTravelEvent = _randomEvent.passage&gt;&gt;
					&lt;&lt;break&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/for&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;if _randomTravelEvent&gt;&gt;
			&lt;&lt;goto &#96;_randomTravelEvent&#96;&gt;&gt;
		&lt;&lt;else&gt;&gt;
	  		&lt;&lt;goto $args[2]&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
  &lt;/div&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="28" name="Kitchen-room" tags="Place" position="1204,521" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/kitchen_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _girlGuest = setup.getPersonsForLocation($guests, &#39;kitchen&#39;)&gt;&gt;
&lt;&lt;if _girlGuest.length &gt; 0 &amp;&amp; timeBetween(&#39;08:00&#39;, &#39;22:00&#39;)&gt;&gt;
	&lt;&lt;set _isKitchenGirlAssigned = true&gt;&gt;
	&lt;&lt;if $player.hunger &lt;= 50 &amp;&amp; $backpack.has(&#39;food&#39;)&gt;&gt;
		&lt;&lt;set $player.hunger = 100&gt;&gt;
		&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt;
		&lt;&lt;updatemeter &#39;$hungerBar&#39; &#96;$player.hunger / $player.maxHunger&#96;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $tmpGirl = $guests[_girlGuest[0]]&gt;&gt;
	&lt;&lt;set $tmpGirl.location = &#39;kitchen&#39;&gt;&gt;
	&lt;center&gt;
		&lt;&lt;actionImage $tmpGirl cooking&gt;&gt;
	&lt;/center&gt; 
	&lt;&lt;=$tmpGirl.name&gt;&gt; is cooking in the kitchen. She notices you and gives you a warm smile&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set _girlGuestLink = &#39;Approach &#39; + $tmpGirl.name&gt;&gt;
	&lt;&lt;link &#96;_girlGuestLink&#96;&gt;&gt;
		&lt;&lt;set $tmpGirlViewBack = &#39;Girl view - guest&#39;&gt;&gt;
		&lt;&lt;set $tmpGirlBack = &#39;Kitchen-room&#39;&gt;&gt;
		&lt;&lt;set $tmpGirlCapture to false&gt;&gt; 
		&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
		&lt;&lt;set $guestId = _girlGuest[0]&gt;&gt;
		&lt;&lt;run delete $slaveId&gt;&gt;
		&lt;&lt;run delete $charId&gt;&gt;
		&lt;&lt;goto &#39;Girl view - guest&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $backpack.has(&#39;food&#39;) &amp;&amp; (hasTime(0, 30) || $player.hunger != $player.maxHunger)&gt;&gt;
  &lt;&lt;link &quot;Eat&quot;&gt;&gt;
	  &lt;&lt;set $player.hunger to 100&gt;&gt;
	  &lt;&lt;addmins 30&gt;&gt;
	  &lt;&lt;updatemeter &#39;$hungerBar&#39; &#96;$player.hunger / $player.maxHunger&#96;&gt;&gt;
	  &lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt;
	  &lt;&lt;goto &#39;Kitchen-room&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $charactersInLocation[&#39;kitchen&#39;].includes(&#39;blair&#39;)&gt;&gt;
	&lt;&lt;link &#39;Talk with Blair&#39;&gt;&gt;
		&lt;&lt;goto &#39;Blair - kitchen talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Back|Wood cabin]]


&lt;&lt;if !($locationEvents.kitchen ?? false)&gt;&gt;
	&lt;&lt;if _isKitchenGirlAssigned &amp;&amp; setup.percentageChance(5)&gt;&gt;
		&lt;&lt;set $locationEvents.kitchen = true&gt;&gt;
		&lt;&lt;set $guestId = _girlGuest[0]&gt;&gt;
		&lt;&lt;goto &#39;Event: Kitchen stuck&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="29" name="PassageReady" tags="" position="671,12" size="100,100">&lt;&lt;set $suppCode = &#39;Patreon0.22&#39;&gt;&gt;
&lt;&lt;if $player.energy &gt; $player.maxEnergy&gt;&gt;
	&lt;&lt;set $player.energy = $player.maxEnergy&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $player.hunger &gt; $player.maxHunger&gt;&gt;
	&lt;&lt;set $player.hunger = $player.maxHunger&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;updatemeter &#39;$energyBar&#39; &#96;$player.energy / $player.maxEnergy&#96;&gt;&gt;
&lt;&lt;updatemeter &#39;$hungerBar&#39; &#96;$player.hunger / $player.maxHunger&#96;&gt;&gt;
&lt;&lt;updatemeter &#39;$hornyBar&#39; &#96;$player.horny / 100&#96;&gt;&gt;
  
&lt;&lt;include &quot;actionText&quot;&gt;&gt;

&lt;&lt;set $charactersInLocation = {
	kitchen: [],
	bedroom: [],
	church: [],
	farm: []
}&gt;&gt;
&lt;&lt;set 
	$game.avatars = {},
	$game.avatars.blair = &#39;people/blair/avatar.png&#39;
	$game.avatars.rodger = &#39;people/rodger/avatar.png&#39;
&gt;&gt;

&lt;&lt;if isMetChar(&#39;blair&#39;) &amp;&amp; $characters.blair.quests.cabinType &gt; 0&gt;&gt;
  &lt;&lt;if timeBetween(&#39;08:00&#39;, &#39;09:00&#39;)&gt;&gt;
	  &lt;&lt;run $charactersInLocation[&#39;kitchen&#39;].push(&#39;blair&#39;)&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if timeBetween(&#39;22:00&#39;, &#39;08:00&#39;)&gt;&gt;
	  &lt;&lt;run $charactersInLocation[&#39;bedroom&#39;].push(&#39;blair&#39;)&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  
  &lt;&lt;if timeBetween(&#39;12:00&#39;, &#39;14:00&#39;)&gt;&gt;
	  &lt;&lt;run $charactersInLocation[&#39;farm&#39;].push(&#39;blair&#39;)&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  
&lt;&lt;/if&gt;&gt;

&lt;&lt;if isMetChar(&#39;rodger&#39;)&gt;&gt;
	&lt;&lt;run $charactersInLocation[&#39;church&#39;].push(&#39;rodger&#39;)&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if isMetChar(&#39;blair&#39;) &amp;&amp; !$game.debugBlair&gt;&gt;
	&lt;&lt;set $game.debugBlair = $characters.blair.quests.metOnDay&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $game.debugBlair &amp;&amp; (typeof $characters.blair.quests === &#39;undefined&#39; || typeof $characters.blair.quests.metOnDay === &#39;undefined&#39; || $game.debugBlair !== $characters.blair.quests.metOnDay)&gt;&gt;
	&lt;&lt;script&gt;&gt;
		Dialog.setup(&quot;Blair bug warning&quot;, &quot;Blair bug warning&quot;);
		Dialog.wiki(Story.get(&quot;Blair bug warning&quot;).processText());
		Dialog.open();
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="30" name="Explore farm first time" tags="" position="2051,635" size="100,100">&lt;&lt;pickup $backpack &#39;food&#39; 2&gt;&gt;
&lt;&lt;set $game.location.farm to true&gt;&gt;

You decide to take a shortcut from your cabin toward the east to save some time. As you walk through bushes you start to hate yourself for taking this path but soon enough you notice a rusty cage next to some house that looks like a small farm. You hear some noise and decide to quietly get closer and investigate where it&#39;s coming from. 
&lt;br /&gt;
You slowly walk around the cage when suddenly..
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/explore/farm/found_farm1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;&lt;b&gt;WHAT THE FUCK!?&lt;/b&gt;&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You try to speak with her but she doesn&#39;t respond to your words and just groans and screams at you.
&lt;br /&gt;
You look around but don&#39;t see anyone.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.count(&#39;food&#39;) &gt;= 2&gt;&gt;
  &lt;&lt;link &#39;Give her some food (-2)&#39;&gt;&gt;
	  &lt;&lt;drop $backpack &#39;food&#39; 2&gt;&gt;
	  &lt;&lt;goto &#39;Explore farm first time 1.2&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Leave here alone|Explore farm first time 2]]</tw-passagedata><tw-passagedata pid="31" name="Widget - video" tags="widget" position="134,757" size="100,100">&lt;&lt;widget video&gt;&gt;
	&lt;&lt;set _extension = ($args[1] ?? &#39;mp4&#39;)&gt;&gt;
	&lt;&lt;set _videoType = &#39;video/&#39; + _extension&gt;&gt;
	&lt;&lt;set $url to setup.videoPath+&#39;/&#39;+$args[0]+&#39;.&#39; + _extension&gt;&gt;
	&lt;video controls autoplay loop onloadstart=&quot;this.volume=0.0&quot;&gt;
  		&lt;source @src=&quot;$url&quot;&gt;
	&lt;/video&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="32" name="Explore farm first time 1.2" tags="" position="2048,515" size="100,100">&lt;center&gt;
You take food from your bag and throw it inside the cage as you look around again in case there&#39;s any other living soul around.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/explore/farm/found_farm2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Open cage|Explore farm first time 1.3]]
[[Leave her|Explore farm first time 2]]
&lt;/center&gt;</tw-passagedata><tw-passagedata pid="33" name="Explore farm first time 2" tags="" position="2039,95" size="100,100">An old man walks out of his farmhouse and points a rifle at you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;What the fuck are you doing on my property?&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;Don&#39;t shoot! I was just looking around! I&#39;m no threat to you.&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Go inside|Farm]]</tw-passagedata><tw-passagedata pid="34" name="Explore farm first time 1.3" tags="" position="2046,409" size="100,100">&lt;center&gt;
&lt;&lt;video &#39;/explore/farm/found_farm3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You slowly take a step further and get inside the cage, but the girl ignores you as she&#39; s more focused on the food you just threw in. Carefully you inspect her and one thing that instantly shocks you is the horrific smell coming from her like she hasn&#39;t showered in ages.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/explore/farm/found_farm4&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You see her pussy. Damn, you can&#39;t even remember the last time you saw one. It&#39;s been years. You decide to crouch down and inspect it a little closer.
&lt;br /&gt;&lt;br /&gt;
[[Put the rope around her neck|Explore farm first time 1.4]]
[[Leave her|Explore farm first time 2]]

&lt;/center&gt;</tw-passagedata><tw-passagedata pid="35" name="Explore farm first time 1.4" tags="" position="2043,308" size="100,100">&lt;&lt;set $characters.rose.intro_fucked to true&gt;&gt;
&lt;&lt;horny 20&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
You turn around and notice a rope hanging on the hook. You put it around her neck and as soon as you do she starts to resist like someone has already done that to her before. She tries to bite you but you manage to grab her by hair and hold her off.
&lt;&lt;video &#39;/explore/farm/found_farm5&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Somehow your pants manage to slip down as she tries to bite you but instead of continuing to attack, her mood changes and she starts licking your dirty cock. After a few good licks she takes it fully into her mouth
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;video &#39;/explore/farm/found_farm6&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You gasp as she sucks you off. That feeling... Even if her mouth hasn&#39;t been washed in a long time, it still feels pretty good. You still hold her hair just to be sure you can tame her if she decides to attack you again. It&#39;s also a good way to force your dick inside her mouth even deeper. You remember how her pussy looked. You could try it..
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/explore/farm/found_farm7&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Turn her around|Explore farm first time 1.5]]
[[Leave her|Explore farm first time 2]]

&lt;/center&gt;</tw-passagedata><tw-passagedata pid="36" name="Explore farm first time 1.5" tags="" position="2040,204" size="100,100">An old man comes out of the farm house with a shotgun in his hand aimed right at you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;&lt;strong&gt;GET THE FUCK OFF OF HER!  EITHER STEP BACK OR GET DROPPED TO THE GROUND DEAD!&lt;/strong&gt;&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You look at him, then back at the girl&#39;s pussy you&#39;re ready to fuck.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
&lt;&lt;link &#39;Fuck her&#39;&gt;&gt;
	&lt;&lt;set $game.death_reason to &#39;hole in your skull&#39;&gt;&gt;
	&lt;&lt;goto [[Dead]]&gt;&gt;
&lt;&lt;/link&gt;&gt;
[[Leave|Wood cabin]]
&lt;/center&gt;
</tw-passagedata><tw-passagedata pid="37" name="Farm" tags="Place bg-farm" position="1821,903" size="100,100">&lt;&lt;if (typeof $characters.vincent.relationship === &#39;undefined&#39;)&gt;&gt;
	&lt;&lt;set $characters.vincent.relationship = 15&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;&lt;if $characters.vincent.relationship &gt;= 15 &amp;&amp; !isMetChar(&#39;blair&#39;)&gt;&gt;
	&lt;&lt;goto &#39;Farm - meet Blair&#39;&gt;&gt;
&lt;&lt;elseif isMetChar(&#39;blair&#39;) &amp;&amp; $characters.blair.quests.bj &amp;&amp; ($characters.blair.quests.bj_day + 3) &lt; $game.day &amp;&amp; !$characters.vincent.quests.new_settlement&gt;&gt;
	&lt;&lt;set $characters.vincent.quests.new_settlement = true&gt;&gt;
	&lt;&lt;goto &#39;Vincent quest - settlement start&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if (!$game.location.slave_market &amp;&amp; isMetChar(&#39;blair&#39;))&gt;&gt;
	&lt;&lt;set $game.location.slave_market = true&gt;&gt;
	&lt;&lt;goto &#39;Farm - slave market&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$characters.vincent.first_time&gt;&gt;
&lt;&lt;vincent&gt;&gt;Hey!  It&#39;s you from the other day.  Keep your hands off my girls or I&#39;ll shoot you.  What do you want?&lt;&lt;/vincent&gt;&gt;
	&lt;&lt;set $characters.vincent.first_time to true&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;vincent&gt;&gt;Hey! How can I help you?&lt;&lt;/vincent&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.money &gt;= 30 &amp;&amp; $characters.vincent.delivery_done &amp;&amp; !$backpack.has(&#39;breast_pump&#39;)&gt;&gt;
	&lt;&lt;link &#39;Buy pump milk&#39;&gt;&gt;
		&lt;&lt;set $characters.vincent.relationship+=5&gt;&gt;
		&lt;&lt;set $player.money -=30&gt;&gt;
		&lt;&lt;pickup $backpack &#39;breast_pump&#39; 1&gt;&gt;
		&lt;&lt;goto &#39;Farm&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif $game.day &gt;= 10 &amp;&amp; !$characters.vincent.delivery&gt;&gt;
	&lt;&lt;set $characters.vincent.relationship++&gt;&gt;
	&lt;&lt;link &#39;Talk&#39; &#39;Farm - quest delivery&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif $characters.vincent.delivery &amp;&amp; !$characters.vincent.delivery_done&gt;&gt;
	&lt;&lt;set $characters.vincent.relationship++&gt;&gt;
	&lt;&lt;link &#39;Talk&#39; &#39;Farm - quest delivery done&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif $characters.vincent.quests.new_settlement &amp;&amp; !($game.location.settlement ?? false) &amp;&amp; $characters.vincent.quests.new_settlement_day &lt; $game.day &amp;&amp; $backpack.count(&#39;wood&#39;) &gt;= 100 &amp;&amp; $backpack.count(&#39;solar_panel&#39;) &gt;= 5&gt;&gt;
	&lt;&lt;link &#39;Talk&#39; &#39;Settlement - intro&#39;&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif $game.day &gt; 5 &amp;&amp; !$characters.vincent.talked_about_girl&gt;&gt;
	&lt;&lt;set $characters.vincent.relationship++&gt;&gt;
	&lt;&lt;link &#39;Talk about girl&#39; &#39;Farm - talk about girl&#39;&gt;&gt;
		&lt;&lt;set $characters.vincent.talked_about_girl = true&gt;&gt;
		&lt;&lt;set $characters.vincent.can_use_girl = true&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif ($game.location.streets ?? false) &amp;&amp; !$characters.vincent.wanted_poster&gt;&gt;
	&lt;&lt;link &#39;Talk about wanted poster&#39; &#39;Farm - wanted poster&#39;&gt;&gt;
		&lt;&lt;set $characters.vincent.wanted_poster = true&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif $characters.vincent.quests.pregnancy &amp;&amp; !$characters.vincent.quests.pregnancy_talked&gt;&gt;
	&lt;&lt;link &#39;Talk about pregnant slave&#39;&gt;&gt;
		&lt;&lt;set $characters.vincent.quests.pregnancy_talked = true&gt;&gt;
		&lt;&lt;goto &#39;Vincent quest - pregnancy&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif !$characters.vincent.quests.car_talk &amp;&amp; $game.cabinName&gt;&gt;
	&lt;&lt;link &#39;Talk&#39;&gt;&gt;
		&lt;&lt;set $characters.vincent.quests.car_talk = true&gt;&gt;
		&lt;&lt;goto &#39;Vincent - car talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif $game.day &gt;= 150 &amp;&amp; $characters.blair.relationship &gt;= 90 &amp;&amp; !$characters.vincent.quests.wedding_talk&gt;&gt;
	&lt;&lt;set $characters.vincent.quests.wedding_talk = true&gt;&gt;
	&lt;&lt;goto &#39;Vincent - wedding ring&#39;&gt;&gt;
&lt;&lt;elseif $game.day &gt;= 160 &amp;&amp; $characters.vincent.quests.wedding_talk &amp;&amp; !$characters.vincent.quests.sanctuary_talk &amp;&amp; ($characters.vincent.quests.wedding_talk_day + 10) &lt;= $game.day&gt;&gt;
	&lt;&lt;set $characters.vincent.quests.sanctuary_talk = true&gt;&gt;
	&lt;&lt;goto &#39;Vincent - sanctuary talk&#39;&gt;&gt;
&lt;&lt;elseif $characters.vincent.quests.sanctuary_talk &amp;&amp; !$characters.vincent.quests.sanctuary_done&gt;&gt;
	&lt;&lt;link &#39;Tell Vincent you are ready&#39;&gt;&gt;
		&lt;&lt;goto &#39;Vincent - sanctuary check companions&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;elseif !($game.location.shop ?? false) &amp;&amp; $characters.vincent.quests.sanctuary_done &amp;&amp; !$characters.vincent.quests.shop_talk&gt;&gt;
	&lt;&lt;link &#39;Talk with Vincent&#39;&gt;&gt;
		&lt;&lt;set $characters.vincent.quests.shop_talk = true&gt;&gt;
		&lt;&lt;goto &#39;Vincent - shop talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;


[[Shop|Farm - shop]]
&lt;&lt;if $characters.vincent.can_use_girl &amp;&amp; $player.energy &gt; 30 &amp;&amp; $player.money &gt;=3&gt;&gt;
	&lt;&lt;link &#39;Use girl&#39; &#39;Farm - use girl&#39;&gt;&gt;
		&lt;&lt;set $characters.vincent.girl_fucked_times++&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;


&lt;&lt;if isMetChar(&#39;blair&#39;) &amp;&amp; $characters.blair.quests.cabinType === 1 &amp;&amp; $characters.blair.quests.sex&gt;&gt;
  &lt;&lt;if timeBetween(&#39;12:00&#39;, &#39;14:00&#39;)&gt;&gt;
	  &lt;&lt;link &#39;Go to barn&#39;&gt;&gt;
	  	&lt;&lt;goto &#39;Farm - blair barn&#39;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  
&lt;&lt;/if&gt;&gt;

[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="38" name="Widget new girl/guy" tags="widget" position="22,862" size="100,100">&lt;&lt;widget newgirl&gt;&gt;
&lt;&lt;set _age = random(18, 60)&gt;&gt;
&lt;&lt;set $tmpGirl = {
	name: either(&quot;Alise&quot;, &quot;Mel&quot;, &quot;Diana&quot;,&quot;Emily&quot;,&quot;Hannah&quot;,&quot;Madison&quot;,&quot;Ashley&quot;,&quot;Sarah&quot;,&quot;Alexis&quot;,&quot;Samantha&quot;,&quot;Jessica&quot;,&quot;Elizabeth&quot;,&quot;Taylor&quot;,&quot;Lauren&quot;,&quot;Alyssa&quot;,&quot;Kayla&quot;,&quot;Abigail&quot;,&quot;Brianna&quot;,&quot;Olivia&quot;,&quot;Emma&quot;,&quot;Megan&quot;,&quot;Grace&quot;,&quot;Victoria&quot;,&quot;Rachel&quot;,&quot;Anna&quot;,&quot;Sydney&quot;,&quot;Destiny&quot;,&quot;Morgan&quot;,&quot;Jennifer&quot;,&quot;Jasmine&quot;,&quot;Haley&quot;,&quot;Julia&quot;,&quot;Kaitlyn&quot;,&quot;Nicole&quot;,&quot;Amanda&quot;,&quot;Katherine&quot;,&quot;Natalie&quot;,&quot;Hailey&quot;,&quot;Alexandra&quot;,&quot;Savannah&quot;,&quot;Chloe&quot;,&quot;Rebecca&quot;,&quot;Stephanie&quot;,&quot;Maria&quot;,&quot;Sophia&quot;,&quot;Mackenzie&quot;,&quot;Allison&quot;,&quot;Isabella&quot;,&quot;Amber&quot;,&quot;Mary&quot;,&quot;Danielle&quot;,&quot;Gabrielle&quot;,&quot;Jordan&quot;,&quot;Brooke&quot;,&quot;Michelle&quot;,&quot;Sierra&quot;,&quot;Katelyn&quot;,&quot;Andrea&quot;,&quot;Madeline&quot;,&quot;Sara&quot;,&quot;Kimberly&quot;,&quot;Courtney&quot;,&quot;Erin&quot;,&quot;Brittany&quot;,&quot;Vanessa&quot;,&quot;Jenna&quot;,&quot;Jacqueline&quot;,&quot;Caroline&quot;,&quot;Faith&quot;,&quot;Makayla&quot;,&quot;Bailey&quot;,&quot;Paige&quot;,&quot;Shelby&quot;,&quot;Melissa&quot;,&quot;Kaylee&quot;,&quot;Christina&quot;,&quot;Trinity&quot;,&quot;Mariah&quot;,&quot;Caitlin&quot;,&quot;Autumn&quot;,&quot;Marissa&quot;,&quot;Breanna&quot;,&quot;Angela&quot;,&quot;Catherine&quot;,&quot;Zoe&quot;,&quot;Briana&quot;,&quot;Jada&quot;,&quot;Laura&quot;,&quot;Claire&quot;,&quot;Alexa&quot;,&quot;Kelsey&quot;,&quot;Kathryn&quot;,&quot;Leslie&quot;,&quot;Alexandria&quot;,&quot;Sabrina&quot;,&quot;Mia&quot;,&quot;Isabel&quot;,&quot;Molly&quot;,&quot;Leah&quot;,&quot;Katie&quot;,&quot;Gabriella&quot;,&quot;Cheyenne&quot;,&quot;Cassandra&quot;,&quot;Tiffany&quot;,&quot;Erica&quot;,&quot;Lindsey&quot;,&quot;Kylie&quot;,&quot;Amy&quot;,&quot;Diana&quot;,&quot;Cassidy&quot;,&quot;Mikayla&quot;,&quot;Ariana&quot;,&quot;Margaret&quot;,&quot;Kelly&quot;,&quot;Miranda&quot;,&quot;Maya&quot;,&quot;Melanie&quot;,&quot;Audrey&quot;,&quot;Jade&quot;,&quot;Gabriela&quot;,&quot;Caitlyn&quot;,&quot;Angel&quot;,&quot;Jillian&quot;,&quot;Alicia&quot;,&quot;Jocelyn&quot;,&quot;Erika&quot;,&quot;Lily&quot;,&quot;Heather&quot;,&quot;Madelyn&quot;,&quot;Adriana&quot;,&quot;Arianna&quot;,&quot;Lillian&quot;,&quot;Kiara&quot;,&quot;Riley&quot;,&quot;Crystal&quot;,&quot;Mckenzie&quot;,&quot;Meghan&quot;,&quot;Skylar&quot;,&quot;Ana&quot;,&quot;Britney&quot;,&quot;Angelica&quot;,&quot;Kennedy&quot;,&quot;Chelsea&quot;,&quot;Daisy&quot;,&quot;Kristen&quot;,&quot;Veronica&quot;,&quot;Isabelle&quot;,&quot;Summer&quot;,&quot;Hope&quot;,&quot;Brittney&quot;,&quot;Lydia&quot;,&quot;Hayley&quot;,&quot;Evelyn&quot;,&quot;Bethany&quot;,&quot;Shannon&quot;,&quot;Michaela&quot;,&quot;Karen&quot;,&quot;Jamie&quot;,&quot;Daniela&quot;,&quot;Angelina&quot;,&quot;Kaitlin&quot;,&quot;Karina&quot;,&quot;Sophie&quot;,&quot;Sofia&quot;,&quot;Diamond&quot;,&quot;Payton&quot;,&quot;Cynthia&quot;,&quot;Alexia&quot;,&quot;Valerie&quot;,&quot;Monica&quot;,&quot;Peyton&quot;,&quot;Carly&quot;,&quot;Bianca&quot;,&quot;Hanna&quot;,&quot;Brenda&quot;,&quot;Rebekah&quot;,&quot;Alejandra&quot;,&quot;Mya&quot;,&quot;Avery&quot;,&quot;Brooklyn&quot;,&quot;Ashlyn&quot;,&quot;Lindsay&quot;,&quot;Ava&quot;,&quot;Desiree&quot;,&quot;Alondra&quot;,&quot;Camryn&quot;,&quot;Ariel&quot;,&quot;Naomi&quot;,&quot;Jordyn&quot;,&quot;Kendra&quot;,&quot;Mckenna&quot;,&quot;Holly&quot;,&quot;Julie&quot;,&quot;Kendall&quot;,&quot;Kara&quot;,&quot;Jasmin&quot;,&quot;Selena&quot;,&quot;Esmeralda&quot;,&quot;Amaya&quot;,&quot;Kylee&quot;,&quot;Maggie&quot;,&quot;Makenzie&quot;,&quot;Claudia&quot;,&quot;Kyra&quot;,&quot;Cameron&quot;,&quot;Karla&quot;,&quot;Kathleen&quot;,&quot;Abby&quot;,&quot;Delaney&quot;,&quot;Amelia&quot;,&quot;Casey&quot;,&quot;Serena&quot;,&quot;Savanna&quot;,&quot;Aaliyah&quot;,&quot;Giselle&quot;,&quot;Mallory&quot;,&quot;April&quot;,&quot;Raven&quot;,&quot;Adrianna&quot;,&quot;Christine&quot;,&quot;Kristina&quot;,&quot;Nina&quot;,&quot;Asia&quot;,&quot;Natalia&quot;,&quot;Valeria&quot;,&quot;Aubrey&quot;,&quot;Lauryn&quot;,&quot;Kate&quot;,&quot;Patricia&quot;,&quot;Jazmin&quot;,&quot;Rachael&quot;,&quot;Katelynn&quot;,&quot;Cierra&quot;,&quot;Alison&quot;,&quot;Macy&quot;,&quot;Nancy&quot;,&quot;Elena&quot;,&quot;Kyla&quot;,&quot;Katrina&quot;,&quot;Jazmine&quot;,&quot;Joanna&quot;,&quot;Tara&quot;,&quot;Gianna&quot;,&quot;Juliana&quot;,&quot;Fatima&quot;,&quot;Allyson&quot;,&quot;Gracie&quot;,&quot;Sadie&quot;,&quot;Guadalupe&quot;,&quot;Genesis&quot;,&quot;Yesenia&quot;,&quot;Julianna&quot;,&quot;Skyler&quot;,&quot;Tatiana&quot;,&quot;Alexus&quot;,&quot;Alana&quot;,&quot;Elise&quot;,&quot;Kirsten&quot;,&quot;Nadia&quot;,&quot;Sandra&quot;,&quot;Dominique&quot;,&quot;Ruby&quot;,&quot;Haylee&quot;,&quot;Jayla&quot;,&quot;Tori&quot;,&quot;Cindy&quot;,&quot;Sidney&quot;,&quot;Ella&quot;,&quot;Tessa&quot;,&quot;Carolina&quot;,&quot;Camille&quot;,&quot;Jaqueline&quot;,&quot;Whitney&quot;,&quot;Carmen&quot;,&quot;Vivian&quot;,&quot;Priscilla&quot;,&quot;Bridget&quot;,&quot;Celeste&quot;,&quot;Kiana&quot;,&quot;Makenna&quot;,&quot;Alissa&quot;,&quot;Madeleine&quot;,&quot;Miriam&quot;,&quot;Natasha&quot;,&quot;Ciara&quot;,&quot;Cecilia&quot;,&quot;Mercedes&quot;,&quot;Kassandra&quot;,&quot;Reagan&quot;,&quot;Aliyah&quot;,&quot;Josephine&quot;,&quot;Charlotte&quot;,&quot;Rylee&quot;,&quot;Shania&quot;,&quot;Kira&quot;,&quot;Meredith&quot;,&quot;Eva&quot;,&quot;Lisa&quot;,&quot;Dakota&quot;,&quot;Hallie&quot;,&quot;Anne&quot;,&quot;Rose&quot;,&quot;Liliana&quot;,&quot;Kristin&quot;,&quot;Deanna&quot;,&quot;Imani&quot;,&quot;Marisa&quot;,&quot;Kailey&quot;,&quot;Annie&quot;,&quot;Nia&quot;,&quot;Carolyn&quot;,&quot;Anastasia&quot;,&quot;Brenna&quot;,&quot;Dana&quot;,&quot;Shayla&quot;,&quot;Ashlee&quot;,&quot;Kassidy&quot;,&quot;Alaina&quot;,&quot;Rosa&quot;,&quot;Wendy&quot;,&quot;Logan&quot;,&quot;Tabitha&quot;,&quot;Paola&quot;,&quot;Callie&quot;,&quot;Addison&quot;,&quot;Lucy&quot;,&quot;Gillian&quot;,&quot;Clarissa&quot;,&quot;Destinee&quot;,&quot;Josie&quot;,&quot;Esther&quot;,&quot;Denise&quot;,&quot;Katlyn&quot;,&quot;Mariana&quot;,&quot;Bryanna&quot;,&quot;Emilee&quot;,&quot;Georgia&quot;,&quot;Deja&quot;,&quot;Kamryn&quot;,&quot;Ashleigh&quot;,&quot;Cristina&quot;,&quot;Baylee&quot;,&quot;Heaven&quot;,&quot;Ruth&quot;,&quot;Raquel&quot;,&quot;Monique&quot;,&quot;Teresa&quot;,&quot;Helen&quot;,&quot;Krystal&quot;,&quot;Tiana&quot;,&quot;Cassie&quot;,&quot;Kayleigh&quot;,&quot;Marina&quot;,&quot;Heidi&quot;,&quot;Ivy&quot;,&quot;Ashton&quot;,&quot;Clara&quot;,&quot;Meagan&quot;,&quot;Gina&quot;,&quot;Linda&quot;,&quot;Gloria&quot;,&quot;Jacquelyn&quot;,&quot;Ellie&quot;,&quot;Jenny&quot;,&quot;Renee&quot;,&quot;Daniella&quot;,&quot;Lizbeth&quot;,&quot;Anahi&quot;,&quot;Virginia&quot;,&quot;Gisselle&quot;,&quot;Kaitlynn&quot;,&quot;Julissa&quot;,&quot;Cheyanne&quot;,&quot;Lacey&quot;,&quot;Haleigh&quot;,&quot;Marie&quot;,&quot;Martha&quot;,&quot;Eleanor&quot;,&quot;Kierra&quot;,&quot;Tiara&quot;,&quot;Talia&quot;,&quot;Eliza&quot;,&quot;Kaylie&quot;,&quot;Mikaela&quot;,&quot;Harley&quot;,&quot;Jaden&quot;,&quot;Hailee&quot;,&quot;Madalyn&quot;,&quot;Kasey&quot;,&quot;Ashlynn&quot;,&quot;Brandi&quot;,&quot;Lesly&quot;,&quot;Elisabeth&quot;,&quot;Allie&quot;,&quot;Viviana&quot;,&quot;Cara&quot;,&quot;Marisol&quot;,&quot;India&quot;,&quot;Tatyana&quot;,&quot;Litzy&quot;,&quot;Melody&quot;,&quot;Jessie&quot;,&quot;Brandy&quot;,&quot;Alisha&quot;,&quot;Hunter&quot;,&quot;Noelle&quot;,&quot;Carla&quot;,&quot;Francesca&quot;,&quot;Tia&quot;,&quot;Layla&quot;,&quot;Krista&quot;,&quot;Zoey&quot;,&quot;Carley&quot;,&quot;Janet&quot;,&quot;Carissa&quot;,&quot;Iris&quot;,&quot;Kaleigh&quot;,&quot;Tyler&quot;,&quot;Susan&quot;,&quot;Tamara&quot;,&quot;Theresa&quot;,&quot;Yasmine&quot;,&quot;Tatum&quot;,&quot;Sharon&quot;,&quot;Alice&quot;,&quot;Yasmin&quot;,&quot;Tamia&quot;,&quot;Abbey&quot;,&quot;Alayna&quot;,&quot;Kali&quot;,&quot;Lilly&quot;,&quot;Bailee&quot;,&quot;Lesley&quot;,&quot;Mckayla&quot;,&quot;Ayanna&quot;,&quot;Serenity&quot;,&quot;Karissa&quot;,&quot;Precious&quot;,&quot;Jane&quot;,&quot;Maddison&quot;,&quot;Jayda&quot;,&quot;Kelsie&quot;,&quot;Lexi&quot;,&quot;Phoebe&quot;,&quot;Halle&quot;,&quot;Kiersten&quot;,&quot;Kiera&quot;,&quot;Tyra&quot;,&quot;Annika&quot;,&quot;Felicity&quot;,&quot;Taryn&quot;,&quot;Kaylin&quot;,&quot;Ellen&quot;,&quot;Kiley&quot;,&quot;Jaclyn&quot;,&quot;Rhiannon&quot;,&quot;Madisyn&quot;,&quot;Colleen&quot;,&quot;Joy&quot;,&quot;Pamela&quot;,&quot;Charity&quot;,&quot;Tania&quot;,&quot;Fiona&quot;,&quot;Alyson&quot;,&quot;Kaila&quot;,&quot;Annabelle&quot;,&quot;Emely&quot;,&quot;Angelique&quot;,&quot;Alina&quot;,&quot;Irene&quot;,&quot;Johanna&quot;,&quot;Regan&quot;,&quot;Janelle&quot;,&quot;Janae&quot;,&quot;Madyson&quot;,&quot;Paris&quot;,&quot;Justine&quot;,&quot;Chelsey&quot;,&quot;Sasha&quot;,&quot;Paulina&quot;,&quot;Mayra&quot;,&quot;Zaria&quot;,&quot;Skye&quot;,&quot;Cora&quot;,&quot;Brisa&quot;,&quot;Emilie&quot;,&quot;Felicia&quot;,&quot;Larissa&quot;,&quot;Macie&quot;,&quot;Tianna&quot;,&quot;Aurora&quot;,&quot;Sage&quot;,&quot;Lucia&quot;,&quot;Alma&quot;,&quot;Chasity&quot;,&quot;Ann&quot;,&quot;Deborah&quot;,&quot;Nichole&quot;,&quot;Jayden&quot;,&quot;Alanna&quot;,&quot;Malia&quot;,&quot;Carlie&quot;,&quot;Angie&quot;,&quot;Nora&quot;,&quot;Kailee&quot;,&quot;Sylvia&quot;,&quot;Carrie&quot;,&quot;Elaina&quot;,&quot;Sonia&quot;,&quot;Genevieve&quot;,&quot;Kenya&quot;,&quot;Piper&quot;,&quot;Marilyn&quot;,&quot;Amari&quot;,&quot;Macey&quot;,&quot;Marlene&quot;,&quot;Barbara&quot;,&quot;Tayler&quot;,&quot;Julianne&quot;,&quot;Brooklynn&quot;,&quot;Lorena&quot;,&quot;Perla&quot;,&quot;Elisa&quot;,&quot;Kaley&quot;,&quot;Leilani&quot;,&quot;Eden&quot;,&quot;Miracle&quot;,&quot;Devin&quot;,&quot;Aileen&quot;,&quot;Chyna&quot;,&quot;Athena&quot;,&quot;Esperanza&quot;,&quot;Regina&quot;,&quot;Adrienne&quot;,&quot;Shyanne&quot;,&quot;Luz&quot;,&quot;Tierra&quot;,&quot;Cristal&quot;,&quot;Clare&quot;,&quot;Eliana&quot;,&quot;Kelli&quot;,&quot;Eve&quot;,&quot;Sydnee&quot;,&quot;Madelynn&quot;,&quot;Breana&quot;,&quot;Melina&quot;,&quot;Arielle&quot;,&quot;Justice&quot;,&quot;Toni&quot;,&quot;Corinne&quot;,&quot;Maia&quot;,&quot;Tess&quot;,&quot;Abbigail&quot;,&quot;Ciera&quot;,&quot;Ebony&quot;,&quot;Maritza&quot;,&quot;Lena&quot;,&quot;Lexie&quot;,&quot;Isis&quot;,&quot;Aimee&quot;,&quot;Leticia&quot;,&quot;Sydni&quot;,&quot;Sarai&quot;,&quot;Halie&quot;,&quot;Alivia&quot;,&quot;Destiney&quot;,&quot;Laurel&quot;,&quot;Edith&quot;,&quot;Carina&quot;,&quot;Fernanda&quot;,&quot;Amya&quot;,&quot;Destini&quot;,&quot;Aspen&quot;,&quot;Nathalie&quot;,&quot;Paula&quot;,&quot;Tanya&quot;,&quot;Frances&quot;,&quot;Tina&quot;,&quot;Christian&quot;,&quot;Elaine&quot;,&quot;Shayna&quot;,&quot;Aniya&quot;,&quot;Mollie&quot;,&quot;Ryan&quot;,&quot;Essence&quot;,&quot;Simone&quot;,&quot;Kyleigh&quot;,&quot;Nikki&quot;,&quot;Anya&quot;,&quot;Reyna&quot;,&quot;Kaylyn&quot;,&quot;Nicolette&quot;,&quot;Savanah&quot;,&quot;Abbie&quot;,&quot;Montana&quot;,&quot;Kailyn&quot;,&quot;Itzel&quot;,&quot;Leila&quot;,&quot;Cayla&quot;,&quot;Stacy&quot;,&quot;Araceli&quot;,&quot;Robin&quot;,&quot;Dulce&quot;,&quot;Candace&quot;,&quot;Noemi&quot;,&quot;Jewel&quot;,&quot;Aleah&quot;,&quot;Ally&quot;,&quot;Mara&quot;,&quot;Nayeli&quot;,&quot;Karlee&quot;,&quot;Keely&quot;,&quot;Alisa&quot;,&quot;Micaela&quot;,&quot;Desirae&quot;,&quot;Leanna&quot;,&quot;Antonia&quot;,&quot;Brynn&quot;,&quot;Jaelyn&quot;,&quot;Judith&quot;,&quot;Raegan&quot;,&quot;Katelin&quot;,&quot;Sienna&quot;,&quot;Celia&quot;,&quot;Yvette&quot;,&quot;Juliet&quot;,&quot;Anika&quot;,&quot;Emilia&quot;,&quot;Calista&quot;,&quot;Carlee&quot;,&quot;Eileen&quot;,&quot;Kianna&quot;,&quot;Thalia&quot;,&quot;Rylie&quot;,&quot;Daphne&quot;,&quot;Kacie&quot;,&quot;Karli&quot;,&quot;Rosemary&quot;,&quot;Ericka&quot;,&quot;Jadyn&quot;,&quot;Lyndsey&quot;,&quot;Micah&quot;,&quot;Hana&quot;,&quot;Haylie&quot;,&quot;Madilyn&quot;,&quot;Laila&quot;,&quot;Blanca&quot;,&quot;Kayley&quot;,&quot;Katarina&quot;,&quot;Kellie&quot;,&quot;Maribel&quot;,&quot;Sandy&quot;,&quot;Joselyn&quot;,&quot;Kaelyn&quot;,&quot;Madisen&quot;,&quot;Carson&quot;,&quot;Kathy&quot;,&quot;Margarita&quot;,&quot;Stella&quot;,&quot;Juliette&quot;,&quot;Devon&quot;,&quot;Camila&quot;,&quot;Bria&quot;,&quot;Donna&quot;,&quot;Helena&quot;,&quot;Lea&quot;,&quot;Jazlyn&quot;,&quot;Jazmyn&quot;,&quot;Skyla&quot;,&quot;Christy&quot;,&quot;Katharine&quot;,&quot;Joyce&quot;,&quot;Karlie&quot;,&quot;Lexus&quot;,&quot;Salma&quot;,&quot;Alessandra&quot;,&quot;Delilah&quot;,&quot;Moriah&quot;,&quot;Celine&quot;,&quot;Lizeth&quot;,&quot;Beatriz&quot;,&quot;Brianne&quot;,&quot;Kourtney&quot;,&quot;Sydnie&quot;,&quot;Stacey&quot;,&quot;Mariam&quot;,&quot;Robyn&quot;,&quot;Hayden&quot;,&quot;Janessa&quot;,&quot;Kenzie&quot;,&quot;Jalyn&quot;,&quot;Sheila&quot;,&quot;Meaghan&quot;,&quot;Aisha&quot;,&quot;Jaida&quot;,&quot;Shawna&quot;,&quot;Estrella&quot;,&quot;Marley&quot;,&quot;Melinda&quot;,&quot;Ayana&quot;,&quot;Karly&quot;,&quot;Devyn&quot;,&quot;Nataly&quot;,&quot;Loren&quot;,&quot;Rosalinda&quot;,&quot;Brielle&quot;,&quot;Laney&quot;,&quot;Lizette&quot;,&quot;Sally&quot;,&quot;Tracy&quot;,&quot;Lilian&quot;,&quot;Rebeca&quot;,&quot;Chandler&quot;,&quot;Jenifer&quot;,&quot;Valentina&quot;,&quot;America&quot;,&quot;Candice&quot;,&quot;Diane&quot;,&quot;Abigayle&quot;,&quot;Susana&quot;,&quot;Aliya&quot;,&quot;Casandra&quot;,&quot;Harmony&quot;,&quot;Jacey&quot;,&quot;Alena&quot;,&quot;Aylin&quot;,&quot;Carol&quot;,&quot;Shea&quot;,&quot;Stephany&quot;,&quot;Aniyah&quot;,&quot;Zoie&quot;,&quot;Jackeline&quot;,&quot;Alia&quot;,&quot;Savana&quot;,&quot;Damaris&quot;,&quot;Gwendolyn&quot;,&quot;Violet&quot;,&quot;Marian&quot;,&quot;Anita&quot;,&quot;Jaime&quot;,&quot;Alexandrea&quot;,&quot;Jaiden&quot;,&quot;Kristine&quot;,&quot;Carli&quot;,&quot;Dorothy&quot;,&quot;Gretchen&quot;,&quot;Janice&quot;,&quot;Annette&quot;,&quot;Mariela&quot;,&quot;Amani&quot;,&quot;Maura&quot;,&quot;Bella&quot;,&quot;Kaylynn&quot;,&quot;Lila&quot;,&quot;Armani&quot;,&quot;Anissa&quot;,&quot;Aubree&quot;,&quot;Kelsi&quot;,&quot;Greta&quot;,&quot;Kaya&quot;,&quot;Kayli&quot;,&quot;Lillie&quot;,&quot;Willow&quot;,&quot;Ansley&quot;,&quot;Catalina&quot;,&quot;Lia&quot;,&quot;Maci&quot;,&quot;Celina&quot;,&quot;Shyann&quot;,&quot;Alysa&quot;,&quot;Jaquelin&quot;,&quot;Kasandra&quot;,&quot;Quinn&quot;,&quot;Cecelia&quot;,&quot;Mattie&quot;,&quot;Chaya&quot;,&quot;Hailie&quot;,&quot;Haven&quot;,&quot;Kallie&quot;,&quot;Maegan&quot;,&quot;Maeve&quot;,&quot;Rocio&quot;,&quot;Yolanda&quot;,&quot;Christa&quot;,&quot;Gabriel&quot;,&quot;Kari&quot;,&quot;Noelia&quot;,&quot;Jeanette&quot;,&quot;Kaylah&quot;,&quot;Marianna&quot;,&quot;Nya&quot;,&quot;Kennedi&quot;,&quot;Presley&quot;,&quot;Yadira&quot;,&quot;Elissa&quot;,&quot;Nyah&quot;,&quot;Reilly&quot;,&quot;Shaina&quot;,&quot;Alize&quot;,&quot;Arlene&quot;,&quot;Amara&quot;,&quot;Izabella&quot;,&quot;Lyric&quot;,&quot;Aiyana&quot;,&quot;Allyssa&quot;,&quot;Drew&quot;,&quot;Rachelle&quot;,&quot;Adeline&quot;,&quot;Jacklyn&quot;,&quot;Jesse&quot;,&quot;Citlalli&quot;,&quot;Liana&quot;,&quot;Giovanna&quot;,&quot;Princess&quot;,&quot;Selina&quot;,&quot;Brook&quot;,&quot;Elyse&quot;,&quot;Graciela&quot;,&quot;Cali&quot;,&quot;Berenice&quot;,&quot;Chanel&quot;,&quot;Iliana&quot;,&quot;Jolie&quot;,&quot;Caitlynn&quot;,&quot;Christiana&quot;,&quot;Annalise&quot;,&quot;Cortney&quot;,&quot;Darlene&quot;,&quot;Sarina&quot;,&quot;Dasia&quot;,&quot;London&quot;,&quot;Yvonne&quot;,&quot;Karley&quot;,&quot;Shaylee&quot;,&quot;Myah&quot;,&quot;Amira&quot;,&quot;Juanita&quot;,&quot;Kristy&quot;,&quot;Ryleigh&quot;,&quot;Dariana&quot;,&quot;Teagan&quot;,&quot;Kiarra&quot;,&quot;Ryann&quot;,&quot;Yamilet&quot;,&quot;Alexys&quot;,&quot;Kacey&quot;,&quot;Shakira&quot;,&quot;Sheridan&quot;,&quot;Baby&quot;,&quot;Dianna&quot;,&quot;Lara&quot;,&quot;Isabela&quot;,&quot;Reina&quot;,&quot;Shirley&quot;,&quot;Jaycee&quot;,&quot;Silvia&quot;,&quot;Tatianna&quot;,&quot;Eryn&quot;,&quot;Ingrid&quot;,&quot;Keara&quot;,&quot;Randi&quot;,&quot;Reanna&quot;,&quot;Kalyn&quot;,&quot;Lisette&quot;,&quot;Monserrat&quot;,&quot;Lori&quot;,&quot;Abril&quot;,&quot;Ivana&quot;,&quot;Kaela&quot;,&quot;Maranda&quot;,&quot;Parker&quot;,&quot;Darby&quot;,&quot;Darian&quot;,&quot;Jasmyn&quot;,&quot;Jaylin&quot;,&quot;Katia&quot;,&quot;Ayla&quot;,&quot;Bridgette&quot;,&quot;Hillary&quot;,&quot;Kinsey&quot;,&quot;Yazmin&quot;,&quot;Caleigh&quot;,&quot;Elyssa&quot;,&quot;Rita&quot;,&quot;Asha&quot;,&quot;Dayana&quot;,&quot;Nikita&quot;,&quot;Chantel&quot;,&quot;Reese&quot;,&quot;Stefanie&quot;,&quot;Nadine&quot;,&quot;Samara&quot;,&quot;Unique&quot;,&quot;Michele&quot;,&quot;Sonya&quot;,&quot;Hazel&quot;,&quot;Patience&quot;,&quot;Cielo&quot;,&quot;Mireya&quot;,&quot;Paloma&quot;,&quot;Aryanna&quot;,&quot;Magdalena&quot;,&quot;Anaya&quot;,&quot;Dallas&quot;,&quot;Arely&quot;,&quot;Joelle&quot;,&quot;Kaia&quot;,&quot;Misty&quot;,&quot;Norma&quot;,&quot;Taya&quot;,&quot;Deasia&quot;,&quot;Trisha&quot;,&quot;Elsa&quot;,&quot;Joana&quot;,&quot;Alysha&quot;,&quot;Aracely&quot;,&quot;Bryana&quot;,&quot;Dawn&quot;,&quot;Brionna&quot;,&quot;Alex&quot;,&quot;Katerina&quot;,&quot;Ali&quot;,&quot;Bonnie&quot;,&quot;Hadley&quot;,&quot;Martina&quot;,&quot;Maryam&quot;,&quot;Jazmyne&quot;,&quot;Shaniya&quot;,&quot;Alycia&quot;,&quot;Dejah&quot;,&quot;Emmalee&quot;,&quot;Estefania&quot;,&quot;Jakayla&quot;,&quot;Lilliana&quot;,&quot;Nyasia&quot;,&quot;Anjali&quot;,&quot;Daisha&quot;,&quot;Myra&quot;,&quot;Amiya&quot;,&quot;Belen&quot;,&quot;Jana&quot;,&quot;Saige&quot;,&quot;Aja&quot;,&quot;Annabel&quot;,&quot;Scarlett&quot;,&quot;Joanne&quot;,&quot;Aliza&quot;,&quot;Ashly&quot;,&quot;Cydney&quot;,&quot;Destany&quot;,&quot;Fabiola&quot;,&quot;Gia&quot;,&quot;Keira&quot;,&quot;Roxanne&quot;,&quot;Kaci&quot;,&quot;Abigale&quot;,&quot;Abagail&quot;,&quot;Janiya&quot;,&quot;Odalys&quot;,&quot;Aria&quot;,&quot;Daija&quot;,&quot;Delia&quot;,&quot;Kameron&quot;,&quot;Ashtyn&quot;,&quot;Katy&quot;,&quot;Lourdes&quot;,&quot;Raina&quot;,&quot;Dayna&quot;,&quot;Emerald&quot;,&quot;Kirstin&quot;,&quot;Marlee&quot;,&quot;Neha&quot;,&quot;Beatrice&quot;,&quot;Blair&quot;,&quot;Kori&quot;,&quot;Luisa&quot;,&quot;Annamarie&quot;,&quot;Breonna&quot;,&quot;Jena&quot;,&quot;Leann&quot;,&quot;Rhianna&quot;,&quot;Yasmeen&quot;,&quot;Yessenia&quot;,&quot;Breanne&quot;,&quot;Laisha&quot;,&quot;Mandy&quot;,&quot;Amina&quot;,&quot;Jailyn&quot;,&quot;Jayde&quot;,&quot;Jill&quot;,&quot;Katlynn&quot;,&quot;Kaylan&quot;,&quot;Antoinette&quot;,&quot;Kenna&quot;,&quot;Rayna&quot;,&quot;Iyana&quot;,&quot;Keeley&quot;,&quot;Kenia&quot;,&quot;Maiya&quot;,&quot;Melisa&quot;,&quot;Sky&quot;,&quot;Adrian&quot;,&quot;Marlen&quot;,&quot;Shianne&quot;,&quot;Alysia&quot;,&quot;Audra&quot;,&quot;Jacquelin&quot;,&quot;Malaysia&quot;,&quot;Aubrie&quot;,&quot;Infant&quot;,&quot;Kaycee&quot;,&quot;Kendal&quot;,&quot;Shelbie&quot;,&quot;Chana&quot;,&quot;Kalie&quot;,&quot;Chelsie&quot;,&quot;Evelin&quot;,&quot;Janie&quot;,&quot;Leanne&quot;,&quot;Ashlie&quot;,&quot;Dalia&quot;,&quot;Lana&quot;,&quot;Suzanne&quot;,&quot;Ashanti&quot;,&quot;Juana&quot;,&quot;Kelley&quot;,&quot;Marcella&quot;,&quot;Tristan&quot;,&quot;Johana&quot;,&quot;Lacy&quot;,&quot;Noel&quot;,&quot;Bryn&quot;,&quot;Ivette&quot;,&quot;Jamya&quot;,&quot;Mikala&quot;,&quot;Nyla&quot;,&quot;Yamile&quot;,&quot;Jailene&quot;,&quot;Katlin&quot;,&quot;Keri&quot;,&quot;Sarahi&quot;,&quot;Shauna&quot;,&quot;Tyanna&quot;,&quot;Noor&quot;,&quot;Flor&quot;,&quot;Makena&quot;,&quot;Miya&quot;,&quot;Sade&quot;,&quot;Natalee&quot;,&quot;Pearl&quot;,&quot;Corina&quot;,&quot;Starr&quot;,&quot;Hayleigh&quot;,&quot;Niya&quot;,&quot;Star&quot;,&quot;Baylie&quot;,&quot;Beyonce&quot;,&quot;Carrington&quot;,&quot;Rochelle&quot;,&quot;Roxana&quot;,&quot;Vanesa&quot;,&quot;Charisma&quot;,&quot;Santana&quot;,&quot;Frida&quot;,&quot;Melany&quot;,&quot;Octavia&quot;,&quot;Cameryn&quot;,&quot;Jasmyne&quot;,&quot;Keyla&quot;,&quot;Lilia&quot;,&quot;Lucero&quot;,&quot;Madalynn&quot;,&quot;Jackelyn&quot;,&quot;Libby&quot;,&quot;Danica&quot;,&quot;Halee&quot;,&quot;Makala&quot;,&quot;Stevie&quot;,&quot;Cailey&quot;,&quot;Charlene&quot;,&quot;Dania&quot;,&quot;Denisse&quot;,&quot;Iyanna&quot;,&quot;Shana&quot;,&quot;Tammy&quot;,&quot;Tayla&quot;,&quot;Elisha&quot;,&quot;Kayle&quot;,&quot;Liberty&quot;,&quot;Shyla&quot;,&quot;Dina&quot;,&quot;Judy&quot;,&quot;Priscila&quot;,&quot;Ada&quot;,&quot;Carleigh&quot;,&quot;Eunice&quot;,&quot;Janette&quot;,&quot;Jaylene&quot;,&quot;Latavia&quot;,&quot;Xiomara&quot;,&quot;Caylee&quot;,&quot;Constance&quot;,&quot;Gwyneth&quot;,&quot;Lexis&quot;,&quot;Yajaira&quot;,&quot;Kaytlin&quot;,&quot;Aryana&quot;,&quot;Jocelyne&quot;,&quot;Myranda&quot;,&quot;Tiffani&quot;,&quot;Gladys&quot;,&quot;Kassie&quot;,&quot;Kaylen&quot;,&quot;Mykayla&quot;,&quot;Anabel&quot;,&quot;Beverly&quot;,&quot;Blake&quot;,&quot;Demi&quot;,&quot;Emani&quot;,&quot;Justina&quot;,&quot;Keila&quot;,&quot;Makaila&quot;,&quot;Colette&quot;,&quot;Estefany&quot;,&quot;Jalynn&quot;,&quot;Joslyn&quot;,&quot;Kerry&quot;,&quot;Marisela&quot;,&quot;Miah&quot;,&quot;Anais&quot;,&quot;Cherish&quot;,&quot;Destinie&quot;,&quot;Elle&quot;,&quot;Jennie&quot;,&quot;Lacie&quot;,&quot;Odalis&quot;,&quot;Stormy&quot;,&quot;Daria&quot;,&quot;Halley&quot;,&quot;Lina&quot;,&quot;Tabatha&quot;,&quot;Angeline&quot;,&quot;Hollie&quot;,&quot;Jayme&quot;,&quot;Jaylynn&quot;,&quot;Maricela&quot;,&quot;Maxine&quot;,&quot;Mina&quot;,&quot;Estefani&quot;,&quot;Shaelyn&quot;,&quot;Mckinley&quot;,&quot;Alaysia&quot;,&quot;Jessika&quot;,&quot;Lidia&quot;,&quot;Maryann&quot;,&quot;Samira&quot;,&quot;Shelbi&quot;,&quot;Betty&quot;,&quot;Connie&quot;,&quot;Iman&quot;,&quot;Mira&quot;,&quot;Shanice&quot;,&quot;Susanna&quot;,&quot;Jaylyn&quot;,&quot;Kristi&quot;,&quot;Sariah&quot;,&quot;Serina&quot;,&quot;Shae&quot;,&quot;Taniya&quot;,&quot;Winter&quot;,&quot;Mindy&quot;,&quot;Rhea&quot;,&quot;Tristen&quot;,&quot;Danae&quot;,&quot;Jamia&quot;,&quot;Natalya&quot;,&quot;Siena&quot;,&quot;Areli&quot;,&quot;Daja&quot;,&quot;Jodi&quot;,&quot;Leeann&quot;,&quot;Rianna&quot;,&quot;Yulissa&quot;,&quot;Alyssia&quot;,&quot;Ciarra&quot;,&quot;Delanie&quot;,&quot;Nautica&quot;,&quot;Tamera&quot;,&quot;Tionna&quot;,&quot;Alecia&quot;,&quot;Astrid&quot;,&quot;Breann&quot;,&quot;Journey&quot;,&quot;Kaiya&quot;,&quot;Lynn&quot;,&quot;Zariah&quot;,&quot;Adilene&quot;,&quot;Annalisa&quot;,&quot;Chyanne&quot;,&quot;Jalen&quot;,&quot;Kyara&quot;,&quot;Camilla&quot;,&quot;Monet&quot;,&quot;Priya&quot;,&quot;Akira&quot;,&quot;Cori&quot;,&quot;Fallon&quot;,&quot;Giana&quot;,&quot;Naya&quot;,&quot;Shreya&quot;,&quot;Tanisha&quot;,&quot;Debra&quot;,&quot;Irma&quot;,&quot;Lissette&quot;,&quot;Lorraine&quot;,&quot;Magaly&quot;,&quot;Mahogany&quot;,&quot;Marcela&quot;,&quot;Abrianna&quot;,&quot;Alexi&quot;,&quot;Amaris&quot;,&quot;Cailyn&quot;,&quot;Hali&quot;,&quot;Joan&quot;,&quot;Kelsea&quot;,&quot;Lainey&quot;,&quot;Viridiana&quot;,&quot;Chastity&quot;,&quot;Isabell&quot;,&quot;Maleah&quot;,&quot;Tasha&quot;,&quot;Terra&quot;,&quot;Beth&quot;,&quot;Elana&quot;,&quot;Mariel&quot;,&quot;Maureen&quot;,&quot;Shantel&quot;,&quot;Coral&quot;,&quot;Grayson&quot;,&quot;Ivanna&quot;,&quot;Katheryn&quot;,&quot;Olga&quot;,&quot;Addie&quot;,&quot;Bayleigh&quot;,&quot;Rowan&quot;,&quot;Taliyah&quot;,&quot;Yareli&quot;,&quot;Betsy&quot;,&quot;Geneva&quot;,&quot;Grecia&quot;,&quot;Kristian&quot;,&quot;Kya&quot;,&quot;Leigha&quot;,&quot;Racheal&quot;,&quot;Tamya&quot;,&quot;Yoselin&quot;,&quot;Alea&quot;,&quot;Annemarie&quot;,&quot;Breeanna&quot;,&quot;Harlee&quot;,&quot;Marlena&quot;,&quot;Shay&quot;,&quot;Zion&quot;,&quot;Citlali&quot;,&quot;Colby&quot;,&quot;Julisa&quot;,&quot;Simran&quot;,&quot;Yaritza&quot;,&quot;Cathryn&quot;,&quot;Griselda&quot;,&quot;Jessenia&quot;,&quot;Lucille&quot;,&quot;Annabella&quot;,&quot;Dara&quot;,&quot;Kala&quot;,&quot;Madysen&quot;,&quot;Micayla&quot;,&quot;Sommer&quot;,&quot;Haily&quot;,&quot;Karyme&quot;,&quot;Lisbeth&quot;,&quot;Shanna&quot;,&quot;Brittani&quot;,&quot;China&quot;,&quot;Daijah&quot;,&quot;Danika&quot;,&quot;Kerri&quot;,&quot;Keyanna&quot;,&quot;Monika&quot;,&quot;Triniti&quot;,&quot;Cailin&quot;,&quot;Isela&quot;,&quot;Kalli&quot;,&quot;Amalia&quot;,&quot;Brea&quot;,&quot;Dajah&quot;,&quot;Jolene&quot;,&quot;Kaylea&quot;,&quot;Mason&quot;,&quot;Rivka&quot;,&quot;Yessica&quot;,&quot;Bobbie&quot;,&quot;Tyana&quot;,&quot;Shelly&quot;,&quot;Billie&quot;,&quot;Chantal&quot;,&quot;Jami&quot;,&quot;Kaytlyn&quot;,&quot;Nathaly&quot;,&quot;Pauline&quot;,&quot;Aidan&quot;,&quot;Aleena&quot;,&quot;Danyelle&quot;,&quot;Jaylen&quot;,&quot;Katya&quot;,&quot;Kendyl&quot;,&quot;Lesli&quot;,&quot;Mari&quot;,&quot;Analisa&quot;,&quot;Kalista&quot;,&quot;Kayleen&quot;,&quot;Kortney&quot;,&quot;Kristyn&quot;,&quot;Lola&quot;,&quot;Luna&quot;,&quot;Brieanna&quot;,&quot;Corrine&quot;,&quot;Elsie&quot;,&quot;Harlie&quot;,&quot;Cloe&quot;,&quot;Jackie&quot;,&quot;Kalee&quot;,&quot;Leandra&quot;,&quot;Magali&quot;,&quot;Shamya&quot;,&quot;Tatiyana&quot;,&quot;Zainab&quot;,&quot;Aliah&quot;,&quot;Alliyah&quot;,&quot;Anisa&quot;,&quot;Elexis&quot;,&quot;Ireland&quot;,&quot;Jala&quot;,&quot;Kylah&quot;,&quot;Marion&quot;,&quot;Mercedez&quot;,&quot;Alyse&quot;,&quot;Annmarie&quot;,&quot;Azaria&quot;,&quot;Gissel&quot;,&quot;Jacy&quot;,&quot;Joann&quot;,&quot;Kiya&quot;,&quot;Liza&quot;,&quot;Macayla&quot;,&quot;Britany&quot;,&quot;Kristal&quot;,&quot;Maren&quot;,&quot;Acacia&quot;,&quot;Alli&quot;,&quot;Christen&quot;,&quot;Deana&quot;,&quot;Makaela&quot;,&quot;Makenzi&quot;,&quot;Tonya&quot;,&quot;Dahlia&quot;,&quot;Keyana&quot;,&quot;Krysta&quot;,&quot;Nallely&quot;,&quot;Rosemarie&quot;,&quot;Emerson&quot;,&quot;Jaci&quot;,&quot;Jacie&quot;,&quot;Jalisa&quot;,&quot;Joseline&quot;,&quot;Karsyn&quot;,&quot;Keisha&quot;,&quot;Marianne&quot;,&quot;Maryjane&quot;,&quot;Phoenix&quot;,&quot;Terri&quot;,&quot;Tyasia&quot;,&quot;Yamileth&quot;,&quot;Amiyah&quot;,&quot;Darcy&quot;,&quot;Galilea&quot;,&quot;Georgina&quot;,&quot;Harper&quot;,&quot;Tasia&quot;,&quot;Adia&quot;,&quot;Bree&quot;,&quot;Ivory&quot;,&quot;Kierstin&quot;,&quot;Meadow&quot;,&quot;Nathalia&quot;,&quot;Xochitl&quot;,&quot;Adelaide&quot;,&quot;Amberly&quot;,&quot;Calli&quot;,&quot;Deandra&quot;,&quot;Desire&quot;,&quot;Kimberlee&quot;,&quot;Mackenna&quot;,&quot;Mallorie&quot;,&quot;Anisha&quot;,&quot;Brigid&quot;,&quot;Franchesca&quot;,&quot;Janna&quot;,&quot;Jocelynn&quot;,&quot;Keanna&quot;,&quot;Kia&quot;,&quot;Mae&quot;,&quot;Makiya&quot;,&quot;Yahaira&quot;,&quot;Adamaris&quot;,&quot;Ania&quot;,&quot;Ivonne&quot;,&quot;Janaya&quot;,&quot;Kai&quot;,&quot;Karah&quot;,&quot;Marin&quot;,&quot;Rosalie&quot;,&quot;Aleigha&quot;,&quot;Ashli&quot;,&quot;Mika&quot;,&quot;Penelope&quot;,&quot;Rosario&quot;,&quot;Aislinn&quot;,&quot;Amirah&quot;,&quot;Charlie&quot;,&quot;Jaelynn&quot;,&quot;Madelyne&quot;,&quot;Renae&quot;,&quot;Aiyanna&quot;,&quot;Anabelle&quot;,&quot;Cinthia&quot;,&quot;Dylan&quot;,&quot;Eboni&quot;,&quot;Janeth&quot;,&quot;Jayna&quot;,&quot;Kinley&quot;,&quot;Laken&quot;,&quot;Lyndsay&quot;,&quot;Mikaila&quot;,&quot;Moira&quot;,&quot;Nikole&quot;,&quot;Vicky&quot;,&quot;Amie&quot;,&quot;Belinda&quot;,&quot;Cheryl&quot;,&quot;Chynna&quot;,&quot;Dora&quot;,&quot;Jaquelyn&quot;,&quot;Nakia&quot;,&quot;Tehya&quot;,&quot;Treasure&quot;,&quot;Valencia&quot;,&quot;Adela&quot;,&quot;Aliana&quot;,&quot;Alora&quot;,&quot;Ashely&quot;,&quot;Averi&quot;,&quot;Eleni&quot;,&quot;Janell&quot;,&quot;Kalynn&quot;,&quot;Livia&quot;,&quot;Mona&quot;,&quot;Rena&quot;,&quot;Riya&quot;,&quot;Sherry&quot;,&quot;Tionne&quot;,&quot;Annelise&quot;,&quot;Brissa&quot;,&quot;Jania&quot;,&quot;Jensen&quot;,&quot;Lora&quot;,&quot;Lynette&quot;,&quot;Samaria&quot;,&quot;Shanya&quot;,&quot;Ximena&quot;,&quot;Adrianne&quot;,&quot;Ainsley&quot;,&quot;Bobbi&quot;,&quot;Heidy&quot;,&quot;Jaidyn&quot;,&quot;Linnea&quot;,&quot;Malorie&quot;,&quot;Melia&quot;,&quot;Mickayla&quot;,&quot;Riana&quot;,&quot;Roxanna&quot;,&quot;Tiarra&quot;,&quot;Christie&quot;,&quot;Domonique&quot;,&quot;Dymond&quot;,&quot;Kathrine&quot;,&quot;Keyonna&quot;,&quot;Kiah&quot;,&quot;Kyndall&quot;,&quot;Leia&quot;,&quot;Leigh&quot;,&quot;Maliyah&quot;,&quot;Montserrat&quot;,&quot;Sonja&quot;,&quot;Symone&quot;,&quot;Allysa&quot;,&quot;Anyssa&quot;,&quot;Ariella&quot;,&quot;Keegan&quot;,&quot;Natali&quot;,&quot;Yulisa&quot;,&quot;Alesha&quot;,&quot;Demetria&quot;,&quot;Johnna&quot;,&quot;Keana&quot;,&quot;Lynsey&quot;,&quot;Siera&quot;,&quot;Tatyanna&quot;,&quot;Zara&quot;,&quot;Annaliese&quot;,&quot;Chiara&quot;,&quot;Emalee&quot;,&quot;Giavanna&quot;,&quot;Kimberley&quot;,&quot;Amiah&quot;,&quot;Autum&quot;,&quot;Briley&quot;,&quot;Cathy&quot;,&quot;Christin&quot;,&quot;Hattie&quot;,&quot;Jazlynn&quot;,&quot;Bryce&quot;,&quot;Chase&quot;,&quot;Cherokee&quot;,&quot;Devan&quot;,&quot;Ilana&quot;,&quot;Jean&quot;,&quot;Jesenia&quot;,&quot;Lela&quot;,&quot;Lianna&quot;,&quot;Rubi&quot;,&quot;Trista&quot;,&quot;Amaiya&quot;,&quot;Farrah&quot;,&quot;Francis&quot;,&quot;Imari&quot;,&quot;Kim&quot;,&quot;Pilar&quot;,&quot;Selene&quot;,&quot;Susannah&quot;,&quot;Alannah&quot;,&quot;Ananda&quot;,&quot;Madelin&quot;,&quot;Madilynn&quot;,&quot;Nicolle&quot;,&quot;Rileigh&quot;,&quot;Sana&quot;,&quot;Selah&quot;,&quot;Valery&quot;,&quot;Alani&quot;,&quot;Emelia&quot;,&quot;Hayli&quot;,&quot;Janay&quot;,&quot;Jeniffer&quot;,&quot;Joselin&quot;,&quot;June&quot;,&quot;Marla&quot;,&quot;Michael&quot;,&quot;Noa&quot;,&quot;Shira&quot;,&quot;Ayesha&quot;,&quot;Dixie&quot;,&quot;Hanah&quot;,&quot;Jaycie&quot;,&quot;Juliann&quot;,&quot;Maddie&quot;,&quot;Nelly&quot;,&quot;Zahra&quot;,&quot;Edna&quot;,&quot;Jadah&quot;,&quot;Jaela&quot;,&quot;Karolina&quot;,&quot;Laci&quot;,&quot;Lanie&quot;,&quot;Malka&quot;,&quot;Marguerite&quot;,&quot;Mercy&quot;,&quot;Milena&quot;,&quot;Tyla&quot;,&quot;Bayley&quot;,&quot;Callista&quot;,&quot;Candy&quot;,&quot;Caylin&quot;,&quot;Jessi&quot;,&quot;Julieta&quot;,&quot;Karleigh&quot;,&quot;Kyndal&quot;,&quot;Lizet&quot;,&quot;Louise&quot;,&quot;Sanjana&quot;,&quot;Sheyla&quot;,&quot;Shivani&quot;,&quot;Thea&quot;,&quot;Tracey&quot;,&quot;Aya&quot;,&quot;Bernadette&quot;,&quot;Bethanie&quot;,&quot;Danna&quot;,&quot;Daysha&quot;,&quot;Jayleen&quot;,&quot;Kaeli&quot;,&quot;Kaliyah&quot;,&quot;Karime&quot;,&quot;Kinsley&quot;,&quot;Linsey&quot;,&quot;Lucinda&quot;,&quot;Maira&quot;,&quot;Tierney&quot;,&quot;Angeles&quot;,&quot;Anjelica&quot;,&quot;Aysha&quot;,&quot;Bridgett&quot;,&quot;Brookelyn&quot;,&quot;Divya&quot;,&quot;Ginger&quot;,&quot;Jamila&quot;,&quot;Kaili&quot;,&quot;Klarissa&quot;,&quot;Meg&quot;,&quot;Raelynn&quot;,&quot;Salena&quot;,&quot;Sequoia&quot;,&quot;Amia&quot;,&quot;Ashlin&quot;,&quot;Dayanara&quot;,&quot;Isha&quot;,&quot;Jordin&quot;,&quot;Kelis&quot;,&quot;Krysten&quot;,&quot;Leona&quot;,&quot;Lexy&quot;,&quot;Makaylah&quot;,&quot;Notnamed&quot;,&quot;Raelyn&quot;,&quot;Sabina&quot;,&quot;Sahara&quot;,&quot;Shekinah&quot;,&quot;Siobhan&quot;,&quot;Tiera&quot;,&quot;Yaquelin&quot;,&quot;Alanis&quot;,&quot;Ambria&quot;,&quot;Anai&quot;,&quot;Caley&quot;,&quot;Catrina&quot;,&quot;Gemma&quot;,&quot;Jodie&quot;,&quot;Malika&quot;,&quot;Marjorie&quot;,&quot;Sunny&quot;,&quot;Abriana&quot;,&quot;Alexcia&quot;,&quot;Ayleen&quot;,&quot;Brynne&quot;,&quot;Dalila&quot;,&quot;Erykah&quot;,&quot;Ileana&quot;,&quot;Jaila&quot;,&quot;Jessalyn&quot;,&quot;Kirstyn&quot;,&quot;Margo&quot;,&quot;Myia&quot;,&quot;Mykala&quot;,&quot;Stacie&quot;,&quot;Tristin&quot;,&quot;Analise&quot;,&quot;Andie&quot;,&quot;Arden&quot;,&quot;Averie&quot;,&quot;Aysia&quot;,&quot;Brylee&quot;,&quot;Doris&quot;,&quot;Janine&quot;,&quot;Jennah&quot;,&quot;Keona&quot;,&quot;Leyla&quot;,&quot;Shakayla&quot;,&quot;Taylar&quot;,&quot;Tea&quot;,&quot;Verania&quot;,&quot;Allissa&quot;,&quot;Arleth&quot;,&quot;Babygirl&quot;,&quot;Christianna&quot;,&quot;Corrina&quot;,&quot;Holland&quot;,&quot;Josefina&quot;,&quot;Julian&quot;,&quot;Keyara&quot;,&quot;Rayne&quot;,&quot;Rayven&quot;,&quot;Shiann&quot;,&quot;Stefani&quot;,&quot;Stefany&quot;,&quot;Whitley&quot;,&quot;Annalee&quot;,&quot;Asya&quot;,&quot;Charlize&quot;,&quot;Chassidy&quot;,&quot;Deisy&quot;,&quot;Emery&quot;,&quot;Francisca&quot;,&quot;Gissell&quot;,&quot;Kami&quot;,&quot;Khadijah&quot;,&quot;Rhonda&quot;,&quot;Vera&quot;,&quot;Yazmine&quot;,&quot;Zaira&quot;,&quot;Ciana&quot;,&quot;Ester&quot;,&quot;Gisel&quot;,&quot;Gracelyn&quot;,&quot;Jorden&quot;,&quot;Kelsy&quot;,&quot;Mackenzi&quot;,&quot;Oriana&quot;,&quot;Reece&quot;,&quot;Saira&quot;,&quot;Tanner&quot;,&quot;Yesica&quot;,&quot;Anastacia&quot;,&quot;Briza&quot;,&quot;Jacinda&quot;,&quot;Jaliyah&quot;,&quot;Jaya&quot;,&quot;Kalia&quot;,&quot;Kameryn&quot;,&quot;Kearra&quot;,&quot;Kerrigan&quot;,&quot;Lilianna&quot;,&quot;Nayely&quot;,&quot;Tricia&quot;,&quot;Dasha&quot;,&quot;Emmaline&quot;,&quot;Izabel&quot;,&quot;Jaimie&quot;,&quot;Jaylah&quot;,&quot;Jazzmine&quot;,&quot;Keasia&quot;,&quot;Leena&quot;,&quot;Malina&quot;,&quot;Pricilla&quot;,&quot;Ryanne&quot;,&quot;Scarlet&quot;,&quot;Tamar&quot;,&quot;Abbigale&quot;,&quot;Adelina&quot;,&quot;August&quot;,&quot;Ayah&quot;,&quot;Flora&quot;,&quot;Harleigh&quot;,&quot;Jerrica&quot;,&quot;Karrington&quot;,&quot;Kaylene&quot;,&quot;Keren&quot;,&quot;Khloe&quot;,&quot;Kyana&quot;,&quot;Marielle&quot;,&quot;Nevaeh&quot;,&quot;Ryley&quot;,&quot;Spencer&quot;,&quot;Valarie&quot;,&quot;Yuliana&quot;,&quot;Ariyana&quot;,&quot;Brooklin&quot;,&quot;Desiray&quot;,&quot;Dyamond&quot;,&quot;Estela&quot;,&quot;Jayne&quot;,&quot;Kailah&quot;,&quot;Kalei&quot;,&quot;Karis&quot;,&quot;Laurie&quot;,&quot;Madelaine&quot;,&quot;Malinda&quot;,&quot;Rosie&quot;,&quot;Salina&quot;,&quot;Shalyn&quot;,&quot;Shoshana&quot;,&quot;Bernice&quot;,&quot;Chanelle&quot;,&quot;Dani&quot;,&quot;Darla&quot;,&quot;Destanie&quot;,&quot;Gisell&quot;,&quot;Heavenly&quot;,&quot;Joi&quot;,&quot;Josey&quot;,&quot;Lyla&quot;,&quot;Markayla&quot;,&quot;Davina&quot;,&quot;Egypt&quot;,&quot;Elvira&quot;,&quot;Glenda&quot;,&quot;Janel&quot;,&quot;Kelcie&quot;,&quot;Maricruz&quot;,&quot;Nadya&quot;,&quot;Nailah&quot;,&quot;Sapphire&quot;,&quot;Saylor&quot;,&quot;Shiloh&quot;,&quot;Sunshine&quot;,&quot;Trina&quot;,&quot;Winnie&quot;,&quot;Aida&quot;,&quot;Amethyst&quot;,&quot;Anneliese&quot;,&quot;Cecily&quot;,&quot;Dionna&quot;,&quot;Geraldine&quot;,&quot;Layne&quot;,&quot;Portia&quot;,&quot;Taelor&quot;,&quot;Adele&quot;,&quot;Alessia&quot;,&quot;Andria&quot;,&quot;Carsyn&quot;,&quot;Cianna&quot;,&quot;Dynasty&quot;,&quot;Elayna&quot;,&quot;Evangeline&quot;,&quot;Frankie&quot;,&quot;Gracen&quot;,&quot;Hayle&quot;,&quot;Kaileigh&quot;,&quot;Keyona&quot;,&quot;Lillianna&quot;,&quot;Marta&quot;,&quot;Michell&quot;,&quot;Nakayla&quot;,&quot;Raeann&quot;,&quot;Zakiya&quot;,&quot;Cami&quot;,&quot;Gracyn&quot;,&quot;Jaylee&quot;,&quot;Malena&quot;,&quot;Marcia&quot;,&quot;Mirian&quot;,&quot;Myla&quot;,&quot;Teanna&quot;,&quot;Zhane&quot;,&quot;Bertha&quot;,&quot;Dena&quot;,&quot;Izabelle&quot;,&quot;Janiyah&quot;,&quot;Kierstyn&quot;,&quot;Lupita&quot;,&quot;Milan&quot;,&quot;Patrice&quot;,&quot;Reem&quot;,&quot;Sarena&quot;,&quot;Soraya&quot;,&quot;Suzanna&quot;,&quot;Therese&quot;,&quot;Vianey&quot;,&quot;Wynter&quot;,&quot;Adina&quot;,&quot;Angelika&quot;,&quot;Carter&quot;,&quot;Catelyn&quot;,&quot;Desteny&quot;,&quot;Jessa&quot;,&quot;Krystina&quot;,&quot;Lilah&quot;,&quot;Loretta&quot;,&quot;Mekayla&quot;,&quot;Milagros&quot;,&quot;Nakiya&quot;,&quot;Petra&quot;,&quot;Ravyn&quot;,&quot;Tegan&quot;,&quot;Tiffanie&quot;,&quot;Allana&quot;,&quot;Arabella&quot;,&quot;Bailie&quot;,&quot;Charlee&quot;,&quot;Christal&quot;,&quot;Iesha&quot;,&quot;Janiah&quot;,&quot;Jourdan&quot;,&quot;Kaelin&quot;,&quot;Kailynn&quot;,&quot;Karsen&quot;,&quot;Margot&quot;,&quot;Payten&quot;,&quot;Soleil&quot;,&quot;Trinitee&quot;,&quot;Tyesha&quot;,&quot;Alaysha&quot;,&quot;Alexius&quot;,&quot;Alisia&quot;,&quot;Anayeli&quot;,&quot;Ani&quot;,&quot;Audrianna&quot;,&quot;Elysia&quot;,&quot;Jocelin&quot;,&quot;Jovanna&quot;,&quot;Kacy&quot;,&quot;Kerstin&quot;,&quot;Keziah&quot;,&quot;Kristie&quot;,&quot;Lilith&quot;,&quot;Louisa&quot;,&quot;Magdalene&quot;,&quot;Mariyah&quot;,&quot;May&quot;,&quot;Michaella&quot;,&quot;Paisley&quot;,&quot;Rene&quot;,&quot;Samanta&quot;,&quot;Shantell&quot;,&quot;Adison&quot;,&quot;Citlaly&quot;,&quot;Deonna&quot;,&quot;Dolores&quot;,&quot;Ida&quot;,&quot;Karson&quot;,&quot;Katilyn&quot;,&quot;Litzi&quot;,&quot;Lynda&quot;,&quot;Maisie&quot;,&quot;Merissa&quot;,&quot;Niyah&quot;,&quot;Remy&quot;,&quot;Shaylynn&quot;,&quot;Shyanna&quot;,&quot;Alexxis&quot;,&quot;Arianne&quot;,&quot;Azucena&quot;,&quot;Brandie&quot;,&quot;Celena&quot;,&quot;Farah&quot;,&quot;Hilary&quot;,&quot;Jael&quot;,&quot;Maile&quot;,&quot;Mattison&quot;,&quot;Mekenzie&quot;,&quot;Shaylyn&quot;,&quot;Starla&quot;,&quot;Yael&quot;,&quot;Yaneli&quot;,&quot;Abbygail&quot;,&quot;Breeana&quot;,&quot;Briona&quot;,&quot;Janya&quot;,&quot;Jesica&quot;,&quot;Kaycie&quot;,&quot;Kyrsten&quot;,&quot;Lani&quot;,&quot;Makyla&quot;,&quot;Michayla&quot;,&quot;Monae&quot;,&quot;Myesha&quot;,&quot;Ria&quot;,&quot;Saray&quot;,&quot;Shaylin&quot;,&quot;Susie&quot;,&quot;Tory&quot;,&quot;Veronika&quot;,&quot;Alise&quot;,&quot;Alyvia&quot;,&quot;Cambria&quot;,&quot;Charis&quot;,&quot;Denisha&quot;,&quot;Evan&quot;,&quot;Gracey&quot;,&quot;Jamiya&quot;,&quot;Joceline&quot;,&quot;Porsha&quot;,&quot;Rory&quot;,&quot;Rosalyn&quot;,&quot;Stacia&quot;,&quot;Talya&quot;,&quot;Torie&quot;,&quot;Venus&quot;,&quot;Alix&quot;,&quot;Aminah&quot;,&quot;Baleigh&quot;,&quot;Breauna&quot;,&quot;Consuelo&quot;,&quot;Emoni&quot;,&quot;Evangelina&quot;,&quot;Genna&quot;,&quot;Malaya&quot;,&quot;Olyvia&quot;,&quot;Zharia&quot;,&quot;Angelia&quot;,&quot;Ariah&quot;,&quot;Aundrea&quot;,&quot;Brittni&quot;,&quot;Cloey&quot;,&quot;Faye&quot;,&quot;Jadelyn&quot;,&quot;Jaeda&quot;,&quot;Jamaya&quot;,&quot;Luciana&quot;,&quot;Madelynne&quot;,&quot;Nechama&quot;,&quot;Rikki&quot;,&quot;Rilee&quot;,&quot;Sayra&quot;,&quot;Shanelle&quot;,&quot;Sloane&quot;,&quot;Tala&quot;,&quot;Zaire&quot;,&quot;Araya&quot;,&quot;Carlene&quot;,&quot;Adrien&quot;,&quot;Adrionna&quot;,&quot;Adryana&quot;,&quot;Ahlam&quot;,&quot;Albany&quot;,&quot;Aleyda&quot;,&quot;Alicyn&quot;,&quot;Alleah&quot;,&quot;Alyanna&quot;,&quot;Alyissa&quot;,&quot;Amel&quot;,&quot;An&quot;,&quot;Andee&quot;,&quot;Aneesha&quot;,&quot;Angella&quot;,&quot;Annalicia&quot;,&quot;Anneka&quot;,&quot;Anslee&quot;,&quot;Beatris&quot;,&quot;Brantley&quot;,&quot;Breeze&quot;,&quot;Candi&quot;,&quot;Carmelita&quot;,&quot;Carole&quot;,&quot;Cashmere&quot;),
	beauty: random(20, 70),
	birthDate: setup.getBirthDate(_age),
	relationship: 0,
    corruption: random(0, 10),
	sub: random(0, 30),
	hair: either(&#39;blonde&#39;, &#39;black&#39;, &#39;red&#39;),
	breasts: either(&#39;small&#39;, &#39;medium&#39;, &#39;big&#39;),
	race: either(&#39;white&#39;, &#39;black&#39;, &#39;asian&#39;, &#39;latina&#39;),
	location: &#39;forest&#39;,
	anal: random(10, 30),
	dp: random(10, 30),
	bj: random(0, 30),
	pussy: random(0, 30),
	talked: false,
	food: random(10, 90),
	strength: random(5, 15),
	assignedTo: null,
	virgin: false,
	gender: 0,
	horny: random(0, 30),
	orgasms: 0,
	guys: random(3, 20),
	traits: [],
	endurance: 0,
}&gt;&gt;

&lt;&lt;if setup.getAge($tmpGirl) &lt; 18&gt;&gt;
	&lt;&lt;run $tmpGirl.birthDate.setFullYear($tmpGirl.birthDate.getFullYear() - 1)&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if setup.getAge($tmpGirl) &lt;= 20&gt;&gt;
	&lt;&lt;if random(0, 1) === 1&gt;&gt;
		&lt;&lt;set 
			$tmpGirl.virgin = true,
			$tmpGirl.guys = 0,
			$tmpGirl.pussy = 0,
			$tmpGirl.bj = 0,
			$tmpGirl.anal = 0
		&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if setup.getAge($tmpGirl) &lt;= 30&gt;&gt;
	&lt;&lt;set $tmpGirl.beauty = Math.min($tmpGirl.beauty + 10, 100)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if setup.getAge($tmpGirl) &gt;= 50&gt;&gt;
	&lt;&lt;set $tmpGirl.beauty = Math.max($tmpGirl.beauty - 10, 0)&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $tmpGirl.race === &#39;black&#39; || $tmpGirl.race === &#39;latina&#39;&gt;&gt;
	&lt;&lt;set $tmpGirl.hair = &#39;black&#39;&gt;&gt;
&lt;&lt;elseif $tmpGirl.race === &#39;asian&#39;&gt;&gt;
	&lt;&lt;set $tmpGirl.hair = either(&#39;black&#39;, &#39;red&#39;)&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $tmpGirl.id = setup.generateUniqueKey($tmpGirl)&gt;&gt;
&lt;&lt;if setup.percentageChance(50)&gt;&gt;
	&lt;&lt;set _npcTraits = 1&gt;&gt;
	&lt;&lt;if setup.percentageChance(30)&gt;&gt;
		&lt;&lt;set _npcTraits = 2&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $tmpGirl.traits = setup.getRandomTraits(_npcTraits)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget newguy&gt;&gt;
&lt;&lt;set _age = random(18,60)&gt;&gt;
&lt;&lt;set $tmpGuy = {
	name: either(&quot;Liam&quot;,&quot;Noah&quot;,&quot;Oliver&quot;,&quot;Elijah&quot;,&quot;James&quot;,&quot;William&quot;,&quot;Benjamin&quot;,&quot;Lucas&quot;,&quot;Henry&quot;,&quot;Theodore&quot;,&quot;Jack&quot;,&quot;Levi&quot;,&quot;Alexander&quot;,&quot;Jackson&quot;,&quot;Mateo&quot;,&quot;Daniel&quot;,&quot;Michael&quot;,&quot;Mason&quot;,&quot;Sebastian&quot;,&quot;Ethan&quot;,&quot;Logan&quot;,&quot;Owen&quot;,&quot;Samuel&quot;,&quot;Jacob&quot;,&quot;Asher&quot;,&quot;Aiden&quot;,&quot;John&quot;,&quot;Joseph&quot;,&quot;Wyatt&quot;,&quot;David&quot;,&quot;Leo&quot;,&quot;Luke&quot;,&quot;Julian&quot;,&quot;Hudson&quot;,&quot;Grayson&quot;,&quot;Matthew&quot;,&quot;Ezra&quot;,&quot;Gabriel&quot;,&quot;Carter&quot;,&quot;Isaac&quot;,&quot;Jayden&quot;,&quot;Luca&quot;,&quot;Anthony&quot;,&quot;Dylan&quot;,&quot;Lincoln&quot;,&quot;Thomas&quot;,&quot;Maverick&quot;,&quot;Elias&quot;,&quot;Josiah&quot;,&quot;Charles&quot;,&quot;Caleb&quot;,&quot;Christopher&quot;,&quot;Ezekiel&quot;,&quot;Miles&quot;,&quot;Jaxon&quot;,&quot;Isaiah&quot;,&quot;Andrew&quot;,&quot;Joshua&quot;,&quot;Nathan&quot;,&quot;Nolan&quot;,&quot;Adrian&quot;,&quot;Cameron&quot;,&quot;Santiago&quot;,&quot;Eli&quot;,&quot;Aaron&quot;,&quot;Ryan&quot;,&quot;Angel&quot;,&quot;Cooper&quot;,&quot;Waylon&quot;,&quot;Easton&quot;,&quot;Kai&quot;,&quot;Christian&quot;,&quot;Landon&quot;,&quot;Colton&quot;,&quot;Roman&quot;),
	birthDate: setup.getBirthDate(_age),
	relationship: 0,
	beauty: random(20, 70),
    corruption: random(0, 10),
	hair: either(&#39;blonde&#39;, &#39;black&#39;, &#39;gray&#39;, &#39;bald&#39;),
	race: either(&#39;white&#39;, &#39;black&#39;, &#39;asian&#39;, &#39;latina&#39;),
	location: null,
	talked: false,
	food: random(10, 90),
	strength: random(20, 40),
	sub: random(5, 13),
	assignedTo: null,
	gender: 1,
	endurance: 0,
	traits: setup.percentageChance(30) ? [either([&#39;scavanger&#39;, &#39;gardener&#39;, &#39;shopkeeper&#39;])] : [],
}&gt;&gt;
&lt;&lt;set $tmpGuy.id = setup.generateUniqueKey($tmpGuy)&gt;&gt;
&lt;&lt;/widget&gt;&gt;

</tw-passagedata><tw-passagedata pid="39" name="Girl view" tags="sex no-redirect girlview" position="2504,96" size="100,100">&lt;&lt;if !$tmpGirl.talked&gt;&gt;
	&lt;&lt;link &#39;Talk&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship += 3&gt;&gt;
		&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  			&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
 		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $tmpGirl.talked = true&gt;&gt;
		&lt;&lt;addmins 15&gt;&gt;
		&lt;&lt;goto &#39;Girl talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $player.energy &gt;= 30 &amp;&amp; $tmpGirl.location !== &#39;garden&#39;&gt;&gt;
  &lt;&lt;if $tmpGirl.rape&gt;&gt;
	  &lt;&lt;link &#39;Try to rape her&#39;&gt;&gt;
		  &lt;&lt;if $player.strength &lt; $tmpGirl.strength&gt;&gt;
			  &lt;&lt;goto &#39;Girl escape&#39;&gt;&gt;
		  &lt;&lt;else&gt;&gt;
			  &lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
		  &lt;&lt;/if&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
  &lt;&lt;else&gt;&gt;
	  &lt;&lt;link &#39;Fuck her&#39;&gt;&gt;
		  &lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $game.location.basement &amp;&amp; $tmpGirlCapture &amp;&amp; $slaves.length &lt; $basementLimit &amp;&amp; $player.energy &gt;= 30&gt;&gt;
	&lt;&lt;link &#39;Try to capture her&#39;&gt;&gt;
		&lt;&lt;if $player.strength &gt; $tmpGirl.strength&gt;&gt;
			&lt;&lt;set $tmpGirl.capture = false&gt;&gt;
			&lt;&lt;set $slaves.push($tmpGirl)&gt;&gt;
			&lt;&lt;addhours 2&gt;&gt;
			&lt;&lt;energy -30&gt;&gt;
			&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
			&lt;&lt;statsAdd &#39;people_captured&#39;&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Girl escape&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $tmpGirl.location === &#39;garden&#39;&gt;&gt;
	&lt;&lt;if $player.energy &gt;= 20&gt;&gt;
		[[Grope|Grope]]
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $tmpGirl.location === &#39;basement&#39;&gt;&gt;
	&lt;&lt;if !$tmpGirl.milked &amp;&amp; $player.energy &gt; 30 &amp;&amp; $backpack.has(&#39;breast_pump&#39;)&gt;&gt;
	  &lt;&lt;link &#39;Milk her&#39;&gt;&gt;
		  &lt;&lt;goto &#39;Girl milk&#39;&gt;&gt; 
	  &lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $player.energy &gt;= 10 &amp;&amp; hasTime(1)&gt;&gt;
		&lt;&lt;link &#39;Punish her&#39;&gt;&gt;
			&lt;&lt;if $backpack.has(&#39;paddle&#39;)&gt;&gt;
				&lt;&lt;set $punishType = &#39;paddle&#39;&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;goto &#39;Girl punish&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &gt;= 30 &amp;&amp; $slaveId !== undefined &amp;&amp; !$tmpGirl.assignedTo &amp;&amp; setup.assignedToCount(&#39;garden&#39;) &lt; $workersLimitGarden&gt;&gt;
	&lt;&lt;link &#39;Assign to garden&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.assignedTo = &#39;garden&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.gardenDay = 0&gt;&gt;
		&lt;&lt;if $tmpGirlBack&gt;&gt;
			&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
			&lt;&lt;set $slaveId to null&gt;&gt;
			&lt;&lt;goto $tmpGirlBack&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &gt;= 50 &amp;&amp; $slaveId !== undefined &amp;&amp; !$tmpGirl.assignedTo&gt;&gt;
	&lt;&lt;link &#39;Assign to streets&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.assignedTo = &#39;streets&#39;&gt;&gt;
		&lt;&lt;if $tmpGirlBack&gt;&gt;
			&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
			&lt;&lt;set $slaveId to null&gt;&gt;
			&lt;&lt;goto $tmpGirlBack&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
	&lt;&lt;if $tmpGirl.pregnancy &amp;&amp; $tmpGirl.pregnancy &gt;= 7&gt;&gt;
		&lt;&lt;if $backpack.has(&#39;pregnancy_potion&#39;)&gt;&gt;
			&lt;&lt;link &#39;Give pregnancy potion&#39;&gt;&gt;
				&lt;&lt;goto &#39;Girl - pregnancy potion&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $backpack.has(&#39;pregnancy_speed_potion&#39;)&gt;&gt;
			&lt;&lt;link &#39;Give pregnancy speed potion&#39;&gt;&gt;
				&lt;&lt;goto &#39;Girl - pregnancy speed potion&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $tmpGirl.assignedTo&gt;&gt;
		&lt;&lt;link &quot;Remove assigned job ($tmpGirl.assignedTo)&quot;&gt;&gt;
			&lt;&lt;run delete $tmpGirl.assignedTo&gt;&gt;
			&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if ($game.hotShower ?? false) &amp;&amp; !$tmpGirl.washed &amp;&amp; $player.energy &gt;= 10&gt;&gt;
	  &lt;&lt;link &#39;Wash her&#39;&gt;&gt;
	  		&lt;&lt;energy -10&gt;&gt;
		  &lt;&lt;goto &#39;Slave - wash&#39;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if !$tmpGirl.gift&gt;&gt;
		&lt;&lt;link &#39;Give gift&#39;&gt;&gt;
			&lt;&lt;script&gt;&gt;
				Dialog.setup(&quot;Give gift&quot;, &quot;Give gift&quot;);
				Dialog.wiki(Story.get(&quot;Give gift&quot;).processText());
				Dialog.open();
	  		&lt;&lt;/script&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if !$tmpGirl.workout &amp;&amp; $player.energy &gt;= 10&gt;&gt;
		&lt;&lt;link &#39;Workout together&#39;&gt;&gt;
			&lt;&lt;set $tmpGirl.workout = true&gt;&gt;
			&lt;&lt;energy -10&gt;&gt;
			&lt;&lt;goto &#39;Girl - workout together&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &#39;Customize&#39;&gt;&gt;
		&lt;&lt;goto &#39;Girl customize&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
 &lt;&lt;link &#39;Go back&#39;&gt;&gt;
	&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $charId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $characters[$charId] = $tmpGirl&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run delete $slaveId&gt;&gt;
	&lt;&lt;run delete $charId&gt;&gt;
	&lt;&lt;run delete $guestId&gt;&gt;
	&lt;&lt;if $tmpGirlBack&gt;&gt;
		&lt;&lt;goto $tmpGirlBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="40" name="Girl fuck" tags="sex" position="2653,93" size="100,100">[[Blowjob|Girl fuck - blowjob]]
[[Lick her|Girl fuck - lick pussy]]
[[Pussy|Girl fuck - pussy]]
[[Anal|Girl fuck - anal]]

&lt;&lt;link &#39;End&#39;&gt;&gt;
	&lt;&lt;if $oldTmpGirlLocation&gt;&gt;
		&lt;&lt;set $tmpGirl.location = $oldTmpGirlLocation&gt;&gt;
		&lt;&lt;run delete $oldTmpGirlLocation&gt;&gt;
	&lt;&lt;/if&gt;&gt;
  	&lt;&lt;if $tmpGirlViewBack &amp;&amp; !tags($tmpGirlViewBack).includes(&#39;girlview&#39;)&gt;&gt;
		&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
			&lt;&lt;run delete $slaveId&gt;&gt;
		&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
			&lt;&lt;run delete $guestId&gt;&gt;
		&lt;&lt;elseif typeof $charId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $characters[$charId] = $tmpGirl&gt;&gt;
			&lt;&lt;run delete $charId&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $tmpGirlViewBack&gt;&gt;
			&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;if $tmpGirlViewBack&gt;&gt;
			&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="41" name="Girl fuck - blowjob" tags="sex" position="2650,209" size="100,100">&lt;&lt;actionImage $tmpGirl bj&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
&lt;&lt;energy -5&gt;&gt;
&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  	&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;horny 20&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	[[Cum on face|Girl fuck - cum on face]]
	[[Cum in mouth|Girl fuck - cum in mouth]]
&lt;&lt;else&gt;&gt;
	[[Blowjob|Girl fuck - blowjob]]
	[[Deepthroat|Girl fuck - deepthroat]]
	[[Lick her|Girl fuck - lick pussy]]
	[[Pussy|Girl fuck - pussy]]
	[[Anal|Girl fuck - anal]]

	[[Back|Girl fuck]]
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="42" name="Widget actions" tags="widget" position="2998,95" size="100,100">&lt;&lt;widget actionText&gt;&gt;
	&lt;&lt;print $args[1]&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget actionImage&gt;&gt;
	&lt;div class=&quot;action-image&quot;&gt;
		&lt;&lt;if $args[0].virgin &amp;&amp; $args[1] === &#39;pussy&#39;&gt;&gt;
			[img[setup.ImagePath+&#39;game/misc/deflower.webp&#39;]]
		&lt;&lt;else&gt;&gt;
		  &lt;&lt;if typeof setup.actions[$args[0].name] !== &#39;undefined&#39; &amp;&amp; typeof setup.actions[$args[0].name][$args[0].location] !== &#39;undefined&#39; &amp;&amp; typeof setup.actions[$args[0].name][$args[0].location][$args[1]] !== &#39;undefined&#39;&gt;&gt;
			  	&lt;&lt;actionImageOutput &#96;setup.ImagePath+&#39;actions/&#39; + $args[0].name + &#39;/&#39; + $args[0].location  + &#39;/&#39;+ $args[1] + &#39;/&#39; + either(setup.actions[$args[0].name][$args[0].location][$args[1]])&#96;&gt;&gt;
		  &lt;&lt;elseif typeof setup.actions[$args[0].name] !== &#39;undefined&#39; &amp;&amp; typeof setup.actions[$args[0].name][&#39;bedroom&#39;] !== &#39;undefined&#39; &amp;&amp; typeof setup.actions[$args[0].name][&#39;bedroom&#39;][$args[1]] !== &#39;undefined&#39;&gt;&gt;
		  		&lt;&lt;actionImageOutput &#96;setup.ImagePath+&#39;actions/&#39; + $args[0].name + &#39;/bedroom/&#39;+ $args[1] + &#39;/&#39; + either(setup.actions[$args[0].name][&#39;bedroom&#39;][$args[1]])&#96;&gt;&gt;
		  &lt;&lt;elseif !$args[0].gender &amp;&amp; typeof setup.actions[$args[0].race] !== &#39;undefined&#39; &amp;&amp; typeof setup.actions[$args[0].race][$args[0].location] !== &#39;undefined&#39; &amp;&amp; typeof setup.actions[$args[0].race][$args[0].location][$args[1]] !== &#39;undefined&#39;&gt;&gt;
		  		&lt;&lt;actionImageOutput &#96;setup.ImagePath+&#39;actions/&#39; + $args[0].race + &#39;/&#39; + $args[0].location  + &#39;/&#39;+ $args[1] + &#39;/&#39; + either(setup.actions[$args[0].race][$args[0].location][$args[1]])&#96;&gt;&gt;
		  &lt;&lt;elseif !$args[0].gender &amp;&amp; setup.getAge($args[0]) &gt;= 55 &amp;&amp; typeof setup.actions[&#39;gilf&#39;][$args[0].location] !== &#39;undefined&#39; &amp;&amp; typeof setup.actions[&#39;gilf&#39;][$args[0].location][$args[1]] !== &#39;undefined&#39;&gt;&gt;
		  	 	&lt;&lt;actionImageOutput &#96;setup.ImagePath+&#39;actions/gilf/&#39; + $args[0].location  + &#39;/&#39;+ $args[1] + &#39;/&#39; + either(setup.actions[&#39;gilf&#39;][$args[0].location][$args[1]])&#96;&gt;&gt;
		  &lt;&lt;elseif ($args[0].pregnancy ?? 0) &gt; 100 &amp;&amp; typeof setup.actions[&#39;pregnant&#39;][$args[0].location] !== &#39;undefined&#39; &amp;&amp; typeof setup.actions[&#39;pregnant&#39;][$args[0].location][$args[1]] !== &#39;undefined&#39;&gt;&gt;
		  		&lt;&lt;actionImageOutput &#96;setup.ImagePath+&#39;actions/pregnant/&#39; + $args[0].location  + &#39;/&#39;+ $args[1] + &#39;/&#39; + either(setup.actions[&#39;pregnant&#39;][$args[0].location][$args[1]])&#96;&gt;&gt;
		  &lt;&lt;elseif $args[0].gender === 1&gt;&gt;
		  		&lt;&lt;actionImageOutput &#96;setup.ImagePath+&#39;actions/male/&#39; + $args[0].location  + &#39;/&#39;+ $args[1] + &#39;/&#39; + either(setup.actions.male[$args[0].location][$args[1]])&#96;&gt;&gt;
		  &lt;&lt;else&gt;&gt;
			  &lt;&lt;if typeof setup.actions[&#39;default&#39;][$args[0].location][$args[1]] !== &#39;undefined&#39;&gt;&gt;
			  		&lt;&lt;actionImageOutput &#96;setup.ImagePath+&#39;actions/default/&#39; + $args[0].location  + &#39;/&#39;+ $args[1] + &#39;/&#39; + either(setup.actions.default[$args[0].location][$args[1]])&#96;&gt;&gt;
			  &lt;&lt;else&gt;&gt;
			  		&lt;&lt;actionImageOutput &#96;setup.ImagePath+&#39;actions/default/bedroom/&#39;+ $args[1] + &#39;/&#39; + either(setup.actions.default.bedroom[$args[1]])&#96;&gt;&gt;
			  &lt;&lt;/if&gt;&gt;
		  &lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;/div&gt;
	&lt;br /&gt;
	&lt;div class=&quot;action-text&quot;&gt;
		&lt;&lt;if $args[0].virgin &amp;&amp; typeof $actionText[$args[1]] !== &#39;undefined&#39; &amp;&amp; typeof $actionText[$args[1]][&#39;v&#39;] !== &#39;undefined&#39;&gt;&gt;
			 &lt;&lt;print $actionText[$args[1]][&#39;v&#39;].replace(&#39;%name%&#39;, $args[0].name)&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;if $args[0].gender === 1&gt;&gt;
				&lt;&lt;if $actionText[&#39;male&#39;][$args[1]] !== undefined&gt;&gt;
					&lt;&lt;print $actionText[&#39;male&#39;][$args[1]][0].replace(&#39;%name%&#39;, $args[0].name)&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;if $actionText[$args[1]] !== undefined&gt;&gt;
					&lt;&lt;if ($actionText[$args[1]] ?? false) &amp;&amp; ($actionText[$args[1]][&#39;stats&#39;] ?? false)&gt;&gt;
						&lt;&lt;for _sortedTextsStat, _sortedTextsData range $actionText[$args[1]][&#39;stats&#39;]&gt;&gt;
							&lt;&lt;if typeof $tmpGirl[$args[1]] !== &#39;undefined&#39; &amp;&amp; $tmpGirl[$args[1]] &gt;= _sortedTextsData.s&gt;&gt;
								&lt;&lt;set _randomSortedText = _sortedTextsData.texts[Math.floor(Math.random()*_sortedTextsData.texts.length)]&gt;&gt;
							&lt;&lt;/if&gt;&gt;
						&lt;&lt;/for&gt;&gt;
						&lt;&lt;print _randomSortedText.replace(&#39;%name%&#39;, setup.displayName($args[0]))&gt;&gt;
					&lt;&lt;else&gt;&gt;
						&lt;&lt;print $actionText[$args[1]][0].replace(&#39;%name%&#39;, $args[0].name)&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget actionDream&gt;&gt;
	&lt;&lt;set $sleepAction = {
		place: either(Object.keys(setup.actions.default)),
		type: either(&#39;pussy&#39;, &#39;anal&#39;, &#39;bj&#39;, &#39;dp&#39;)
	}&gt;&gt;
	
	[img[setup.ImagePath+&#39;actions/default/&#39; + $sleepAction.place  + &#39;/&#39; + $sleepAction.type  + &#39;/&#39; + either(setup.actions.default[$sleepAction.place][$sleepAction.type])]]	
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget actionImageOutput&gt;&gt;
	&lt;&lt;set _extension = $args[0].split(&#39;.&#39;).pop()&gt;&gt;
	&lt;&lt;if [&#39;mp4&#39;, &#39;webm&#39;].includes(_extension)&gt;&gt;
		&lt;&lt;set _videoType = &#39;video/&#39; + _extension&gt;&gt;
		&lt;&lt;set $url to $args[0]&gt;&gt;
		&lt;video controls autoplay loop&gt;
  			&lt;source @src=&quot;$url&quot; @type=&quot;_videoType&quot;&gt;
		&lt;/video&gt;
	&lt;&lt;else&gt;&gt;
		[img[$args[0]]]
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="43" name="Girl fuck - deepthroat" tags="sex" position="2783,211" size="100,100">&lt;&lt;actionImage $tmpGirl dp&gt;&gt;
&lt;&lt;horny 20&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
&lt;&lt;energy -5&gt;&gt;

&lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship + 1, 100)&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;deepthroat&#39;) &amp;&amp; $tmpGirl.relationship &lt; 100&gt;&gt;
	&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; takes your cock as deep as it can go with a with pleasure in her eyes&lt;br /&gt;
	Relationship increased by 1
	&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	[[Cum on face|Girl fuck - cum on face]]
	[[Cum in mouth|Girl fuck - cum in mouth]]
&lt;&lt;else&gt;&gt;
	[[Blowjob|Girl fuck - blowjob]]
	[[Deepthroat|Girl fuck - deepthroat]]
	[[Lick her|Girl fuck - lick pussy]]
	[[Pussy|Girl fuck - pussy]]
	[[Anal|Girl fuck - anal]]
	[[Back|Girl fuck]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="44" name="Girl fuck - anal" tags="sex" position="2651,337" size="100,100">&lt;&lt;if $tmpGirl.anal &lt; 20&gt;&gt; 
	&lt;center&gt;
	[img[setup.ImagePath+&#39;game/misc/no_anal.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You tried to fuck her in the ass but your dick is too big for her and she can&#39;t relax. 
	&lt;br /&gt;
	She can&#39;t take it in her ass and begs you to stop.
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; submission increased by 1&lt;/strong&gt;
	&lt;&lt;set $tmpGirl.sub = Math.min($tmpGirl.sub+1, 100)&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;actionImage $tmpGirl anal&gt;&gt;
	
	&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;analslut&#39;)&gt;&gt;
	  &lt;&lt;if $tmpGirl.relationship &gt; 10&gt;&gt;
		  &lt;&lt;set $tmpGirl.horny += 20&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
	  &lt;&lt;if $tmpGirl.horny &gt;= 100&gt;&gt;
	  		&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;squirter&#39;)&gt;&gt;
	  			&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;actionImage $tmpGirl squirt_anal&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
		  &lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; has an orgasm!&lt;/strong&gt;
		  &lt;&lt;set 
			  $tmpGirl.horny = 0,
			  $tmpGirl.orgasms++
		  &gt;&gt;
		  &lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship+1, 100)&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
  	&lt;&lt;/if&gt;&gt;

	&lt;&lt;horny 20&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $tmpGirl.anal++&gt;&gt;
&lt;&lt;if $tmpGirl.anal &gt; 100&gt;&gt;
	&lt;&lt;set $tmpGirl.anal = 100&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;addmins 5&gt;&gt;
&lt;&lt;energy -5&gt;&gt;
&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  	&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	[[Withdraw|Girl fuck - cum on back]]
	[[Cum in ass|Girl fuck - cum in ass]]
&lt;&lt;else&gt;&gt;
	  [[Blowjob|Girl fuck - blowjob]]
	  [[Lick her|Girl fuck - lick pussy]]
	  [[Pussy|Girl fuck - pussy]]
	  [[Anal|Girl fuck - anal]]
	[[Back|Girl fuck]]
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="45" name="Girl fuck - pussy" tags="sex" position="2774,339" size="100,100">&lt;&lt;actionImage $tmpGirl pussy&gt;&gt;

&lt;&lt;if !($tmpGirl.traits ?? []).includes(&#39;analslut&#39;)&gt;&gt;
  &lt;&lt;if $tmpGirl.relationship &gt; 10&gt;&gt;
	  &lt;&lt;set $tmpGirl.horny += 20&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $tmpGirl.horny &gt;= 100&gt;&gt;
  		&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;squirter&#39;)&gt;&gt;
  			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;actionImage $tmpGirl squirt&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
	  &lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; has an orgasm!&lt;/strong&gt;
	  &lt;&lt;set 
		  $tmpGirl.horny = 0,
		  $tmpGirl.orgasms++
	  &gt;&gt;
	  &lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship+1, 100)&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;horny 20&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
&lt;&lt;energy -5&gt;&gt;
&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  	&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	[[Withdraw|Girl fuck - cum on stomach]]
	[[Cum inside|Girl fuck - cum in pussy]]
&lt;&lt;else&gt;&gt;
	[[Blowjob|Girl fuck - blowjob]]
	[[Lick her|Girl fuck - lick pussy]]
	[[Pussy|Girl fuck - pussy]]
	[[Anal|Girl fuck - anal]]
	[[Back|Girl fuck]]
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $tmpGirl.virgin = false&gt;&gt;
</tw-passagedata><tw-passagedata pid="46" name="Girl talk" tags="sex no-redirect" position="2773,92" size="100,100">&lt;&lt;set _talkDialogs = [
	&quot;In this world, kindness is rare. But every act of compassion matters. We have to hold on to our humanity.&quot;,
	&quot;Amidst the remnants of civilization, I stumbled upon a group of survivors, their tired eyes reflecting resilience, as they whispered tales of lost loved ones and whispered hopes of finding a sanctuary in this merciless world.&quot;,
	&quot;I&#39;ve seen things you wouldn&#39;t believe. But I still believe in the goodness that can exist in humanity. We can&#39;t lose hope.&quot;,
	&quot;You&#39;ve got that fire in your eyes. Haven&#39;t seen  that in a long time. Just remember, trust no one and keep your guard up.&quot;,
	&quot;I lost everything in the chaos, but I won&#39;t let it define me. We can rebuild, stronger than before.&quot;,
	&quot;The wasteland is unforgiving, but we still find beauty in the smallest moments. Like that sunset over the ruins.&quot;,
	&quot;Every step we take in this unforgiving wasteland is a reminder of the world that once was, but we must adapt and find a way to survive.&quot;,
	&quot;Scavenging for supplies has become a daily struggle, but we persevere, knowing that each find brings us closer to another day of existence.&quot;,
	&quot;Have you heard the rumors of a group rising against the chaos, fighting for a chance at rebuilding society? I wonder if it&#39;s true.&quot;,
	&quot;Do you remember what life was like before? Sometimes, I catch myself longing for the comforts we once took for granted.&quot;,
	&quot;Despite the hardships, I believe that hope can still be found. We must cling to it, for without hope, we are truly lost.&quot;
]&gt;&gt;

&lt;&lt;set _talkDialog = _talkDialogs[Math.floor(Math.random()*_talkDialogs.length)]&gt;&gt;
&lt;br /&gt;
&lt;&lt;if $tmpGirl.gender&gt;&gt;
	&lt;&lt;anonguy &#39;baba&#39;&gt;&gt;
	  &lt;&lt;=_talkDialog&gt;&gt;
  &lt;&lt;/anonguy&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;anongirl &#39;baba&#39;&gt;&gt;
	  &lt;&lt;=_talkDialog&gt;&gt;
  &lt;&lt;/anongirl&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $slaveId !== undefined &amp;&amp; $tmpGirl.relationship &gt; 30 &amp;&amp; !$tmpGirl.gender&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She had &lt;strong&gt;&lt;&lt;=$tmpGirl.orgasms&gt;&gt;&lt;/strong&gt; orgasms
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Back&#39;&gt;&gt;
  	&lt;&lt;if $tmpGirlViewBack&gt;&gt;
		&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto [[Girl view]]&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;done&gt;&gt;
	&lt;&lt;if $tmpGirl.gender&gt;&gt;
		&lt;&lt;replace &quot;.anonguy.say p:first&quot;&gt;&gt;&lt;&lt;=$tmpGirl.name&gt;&gt;&lt;&lt;/replace&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;replace &quot;.anongirl.say p:first&quot;&gt;&gt;&lt;&lt;=$tmpGirl.name&gt;&gt;&lt;&lt;/replace&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="47" name="Basement" tags="Place" position="1202,389" size="100,100">&lt;&lt;set $workingInGarden = 0&gt;&gt;
&lt;&lt;set $workingOnStreets = 0&gt;&gt;
&lt;&lt;set $showSlavesCount = 0&gt;&gt;

&lt;h1 class=&quot;ptitle&quot;&gt;BASEMENT&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/basement_head.jpg&#39;]]
&lt;/div&gt;
&lt;h3&gt;Slaves&lt;/h3&gt;
&lt;&lt;set _basementLimitShow = ($basementLimit - $slaves.length)&gt;&gt;
&lt;&lt;if _basementLimitShow &lt; 0&gt;&gt;
	&lt;&lt;set _basementLimitShow = 0&gt;&gt;
&lt;&lt;/if&gt;&gt;
Free rooms left: &lt;strong&gt;&lt;&lt;=_basementLimitShow&gt;&gt;&lt;/strong&gt;

&lt;&lt;set $cellSlaveIds = []&gt;&gt;
&lt;&lt;set _hornySlaveId = null&gt;&gt;
&lt;&lt;if $slaves.length &lt; 1&gt;&gt;
	&lt;div style=&quot;margin-top: 20px;&quot;&gt;
		You have no slaves...
	&lt;/div&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set _girlGuest = setup.getPersonsForLocation($guests, &#39;mistress&#39;)&gt;&gt;
	&lt;&lt;if _girlGuest.length &gt; 0 &amp;&amp; timeBetween(&#39;12:00&#39;, &#39;22:00&#39;) &amp;&amp; typeof _girlGuest.sick === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl = $guests[_girlGuest[0]]&gt;&gt;
		&lt;&lt;set $tmpGirl.location = &#39;basement&#39;&gt;&gt;
		&lt;center&gt;
			&lt;&lt;actionImage $tmpGirl mistress&gt;&gt;
		&lt;/center&gt; 
		&lt;&lt;=$tmpGirl.name&gt;&gt; is whipping one of your slaves&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;set _girlGuestLink = &#39;Approach &#39; + $tmpGirl.name&gt;&gt;
		&lt;&lt;link &#96;_girlGuestLink&#96;&gt;&gt;
			&lt;&lt;set $tmpGirlViewBack = &#39;Girl view - guest&#39;&gt;&gt;
			&lt;&lt;set $tmpGirlBack = &#39;Basement&#39;&gt;&gt;
			&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
			&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
			&lt;&lt;set $guestId = _girlGuest[0]&gt;&gt;
			&lt;&lt;run delete $slaveId&gt;&gt;
			&lt;&lt;run delete $charId&gt;&gt;
			&lt;&lt;goto &#39;Girl view - guest&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;

	&lt;table id=&quot;slaves&quot;&gt;
	&lt;&lt;for _i to 0; _i lt $slaves.length; _i++&gt;&gt;
		&lt;&lt;capture _i&gt;&gt;
		&lt;&lt;set _isSick = (typeof $slaves[_i].sick !== &#39;undefined&#39;)&gt;&gt;
		&lt;&lt;set _genderClass = &#39;gender-&#39; + (!$slaves[_i].gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
		&lt;&lt;if $slaves[_i].assignedTo === &#39;garden&#39; and timeBetween(&#39;08:00&#39;, &#39;16:00&#39;) &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;set $workingInGarden++&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $slaves[_i].assignedTo === &#39;streets&#39; and timeBetween(&#39;14:00&#39;, &#39;06:00&#39;) &amp;&amp; !_isSick&gt;&gt;
			&lt;&lt;set $workingOnStreets++&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $slaves[_i].horny &gt; 70 &amp;&amp; !_hornySlaveId&gt;&gt;
			&lt;&lt;set _hornySlaveId = _i&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $showSlavesCount++&gt;&gt;
		&lt;&lt;set $cellSlaveIds.push(_i)&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
				&lt;&lt;if setup.getAge($slaves[_i]) &lt; 18&gt;&gt;
						&lt;span class=&quot;name-no-click&quot;&gt;&lt;&lt;=$slaves[_i].name&gt;&gt;&lt;/span&gt;
				&lt;&lt;else&gt;&gt;
					&lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
					  &lt;&lt;link $slaves[_i].name&gt;&gt;
						&lt;&lt;set $tmpGirl to $slaves[_i]&gt;&gt;
						&lt;&lt;set $tmpGirl.location = &#39;basement&#39;&gt;&gt;
						&lt;&lt;set $tmpGirlBack = &#39;Basement&#39;&gt;&gt;
						&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
						&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
						&lt;&lt;set $tmpGirlViewBack = (!$slaves[_i].gender ? &#39;Girl&#39; : &#39;Guy&#39;) + &#39; view&#39;&gt;&gt;
						&lt;&lt;set $slaveId = _i&gt;&gt;
						
						&lt;&lt;if !$slaves[_i].gender &amp;&amp; !($slaves[_i].quests ?? {}).firstBasementVisit&gt;&gt;
							&lt;&lt;if typeof $slaves[_i].quests === &#39;undefined&#39;&gt;&gt;
								&lt;&lt;set $slaves[_i].quests = {}&gt;&gt;
							&lt;&lt;/if&gt;&gt;
							&lt;&lt;set $slaves[_i].quests.firstBasementVisit = true&gt;&gt;
							&lt;&lt;goto &#39;Basement - first girl visit&#39;&gt;&gt;
						&lt;&lt;else&gt;&gt;
							&lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
						&lt;&lt;/if&gt;&gt;
					  &lt;&lt;/link&gt;&gt;
					&lt;/span&gt;
				  &lt;&lt;/if&gt;&gt;
				  
				  &lt;&lt;if $slaves[_i].pregnancy &gt;= 7&gt;&gt;
					(pregnant &lt;&lt;=$slaves[_i].pregnancy&gt;&gt; days)
				  &lt;&lt;/if&gt;&gt;
				  
				  &lt;&lt;if _isSick&gt;&gt;
				  	(sick)
				  &lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;if !$slaves[_i].gender &amp;&amp; setup.getAge($slaves[_i]) &gt;= 17&gt;&gt;
						Beauty score: &lt;&lt;=$slaves[_i].beauty&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge($slaves[_i])&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;if $slaves[_i].assignedTo&gt;&gt;
					(&lt;&lt;=$slaves[_i].assignedTo&gt;&gt;)
				&lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;link &#39;Release&#39;&gt;&gt;
					  &lt;&lt;dialog &#39;Release&#39;&gt;&gt;
						  Are you sure you want to release &lt;&lt;=setup.pronounceWho($slaves[_i])&gt;&gt;?
						  &lt;br /&gt;
						  &lt;&lt;link &#39;Yes&#39;&gt;&gt;
							  &lt;&lt;set $tmpGirl = $slaves[_i]&gt;&gt;
							  &lt;&lt;set $slaveId = _i&gt;&gt;
							  &lt;&lt;dialogclose&gt;&gt;
							  &lt;&lt;goto &#39;Basement - release slave&#39;&gt;&gt;
						  &lt;&lt;/link&gt;&gt;	
					  &lt;&lt;/dialog&gt;&gt;
				  &lt;&lt;/link&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;link &#39;Kill&#39;&gt;&gt;
					&lt;&lt;dialog &#39;Kill&#39;&gt;&gt;
						Are you sure you want to kill &lt;&lt;=setup.pronounceWho($slaves[_i])&gt;&gt;?
						&lt;br /&gt;
						&lt;&lt;link &#39;Yes&#39; &#39;Basement&#39;&gt;&gt;
							&lt;&lt;run $slaves.splice(_i, 1)&gt;&gt;
							&lt;&lt;dialogclose&gt;&gt;
							&lt;&lt;set $player.reputation++&gt;&gt;
							&lt;&lt;set $player.goodwill--&gt;&gt;
							&lt;&lt;statsAdd &#39;slaves_killed&#39;&gt;&gt;
							&lt;&lt;statsAdd &#39;people_killed&#39;&gt;&gt;
						&lt;&lt;/link&gt;&gt;	
					&lt;&lt;/dialog&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$showSlavesCount &amp;&amp; $workingInGarden&gt;&gt;
	&lt;&lt;if($game.location.greenhouse ?? false)&gt;&gt;
		&lt;&lt;set $workingPlace = &#39;greenhouse&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set $workingPlace = &#39;garden&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	All your slaves are at assigned jobs...
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $showSlavesCount &amp;&amp;  !$locationEvents.basement&gt;&gt;
	&lt;&lt;set $randomNumber = randomInteger(1, 10)&gt;&gt;
	&lt;&lt;if $randomNumber === 0&gt;&gt;
		&lt;&lt;set $eventSlaveId = Math.floor(Math.random()*$cellSlaveIds.length);&gt;&gt;
		&lt;&lt;if $slaves[$eventSlaveId].sub &lt; 50 &amp;&amp; setup.getAge($slaves[$eventSlaveId]) &gt; 17 &amp;&amp; !$slaves[$eventSlaveId].gender&gt;&gt;
			&lt;&lt;set $locationEvents.basement = true&gt;&gt;
			&lt;&lt;goto &#39;Basement event - try escape&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif $randomNumber === 1 &amp;&amp; _hornySlaveId &amp;&amp; setup.getAge($slaves[_hornySlaveId]) &gt; 17 &amp;&amp; !$slaves[_hornySlaveId].gender&gt;&gt;
		&lt;&lt;set $hornySlaveId = _hornySlaveId&gt;&gt;
		&lt;&lt;set $locationEvents.basement = true&gt;&gt;
		&lt;&lt;goto &#39;Basement event - horny slave&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Back|Wood cabin]]</tw-passagedata><tw-passagedata pid="48" name="Girl fuck - cum on face" tags="sex" position="2958,463" size="100,100">&lt;&lt;actionImage $tmpGirl cum_on_face&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
[[Back|Girl fuck]]</tw-passagedata><tw-passagedata pid="49" name="Girl fuck - cum in mouth" tags="sex" position="3066,462" size="100,100">&lt;&lt;actionImage $tmpGirl cum_in_mouth&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;

&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;cumslut&#39;) &amp;&amp; $tmpGirl.relationship &lt; 100&gt;&gt;
	&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; Swallows all cum and even licks her fingers with smile on her face&lt;br /&gt;
	Relationship increased by 1
	&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

[[Back|Girl fuck]]</tw-passagedata><tw-passagedata pid="50" name="Girl fuck - cum on back" tags="sex" position="2846,460" size="100,100">&lt;&lt;actionImage $tmpGirl cum_on_back&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
[[Back|Girl fuck]]</tw-passagedata><tw-passagedata pid="51" name="Girl fuck - cum in ass" tags="sex" position="2738,460" size="100,100">&lt;&lt;actionImage $tmpGirl cum_in_ass&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Girl fuck]]</tw-passagedata><tw-passagedata pid="52" name="Girl fuck - cum on stomach" tags="sex" position="2516,454" size="100,100">&lt;&lt;actionImage $tmpGirl cum_on_stomach&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Girl fuck]]</tw-passagedata><tw-passagedata pid="53" name="Girl fuck - cum in pussy" tags="sex" position="2630,458" size="100,100">&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;actionImage $tmpGirl cum_in_pussy&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;

&lt;&lt;if setup.getAge($tmpGirl) &lt; 55 &amp;&amp; typeof $tmpGirl.pregnancy === &#39;undefined&#39; &amp;&amp; (
	(setup.perkHas(&#39;fertility&#39;) &amp;&amp; setup.percentageChance(50)) || 
	(!setup.perkHas(&#39;fertility&#39;) &amp;&amp; setup.percentageChance(10)) || 
	($tmpGirl.traits ?? []).includes(&#39;breeder&#39;)
)&gt;&gt;
	&lt;&lt;set $tmpGirl.pregnancy_father = &#39;mc&#39;&gt;&gt;
	&lt;&lt;set $tmpGirl.pregnancy = 0&gt;&gt;
	&lt;&lt;statsAdd &#39;girls_impregnated&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Girl fuck]]</tw-passagedata><tw-passagedata pid="54" name="Random event - meet girl #3" tags="" position="5742,16" size="100,100"> &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/forest_girl.webp&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
You notice a girl walking through the forest and decide to check out what she&#39;s doing.
 &lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Go closer&#39;&gt;&gt;
	&lt;&lt;newgirl&gt;&gt;
	&lt;&lt;set $tmpGirl.location = &#39;forest&#39;&gt;&gt;
	&lt;&lt;set $tmpGirl.rape to true&gt;&gt;
	&lt;&lt;set $tmpGirlCapture to true&gt;&gt;
	&lt;&lt;if setup.getAge($tmpGirl) &lt; 40 &amp;&amp; randomInteger(1,4) === 1&gt;&gt;
		&lt;&lt;set $tmpGirl.pregnancy = randomInteger(10, 100)&gt;&gt;
		&lt;&lt;set $tmpGirl.virgin = false&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run delete $slaveId, delete $guestId, delete $charId&gt;&gt;
	&lt;&lt;set $tmpGirlBack = &#39;Outside&#39;&gt;&gt;
	&lt;&lt;goto [[Girl view]]&gt;&gt;
&lt;&lt;/link&gt;&gt;

[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="55" name="Farm - shop" tags="bg-farm" position="1934,911" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM - SHOP&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
  &lt;&lt;set $shopItems = [
	  {name:&#39;food&#39;,price:1, sell: false},
	  {name:&#39;wood&#39;,price:1},
	  {name:&#39;axe&#39;, price:20},
	  {name:&#39;rope&#39;,price:10},
  ]&gt;&gt;
  &lt;&lt;if $characters.vincent.quests.pregnancy_talked&gt;&gt;
  	&lt;&lt;run $shopItems.push({
		name: &#39;milk&#39;,
		price: 10,
		sell: false
	})&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;shop $shopItems &#39;Farm - shop&#39; &#39;&lt;&lt;if $characters.vincent.relationship &lt; 20&gt;&gt;&lt;&lt;set $characters.vincent.relationship++&gt;&gt;&lt;&lt;/if&gt;&gt;&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Farm]]</tw-passagedata><tw-passagedata pid="56" name="Girl escape" tags="" position="2886,94" size="100,100">[img[setup.ImagePath+&#39;places/explore/escape.webp&#39;]]
&lt;br /&gt;&lt;br /&gt;
You don&#39;t have enough strength and girl manages to escape
&lt;br /&gt;&lt;br /&gt;
[[Leave|Outside]] </tw-passagedata><tw-passagedata pid="57" name="Fireplace - train strength" tags="" position="749,448" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/cabin/workout_strength.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Get walk to the open space and start doing some push-ups and sit-ups.
&lt;br /&gt;Just enough to keep everything running as it should.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Your strength increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if setup.percentageChance(10)&gt;&gt;
	&lt;&lt;set _persons = setup.getPersonsForLocation($guests, &#39;garden&#39;)&gt;&gt;
	&lt;&lt;if _persons.length &gt; 0&gt;&gt;
		&lt;&lt;set _randomPerson = _persons[Math.floor(Math.random()*_persons.length)]&gt;&gt;
		&lt;&lt;if $guests[_randomPerson].relationship &gt; 50&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/cabin/workout_look.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			While working in the greenhouse &lt;strong&gt;&lt;&lt;=$guests[_randomPerson].name&gt;&gt;&lt;/strong&gt; takes a break and walks near you.
			&lt;br /&gt; She stops and checks you out as you do push ups.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Ask if she would like to join&#39;&gt;&gt;
				&lt;&lt;set $randomPerson = _randomPerson&gt;&gt;
				&lt;&lt;goto &#39;Train strength event #1&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Back|Fire place]]</tw-passagedata><tw-passagedata pid="58" name="Random event - dead guy #1" tags="" position="5514,14" size="100,100">While walking down the road you hear a loud scream and decide to investigate.
&lt;br /&gt;
You approach the source of the sound carefully but when you reach it the only thing left is some  &lt;strong&gt;&lt;&lt;print either(&#39;middle&#39;, &#39;old&#39;)&gt;&gt;&lt;/strong&gt; age guy who was killed right before you got here.
&lt;br /&gt;
You get the feeling that someone is close as you look down at him.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.has(&#39;axe&#39;)&gt;&gt;
	[[Use axe to chop of leg|Random event - dead guy #1 chop leg]]
&lt;&lt;/if&gt;&gt;
[[Search him|Random event - dead guy #1 search]]
[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="59" name="Random event - dead guy #1 chop leg" tags="" position="5515,130" size="100,100"> &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/chop_leg.webp&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
You don&#39;t have enough strength to chop off his leg with one try so you take a few additional swings.  It&#39;s messy.  Blood is everywhere covering your face and clothing.  As you finish his leg you hear some noise and decide to leave.
 &lt;br /&gt;&lt;br /&gt;
 &lt;&lt;pickup $backpack &#39;raw_human_meat&#39; 1&gt;&gt;
 [[Leave|Outside]]</tw-passagedata><tw-passagedata pid="60" name="Random event - dead guy #1 search" tags="" position="5514,236" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/search_dead.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You search the dead guy&#39;s pockets with hope that attackers missed something.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if setup.percentageChance(50)&gt;&gt;
	&lt;&lt;set $foundItem = either(&#39;rope&#39;, &#39;bullet_revolver&#39;, &#39;necklace_cheap&#39;, &#39;champagne&#39;)&gt;&gt;
	&lt;&lt;pickup $backpack $foundItem 1&gt;&gt;
	You found &lt;strong&gt;&lt;&lt;print Item.get($foundItem).name&gt;&gt;&lt;/strong&gt;.
&lt;&lt;else&gt;&gt;
&lt;strong&gt;You found nothing.&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
As you finish the search you hear some noise and decide to leave. 
 &lt;br /&gt;&lt;br /&gt;
[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="61" name="Basement find" tags="" position="2167,641" size="100,100">&lt;&lt;addhours 4&gt;&gt;
&lt;&lt;set $game.location.basement to true&gt;&gt;
You wake up more energized than ever and decide to explore more around your cabin. As you&#39;re ready to finish your walk you notice some strange bushes next to a wall. You decide to pull them aside and find a window behind it.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/cabin/basement_window.jpg&#39;]]
&lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
You continue your search from inside and soon enough behind an old shelving unit you find a door leading to the basement. The room is dark and hardly any light gets inside from the dirty windows. You take a step forward and it shocks you.
 &lt;br /&gt;&lt;br /&gt;
 &lt;center&gt;
 [img[setup.ImagePath+&#39;places/cabin/basement_head.jpg&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
There are prison cells right under your cabin. You examine each cell and a few have broken locks while others are fine. Interesting, maybe you can find some use for these.
 &lt;br /&gt;&lt;br /&gt;
 &lt;center&gt;
 [img[setup.ImagePath+&#39;places/cabin/basement.jpg&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;

[[Go upstairs|Wood cabin]]
 </tw-passagedata><tw-passagedata pid="62" name="Random event - ambush #2" tags="" position="5627,14" size="100,100">&lt;&lt;set $ambushWeapon = either(&#39;gun&#39;, &#39;knife&#39;)&gt;&gt;
&lt;center&gt;[img[setup.ImagePath+&#39;places/explore/ambush.webp&#39;]]&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _isGirl = false&gt;&gt;
&lt;&lt;if setup.percentageChance(30)&gt;&gt;
	&lt;&lt;set _isGirl = true&gt;&gt;
&lt;&lt;/if&gt;&gt;


While walking close to the city border &lt;strong&gt;two&lt;/strong&gt; attackers jump out of the corner while holding &lt;strong&gt;&lt;&lt;print $ambushWeapon&gt;&gt;&lt;/strong&gt; in their hand.
They yell at you and asks where you&#39;re going before demanding do give something to them so they do not kill you. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.has(&#39;food&#39;)&gt;&gt;
	&lt;&lt;link &#39;Give them food (1)&#39;&gt;&gt;
		&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.money &gt;= 2&gt;&gt;
	&lt;&lt;link &#39;Give them bottle caps (2)&#39;&gt;&gt;
		&lt;&lt;set $player.money -= 2&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
	&lt;&lt;set $enemies = []&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
	&lt;&lt;if randomInteger(0, 10) === 0&gt;&gt;
		&lt;&lt;set 
			$tmpGuy.inventory = [],
			$tmpGuy.inventory.push(&#39;knife&#39;)
		&gt;&gt;
	&lt;&lt;/if&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	
	&lt;&lt;if _isGirl&gt;&gt;
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
  		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
  	&lt;&lt;fight $enemies &#39;Outside&#39; &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Try to run away&#39;&gt;&gt;
	&lt;&lt;if $player.strength &lt; 30&gt;&gt;
		&lt;&lt;set $game.death_reason = &#39;bullets in your back&#39;&gt;&gt;
		&lt;&lt;goto &#39;Dead&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="63" name="actionText" tags="" position="20,972" size="100,100">&lt;&lt;set 
$actionText = {
	bj: {
		0: &quot;%name% sucks your hard dick&quot;,
	}, 
	dp: {
		0: &quot;You grab the girl&#39;s head with your hands and drive your hard 			 dick deep into her throat.&lt;br /&gt;
			%name% coughs when her reflex kicks in.&quot;
	},
	anal: {
		stats: [
			{
				s: 0,
				texts: [
					&quot;%name% grunts uncomfortably but looks like she is trying to enjoy it.&quot;,
					&quot;%name% grunts with a little bit of pain while clenching her teeth as you fuck her tight asshole..&quot;
				]
			},
			{
				s: 20,
				texts: [
					&quot;%name% moans softly as you fuck her ass, looks like she starts to get used to it.&quot;
				]
			},
			{
				s: 50,
				texts: [
					&quot;She moans loudly in pleasure as you penetrates her ass, juices running down her ass from her pussy and lubing it even more.&quot;
				]
			},
		]
	},
	pussy: {
		&#39;v&#39;: &quot;%name% groans while clenching her teeth from pain.&lt;br /&gt;There&#39;s some &lt;strong&gt;blood&lt;/strong&gt; on your penis because you just &lt;strong&gt;deflowered&lt;/strong&gt; the girl.&quot;,
		0: &quot;%name% starts moaning when you fuck her&quot;
	},
	cum_in_pussy: {
		0: &quot;You continue to fuck %name% nonstop and pump her vagina full of your seed, filling her up with your white, warm cum.&quot;
	},
	cum_on_chest: {
		0: &quot;You pull your cock out of the %name% and immediately finish on her stomach.&quot;
	},
	cum_in_ass: {
		0: &quot;You with a groan, cum in the ass of the %name% really hard, dumping your cum inside her stretched ass.&quot;
	},
	male: {
		bj: [
			&quot;%name% sucks your hard dick&quot;,
		],
		dp: [
			&quot;You grab the guy&#39;s head with your hands and drive your hard dick deep into his throat.&lt;br /&gt;%name% coughs when his reflex kicks in.&quot;
		],
		anal: [
			&quot;%name% grunts with a little bit of pain while clenching his teeth as you fuck his tight asshole..&quot;
		],
		cum_in_ass: [
			&quot;You with a groan, cum in the ass of the %name% really hard, dumping your cum inside her stretched ass.&quot;
		]
	}
}
&gt;&gt;</tw-passagedata><tw-passagedata pid="64" name="PassageHeader" tags="" position="793,17" size="100,100">&lt;&lt;if tags().includes(&#39;sex&#39;)&gt;&gt;
	&lt;&lt;include &#39;NPC info&#39;&gt;&gt;

	&lt;&lt;if !tags().includes(&#39;no-redirect&#39;) &amp;&amp; $player.energy &lt; 5&gt;&gt;
		&lt;&lt;set $tiredNoTime = false&gt;&gt;
		&lt;&lt;goto &#39;Girl fuck - tired&#39;&gt;&gt;
	&lt;&lt;elseif !timeBetween(&#39;08:00&#39;, &#39;04:00&#39;) &amp;&amp; $tmpGirlBack&gt;&gt;
		&lt;&lt;set $tiredNoTime = false&gt;&gt;
		&lt;&lt;if passage().includes(&#39;Girl fuck&#39;)&gt;&gt;
			&lt;&lt;set $tiredNoTime = true&gt;&gt;
			&lt;&lt;goto &#39;Girl fuck - tired&#39;&gt;&gt;
		&lt;&lt;else&gt;&gt;
		
		&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
		&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
		&lt;&lt;elseif typeof $charId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $characters[$charId] = $tmpGirl&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	
			&lt;&lt;goto $tmpGirlBack&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if tags().includes(&#39;nightclub&#39;) &amp;&amp; !timeBetween(&#39;20:00&#39;, &#39;04:00&#39;)&gt;&gt;
	&lt;&lt;goto &#39;Nightclub&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if typeof $storage === &#39;undefined&#39;&gt;&gt;
  &lt;&lt;newinv $storage&gt;&gt;
  &lt;&lt;set $storage to Inventory.create()&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;include &#39;background&#39;&gt;&gt;
&lt;&lt;include &#39;NPC schedule&#39;&gt;&gt;</tw-passagedata><tw-passagedata pid="65" name="Random event - quicksand #4" tags="" position="5861,16" size="100,100"> &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/quicksand.webp&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
In the distance you see a guy who&#39;s drowning in quicksand.  He begs for help as he reaches out his hand.
 &lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Help him&#39;&gt;&gt;
	&lt;&lt;if $player.strength &lt; 10&gt;&gt;
		&lt;&lt;set $game.death_reason = &#39;drowning in quicksand&#39;&gt;&gt;
		&lt;&lt;goto &#39;Dead&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Random event - quicksand #4 helped&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Watch him drown and leave&#39;&gt;&gt;
	&lt;&lt;set $player.goodwill--&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="66" name="Random event - quicksand #4 helped" tags="" position="5857,124" size="100,100">&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/quicksand_helped.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You manage to pull him out as you both drop on the ground exhausted.
&lt;br /&gt;
&lt;&lt;set $player.strength++&gt;&gt;
&lt;&lt;if random(0, 5) == 0&gt;&gt;
	He quickly gets up, kicks you in the head with leg searches you while you&#39;re laying on the ground.
	&lt;&lt;set $capsMissing = ($player.money - 3 &gt; 0 ? 3 : $player.money)&gt;&gt;
	&lt;&lt;if $capsMissing&gt;&gt;
	  &lt;&lt;set $player.money -= $capsMissing&gt;&gt;
	  &lt;strong&gt;He managed to find &lt;&lt;=$capsMissing&gt;&gt; caps on you&lt;/strong&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	In gratitude he thanks you and offers his rope as a gift to you.
	&lt;&lt;pickup $backpack &#39;rope&#39; 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Outside]]

</tw-passagedata><tw-passagedata pid="67" name="Farm - quest delivery" tags="bg-farm" position="2291,912" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
Hey! You busy? I have a favor to ask. I&#39;ve got some goods I need to deliver somewhere but I don&#39;t have time. Could you?
&lt;br /&gt;
I&#39;ll pay you in advance just be careful. You&#39;ll need to go to the nearby underground city. That place doesn&#39;t have the best reputation.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Yes&#39;&gt;&gt;
	&lt;&lt;set $characters.vincent.delivery = true&gt;&gt;
	&lt;&lt;set $game.location.underground = true&gt;&gt;
	&lt;&lt;set $player.money += 30&gt;&gt;
	&lt;&lt;goto &#39;Underground city - first time&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;addmins 5&gt;&gt;</tw-passagedata><tw-passagedata pid="68" name="Farm - talk about girl" tags="bg-farm" position="2060,909" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;
&lt;&lt;you&gt;&gt;
	What&#39;s up with the girl in the cage?
&lt;&lt;/you&gt;&gt;
&lt;&lt;vincent&gt;&gt;
	What about her?
&lt;&lt;/vincent&gt;&gt;
&lt;&lt;you&gt;&gt;
	Who is she? Why is she in the cage? and where did you find her?
&lt;&lt;/you&gt;&gt;
&lt;&lt;vincent&gt;&gt;
 Son, are you alright? How come you don&#39;t know anything that happend around here?
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You explain that you spent a lot of time together with your grandfather in the bunker and just came outside a few days ago.
&lt;br /&gt;
&lt;strong&gt;Vincent&lt;/strong&gt; looks shocked and sighs loudly before starting to tell his side of the story.
&lt;br /&gt;&lt;br/&gt;
&lt;&lt;vincent&gt;&gt;
	Things started to go dark, instantly as bombs were dropped. A lot of people didn&#39;t even care that they&#39;d die. They just started looting every shop they could find. Police were nowhere to be found but you can&#39;t blame them.
&lt;br /&gt;&lt;br /&gt;
Why should they protect something if the world is ending soon right? Every large city had one big bomb dropped on it so an above ground city is pretty much unlivable. Underground is a different story. I wouldn&#39;t recommend you go underground by the way.&lt;br /&gt;
If you ask me, you should avoid any living soul you see. You can&#39;t trust anyone. Everyone is playing an angle.
&lt;br /&gt;&lt;br /&gt;
Oh, and the girl... I just found her in the forest like this. She doesn&#39;t speak and is very aggressive if released from the cage.
&lt;br /&gt;&lt;br /&gt;
You know what, though... For a few caps I could let you use her. The only rule is to not let her outside the cage.&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/vincent&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Thanks, I guess&#39; &#39;Farm&#39;&gt;&gt;&lt;&lt;/link&gt;&gt;

&lt;&lt;addmins 10&gt;&gt;</tw-passagedata><tw-passagedata pid="69" name="Farm - use girl" tags="bg-farm" position="2176,913" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;
&lt;&lt;energy -30&gt;&gt;
&lt;&lt;set $player.money -=3&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You open the cage and, without hesitation, unbutton your pants and walk straight over to the girl.
&lt;br /&gt;
For a brief moment you think that she&#39;s smiling while watching your cock. She leans closer and tries to take it in her mouth, but you just grab her by her dirty hair and turn her around.
&lt;br /&gt;
&lt;br /&gt;
&lt;&lt;video &#39;/farm/use_girl&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;br /&gt;
You pull her up pinning her against the cage wall as you shove your hard dick inside her dirty, wet pussy and start pounding her.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/farm/use_girl2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
With all your strength you hold her face against the cage as you pick up the pace and fuck her like there&#39;s no tomorrow.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/farm/use_girl3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
Forcefully you turn her around as you spread her legs and ram your dick back inside her dirty cunt.  A moment later you cum inside her...
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/farm/use_girl4&#39;&gt;&gt;

&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
[[Back|Farm]]

&lt;&lt;addmins 30&gt;&gt;</tw-passagedata><tw-passagedata pid="70" name="Welcome intro" tags="" position="17,288" size="100,100">
&lt;div id=&quot;welcome&quot;&gt;
[img[setup.ImagePath+&#39;intro/start.jpg&#39;]]
&lt;h1&gt;Version 0.22&lt;/h1&gt;
&lt;div id=&quot;versionCheck&quot; style=&quot;display:none&quot;&gt;
	&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
	&lt;div id=&quot;versionCheckInner&quot;&gt;&lt;/div&gt;
	&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;br /&gt;
A few things from the developer before you start. You can skip them if you want by clicking below.
&lt;br /&gt;&lt;br /&gt;
This project is and will be absolutely free. For now, if you want to support my work, just leave a comment in F95zone. My ears are all yours.&lt;br /&gt;
I need suggestions, criticism and your true opinion&lt;br /&gt;
This is my first game ever.
&lt;br /&gt;&lt;br /&gt;
Game idea is that it will be a fully open world, rpg game where you can be who ever you want. You want to be a farmer, slave merchant, just a random good/evil guy, bounty hunter, cage figher, &lt;strong&gt;Cannibal&lt;/strong&gt;? You can be whatever you want!
&lt;br /&gt;&lt;br /&gt;

&lt;h2&gt;Reputation system&lt;/h2&gt;
There will be reputation system like in RDR2 where you can decide how people will look at you.&lt;br /&gt;
If you help strangers and other people, you get it; if you kill innocent people/slave - you lose it.&lt;br /&gt;
&lt;br /&gt;

&lt;h2&gt;Slaves&lt;/h2&gt;
You can capture girls and make them your slaves.&lt;br /&gt;
When you have good relationship with them you can assign them to work for you (Right now only garden)
&lt;br /&gt;&lt;br /&gt;

&lt;h2&gt;Story&lt;/h2&gt;
There will be some story elements but it will be optional and I&#39;ll try to leave as minimal as possible. The main goal is this game to be a not-story driven. &lt;br /&gt;&lt;br /&gt;


&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
[[Continue (I am 18+)|Intro]]
 
&lt;&lt;done&gt;&gt;
	&lt;&lt;script&gt;&gt;
	
		function showVersion(mainVersion, subVersion)
		{
			return mainVersion.toFixed(2) + subVersion;
		}
		
		$.get(&quot;http://apocalyptic-world.com/version.php&quot;, function(data, status){
			if (!data) {
				return;
			}
			var currentVersion = $(&#39;#version&#39;).text().replace(&#39;v.&#39;,&#39;&#39;);
			const pattern = /^(\d+(\.\d+)?)([a-zA-Z]*)$/;
			const matches = currentVersion.match(pattern);
			if (matches) {
			  const currentMainVersion = parseFloat(matches[1]);
			  const currentSubVersion = matches[3];
			  
			  const liveMatches = data.match(pattern);
			  if (liveMatches) {
			  	const liveMainVersion = parseFloat(liveMatches[1]);
				const liveSubVersion = liveMatches[3];
 				
					if (liveMainVersion &gt; currentMainVersion || (liveMainVersion === currentMainVersion &amp;&amp; liveSubVersion &gt; currentSubVersion)) {
						$(&#39;#versionCheckInner&#39;).html(&#39;You are playing older version (&#39; + showVersion(currentMainVersion, currentSubVersion) + &#39;). Newer version is available (&#39; + showVersion(liveMainVersion, liveSubVersion) + &#39;) &lt;br /&gt;Play it on &lt;a href=&quot;http://apocalyptic-world.com&quot; target=&quot;_blank&quot;&gt;http://apocalyptic-world.com&lt;/a&gt; or join discord and download it there.&#39;);
					$(&#39;#versionCheck&#39;).show();
				}
			  }
			}
  		});
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="71" name="Forest-action-berries" tags="" position="2167,752" size="100,100">&lt;&lt;energy -40&gt;&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/forest_berries.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You picked up &lt;strong&gt;2&lt;/strong&gt; food
&lt;&lt;pickup $backpack &#39;food&#39; 2&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Outside]]

&lt;&lt;addmins 120&gt;&gt;</tw-passagedata><tw-passagedata pid="72" name="path script" tags="" position="233,9" size="100,100">if (document.location.href.toLowerCase().includes(&quot;/temp/&quot;) || document.location.href.toLowerCase().includes(&quot;/private/&quot;) || hasOwnProperty.call(window, &quot;storyFormat&quot;)) {
	// Change this to the path where the HTML file is
	// located if you want to run this from inside Twine.
	setup.Path = &quot;C:/Users/maris/Desktop/Game - Twine/&quot;;  // Running inside Twine application
} else { 
	setup.Path = &quot;&quot;;  // Running in a browser
}

alert(2);</tw-passagedata><tw-passagedata pid="73" name="Underground city" tags="Place bg-underground" position="1814,1223" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;UNDERGROUND CITY&lt;/h1&gt;
&lt;div class=&quot;menu-grid&quot;&gt;
   &lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;18:00&#39;) ? 30 : 1)&gt;&gt;
  &lt;&lt;grid underground cage &#39;Fight cage&#39; &#39;Fight cage&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;04:00&#39;) ? 30 : 1)&gt;&gt;
  &lt;&lt;grid underground nightclub &#39;Nightclub&#39; &#39;Nightclub&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;if ($game.location.streets ?? false)&gt;&gt;
    &lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;04:00&#39;) ? 30 : 1)&gt;&gt;
  	&lt;&lt;grid underground streets &#39;Streets&#39; &#39;Streets&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.bar ?? false)&gt;&gt;
      &lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;02:00&#39;) ? 30 : 1)&gt;&gt;
  	&lt;&lt;grid underground bar &#39;Bar&#39; &#39;Bar&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if (($game.location.slave_market ?? false))&gt;&gt;	
  	&lt;&lt;set $isDisabled = (!timeBetween(&#39;13:30&#39;, &#39;19:00&#39;) ? 30 : 1)&gt;&gt;
  	&lt;&lt;grid underground slave_market &#39;Slave market&#39; &#39;Slave market&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  
  &lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;20:00&#39;) ? 30 : 1)&gt;&gt;
  &lt;&lt;grid underground shop &#39;Underground shop&#39; &#39;Shop&#39; 0 $isDisabled&gt;&gt;
&lt;/div&gt; 
&lt;br /&gt;&lt;br /&gt;
[[Leave|Outside]]

&lt;&lt;if !($game.location.streets ?? false) &amp;&amp; isMetChar(&#39;blair&#39;) &amp;&amp; ($characters.blair.quests.metOnDay + 3) &lt; $game.day&gt;&gt;
	&lt;&lt;set $game.location.streets = true&gt;&gt;
	&lt;&lt;goto &#39;Underground city - wanted poster&#39;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;if !$locationEvents.underground&gt;&gt;
		&lt;&lt;set $randomNumber = randomInteger(0, 100)&gt;&gt;
		&lt;&lt;if $randomNumber &lt;= 5&gt;&gt;
			&lt;&lt;set $locationEvents.underground = true&gt;&gt;
			&lt;&lt;goto &#39;Underground city - random event #2&#39;&gt;&gt;
		&lt;&lt;elseif $randomNumber &lt;= 15&gt;&gt;
			&lt;&lt;set $locationEvents.underground = true&gt;&gt;
			&lt;&lt;goto &#39;Underground city event - 2 girls bj&#39;&gt;&gt;
		&lt;&lt;elseif $randomNumber &lt;= 18&gt;&gt;
			&lt;&lt;set $locationEvents.underground = true&gt;&gt;
			&lt;&lt;goto &#39;Underground city - kids ball #3&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="74" name="Underground city - first time" tags="bg-underground" position="1935,1227" size="100,100">&lt;&lt;energy -70&gt;&gt;
You follow exact Vincent instructions and carefully roam through ruined city streets. As soon as you manage to get to a metro station, you know that you&#39;re in the right place.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/underground/metro_stairs.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You slowly walk down and with each step you hear more and more people echo talking underground.
You keep moving forward with Vincent&#39;s package hidden under your jacket.
Stairs end and you turn around the corner...
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/underground/first_time_people.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
People closest to you stop talking and just stare at you without saying anything. You feel like they&#39;re looking at you and trying to see if there&#39;s something valuable on you. A few seconds pass and they turn away from you and continue their talks as you walk past them.
&lt;br /&gt;&lt;br /&gt;
You keep walking and scouting for everything you go near by.
You smell something nice, meat, probably a chicken. You deeply inhale as you don&#39;t remember the last or next time you&#39;ll smell something that nice.
You walk toward the smell but get shocked by what you see - a cooked rat.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/underground/first_time_rat.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Some old lady asks if you want to buy one for &lt;strong&gt;2&lt;/strong&gt; caps? 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Buy and eat rat&#39;&gt;&gt;
	&lt;&lt;set $player.hunger to 100&gt;&gt;
	&lt;&lt;set $player.money -= 2&gt;&gt;
	&lt;&lt;updatemeter &#39;$hungerBar&#39; &#96;$player.hunger / $player.maxHunger&#96;&gt;&gt;
	&lt;&lt;goto &#39;Underground city - first time #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Underground city - first time #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;addmins 60&gt;&gt;
</tw-passagedata><tw-passagedata pid="75" name="Game clock" tags="widget" position="900,12" size="100,100">&lt;&lt;set
	window.GameDays to [
		&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;
	];
	window.GameMonths to [
		&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;,
		&quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;
	];
	
	$gameDate to new Date(2022, 11, 4, 8, 0);
	$startDate to new Date(2022, 11, 4, 8, 0);
&gt;&gt;

&lt;&lt;widget &quot;addmins&quot;&gt;&gt;
&lt;&lt;run $gameDate.setMinutes($gameDate.getMinutes() + $args[0])&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;addhours&quot;&gt;&gt;
&lt;&lt;run $gameDate.setHours($gameDate.getHours() + $args[0])&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;adddays&quot;&gt;&gt;
&lt;&lt;run $gameDate.setHours($gameDate.getHours() + $args[0] * 24)&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;date&quot;&gt;&gt;
&lt;&lt;print String.format(&quot;{0} {1} {2}, {3}&quot;,
	GameDays[$gameDate.getDay()],
	GameMonths[$gameDate.getMonth()],
	$gameDate.getDate(),
	$gameDate.getFullYear()
)&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;timeDay&quot;&gt;&gt;
&lt;&lt;print String.format(&quot;{0}&quot;,
	GameDays[$gameDate.getDay()]
)&gt;&gt;&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;time12hr&quot;&gt;&gt;
&lt;&lt;if $gameDate.getHours() eq 0&gt;&gt;
12
&lt;&lt;elseif $gameDate.getHours() gt 12&gt;&gt;
&lt;&lt;print $gameDate.getHours() - 12&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;&lt;print $gameDate.getHours()&gt;&gt;
&lt;&lt;/if&gt;&gt;:
&lt;&lt;if $gameDate.getMinutes() lt 10&gt;&gt;0&lt;&lt;/if&gt;&gt;&lt;&lt;print $gameDate.getMinutes()&gt;&gt; 
&lt;&lt;if $gameDate.getHours() gte 12&gt;&gt;PM&lt;&lt;else&gt;&gt;AM&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;timeCycle&quot;&gt;&gt;
	&lt;&lt;if $gameDate.getHours() &gt; 6 &amp;&amp; $gameDate.getHours() &lt; 12&gt;&gt;
		&lt;&lt;set $timeCycle = &#39;morning&#39;&gt;&gt;
	&lt;&lt;elseif $gameDate.getHours() &gt; 6 &amp;&amp; $gameDate.getHours() &lt; 18&gt;&gt;
		&lt;&lt;set $timeCycle = &#39;afternoon&#39;&gt;&gt;
	&lt;&lt;elseif $gameDate.getHours() &gt; 6 &amp;&amp; $gameDate.getHours() &lt; 22&gt;&gt;
		&lt;&lt;set $timeCycle = &#39;evening&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set $timeCycle = &#39;night&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;time24hr&quot;&gt;&gt;
&lt;&lt;if $gameDate.getHours() lt 10&gt;&gt;0&lt;&lt;/if&gt;&gt;&lt;&lt;print $gameDate.getHours()&gt;&gt;:&lt;&lt;if $gameDate.getMinutes() lt 10&gt;&gt;0&lt;&lt;/if&gt;&gt;&lt;&lt;print $gameDate.getMinutes()&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;datetime&quot;&gt;&gt;&lt;&lt;date&gt;&gt; &lt;&lt;time12hr&gt;&gt; (&lt;&lt;time24hr&gt;&gt;)&lt;&lt;/widget&gt;&gt;

</tw-passagedata><tw-passagedata pid="76" name="Fight cage" tags="Place bg-underground" position="1938,1349" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIGHT CAGE&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/underground/cage_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;boris&gt;&gt;
Each fight costs 5 caps. If you win, you get your opponent&#39;s, if he kicks your ass - he gets yours. Just don&#39;t die in there, or die. Who cares.
&lt;&lt;/boris&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.energy &gt;= 40 &amp;&amp; $player.money &gt;= 5 &amp;&amp; timeBetween(&#39;08:00&#39;, &#39;23:00&#39;)&gt;&gt;
	[[Fight|Fight cage - fight]]
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $player.energy &gt;= 20&gt;&gt;
	&lt;&lt;link &#39;Exercise&#39;&gt;&gt;
		&lt;&lt;goto &#39;Fight cage - exercise&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Leave|Underground city]]
</tw-passagedata><tw-passagedata pid="77" name="Underground city - first time #2" tags="bg-underground" position="2056,1227" size="100,100">As soon as you walk through the market alley, you look to your left. Some girl is sucking off to some old guy in the dark alley next to you. People just walk past them and no one seems bothered.
&lt;br /&gt;&lt;br/&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/underground/first_time_suck.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You continue to walk deeper and soon enough you hear some punching noises and people yelling. You get closer and see that there&#39;s a cage where fights are happening.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/underground/first_time_fight.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
A lot of fighters and gathering around, but you instantly notice a guy who&#39;s in charge. The same person you need to deliver Vicent&#39;s package. You approach him.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;boris&gt;&gt;
What do you want? Want to fight?
&lt;&lt;/boris&gt;&gt;
&lt;&lt;you&gt;&gt;
No! I came here to delivery a package for you from Vincent
&lt;&lt;/you&gt;&gt;
&lt;&lt;boris&gt;&gt;Grrr. Okey. If by any chance you decide you want to try your luck in the cage - do it. We could use some new punching bags
&lt;&lt;/boris&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Underground city]]

&lt;&lt;addmins 60&gt;&gt;</tw-passagedata><tw-passagedata pid="78" name="Fight cage - fight" tags="bg-underground" position="2061,1352" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIGHT CAGE&lt;/h1&gt;
&lt;&lt;energy -40&gt;&gt;
&lt;&lt;set $player.fight_today = true&gt;&gt;
&lt;&lt;if typeof $player.fighter_rank === &#39;undefined&#39;&gt;&gt;
	&lt;&lt;set $player.fighter_rank to 100&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $randomEnemy = {
	strength: 100 - $player.fighter_rank + random(25, 50)
}&gt;&gt;
&lt;&lt;if $player.strength &gt; $randomEnemy.strength&gt;&gt;
	&lt;center&gt;[img[setup.ImagePath+&#39;places/underground/fight_win.webp&#39;]]&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set $player.strength++&gt;&gt;
	&lt;&lt;set $player.money += 5&gt;&gt;
	&lt;&lt;set $player.fighter_rank--&gt;&gt;
	&lt;&lt;if !$player.fighter_rank&gt;&gt;
		&lt;&lt;set $player.fighter_rank = 1&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $player.reputation++&gt;&gt;
	You &lt;strong&gt;WON&lt;/strong&gt; the fight. 
&lt;&lt;else&gt;&gt;
	&lt;center&gt;[img[setup.ImagePath+&#39;places/underground/fight_lost.webp&#39;]]&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set $player.money -= 5&gt;&gt;
	&lt;&lt;set $player.fighter_rank++&gt;&gt;
	You &lt;strong&gt;LOST&lt;/strong&gt; the fight. 
&lt;&lt;/if&gt;&gt;


&lt;br /&gt;&lt;br /&gt;
Your current fight rank is: #&lt;strong&gt;&lt;&lt;print $player.fighter_rank&gt;&gt;&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addmins 60&gt;&gt;
[[Back|Fight cage]] </tw-passagedata><tw-passagedata pid="79" name="Inventory items" tags="" position="22,520" size="100,100">&lt;&lt;item &quot;laptop&quot; &quot;Laptop&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    An old Windows 95 laptop
	&lt;&lt;description&gt;&gt;
	No use for now
&lt;&lt;unique&gt;&gt;
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;porn_magazine&quot; &quot;Porn&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    Vintage porn magazine
	&lt;&lt;description&gt;&gt;
	No use for now
&lt;&lt;unique&gt;&gt;
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;raw_human_meat&quot; &quot;Raw human meat&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    No use for now
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;csgo_knife&quot; &quot;CS-GO knife&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    No use for now
&lt;&lt;unique&gt;&gt;
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;wood&quot; &quot;Wood&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    Needed for crafting.  You can sell at the farm store.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;axe&quot; &quot;Axe&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    Increases amount of wood you get in the forest.
&lt;&lt;unique&gt;&gt;
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;food&quot; &quot;Food&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    Eat it
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;rope&quot; &quot;Rope&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    Needed for building things.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;breast_pump&quot; &quot;Breast pump&quot;&gt;&gt;
&lt;&lt;unique&gt;&gt;
&lt;&lt;description&gt;&gt;
    Breast pump for milking slaves.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;milk&quot; &quot;Milk&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    Needed to craft pregnancy potion
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;solar_panel&quot; &quot;Solar panel&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
    Needed for building things.
&lt;&lt;/item&gt;&gt;

&lt;&lt;item &quot;blueprint_hot_shower&quot; &quot;Hot shower&quot;&gt;&gt;
&lt;&lt;unique&gt;&gt;
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;revolver&quot; &quot;Revolver&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
Uses 38 Special bullets
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;knife&quot; &quot;Knife&quot;&gt;&gt;
&lt;&lt;description&gt;&gt;
Rusty but in good shape knife
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;glowing_mushroom&quot; &quot;Glowing mushroom&quot;&gt;
	&lt;&lt;description&gt;&gt;
	The main ingredient in the pregnancy and growth potion.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;pregnancy_potion&quot; &quot;Pregnancy potion&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Terminates pregnancy but may be fatal for the girl.
&lt;&lt;/item&gt;&gt;
&lt;&lt;consumable &quot;bandage&quot; &quot;Bandage&quot;&gt;&gt;
	&lt;&lt;run delete $player.perks[&#39;bleeding&#39;]&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Use this if you&#39;re bleeding.
&lt;&lt;/consumable&gt;&gt;
&lt;&lt;item &quot;bow&quot; &quot;Bow&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Used for hunting.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;towel&quot; &quot;Towel&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Used for cleaning or childbirth.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;antibiotics&quot; &quot;Antibiotics&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Used to cure illness.
&lt;&lt;/item&gt;&gt;
&lt;&lt;consumable &quot;fertility_potion&quot; &quot;Fertility potion&quot;&gt;&gt;
	&lt;&lt;run $.wiki(&quot;&lt;&lt;perkAdd &#39;fertility&#39;&gt;&gt;&quot;)&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Used for increasing the reproductive ability greatly.
&lt;&lt;/consumable&gt;&gt;
&lt;&lt;item &quot;plastic&quot; &quot;Plastic&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Needed for building things.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;glass&quot; &quot;Glass&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Needed for building things.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;pregnancy_speed_potion&quot; &quot;Pregnancy speed potion&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Speed up pregnancy by 100 days
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;champagne&quot; &quot;Champagne&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Use them to throw party.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;paddle&quot; &quot;Paddle&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Increases submission gain while punishing slave
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;bullet_revolver&quot; &quot;Bullet .38&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Bullet for revolver
&lt;&lt;/item&gt;&gt;

&lt;&lt;item &quot;duck_tape&quot; &quot;Duck tape&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Needed for building things.
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;necklace_cheap&quot; &quot;Cheap necklace&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Can use as a gift (+5 rel)
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;flower&quot; &quot;Flower&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Can use as a gift (+3 rel)
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;hay&quot; &quot;Hay&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Used for feeding farm animals
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;pelt_wolf&quot; &quot;Wolf pelt&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Quest item
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;wedding_ring&quot; &quot;Wedding ring&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Ask someone to marry you
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;piercing&quot; &quot;Piercing&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Use to customize your girls
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;cosmetics&quot; &quot;Cosmetics&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Use to increase girl beauty (Not implemented yet)
&lt;&lt;/item&gt;&gt;
&lt;&lt;item &quot;growth_potion&quot; &quot;Growth potion&quot;&gt;&gt;
	&lt;&lt;description&gt;&gt;
	Accelerated aging. Will age person by 8-9 years. 
&lt;&lt;/item&gt;&gt;

</tw-passagedata><tw-passagedata pid="80" name="Farm - quest delivery done" tags="bg-farm" position="2406,914" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;
&lt;&lt;set $characters.vincent.delivery_done = true&gt;&gt;
&lt;&lt;you&gt;&gt;
	It&#39;s done. Package is delivered. Can I ask what was in there so special that Boris need it?
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	Milk! I pump that girl in cage once in a while and deliver it directly to Boris. I guess he really likes it. Said something about giving him extra strength.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;
	This place is really fucked up. A milk!? 
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;You would be surprised! I could sell you my old pump but don&#39;t dare to sell your milk to Boris. He&#39;s my number one client!
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Thanks|Farm]]

&lt;&lt;addmins 5&gt;&gt;</tw-passagedata><tw-passagedata pid="81" name="Girl milk" tags="sex" position="2512,335" size="100,100">&lt;&lt;energy -30&gt;&gt;
&lt;&lt;addmins 15&gt;&gt;
&lt;&lt;set $tmpGirl.milked = true&gt;&gt;
&lt;&lt;if randomInteger(0, 3) === 0&gt;&gt;
	&lt;&lt;pickup $backpack &#39;milk&#39; 1&gt;&gt;
	&lt;strong&gt;You managed to get one bottle of milk.&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/basement/milk.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;print $tmpGirl.name&gt;&gt; moans as you milk her. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $tmpGirl.relationship += 3&gt;&gt;
&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; relationship increased by 3&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Girl view]]</tw-passagedata><tw-passagedata pid="82" name="Random event - solar panel #5" tags="" position="5982,17" size="100,100"> &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/solar_panel.jpeg&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
 You managed to find &lt;strong&gt;1&lt;/strong&gt; solar panel in good condition.
&lt;&lt;pickup $backpack &#39;solar_panel&#39; 1&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Outside]]</tw-passagedata><tw-passagedata pid="83" name="Explore workbench" tags="" position="2162,519" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/abondend_warehouse_outside.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
While you walk around in the distance you notice a big warehouse. It could be empty or it could be an ambush...

&lt;br /&gt;&lt;br /&gt;
[[Investigate|Explore workbench - investigate]]
[[Continue exploring|Explore]]
</tw-passagedata><tw-passagedata pid="84" name="Explore workbench - investigate" tags="" position="2160,406" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/abondend_warehouse.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Quietly you walk inside and take a look around. Everything is stripped apart. By the looks of it someone comes here to gather resources. There&#39;s almost nothing left... Except..
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/workbench.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Workbench!&lt;/strong&gt;&lt;br /&gt;
You could use it at your cabin to build something or craft some things.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $game.location.workbench = true&gt;&gt;
[[Bring workbench to cabin|Wood cabin]]
</tw-passagedata><tw-passagedata pid="85" name="Workbench" tags="Place" position="1323,520" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;WORKBENCH&lt;/h1&gt;
&lt;&lt;include &#39;Workbench items&#39;&gt;&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/workbench_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _items to Object.keys($workbenchItems)&gt;&gt;
&lt;&lt;for _i to 0; _i lt _items.length; _i++&gt;&gt;
	&lt;&lt;set _item = $workbenchItems[_items[_i]]&gt;&gt;
	&lt;&lt;capture _i, _item&gt;&gt;
	  &lt;&lt;if !$workbenchItems[_items[_i]].show&gt;&gt;
		  &lt;&lt;continue&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
	  &lt;&lt;set _workEnergy = clone(_item.energy)&gt;&gt;
	  &lt;&lt;if $player.int &gt; 30&gt;&gt;
	  		&lt;&lt;set _workEnergy -= 20&gt;&gt;
	  &lt;&lt;elseif $player.int &gt; 20&gt;&gt;
	  		&lt;&lt;set _workEnergy -= 10&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
	  &lt;&lt;set _itemHasResources to true&gt;&gt;
	  &lt;div class=&quot;workbench-item&quot;&gt;
		  &lt;table&gt;
			  &lt;tr&gt;
				  &lt;td style=&quot;width: 67%&quot;&gt;
					  &lt;h3&gt;&lt;&lt;=$workbenchItems[_items[_i]].title&gt;&gt;&lt;/h3&gt;
					  &lt;&lt;=$workbenchItems[_items[_i]].description&gt;&gt;
				  &lt;/td&gt;
				  &lt;td&gt;
					  &lt;div class=&quot;workbench-required&quot;&gt;
						  Required:&lt;br /&gt;
						  &lt;&lt;set _required to Object.keys(_item.required)&gt;&gt;
						  &lt;&lt;for _r to 0; _r lt _required.length; _r++&gt;&gt;
							  &lt;&lt;if $backpack.count(_required[_r]) &lt; _item.required[_required[_r]]&gt;&gt;
								  &lt;&lt;set _itemHasResources = false&gt;&gt;
							  &lt;&lt;/if&gt;&gt;
							  &lt;span&gt;&lt;&lt;=$workbenchItems[_items[_i]].required[_required[_r]]&gt;&gt; &lt;&lt;=Item.get(_required[_r]).name&gt;&gt;&lt;/span&gt;&lt;br /&gt;
						  &lt;&lt;/for&gt;&gt;
						  &lt;span&gt;&lt;&lt;=_workEnergy&gt;&gt; energy&lt;/span&gt;
						  &lt;&lt;if $player.energy &lt; _workEnergyy&gt;&gt;
					   	  	&lt;&lt;set _itemHasResources = false&gt;&gt;
						  &lt;&lt;/if&gt;&gt;
					  &lt;/div&gt;
				  &lt;/td&gt;
				  &lt;td&gt;
					  &lt;&lt;if _itemHasResources&gt;&gt;
						&lt;&lt;link &#39;Build&#39;&gt;&gt;
							&lt;&lt;set _required to Object.keys(_item.required)&gt;&gt;
							&lt;&lt;set _energyTake = clone($workbenchItems[_items[_i]].energy)&gt;&gt;
							&lt;&lt;if $player.int &gt; 30&gt;&gt;
								&lt;&lt;set _energyTake -=20&gt;&gt;
							&lt;&lt;elseif $player.int &gt; 20&gt;&gt;
								&lt;&lt;set _energyTake -=10&gt;&gt;
							&lt;&lt;/if&gt;&gt;
							&lt;&lt;energy &#96;-_energyTake&#96;&gt;&gt;
							&lt;&lt;set $player.debug = $workbenchItems[_items[_i]].energy&gt;&gt;
							&lt;&lt;for _r to 0; _r lt _required.length; _r++&gt;&gt;
								&lt;&lt;capture _r&gt;&gt;
									&lt;&lt;drop $backpack _required[_r] _item.required[_required[_r]]&gt;&gt;
								&lt;&lt;/capture&gt;&gt;
							&lt;&lt;/for&gt;&gt;
							&lt;&lt;run $workbenchItems[_items[_i]].after()&gt;&gt;
							&lt;&lt;goto $workbenchItems[_items[_i]].goto&gt;&gt;
						&lt;&lt;/link&gt;&gt;
					  &lt;&lt;else&gt;&gt;
						&lt;div class=&quot;workbench-not-enough&quot;&gt;
							Not enough resources
						&lt;/div&gt;
					  &lt;&lt;/if&gt;&gt;
				  &lt;/td&gt;
			  &lt;/tr&gt;
		  &lt;/table&gt;
	  &lt;/div&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

[[Back|Wood cabin]] 

</tw-passagedata><tw-passagedata pid="86" name="Greenhouse" tags="Place" position="1319,407" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;GREENHOUSE&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/greenhouse_head.jpg&#39;]]
&lt;/div&gt;
&lt;h3&gt;Workers&lt;/h3&gt;
&lt;&lt;set $assignedToGreenhouse = false&gt;&gt;
&lt;&lt;set _girlsCompetition = []&gt;&gt;
&lt;table id=&quot;slaves&quot;&gt;
	&lt;&lt;for _i to 0; _i lt $slaves.length; _i++&gt;&gt;
		&lt;&lt;capture _i&gt;&gt;
		&lt;&lt;if $slaves[_i].assignedTo != &#39;garden&#39; || !timeBetween(&#39;08:00&#39;, &#39;16:00&#39;) || typeof $slaves[_i].sick !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if !$slaves[_i].gender&gt;&gt;
			&lt;&lt;run _girlsCompetition.push(&#39;slave:&#39; + _i)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $assignedToGreenhouse = true&gt;&gt;
        &lt;&lt;set _genderClass = &#39;gender-&#39; + (!$slaves[_i].gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
           		 &lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
                      &lt;&lt;link $slaves[_i].name&gt;&gt;
                        &lt;&lt;set $tmpGirl to $slaves[_i]&gt;&gt;
                        &lt;&lt;set $tmpGirl.location = &#39;garden&#39;&gt;&gt;
                        &lt;&lt;set $tmpGirlBack = &#39;Greenhouse&#39;&gt;&gt;
                        &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
                        &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
                        &lt;&lt;run delete $guestId&gt;&gt;
                        &lt;&lt;set $slaveId = _i&gt;&gt;
                        &lt;&lt;set $tmpGirlViewBack = (!$slaves[_i].gender ? &#39;Girl&#39; : &#39;Guy&#39;) + &#39; view&#39;&gt;&gt;
                        &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
                      &lt;&lt;/link&gt;&gt;
                  &lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;if !$slaves[_i].gender&gt;&gt;
					Beauty score: &lt;&lt;print $slaves[_i].beauty&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge($slaves[_i])&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt; 
	&lt;&lt;for _gardenGuestI, _gardenGuest range ($guests ?? [])&gt;&gt;
		&lt;&lt;capture _gardenGuestI, _gardenGuest&gt;&gt;
		&lt;&lt;if _gardenGuest.assignedTo != &#39;garden&#39; || !timeBetween(&#39;08:00&#39;, &#39;16:00&#39;)&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $assignedToGreenhouse = true&gt;&gt;
		&lt;&lt;if !_gardenGuest.gender&gt;&gt;
			&lt;&lt;run _girlsCompetition.push(&#39;guest:&#39; + _gardenGuestI)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
        &lt;&lt;set _genderClass = &#39;gender-&#39; + (!_gardenGuest.gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
            		&lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
                          &lt;&lt;link _gardenGuest.name&gt;&gt;
                          &lt;&lt;set $tmpGirlViewBack = &#39;Girl view&#39;&gt;&gt;
                          &lt;&lt;set $tmpGirl to _gardenGuest&gt;&gt;
                          &lt;&lt;set $tmpGirl.location = &#39;garden&#39;&gt;&gt;
                          &lt;&lt;set $tmpGirlBack = &#39;Greenhouse&#39;&gt;&gt;
                          &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
                          &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
                          &lt;&lt;run delete $slaveId&gt;&gt;
                          &lt;&lt;set $guestId to _gardenGuestI&gt;&gt;
                          &lt;&lt;set $tmpGirlViewBack = (!_gardenGuest.gender ? &#39;Girl&#39; : &#39;Guy&#39;) + &#39; view&#39;&gt;&gt;
                          &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
				  &lt;&lt;/link&gt;&gt;
                  &lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;if !_gardenGuest.gender&gt;&gt;
					Beauty score: &lt;&lt;print _gardenGuest.beauty&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge(_gardenGuest)&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;/table&gt;

&lt;&lt;if !$assignedToGreenhouse&gt;&gt;
	No girls are working at the moment...
&lt;&lt;/if&gt;&gt;
&lt;&lt;if !($locationEvents.greenhouse ?? false)&gt;&gt;
	&lt;&lt;if _girlsCompetition.length &gt;= 2 &amp;&amp; setup.percentageChance(5)&gt;&gt;
		&lt;&lt;set $locationEvents.greenhouse = true&gt;&gt;
		&lt;&lt;set $game.greenhouseCompetition = _girlsCompetition&gt;&gt;
		&lt;&lt;goto &#39;Greenhouse - competition&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;

[[Back|Wood cabin]]</tw-passagedata><tw-passagedata pid="87" name="Grope" tags="sex" position="3112,95" size="100,100">&lt;&lt;energy -20&gt;&gt;
&lt;&lt;addmins 15&gt;&gt;
&lt;&lt;if !$tmpGirl.groped&gt;&gt;
  &lt;&lt;set $tmpGirl.relationship +=2&gt;&gt;
  &lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  	&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set $tmpGirl.groped = true&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;center&gt;[img[setup.ImagePath+&#39;places/greenhouse/grope.webp&#39;]]&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
While &lt;&lt;print $tmpGirl.name&gt;&gt; plows ground, you lower your hands below her waist and squeeze her ass.
&lt;br /&gt;&lt;br /&gt;

[[Back|Girl view]]</tw-passagedata><tw-passagedata pid="88" name="Random event - teacher #6" tags="" position="6103,16" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/teacher_walking.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

You notice some lone traveler walking in front of you. By his movements he hears you too. You see a machete strapped to his back as he slowly walks away from you.

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Attack him&#39;&gt;&gt;
	&lt;&lt;if $player.strength &lt; 1000&gt;&gt;
		&lt;&lt;goto &#39;Random event - teacher #6 killed&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Random event - teacher #6 escaped&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;link &#39;Approach him&#39;&gt;&gt;
	&lt;&lt;goto &#39;Random event - teacher #6 approach&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
[[Leave|Outside]]

</tw-passagedata><tw-passagedata pid="89" name="Random event - teacher #6 killed" tags="" position="6103,129" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/teacher_chop_hand.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

As you approach him in an aggressive manner he instantly slices off your hand with one swing without even hesitating. He looks you straight in the eyes but says nothing as you drop to your knees and bleed out.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;set $game.death_reason = &#39;bleeding out&#39;&gt;&gt;
	&lt;&lt;goto &#39;Dead&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="90" name="Random event - teacher #6 escaped" tags="" position="6106,240" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/teacher_escape.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You manage to put up a decent fight before the man hits you as hard as he can and you pass out for a few seconds. When you open your eyes he is already gone.
&lt;br /&gt;&lt;br /&gt;
[[Continue|Outside]]</tw-passagedata><tw-passagedata pid="91" name="Random event - teacher #6 approach" tags="" position="6107,352" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/teacher_escape.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You approach a man. He&#39;s a confident, well experienced, traveler who explored the country as soon as war happened. He tells you to be calm and offers a talk if you can share a meal with him in return (1 food).

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Give him food&#39;&gt;&gt;
	&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt;
	&lt;&lt;set $player.int++&gt;&gt;
	&lt;&lt;goto &#39;Random event - teacher #6 talk&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="92" name="Random event - teacher #6 talk" tags="" position="6107,464" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/teacher_fire.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You sit down at the fire as he prepares the food and talks about his experiences in this post-apocalyptic world. He manages to give you a few good tips before he gets up and leaves.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Your intelligence increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="93" name="Nightclub" tags="Place bg-underground" position="1938,1464" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/underground/nightclub_head_outside.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
Works from 20:00 - 04:00&lt;br /&gt;
&lt;strong&gt;You need 5 caps to get inside&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.money &gt;= 5 &amp;&amp; timeBetween(&#39;20:00&#39;, &#39;04:00&#39;)&gt;&gt;
  &lt;&lt;link &#39;Go inside (5 caps)&#39;&gt;&gt;
	  &lt;&lt;set $player.money -=5&gt;&gt;
	  &lt;&lt;goto &#39;Nightclub - inside&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Leave|Underground city]] </tw-passagedata><tw-passagedata pid="94" name="Nightclub - inside" tags="Places nightclub bg-underground" position="2060,1463" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/underground/nightclub_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.money &gt;=3 &amp;&amp; $player.energy &gt;= 10&gt;&gt;
	&lt;&lt;link &#39;Enjoy drink&#39;&gt;&gt;
		&lt;&lt;set $player.money -=3&gt;&gt;
		&lt;&lt;energy -10&gt;&gt;
		&lt;&lt;addmins 30&gt;&gt;
		&lt;&lt;goto &#39;Nightclub - drink&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.energy &gt;= 10&gt;&gt;
  &lt;&lt;link &#39;Dance&#39;&gt;&gt;
  	  &lt;&lt;addmins 30&gt;&gt;
	  &lt;&lt;energy -10&gt;&gt;
	  &lt;&lt;goto &#39;Nightclub - dance&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Leave|Underground city]] </tw-passagedata><tw-passagedata pid="95" name="Nightclub - drink" tags="nightclub bg-underground" position="2193,1464" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/nightclub/club-drink.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You order a beer at the bar and start drinking it.
&lt;br /&gt;&lt;br /&gt;
[[Continue|Nightclub - inside]] 
&lt;&lt;addmins 15&gt;&gt;

&lt;&lt;set $player.drunk++&gt;&gt;
&lt;&lt;if $player.drunk &gt; 3&gt;&gt;
	&lt;&lt;perkAdd &#39;drunk&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="96" name="Nightclub - dance" tags="nightclub bg-underground" position="2314,1466" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;br /&gt;
You dance for an hour on the dance floor.
&lt;br /&gt;
&lt;&lt;set $tmpGirl = null, $slaveId = null&gt;&gt;
&lt;&lt;if (random(0,1) === 0)&gt;&gt;
	&lt;&lt;newgirl&gt;&gt;
	&lt;&lt;set _age = setup.getAge($tmpGirl, true)&gt;&gt;
	&lt;&lt;set $tmpGirl.location = &#39;nightclub&#39;&gt;&gt;
	&lt;&lt;set $tmpGirl.drunk = random(0,1)&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;actionImage $tmpGirl dance&gt;&gt;
	&lt;br /&gt;
	Girl is dancing next to you... &lt;&lt;=_age&gt;&gt; year old. (beauty score: &lt;&lt;=$tmpGirl.beauty&gt;&gt;)		
	&lt;br /&gt;
	&lt;&lt;if $tmpGirl.drunk == 2&gt;&gt;
		She&#39;s drunk
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $tmpGirl.drunk == 1&gt;&gt;
		She&#39;s a little drunk
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $tmpGirl.beauty = Math.min($tmpGirl.beauty + 20, 100)&gt;&gt;
&lt;&lt;else&gt;&gt;
	Guy is dancing next to you...
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $tmpGirl&gt;&gt;
	&lt;&lt;link &#39;Dance together&#39;&gt;&gt;
		&lt;&lt;horny 10&gt;&gt;
		&lt;&lt;goto &#39;Nightclub - dance together&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Continue|Nightclub - inside]] 
&lt;&lt;addmins 15&gt;&gt;</tw-passagedata><tw-passagedata pid="97" name="Nightclub - dance together" tags="nightclub bg-underground" position="2430,1464" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;&lt;set $tmpGirl.location = &#39;nightclub&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;actionImage $tmpGirl dance&gt;&gt;
&lt;br /&gt;

You go dancing with girl in the nightclub.&lt;br /&gt;
You introduce yourself to the girl and she introduces herself as well. 
&lt;br /&gt;
Her name is &lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt;&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.money &gt;= 5&gt;&gt;
  &lt;&lt;link &#39;Offer a drink (5 caps)&#39;&gt;&gt;
  		&lt;&lt;set $player.money -=5&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship += 10&gt;&gt;
		&lt;&lt;set $tmpGirl.drunk++&gt;&gt;
		&lt;&lt;goto &#39;Nightclub - drink together&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;nightclub_suggest_bathroom_link&gt;&gt;

[[Leave|Nightclub - inside]]

&lt;&lt;addmins 15&gt;&gt;</tw-passagedata><tw-passagedata pid="98" name="Nightclub - drink together" tags="nightclub bg-underground" position="2545,1468" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/nightclub/club-drink-together.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;=$tmpGirl.name&gt;&gt; and you go to the bar, where you purchase two drinks and sit down together drinking them.
&lt;&lt;if $tmpGirl.drunk &gt;= 4&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;The girl is very drunk and barely stays on her feet...&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $tmpGirl.drunk &lt; 4 &amp;&amp; $player.money &gt;= 5&gt;&gt;
	&lt;&lt;link &#39;Offer another drink (5 caps)&#39;&gt;&gt;
		&lt;&lt;set $player.money -=5&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship += 10&gt;&gt;
		&lt;&lt;set $tmpGirl.drunk++&gt;&gt;
		&lt;&lt;goto &#39;Nightclub - drink together&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;nightclub_suggest_bathroom_link&gt;&gt;

[[Leave|Nightclub - inside]] 

&lt;&lt;addmins 15&gt;&gt;</tw-passagedata><tw-passagedata pid="99" name="Nightclub - girl decline" tags="nightclub bg-underground" position="2663,1464" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/nightclub/club-drink-together.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Girl declined the offer and goes back to her friends.
&lt;br /&gt;&lt;br /&gt;
[[Leave|Nightclub - inside]] 

&lt;&lt;addmins 5&gt;&gt;</tw-passagedata><tw-passagedata pid="100" name="Girl fuck - tired" tags="" position="2897,215" size="100,100">&lt;&lt;if $tiredNoTime&gt;&gt;
	You feel too tired to continue.
&lt;&lt;else&gt;&gt;
	You have run out of cum and can no longer perform. You give her a juicy kiss and walk her out the door
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

 &lt;&lt;link &#39;Back&#39;&gt;&gt;
	&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $charId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $characters[$charId] = $tmpGirl&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $tmpGirlBack&gt;&gt;
		&lt;&lt;goto $tmpGirlBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="101" name="Nightclub - outside fight" tags="bg-underground" position="2888,1461" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/nightclub/attack_outside.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;
As soon as you step outside the nightclub and turn around the corner, &lt;strong&gt;2&lt;/strong&gt; big guys surround you and ask you to give them some caps. You look around - there&#39;s nowhere to run.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.money &gt; 10&gt;&gt;
	&lt;&lt;link &#39;Give them 10 caps&#39;&gt;&gt;
		&lt;&lt;addmins 10&gt;&gt;
		&lt;&lt;set $player.money -= 10&gt;&gt;
		&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
	&lt;&lt;if $player.fighter_rank &lt;= 40&gt;&gt; &lt;&lt;set _nightclubPercentageTheyRecognize = 60&gt;&gt;
	&lt;&lt;elseif $player.fighter_rank &lt;= 50&gt;&gt; &lt;&lt;set _nightclubPercentageTheyRecognize = 50&gt;&gt;
	&lt;&lt;elseif $player.fighter_rank &lt;= 60&gt;&gt; &lt;&lt;set _nightclubPercentageTheyRecognize = 40&gt;&gt;
	&lt;&lt;elseif $player.fighter_rank &lt;= 70&gt;&gt; &lt;&lt;set _nightclubPercentageTheyRecognize = 30&gt;&gt;
	&lt;&lt;elseif $player.fighter_rank &lt;= 80&gt;&gt; &lt;&lt;set _nightclubPercentageTheyRecognize = 20&gt;&gt;
	&lt;&lt;elseif $player.fighter_rank &lt;= 90&gt;&gt; &lt;&lt;set _nightclubPercentageTheyRecognize = 10&gt;&gt;
	&lt;&lt;else&gt;&gt; &lt;&lt;set _nightclubPercentageTheyRecognize = 0&gt;&gt;
	&lt;&lt;/if&gt;&gt;

	&lt;&lt;run console.log(_nightclubPercentageTheyRecognize)&gt;&gt;
	&lt;&lt;if setup.percentageChance(_nightclubPercentageTheyRecognize)&gt;&gt;
		&lt;&lt;goto &#39;Nightclub - outside fight recognize&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set $enemies = []&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
		&lt;&lt;fight $enemies &#39;Underground city&#39; &#39;Underground city&#39; true&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;link &#39;Try to run away&#39;&gt;&gt;
	&lt;&lt;set $fight = {
		defeatedEnemies: [],
		passageLost: &#39;Underground city&#39;
	}&gt;&gt;
	&lt;&lt;goto &#39;Fight - run away&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="102" name="Nightclub - outside ask" tags="bg-underground" position="2771,1464" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/nightclub/attack_ask.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;
You suggest that you both could go the bathroom.&lt;br /&gt;
She smiles flirtatiously but offers you to follow her outside.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Follow her outside&#39;&gt;&gt;
	&lt;&lt;addmins 5&gt;&gt;
	&lt;&lt;goto &#39;Nightclub - outside fight&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
[[Leave|Nightclub - inside]]</tw-passagedata><tw-passagedata pid="103" name="Widget - nighclub" tags="widget" position="25,1083" size="100,100">&lt;&lt;widget nightclub_suggest_bathroom_link&gt;&gt;
  &lt;&lt;link &#39;Suggest to go to bathroom together&#39;&gt;&gt;
  	&lt;&lt;run delete $slaveId&gt;&gt;
	&lt;&lt;run delete $guestId&gt;&gt;
	&lt;&lt;run delete $charId&gt;&gt;
  	&lt;&lt;if random(0, 3) === 0&gt;&gt;
		&lt;&lt;goto &#39;Nightclub - outside ask&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
	  &lt;&lt;if ($tmpGirl.relationship + $tmpGirl.drunk * 10) &lt; 60&gt;&gt;
		  &lt;&lt;goto &#39;Nightclub - girl decline&#39;&gt;&gt;
	  &lt;&lt;else&gt;&gt;
		  &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
		  &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
		  &lt;&lt;set $tmpGirlBack = &#39;Nightclub - invite&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirlViewBack = $tmpGirlBack&gt;&gt;
		  &lt;&lt;set $orgasmsBefore = $tmpGirl.orgasms&gt;&gt;
		  &lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="104" name="Farm - meet Blair" tags="bg-farm" position="2520,910" size="100,100">&lt;&lt;addmins 15&gt;&gt;
&lt;&lt;newgirl&gt;&gt;
&lt;&lt;set 
$tmpGirl.beauty = 90,
$tmpGirl.location = &#39;farm&#39;,
$tmpGirl.name = &#39;Blair&#39;,
$tmpGirl.virgin = true,
$tmpGirl.birthDate = setup.getBirthDate(18),
$tmpGirl.anal = 0,
$tmpGirl.pussy = 0,
$tmpGirl.dp = 0,
$tmpGirl.food = 100,
$tmpGirl.bj = 0,
$tmpGirl.hair = &#39;blonde&#39;,
$tmpGirl.race = &#39;white&#39;,
$tmpGirl.quests = {
	metOnDay: $game.day
},
$tmpGirl.traits = []
&gt;&gt;
&lt;&lt;if setup.getAge($tmpGirl) &lt; 18&gt;&gt;
	&lt;&lt;run $tmpGirl.birthDate.setFullYear($tmpGirl.birthDate.getFullYear() - 1)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $characters.blair = $tmpGirl&gt;&gt;

&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/old_barn.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you walk near Vincent&#39;s farm, you quickly notice an old barn next to his house and decide to check it out.
You slowly open the barn door and notice some amish girl who quietly brooms the floor.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/farm/meet_blair1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Girl notices you as she jumps a bit and screams for help
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
Don&#39;t hurt me, please!&lt;br /&gt;
Daaaad! HELP!!!!!!&lt;br /&gt;
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;
After a few seconds, Vincent runs inside the barn with a gun in his hands and aims it at you!
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;Out! NOW!&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Get out of the barn&#39;&gt;&gt;
	&lt;&lt;goto &#39;Farm - meet Blair #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="105" name="Farm - meet Blair #2" tags="bg-farm" position="2629,913" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;
&lt;&lt;you&gt;&gt;
	I bring no harm to her! Trust me, Vincent!
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	Forget you ever saw her. I am not joking!&lt;br /&gt;
	The last thing we need here is someone snoofing around.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You see that Vincent is really nervous but decide to ask further questions
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;
	Who is she? Why are you hiding her there?
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;My daughter! That&#39;s all you need to know.&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
He closes the barn door with lock and goes back to his shop
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;addmins 15&gt;&gt;
	&lt;&lt;goto &#39;Farm&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="106" name="Workbench items" tags="" position="146,521" size="100,100">&lt;&lt;set $workbenchItems = {
	greenhouse: {
		show: !($game.location.greenhouse ?? false),
		title: &#39;Greenhouse&#39;,
		description: &#39;Increase food productivity by assigning slaves here.&#39;,
		required: {
			&#39;solar_panel&#39;: 2,
			&#39;wood&#39;: 30,
		},
		energy: 60,
		after: function() {
			variables().game.location.greenhouse = true;
		},
		goto: &#39;Greenhouse&#39;
	},
	hot_shower: {
		show: $backpack.has(&#39;blueprint_hot_shower&#39;) &amp;&amp; !$game.hotShower,
		title: &#39;Hot shower&#39;,
		description: &#39;Adds additional energy gain.&#39;,
		required: {
			&#39;solar_panel&#39;: 2,
		},
		energy: 60,
		goto: &#39;Shower-room&#39;,
		after: function() {
			variables().game.hotShower = true;
		},
	},
	basement_cell: {
		show: $basementLimit &lt; 30,
		title: &#39;Basement cell&#39;,
		description: &#39;Build an additional cell in the basement.&#39;,
		required: {
			wood: 40,
			rope: 2,
		},
		energy: 60,
		after: function() {
			variables().basementLimit = variables().basementLimit +=1;
		},
		goto: &#39;Workbench&#39;
	},
	pregnancy_potion: {
		show: $characters.vincent.quests.pregnancy_talked,
		title: &quot;Pregnancy potion&quot;,
		description: &#39;Craft pregnancy potion to terminate pregnancy&#39;,
		required: {
			glowing_mushroom: 1,
			milk: 1
		},
		energy: 40,
		after: function() {
			variables().backpack.pickup(&#39;pregnancy_potion&#39;, 1);
		},
		goto: &quot;Workbench&quot;
	},
	guest_house: {
		show:  !($game.location.guesthouse ?? false),
		title: &quot;Guest house&quot;,
		description: &quot;Build a guest house for released slaves or new guests.&quot;,
		required: {
			wood: 200,
			rope: 30,
			solar_panel: 2
		},
		energy: 100,
		after: function() {
			variables().game.location.guesthouse = true;
		},
		goto: &quot;Guest house&quot;
	},
	bow: {
		show: true,
		title: &quot;Bow&quot;,
		description: &quot;Used for hunting&quot;,
		required: {
			wood: 3,
			rope: 3
		},
		energy: 60,
		after: function() {
			variables().backpack.pickup(&#39;bow&#39;, 1);
		},
		goto: &quot;Workbench&quot;
	},
	guesthouse_cell: {
		show: ($game.location.guesthouse ?? false) &amp;&amp; ($guesthouseLimit ?? 3) &lt; 25,
		title: &#39;Guest house bed&#39;,
		description: &#39;Build additional bed in guest house&#39;,
		required: {
			wood: 50,
			rope: 5,
		},
		energy: 60,
		after: function() {
			if (!Number.isInteger(variables().guesthouseLimit)) {
				variables().guesthouseLimit = 3;
			}
			variables().guesthouseLimit = variables().guesthouseLimit +=1;
		},
		goto: &quot;Workbench&quot;
	},
	solar_panel: {
		show: true,
		title: &quot;Solar panel&quot;,
		description: &quot;Used for crafting&quot;,
		required: {
			plastic: 5,
			glass: 5
		},
		energy: 60,
		after: function() {
			variables().backpack.pickup(&#39;solar_panel&#39;, 1);
		},
		goto: &quot;Workbench&quot;
	},
	paddle: {
		show: !$backpack.has(&#39;paddle&#39;),
		title: &quot;Paddle&quot;,
		description: &quot;Increases submission gain while punishing slave&quot;,
		required: {
			wood: 2,
			rope: 1
		},
		energy: 30,
		after: function() {
			variables().backpack.pickup(&#39;paddle&#39;, 1);
		},
		goto: &quot;Workbench&quot;
	},
	gate: {
		show: isMetChar(&#39;blair&#39;) &amp;&amp; $characters.blair.quests.gate &amp;&amp; !$game.cabinName,
		title: &quot;Settlement gate&quot;,
		description: &quot;Gates for the entrance to your village&quot;,
		required: {
			wood: 150,
			rope: 10,
		},
		goto: &quot;Blair - gate done&quot;,
		energy: 100,
		after: function() {}
	},
	nursery: {
		show: isMetChar(&#39;blair&#39;) &amp;&amp; $characters.blair.quests.nursery &amp;&amp; !($game.location.nursery ?? false),
		title: &quot;Nursery&quot;,
		description: &quot;Shelter were all babies/kids will live.&quot;,
		required: {
			wood: 50,
			plastic: 10,
			rope: 10
		},
		goto: &quot;Nursery - built&quot;,
		energy: 100,
		after: function() {}
	},
	shop: {
		show: isMetChar(&#39;vincent&#39;) &amp;&amp; $characters.vincent.quests.shop_talk &amp;&amp; (!$game.location.shop ?? false),
		title: &quot;Shop&quot;,
		description: &quot;Let someone else manage your storage. Sell/Buy items from random travelers.&quot;,
		required: {
			wood: 200,
			plastic: 30,
			rope: 30
		},
		goto: &quot;Workbench&quot;,
		energy: 100,
		after: function() {
			variables().game.location.shop = true;
		}
	},
	bathhouse: {
		show: !($game.location.bathhouse ?? false) &amp;&amp; $player.quests.bathhouse_talk,
		title: &#39;Bathhouse&#39;,
		description: &quot;Your guests will have place where to wash them self and mistress will be able to wash slaves too.&quot;,
		required: {
			wood: 200,
			plastic: 20,
			rope: 20,
			solar_panel: 1
		},
		goto: &quot;Workbench&quot;,
		energy: 100,
		after: function() {
			variables().game.location.bathhouse = true;
		}
	}
	
}&gt;&gt;</tw-passagedata><tw-passagedata pid="107" name="Random event - find hot shower blueprint #7" tags="" position="6219,20" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/blueprint_hot_shower.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You managed to get inside the looted plumbing supply shop. You look around and most everything is gone.  As you&#39;re ready to get back on the streets, you step on something.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;You managed to find a blueprint for a hot shower!&lt;/strong&gt;

&lt;&lt;pickup $backpack &#39;blueprint_hot_shower&#39; 1&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="108" name="Random event - food #8" tags="" position="6218,129" size="100,100">
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/forest_berries.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You found &lt;strong&gt;4&lt;/strong&gt; food
&lt;&lt;pickup $backpack &#39;food&#39; 4&gt;&gt;

[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="109" name="Random event - wood #9" tags="" position="6219,241" size="100,100">&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/forest_walk.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;pickup $backpack &#39;wood&#39; 10&gt;&gt;
You found &lt;strong&gt;10&lt;/strong&gt; wood
&lt;br /&gt;&lt;br /&gt;
[[Back|Outside]]</tw-passagedata><tw-passagedata pid="110" name="Underground city - wanted poster" tags="bg-underground" position="2170,1233" size="100,100">
You decide to take detour and explore underground city a bit.&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/underground/walk_street.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
It&#39;s a slum as soon as you turn away from main street. Junkies lying on the ground, half dead, sluts fucking in each corner for a little bit of caps; even a few guys are beating up someone in the alley.&lt;br /&gt;
You continue until you stop in the dark streets when you notice something shocking on the wall. A wanted poster...&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/underground/wanted_poster.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;You know her!&lt;/strong&gt;&lt;br /&gt;&lt;br /&gt;
Just a few days back you saw her at farm. That&#39;s Vincent&#39;s daughter..
&lt;br /&gt;
You keep reading..&lt;br /&gt;
&lt;strong&gt;400 caps&lt;/strong&gt; 
&lt;br /&gt;
Wow, I could use that kind of a money but that&#39;s Vincent...&lt;br /&gt;
Maybe I should warn him...
&lt;br /&gt;&lt;br /&gt;

[[Continue|Streets]]</tw-passagedata><tw-passagedata pid="111" name="Streets" tags="Place bg-underground" position="1938,1577" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/underground/streets_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

You see some hookers standing against the wall..
&lt;br /&gt;&lt;br /&gt;

&lt;h3&gt;Your hookers&lt;/h3&gt;
&lt;&lt;set $assignedToStreets = false&gt;&gt;
&lt;table id=&quot;slaves&quot;&gt;
	&lt;&lt;for _i to 0; _i lt $slaves.length; _i++&gt;&gt;
		&lt;&lt;capture _i&gt;&gt;
		&lt;&lt;if $slaves[_i].assignedTo != &#39;streets&#39; || !timeBetween(&#39;12:00&#39;, &#39;06:00&#39;)&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $assignedToStreets = true&gt;&gt;
		&lt;&lt;set _genderClass = &#39;gender-&#39; + (!$slaves[_i].gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
				&lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
				  &lt;&lt;link $slaves[_i].name&gt;&gt;
					&lt;&lt;set $tmpGirl to $slaves[_i]&gt;&gt;
					&lt;&lt;set $tmpGirl.location = &#39;streets&#39;&gt;&gt;
					&lt;&lt;set $tmpGirlBack = &#39;Streets&#39;&gt;&gt;
					&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
					&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
					&lt;&lt;set $slaveId = _i&gt;&gt;
					&lt;&lt;run delete $charId&gt;&gt;
					&lt;&lt;run delete $guestId&gt;&gt;
					&lt;&lt;set $tmpGirlViewBack = (!$slaves[_i].gender ? &#39;Girl&#39; : &#39;Guy&#39;) + &#39; view&#39;&gt;&gt;
					&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
				  &lt;&lt;/link&gt;&gt;
				&lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Beauty score: &lt;&lt;print $slaves[_i].beauty&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge($slaves[_i])&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;for _streetGuestI, _streetGuest range ($guests ?? [])&gt;&gt;
		&lt;&lt;capture _streetGuestI&gt;&gt;
		&lt;&lt;if _streetGuest.assignedTo != &#39;streets&#39; || !timeBetween(&#39;12:00&#39;, &#39;06:00&#39;)&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set _genderClass = &#39;gender-&#39; + (!_streetGuest.gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
		&lt;&lt;set $assignedToStreets = true&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
				&lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
				  &lt;&lt;link _streetGuest.name&gt;&gt;
					&lt;&lt;set $tmpGirl to _streetGuest&gt;&gt;
					&lt;&lt;set $tmpGirl.location = &#39;streets&#39;&gt;&gt;
					&lt;&lt;set $tmpGirlBack = &#39;Streets&#39;&gt;&gt;
					&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
					&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
					&lt;&lt;set $guestId = _streetGuestI&gt;&gt;
					&lt;&lt;run delete $charId&gt;&gt;
					&lt;&lt;run delete $slaveId&gt;&gt;
					&lt;&lt;set $tmpGirlViewBack = (!_streetGuest.gender ? &#39;Girl&#39; : &#39;Guy&#39;) + &#39; view - guest&#39;&gt;&gt;
					&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
				  &lt;&lt;/link&gt;&gt;
				&lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Beauty score: &lt;&lt;print _streetGuest.beauty&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge(_streetGuest)&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;/table&gt;

&lt;&lt;if !$assignedToStreets&gt;&gt;
	No girl is working right now
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.money &gt;= 10 &amp;&amp; $player.energy &gt;= 20&gt;&gt;
	&lt;&lt;link &#39;Find hooker for 10 caps&#39;&gt;&gt;
		&lt;&lt;set $player.money -= 10&gt;&gt;
		&lt;&lt;energy -20&gt;&gt;
		&lt;&lt;goto &#39;Streets - fuck hooker&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $characters.dom.quests.quest1 &amp;&amp; !$characters.dom.quests.quest1_done &amp;&amp; $backpack.count(&#39;champagne&#39;) &gt;= 10&gt;&gt;
	&lt;&lt;link &#39;Bring champagne to Dom&#39;&gt;&gt;
		&lt;&lt;goto &#39;Dom - quest #1 done&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Leave|Underground city]] 


&lt;&lt;if $assignedToStreets &amp;&amp; !$warnedAboutStreetHookers&gt;&gt;
	&lt;&lt;set $warnedAboutStreetHookers = true&gt;&gt;
	&lt;&lt;goto &#39;Streets - warning tax&#39;&gt;&gt;
&lt;&lt;elseif $characters.blair.quests.missing_friend_talked &amp;&amp; !$characters.blair.quests.missing_friend_found&gt;&gt;
	&lt;&lt;if ($characters.blair.quests.missing_friend_talked_day + 2) &lt; $game.day&gt;&gt;
		&lt;&lt;set $characters.blair.quests.missing_friend_found = true&gt;&gt;
		&lt;&lt;set $characters.blair.quests.missing_friend_found_dead = true&gt;&gt;
		&lt;&lt;goto &#39;Streets - Blair quest missing friend - dead&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;if timeBetween(&#39;22:00&#39;, &#39;00:00&#39;) &amp;&amp; !$characters.blair.quests.missing_friend_basement&gt;&gt;
			&lt;&lt;set $characters.blair.quests.missing_friend_basement = true&gt;&gt;
			&lt;&lt;goto &#39;Streets - Blair quest missing friend - alive&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;

&lt;&lt;elseif !$characters.dom.quests.invite &amp;&amp; $game.day &gt;= 100 &amp;&amp; $player.reputation &gt;= 100 &amp;&amp; (setup.getPersonsForLocation($slaves, &#39;streets&#39;).length &gt;= 4 || setup.getPersonsForLocation($guests, &#39;streets&#39;).length &gt;= 4)&gt;&gt;
	&lt;&lt;set $characters.dom.quests.invite = true&gt;&gt;
	&lt;&lt;goto &#39;Streets - Dom invite&#39;&gt;&gt;
&lt;&lt;elseif $characters.dom.quests.accepted_deal &amp;&amp; !$characters.dom.quests.quest1 &amp;&amp; ($characters.dom.quests.day + 10) &lt; $game.day&gt;&gt;
	&lt;&lt;set $characters.dom.quests.quest1 = true&gt;&gt;
	&lt;&lt;goto &#39;Dom - quest #1&#39;&gt;&gt;
&lt;&lt;elseif $characters.dom.quests.accepted_deal &amp;&amp; $characters.dom.quests.quest1_done &amp;&amp; !$characters.dom.quests.quest2 &amp;&amp; $player.strength &gt;= 100&gt;&gt;
	&lt;&lt;set $characters.dom.quests.quest2 = true&gt;&gt;
	&lt;&lt;goto &#39;Dom - quest #2&#39;&gt;&gt;
&lt;&lt;elseif $characters.dom.quests.quest2_done &amp;&amp; !$characters.dom.quests.quest3 &amp;&amp; $characters.dom.quests.quest3_start_day &lt; $game.day&gt;&gt;
	&lt;&lt;set $characters.dom.quests.quest3 = true&gt;&gt;
	&lt;&lt;goto &#39;Dom - quest #3&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="112" name="Streets - fuck hooker" tags="bg-underground" position="2058,1572" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You give her the caps and instantly pull into some dark, abandoned building. Your hand reaches her mouth as you conceal her with one hand while grabbing her firm breast and squeeze it before pulling her top up.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/streets/hooker1_1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
With force you push her down on her knees and pull down your panties so you can shove dick inside her mouth as deep as you can, even gagging her a bit.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/streets/hooker1_2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Without any words, you grab her by hair and pull her up as you forcefully turn her around and press her against the door while grabbing her ass before putting dick inside her moist pussy. She clearly wants it.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/streets/hooker1_3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You feel the urge to put your warm cum right on her face or inside her mouth so you just pull out and try to cum on her face, but by surprise she opens her mouth and catches each drop with her tongue.  
&lt;&lt;video &#39;/streets/hooker1_4&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Streets]]

&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;addmins 30&gt;&gt;
</tw-passagedata><tw-passagedata pid="113" name="Farm - wanted poster" tags="bg-farm" position="2738,913" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;

You check around to see if Blair isn&#39;t close and in low voice tell Vincent that you saw her on the wanted poster in the underground city.
&lt;br/&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/wanted_poster_talk.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Vincent looks disappointed and angry at the same time as he yells at you that you shouldn&#39;t talk about it.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;Why someone is looking for her?&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Vincent deeply exhales as he understands that you just won&#39;t back down so easily and starts to explain.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;Mr. Soprano...&lt;br /&gt;
He kinda run underground city, self proclaimed mayor so actually is fucked up criminal who decides who he owns
&lt;br /&gt;&lt;br /&gt;
A few years back I made a huge mistake and took Blair with me while visiting an underground city. We casually walked the streets when he noticed her. He wanted to take her away from me right away, but I somehow convinced him that he could take her when she&#39;d be a fully grown adult.
&lt;br /&gt;&lt;br /&gt;
I am watching her. They come to check if she&#39;s here regularly, but as for now, that&#39;s the only thing they do.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;
As you listen to Vincent you both hear gunshot outside
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Run outside&#39;&gt;&gt;
	&lt;&lt;goto &#39;Farm - wanted poster #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="114" name="Farm - wanted poster #2" tags="bg-farm" position="2848,912" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;

You notice a dozen of guys kicking each door open and checks what&#39;s inside as leader of them takes out gun and points at Vicent
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/wanted_poster_gun.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;WHERE IS SHE OLD MAN!?&lt;/strong&gt;
&lt;br /&gt;
&lt;br /&gt;
Vincent drops on his knees and begs to them
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;vincent&gt;&gt;I don&#39;t know. I don&#39;t! She run away as I&#39;ve said before&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;
Guys checks each door but fail to find Blair and soon enough they&#39;re all gone. &lt;br /&gt;
Vincent turns toward you as Blair comes out of some hidden room. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	We can&#39;t take it anymore. This was way too close. I have a favor to ask. Could she sleep at your place? Only sleep, in the mornings, she will be gone as I need her help here.&lt;br /&gt;
Please!&lt;br /&gt;
Your place would be perfect as I don&#39;t even know where you live.&lt;br /&gt;
I beg you!. Nights are most unsecure as we won&#39;t see them coming. 
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Agree and take Blair with you&#39;&gt;&gt;
	&lt;&lt;goto &#39;Farm - wanted poster #3&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="115" name="Farm - wanted poster #3" tags="bg-farm" position="2956,911" size="100,100">&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/pack_clothes.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You help Blair pack some of her clothes. As soon as Vincent comes in, she tries to hide what she&#39;s packing and throws her other old, long dress on her clothes.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/walk.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Soon you hit the road and after few hours you&#39;re at your place.
&lt;br /&gt;
You explain to Blair that your home is small and there isn&#39;t additional room for her but she understandable nods.
&lt;br /&gt;&lt;br /&gt;
You suggest that she can sleep in your bed but you&#39;ll sleep on the floor in the kitchen.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
Oh god, no. We can share the bed. I won&#39;t allow you you sleep on the ground. Specially after you have taken me in and protect me against those inhumans. 
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You unpack her things and meanwhile she cooks food for you downstairs.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/cook_food.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;You gained 2 food&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
You both talk a bit and decide to hit the bed as it almost a night time already.
&lt;br /&gt;&lt;br /&gt;


&lt;&lt;video &#39;/bedroom/blair_talk&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You&#39;re shocked when you see Blair entering bedroom as you didn&#39;t expect that outfit from amish girl. You talk a bit more and decide to sleep
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Sleep&#39;&gt;&gt;
	&lt;&lt;sleep&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;set $gameDate.setHours(23) &gt;&gt;
&lt;&lt;pickup $backpack &#39;food&#39; 2&gt;&gt;
&lt;&lt;if (typeof $characters.blair !== &#39;undefined&#39; &amp;&amp; typeof $characters.blair.quests !== &#39;undefined&#39;)&gt;&gt;
	&lt;&lt;set $characters.blair.quests.cabinType = 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $player.hunger to 100&gt;&gt;
&lt;&lt;updatemeter &#39;$hungerBar&#39; &#96;$player.hunger / $player.maxHunger&#96;&gt;&gt;</tw-passagedata><tw-passagedata pid="116" name="Blair - kitchen talk" tags="" position="336,2061" size="100,100">&lt;&lt;if $characters.blair.relationship &gt;= 20 &amp;&amp; !$characters.blair.quests.missing_friend&gt;&gt;
	&lt;&lt;set $characters.blair.quests.missing_friend = true&gt;&gt;
	&lt;&lt;goto &#39;Blair - quest missing friend&#39;&gt;&gt;
&lt;&lt;elseif $characters.blair.quests.missing_friend_found &amp;&amp; !$characters.blair.quests.missing_friend_found_finished&gt;&gt;
	&lt;&lt;set $characters.blair.quests.missing_friend_found_finished = true&gt;&gt;
	&lt;&lt;goto &#39;Blair - quest missing friend found&#39;&gt;&gt;
&lt;&lt;elseif isMetChar(&#39;rodger&#39;) &amp;&amp; $characters.rodger.quests.champagne &amp;&amp; !$characters.blair.quests.house_party&gt;&gt;
	&lt;&lt;set $characters.blair.quests.house_party = true&gt;&gt;
	&lt;&lt;goto &#39;Blair - house party&#39;&gt;&gt;
&lt;&lt;elseif $characters.blair.quests.house_party_finished &amp;&amp; !$characters.blair.quests.gate&gt;&gt;
	&lt;&lt;set $characters.blair.quests.gate = true&gt;&gt;
	&lt;&lt;goto &#39;Blair - gate&#39;&gt;&gt;
&lt;&lt;elseif $game.cabinName &amp;&amp; !$characters.blair.quests.nursery&gt;&gt;
	&lt;&lt;set $characters.blair.quests.nursery = true&gt;&gt;
	&lt;&lt;goto &#39;Blair - nursery&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;&lt;addmins 30&gt;&gt;

&lt;&lt;video &#39;/kitchen/blair_talk&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $talkedAbout = either(&#39;her dad&#39;, &#39;her wanting to go into adventures&#39;, &#39;her accident in underground city&#39;)&gt;&gt;
You talked about &lt;&lt;=$talkedAbout&gt;&gt;.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $characters.blair.relationship &lt; 20&gt;&gt;
  &lt;&lt;set $characters.blair.relationship +=1&gt;&gt;
  &lt;strong&gt;Blair relationship increased by 1&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;You can&#39;t increase relationship with Blair with this action anymore&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if ($characters.blair.relationship &gt; 15)&gt;&gt;
	&lt;&lt;if $characters.blair.relationship &gt; 40&gt;&gt;
		&lt;&lt;linkreplace &#39;Date&#39;&gt;&gt;
			&lt;&lt;if setup.percentageChance(50)&gt;&gt;
				&lt;&lt;goto &#39;Blair - date&#39;&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;blair&gt;&gt;
					Sorry, I can&#39;t today. I need to help my dad.
				&lt;&lt;/blair&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &#39;Kiss her&#39;&gt;&gt;
		&lt;&lt;goto &#39;Blair - kitchen kiss&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	
	&lt;&lt;if $game.canMarry &amp;&amp; !$characters.blair.quests.married &amp;&amp; $backpack.has(&#39;wedding_ring&#39;)&gt;&gt;
		&lt;&lt;link &#39;Marry her&#39;&gt;&gt;
			&lt;&lt;goto &#39;Blair - marry #1&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;addmins 30&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Leave|Kitchen-room]] </tw-passagedata><tw-passagedata pid="117" name="Blair - kitchen kiss" tags="" position="443,2060" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;&lt;video &#39;/kitchen/blair_kiss&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Gently you push her against the kitchen counter tenderly pressing your lips against hers. You wrap your hands around her waist and spin her around, leaning her back a bit while still making out...
&lt;br /&gt;
Rubbing your hands over her body you then start sliding a hand between her legs...
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if !$characters.blair.quests.sex&gt;&gt;
	&lt;&lt;blair&gt;&gt;We shouldn&#39;t...&lt;&lt;/blair&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $characters.blair.relationship &lt; 30&gt;&gt;
  &lt;&lt;set $characters.blair.relationship +=1&gt;&gt;
  &lt;strong&gt;Blair relationship increased by 1&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;You can&#39;t increase your relationship with Blair any more with this action.&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;addmins 30&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.blair.quests.sex&gt;&gt;
	&lt;&lt;link &#39;Fuck&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirl = $characters.blair&gt;&gt;
		  &lt;&lt;set $tmpGirl.location = &#39;kitchen&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
		  &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
		  &lt;&lt;run delete $slaveId&gt;&gt;
		  &lt;&lt;run delete $guestId&gt;&gt;
		  &lt;&lt;set $charId = &#39;blair&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirlViewBack = &#39;Kitchen-room&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirlBack = &#39;Kitchen-room&#39;&gt;&gt;
		  &lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Let her go|Kitchen-room]] </tw-passagedata><tw-passagedata pid="118" name="Blair - bedroom talk" tags="" position="334,2176" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;

&lt;&lt;if $characters.blair.quests.missing_friend_found_finished &amp;&amp; !$characters.blair.quests.missing_friend_found_finished_thanked&gt;&gt;
	&lt;&lt;set $characters.blair.quests.missing_friend_found_finished_thanked = true&gt;&gt;
	&lt;&lt;goto &#39;Blair - quest missing friend thanks&#39;&gt;&gt;
&lt;&lt;elseif ($game.location.settlement ?? false) &amp;&amp; !$characters.blair.quests.sex&gt;&gt;
	&lt;&lt;set $characters.blair.quests.sex = true&gt;&gt;
	&lt;&lt;goto &#39;Blair quest - first sex&#39;&gt;&gt;
&lt;&lt;elseif ($game.cabinName ?? false) &amp;&amp; !$characters.blair.quests.basement &amp;&amp; $characters.blair.relationship &gt;= 80&gt;&gt;
	&lt;&lt;set $characters.blair.quests.basement =  true&gt;&gt;
	&lt;&lt;goto &#39;Blair event - basement&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;addmins 30&gt;&gt;

&lt;&lt;video &#39;/bedroom/blair_talk&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $talkedAbout = either(&#39;her cold room in farm&#39;, &#39;your warm bed&#39;, &#39;comfortable sheets&#39;)&gt;&gt;
You talked about &lt;&lt;=$talkedAbout&gt;&gt;.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $characters.blair.relationship &lt; 20&gt;&gt;
  &lt;&lt;set $characters.blair.relationship +=2&gt;&gt;
  &lt;strong&gt;Blair relationship increased by 2&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;You can&#39;t increase relationship with Blair with this action anymore&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.blair.quests.sex&gt;&gt;
  &lt;&lt;link &#39;Fuck&#39;&gt;&gt;
	  &lt;&lt;set $tmpGirl = $characters.blair&gt;&gt;
	  &lt;&lt;set $tmpGirl.location = &#39;bedroom&#39;&gt;&gt;
	  &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
	  &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
	  &lt;&lt;run delete $slaveId&gt;&gt;
	  &lt;&lt;run delete $guestId&gt;&gt;
	  &lt;&lt;set $charId = &#39;blair&#39;&gt;&gt;
	  &lt;&lt;set $tmpGirlViewBack = &#39;Sleep eval&#39;&gt;&gt;
	  &lt;&lt;set $tmpGirlBack = &#39;Sleep eval&#39;&gt;&gt;
	  &lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $characters.blair.quests.basement&gt;&gt;
	&lt;&lt;link &#39;Take her to the basement&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl = $characters.blair&gt;&gt;
	  	&lt;&lt;set $tmpGirl.location = &#39;basement&#39;&gt;&gt;
	  	&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
	  	&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
	  	&lt;&lt;run delete $slaveId&gt;&gt;
	  	&lt;&lt;run delete $guestId&gt;&gt;
	  	&lt;&lt;set $charId = &#39;blair&#39;&gt;&gt;
	  	&lt;&lt;set $tmpGirlViewBack = &#39;Sleep eval&#39;&gt;&gt;
	  	&lt;&lt;set $tmpGirlBack = &#39;Sleep eval&#39;&gt;&gt;
	  	&lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Sleep&#39;&gt;&gt;
	&lt;&lt;sleep&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="119" name="Slave market" tags="Place bg-underground" position="1943,1691" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SLAVE MARKET&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/underground/slave_market_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
Works from 14:00 till 19:00&lt;br /&gt;&lt;br /&gt;

You can buy new slaves or sell your old ones.
&lt;br /&gt;
Easy way to get some extra caps but at what cost? 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if timeBetween(&#39;14:00&#39;, &#39;19:00&#39;)&gt;&gt;
  &lt;&lt;link &#39;Buy&#39;&gt;&gt;
	  &lt;&lt;goto &#39;Slave market - buy&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;if $slaves.length &gt; 0&gt;&gt;
	&lt;&lt;link &#39;Sell&#39;&gt;&gt;
	  &lt;&lt;goto &#39;Slave market - sell&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if ($player.stats.slaves_sold ?? 0) &gt;= 30 &amp;&amp; !$player.quests.slave_market_vip&gt;&gt;
	&lt;&lt;set $player.quests.slave_market_vip = true&gt;&gt;
	&lt;&lt;goto &#39;Slave market - VIP introduction&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
[[Leave|Underground city]] </tw-passagedata><tw-passagedata pid="120" name="Slave market - sell" tags="bg-underground" position="2063,1690" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SLAVE MARKET&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/underground/slave_market_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $slaves.length &gt; 0&gt;&gt;
Choose a slave you want to sell
&lt;&lt;else&gt;&gt;
You don&#39;t have any slaves
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;
&lt;table id=&quot;slaves&quot;&gt;
	&lt;&lt;for _i to 0; _i lt $slaves.length; _i++&gt;&gt;
		&lt;&lt;capture _i&gt;&gt;
		&lt;&lt;if $slaves[_i].gender&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;slaveValue $slaves[_i]&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
				&lt;&lt;=$slaves[_i].name&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Beauty score: &lt;&lt;print $slaves[_i].beauty&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge($slaves[_i])&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Value: &lt;strong&gt;&lt;&lt;=$slaveValue&gt;&gt;&lt;/strong&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;link &#39;Sell&#39;&gt;&gt;
					&lt;&lt;dialog &#39;Release&#39;&gt;&gt;
						Are you sure you want to sell her?
						&lt;br /&gt;
						&lt;&lt;link &#39;Yes&#39; &#39;Slave market - sell&#39;&gt;&gt;
							&lt;&lt;set $player.reputation++&gt;&gt;
							&lt;&lt;set $player.goodwill-=5&gt;&gt;
							&lt;&lt;set $player.money += $slaves[_i].value&gt;&gt;
							&lt;&lt;run $slaves.splice(_i, 1)&gt;&gt;
							&lt;&lt;statsAdd &#39;slaves_sold&#39;&gt;&gt;
							&lt;&lt;addmins 60&gt;&gt;
							&lt;&lt;dialogclose&gt;&gt;
						&lt;&lt;/link&gt;&gt;	
					&lt;&lt;/dialog&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;/table&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Slave market]]</tw-passagedata><tw-passagedata pid="121" name="Slave market - buy" tags="bg-underground" position="2179,1690" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SLAVE MARKET&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/underground/slave_market_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;run delete $charId&gt;&gt;
&lt;&lt;run delete $slaveId&gt;&gt;
&lt;&lt;run delete $guestId&gt;&gt;
&lt;&lt;newgirl&gt;&gt;
&lt;&lt;if ($player.quests.slave_market_vip ?? false)&gt;&gt;
	&lt;&lt;set $tmpGirl.beauty = Math.min($tmpGirl.beauty + randomInteger(10, 15), 100)&gt;&gt;
	&lt;&lt;set $tmpGirl.birthDate = setup.getBirthDate(randomInteger(18, 30))&gt;&gt;
	&lt;&lt;if setup.percentageChance(50)&gt;&gt;
		&lt;&lt;set $tmpGirl.traits = setup.getRandomTraits(2)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;slaveValue $tmpGirl 2&gt;&gt;
&lt;&lt;set _isSlaveMarket = true&gt;&gt;
&lt;&lt;include &#39;NPC info&#39;&gt;&gt;
&lt;&lt;if $tmpGirl.virgin&gt;&gt;
	&lt;div&gt;
		&lt;strong&gt;She&#39;s a virgin!&lt;/strong&gt;
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Slave cost &lt;strong&gt;&lt;&lt;=$tmpGirl.value&gt;&gt;&lt;/strong&gt; caps
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if timeBetween(&#39;14:00&#39;, &#39;19:00&#39;)&gt;&gt;
  &lt;&lt;if $slaves.length &lt; $basementLimit &amp;&amp; $player.money &gt;= $tmpGirl.value&gt;&gt;
	  &lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Buy&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.capture = false&gt;&gt;
		&lt;&lt;set $slaves.push($tmpGirl)&gt;&gt;
		&lt;&lt;set $player.money -= $slaveValue&gt;&gt;
		&lt;&lt;goto &#39;Slave market - buy&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
  &lt;&lt;else&gt;&gt;
	  &lt;&lt;if $slaves.length &gt;= $basementLimit&gt;&gt;
		  &lt;strong&gt;You don&#39;t have free room in basement&lt;/strong&gt;
	  &lt;&lt;/if&gt;&gt;
	  &lt;br /&gt;&lt;br /&gt;
  &lt;&lt;/if&gt;&gt;
  [[Watch another slave|Slave market - buy]]
&lt;&lt;/if&gt;&gt;
[[Leave|Slave market]]

&lt;&lt;addmins 30&gt;&gt;</tw-passagedata><tw-passagedata pid="122" name="Widget slaves" tags="widget" position="251,632" size="100,100">&lt;&lt;widget slaveValue&gt;&gt;
	&lt;&lt;set _age = setup.getAge($args[0])&gt;&gt;
	&lt;&lt;set $slaveValue = 
		($args[0].beauty / 2) + 
		($args[0].sub / 5) +
		((100 - _age) / 5)
	&gt;&gt;
	&lt;&lt;if $args[0].virgin&gt;&gt;
		&lt;&lt;set $slaveValue = $slaveValue * 2&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if $args[1]&gt;&gt;
		&lt;&lt;set $slaveValue = $slaveValue * $args[1]&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $slaveValue = Math.round($slaveValue / 2, 0)&gt;&gt;
	
	&lt;&lt;set $args[0].value = $slaveValue&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget slaveInfo&gt;&gt;
	&lt;&lt;set _age = setup.getAge($args[0])&gt;&gt;
	&lt;&lt;if (_age &lt; 20)&gt;&gt;
		&lt;&lt;set $ageDescription = &#39;teenage girl&#39;&gt;&gt;
	&lt;&lt;elseif (_age &lt; 25)&gt;&gt;
		&lt;&lt;set $ageDescription = &#39;girl&#39;&gt;&gt;
	&lt;&lt;elseif (_age &lt; 50)&gt;&gt;
		&lt;&lt;set $ageDescription = &#39;woman&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set $ageDescription = &#39;mature woman&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;strong&gt;&lt;&lt;=$args[0].name&gt;&gt; - &lt;&lt;=_age&gt;&gt;&lt;/strong&gt; year old, 
	&lt;&lt;=$ageDescription&gt;&gt; with &lt;strong&gt;&lt;&lt;=$args[0].hair&gt;&gt;&lt;/strong&gt; hair.
	&lt;br /&gt;
	Beauty score: &lt;&lt;=$args[0].beauty&gt;&gt;
	&lt;br /&gt;
	&lt;&lt;if $args[0].virgin&gt;&gt;
	She is &lt;strong&gt;virgin&lt;/strong&gt;!
	&lt;&lt;/if&gt;&gt;

&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="123" name="Farm - slave market" tags="bg-farm" position="3064,911" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;

&lt;&lt;vincent&gt;&gt;
	I just wanted to thank you again for keeping Blair safe!&lt;br /&gt;
	And don&#39;t think I haven&#39;t seen how you look at my slave in the cage.&lt;br/&gt;
	If you want one for yourself too there&#39;s a location in Underground city - Slave market. You can buy yourself one there.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Continue|Farm]]</tw-passagedata><tw-passagedata pid="124" name="Journal" tags="" position="1009,12" size="100,100">&lt;h2&gt;WORLD&lt;/h2&gt;
	You&#39;re on your own. Explore, survive, etc.&lt;br /&gt;
	Journal is only for unique characters.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if Object.keys($characters.vincent).length &gt; 0&gt;&gt;
	&lt;h2&gt;Vincent&lt;/h2&gt;
	&lt;div&gt;Relationship: &lt;&lt;=$characters.vincent.relationship&gt;&gt;&lt;/div&gt;
	&lt;&lt;if !isMetChar(&#39;blair&#39;)&gt;&gt;
		Increase relationship with Vincent (buy from his shop)
	&lt;&lt;elseif ($characters.blair.quests ?? false) &amp;&amp; !$characters.vincent.quests.new_settlement&gt;&gt;
		&lt;&lt;if !$characters.blair.quests.bj&gt;&gt;
			Progress with Blair
		&lt;&lt;else&gt;&gt;
			Go to farm after few days
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif $characters.vincent.quests.new_settlement &amp;&amp; !($game.location.settlement ?? false)&gt;&gt;
		Collect &lt;strong class=&quot;iitem&quot;&gt;100 wood&lt;/strong&gt;  and &lt;strong class=&quot;iitem&quot;&gt;5 solar panels&lt;/strong&gt;
	&lt;&lt;elseif !$characters.vincent.quests.car_talk &amp;&amp; $game.cabinName&gt;&gt;
		Talk with Vincent
	&lt;&lt;elseif !$characters.vincent.quests.wedding_talk&gt;&gt;
		&lt;&lt;if $game.day &lt; 150 || $characters.blair.relationship &lt; 90&gt;&gt;
			Reach 150 days and increase the Blair relationship to 90
		&lt;&lt;else&gt;&gt;
			Meet Vincent in farm
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif !$characters.vincent.quests.sanctuary_talk&gt;&gt;
		&lt;&lt;if $game.day &lt; 160 || ($characters.vincent.quests.wedding_talk_day + 10) &gt; $game.day&gt;&gt;
			Wait a few days
		&lt;&lt;else&gt;&gt;
			Meet Vincent in farm
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif $characters.vincent.quests.sanctuary_talk &amp;&amp; !$characters.vincent.quests.sanctuary_done&gt;&gt;
		Prepare yourself and meet Vincent at farm (two companions with strength 40+)
	&lt;&lt;elseif !($game.location.shop ?? false) &amp;&amp; $characters.vincent.quests.sanctuary_done &amp;&amp; !$characters.vincent.quests.shop_talk&gt;&gt;
		Talk with Vincent in the farm
	&lt;&lt;else&gt;&gt;
		That&#39;s all for now
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if ($characters.blair.quests ?? false)&gt;&gt;
	&lt;h2&gt;Blair&lt;/h2&gt;
	&lt;div&gt;Relationship: &lt;&lt;=$characters.blair.relationship&gt;&gt;&lt;/div&gt;
	&lt;&lt;if !($game.location.streets ?? false)&gt;&gt;
		After few days try to go to Underground city&lt;br /&gt;
	&lt;&lt;elseif ($game.location.streets ?? false) &amp;&amp; !$characters.vincent.wanted_poster&gt;&gt;
		Talk with Vicent about wanted poster&lt;br /&gt;
	&lt;&lt;elseif $characters.blair.relationship &lt; 15&gt;&gt;
		Increase relationship by talking with her in kitchen or bedroom (15)&lt;br /&gt;
	&lt;&lt;elseif ($game.location.streets ?? false) &amp;&amp; !$characters.vincent.wanted_poster&gt;&gt;
		Talk with Vicent about wanted poster&lt;br /&gt;
	&lt;&lt;elseif $characters.blair.relationship &lt; 20 &amp;&amp; !($game.location.bar ?? false)&gt;&gt;
		Increase relationship by talking with her in kitchen or bedroom (20)&lt;br /&gt;
	&lt;&lt;elseif !($game.location.bar ?? false)&gt;&gt;
		Talk with her in the kitchen&lt;br /&gt;
	&lt;&lt;elseif !$characters.blair.quests.missing_friend_talked&gt;&gt;
		Go to the bar and talk with bartender
		&lt;br /&gt;
	&lt;&lt;elseif $characters.blair.quests.missing_friend_talked &amp;&amp; !$characters.blair.quests.missing_friend_found&gt;&gt;
		Try to find her friend Ashley (On streets in underground city)
		&lt;br /&gt;
	&lt;&lt;elseif $characters.blair.quests.missing_friend_found &amp;&amp; !$characters.blair.quests.missing_friend_found_finished&gt;&gt;
		Talk to Blair in the morning about Ashley
		&lt;br /&gt;
	&lt;&lt;elseif $characters.blair.quests.missing_friend_found_finished &amp;&amp; !$characters.blair.quests.missing_friend_found_finished_thanked&gt;&gt;
		Talk to Blair in the evening
		&lt;br /&gt;
	&lt;&lt;elseif !$characters.blair.quests.bj&gt;&gt;
		Wait till she makes a move on you
		&lt;br /&gt;
	&lt;&lt;elseif !($characters.rodger.quests.champagne ?? false)&gt;&gt;
		Progress with Rodger
	&lt;&lt;elseif ($characters.rodger.quests.champagne ?? false) &amp;&amp; !$characters.blair.quests.house_party&gt;&gt;	
		Talk with her in the morning
	&lt;&lt;elseif $characters.blair.quests.house_party &amp;&amp; !$characters.blair.quests.house_party_finished&gt;&gt;	
		Make a house party at fire place at 20:00 and invite any guest to your bedroom
	&lt;&lt;elseif !$game.gate &amp;&amp; !$characters.blair.quests.gate&gt;&gt;
		Talk with Blair in the kitchen
	&lt;&lt;elseif !$game.cabinName&gt;&gt;
		Build gate for your settlement
	&lt;&lt;elseif !$characters.blair.quests.nursery&gt;&gt;
		Talk with Blair in the kitchen
	&lt;&lt;elseif ($game.cabinName ?? false) &amp;&amp; !$characters.blair.quests.basement&gt;&gt;
		&lt;&lt;if $characters.blair.relationship &gt;= 80&gt;&gt;
			Talk with her in the bedroom
		&lt;&lt;else&gt;&gt;
			Increase relationship
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		That&#39;s all for now
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if ($game.location.settlement ?? false) &amp;&amp; isMetChar(&#39;rodger&#39;)&gt;&gt;
	&lt;h2&gt;Rodger&lt;/h2&gt;
	&lt;&lt;if !($game.location.settlement_church ?? false)&gt;&gt;
		Help him finish the church
	&lt;&lt;elseif !$characters.rodger.quests.book&gt;&gt;
		Talk with him in the church
	&lt;&lt;elseif !$characters.rodger.quests.champagne&gt;&gt;
		Talk with him in the church
	&lt;&lt;elseif $characters.rodger.quests.champagne &amp;&amp; !$characters.eve.quests.sex&gt;&gt;
		&lt;&lt;if $game.cabinName&gt;&gt;
			Talk with him in the church
		&lt;&lt;else&gt;&gt;
			Progress with Blair
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif !($game.location.settlement_shop ?? false)&gt;&gt;
		&lt;&lt;if !$characters.rodger.quests.shop_talk&gt;&gt;
			Talk with him in the church
		&lt;&lt;else&gt;&gt;
			Help him build shop
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif ($game.location.settlement_shop ?? false) &amp;&amp; !$characters.rodger.quests.horse&gt;&gt;
		Talk with him in the church
	&lt;&lt;else&gt;&gt;
		That&#39;s all for now
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

&lt;h2&gt;Dom&lt;/h2&gt;
&lt;&lt;if isMetChar(&#39;dom&#39;) &amp;&amp; !$characters.dom.quests.invite&gt;&gt;
	&lt;&lt;if $game.day &lt; 100 || $player.reputation &lt; 100 || setup.getPersonsForLocation($slaves, &#39;streets&#39;).length &lt; 4&gt;&gt;
		Keep living your life. Increase reputation and need more girls working on the street and reach 100 days
	&lt;&lt;else&gt;&gt;
		Got to the underground streets
	&lt;&lt;/if&gt;&gt;
&lt;&lt;elseif $characters.dom.quests.accepted_deal&gt;&gt;
	&lt;&lt;if !$characters.dom.quests.quest1&gt;&gt;
		Wait for a few days until some of Dom&#39;s men find you.	
	&lt;&lt;elseif $characters.dom.quests.quest1 &amp;&amp; !$characters.dom.quests.quest1_done&gt;&gt;
		Get 10 bottles of champagne for Dom
	&lt;&lt;elseif !$characters.dom.quests.quest2&gt;&gt;
		&lt;&lt;if $player.strength &lt; 100&gt;&gt;
			Increase your strength (100+)
		&lt;&lt;else&gt;&gt;
			Meet Dom in streets
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif !$characters.dom.quests.quest3&gt;&gt;
		&lt;&lt;if $characters.dom.quests.quest3_start_day &gt;= $game.day&gt;&gt;
			Wait few days
		&lt;&lt;else&gt;&gt;
			Meet Dom in streets
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		That&#39;s all for now
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	That&#39;s all for now
&lt;&lt;/if&gt;&gt;

&lt;&lt;if ($game.location.settlement ?? false) &amp;&amp; isMetChar(&#39;rodger&#39;) &amp;&amp; isMetChar(&#39;octavia&#39;)&gt;&gt;
	&lt;h2&gt;Octavia&lt;/h2&gt;
	&lt;&lt;if !$characters.octavia.quests.burned_settlement&gt;&gt;
		&lt;&lt;if $game.day &lt; 80&gt;&gt;
			Reach 80 ingame days
		&lt;&lt;else&gt;&gt;
			Visit Rodger&#39;s settlement
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif $characters.octavia.quests.burned_settlement &amp;&amp; !$characters.octavia.quests.eve_kidnapped&gt;&gt;
			After few days travel to Rodger&#39;s settlement
	&lt;&lt;else&gt;&gt;
		That&#39;s all for now
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

&lt;h2&gt;Laura (Dr. Finch)&lt;/h2&gt;
&lt;&lt;if isMetChar(&#39;laura&#39;)&gt;&gt;
	&lt;&lt;if !$characters.laura.quests.successful_test&gt;&gt;
		Wait few days
	&lt;&lt;elseif !$characters.laura.quests.first_vials&gt;&gt;
		Wait few days
	&lt;&lt;else&gt;&gt;
		That&#39;s all for now
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	Get to day 200
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="125" name="Bar" tags="Place bg-underground" position="1941,1937" size="100,100">&lt;&lt;if !($bar_first_time ?? false)&gt;&gt;
	&lt;&lt;goto &#39;Bar - first time&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/underground/bar_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;strong&gt;Blackjack games happen from 18:00 till 23:00&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.blair.quests &amp;&amp; !($characters.blair.quests.missing_friend_talked ?? false)&gt;&gt;
	&lt;&lt;link &#39;Talk with bartender about Blair friend&#39;&gt;&gt;
		&lt;&lt;goto &#39;Bar - quest missing friend&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $characters.blair.quests &amp;&amp; $characters.blair.quests.missing_friend_found_finished &amp;&amp; $player.reputation &gt; 20&gt;&gt;
	&lt;&lt;link &#39;Talk to bartender&#39;&gt;&gt;
		&lt;&lt;goto &#39;Bar - bartender talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.money &gt;= 5&gt;&gt;
  &lt;&lt;link &#39;Get a drink (5 caps)&#39;&gt;&gt;
	  &lt;&lt;set $player.money -=5&gt;&gt;
	  &lt;&lt;goto &#39;Bar - drink&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.money &gt;= 100&gt;&gt;
	&lt;&lt;link &#39;Buy a round for everyone (100 caps)&#39;&gt;&gt;
		&lt;&lt;set $player.money -= 100&gt;&gt;
		&lt;&lt;goto &#39;Buy a round for everyone&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if timeBetween(&#39;18:00&#39;, &#39;23:00&#39;)&gt;&gt;
  &lt;&lt;link &#39;Play blackjack&#39;&gt;&gt;
	  &lt;&lt;addmins 15&gt;&gt;
	  &lt;&lt;goto &#39;Blackjack&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if timeBetween(&#39;12:00&#39;, &#39;00:00&#39;)&gt;&gt;
  &lt;&lt;link &#39;Check wanted posters&#39;&gt;&gt;
	  &lt;&lt;addmins 15&gt;&gt;
	  &lt;&lt;goto &#39;Bar - wanted posters&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Leave|Underground city]] </tw-passagedata><tw-passagedata pid="126" name="Blair - quest missing friend" tags="" position="557,2060" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;

&lt;&lt;blair&gt;&gt;
	&lt;&lt;=$player.name&gt;&gt;!! I need your help!&lt;br /&gt;
	My friend is missing and I haven&#39;t seen her for several days.
	&lt;br /&gt;
Could you please try and find her?
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;
I can try.&lt;br /&gt;
What&#39;s her name? What does she look like? Where did you last see her and what are some places where she likes to hang out?
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
Her name is Ashley. She has long red hair and is in her 40s. Don&#39;t tell anyone but she really likes to sneak out to the local bar in the underground city. Maybe you should ask around there. 
&lt;&lt;/blair&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
[[Leave|Kitchen-room]] 

&lt;&lt;set $game.location.bar = true&gt;&gt;
&lt;&lt;addmins 30&gt;&gt;</tw-passagedata><tw-passagedata pid="127" name="Bar - first time" tags="bg-underground" position="2062,1942" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You open some rusty metal doors and go inside the building.
You manage to get inside a bar and instantly feel that everyone is looking at you and judging you.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/first_time1.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You try to ignore them and move forward through the crowd as you notice a wall, full of some people&#39;s faces on it. By the look missing, or wanted persons.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/wanted_wall.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You continue to walk deeper and you notice some guys playing blackjack in the corner of the room. They seem to ignore you as you go pass them.
&lt;br /&gt;&lt;br /&gt;

[[Continue|Bar]]

&lt;&lt;set $bar_first_time = true&gt;&gt;</tw-passagedata><tw-passagedata pid="128" name="Bar - wanted posters" tags="bg-underground" position="2173,1941" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;&lt;if typeof $wanted === &#39;undefined&#39;&gt;&gt;
	&lt;&lt;set $wanted to []&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $currentWanted = $wanted.length&gt;&gt;
&lt;&lt;set $player.quests = $player.quests ?? {}&gt;&gt;
&lt;&lt;set $player.quests.wanted = $player.quests.wanted ?? {}&gt;&gt;
&lt;&lt;for _i to 0; _i lt (3 - $currentWanted); _i++&gt;&gt;
	&lt;&lt;set _additionalAward = 0&gt;&gt;
	&lt;&lt;if $player.reputation_bounty_hunter &gt;= 10 &amp;&amp; typeof $player.quests.wanted.u1 === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;set 
			$tmpGuy.unique = true,
			$tmpGuy.uniqueKey = 1,
			$tmpGuy.cantKill = true
		&gt;&gt;
		&lt;&lt;set $player.quests.wanted.u1 = true&gt;&gt;
		&lt;&lt;set _additionalAward = 200&gt;&gt;
		&lt;&lt;set $wantedPerson = $tmpGuy&gt;&gt;
	&lt;&lt;elseif random(0,2) == 2&gt;&gt;
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;set $wantedPerson = $tmpGirl&gt;&gt;	
	&lt;&lt;else&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;set $wantedPerson = $tmpGuy&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;set $wantedPerson.wanted = {
		value: randomInteger(20, 70) + ($player.hunterRating ?? 0) + _additionalAward,
		progress: 0
	}&gt;&gt;
	&lt;&lt;set $wantedPerson.strength += 50&gt;&gt;
	&lt;&lt;run $wanted.push($wantedPerson)&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;div id=&quot;wanted-list&quot;&gt;
  &lt;&lt;for _i to 0; _i lt $wanted.length; _i++&gt;&gt;
	  &lt;&lt;capture _i&gt;&gt;
		  &lt;div class=&quot;wanted-div&quot;&gt;
		  	  &lt;&lt;if $wanted[_i].unique&gt;&gt;
			  	&lt;div class=&quot;wanted-unique&quot; @style=&quot;&#39;background-image: url(\&#39;&#39; + setup.ImagePath+&#39;game/misc/star.png\&#39;)&#39;&quot;&gt;&lt;/div&gt;
			  &lt;&lt;/if&gt;&gt;
			  &lt;div class=&quot;wanted-bg&quot;&gt;
				  [img[setup.ImagePath+&#39;places/bar/wanted_layer.jpg&#39;]]
			  &lt;/div&gt;
			  &lt;div class=&quot;wanted-type&quot;&gt;
			  	&lt;&lt;if $wanted[_i].unique&gt;&gt;
					ALIVE
				&lt;&lt;else&gt;&gt;
			  		DEAD OR ALIVE
				&lt;&lt;/if&gt;&gt;
			  &lt;/div&gt;
			  &lt;div class=&quot;wanted-img&quot;&gt;
				&lt;&lt;if !$wanted[_i].gender&gt;&gt;
					[img[setup.ImagePath+&#39;places/bar/wanted_woman.jpg&#39;]]
				&lt;&lt;else&gt;&gt;
					[img[setup.ImagePath+&#39;places/bar/wanted_man.jpg&#39;]]
				&lt;&lt;/if&gt;&gt;
			  &lt;/div&gt;
			  &lt;div class=&quot;wanted-name&quot;&gt;
				  &lt;&lt;=$wanted[_i].name&gt;&gt;
			  &lt;/div&gt;
			  &lt;div class=&quot;wanted-value&quot;&gt;
				  &lt;&lt;=$wanted[_i].wanted.value&gt;&gt; $$
			  &lt;/div&gt;
			  &lt;div class=&quot;wanted-link&quot;&gt;
			  	&lt;&lt;link &#39;Look around&#39;&gt;&gt;
					&lt;&lt;set $wantedId = _i&gt;&gt;
					&lt;&lt;addhours 3&gt;&gt;
					&lt;&lt;goto &#39;Wanted - look around&#39;&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			  &lt;/div&gt;
		  &lt;/div&gt;
	  &lt;&lt;/capture&gt;&gt;
  &lt;&lt;/for&gt;&gt;
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
Your bounty hunter reputation: &lt;&lt;=$player.reputation_bounty_hunter&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
[[Leave|Bar]] 
</tw-passagedata><tw-passagedata pid="129" name="Wanted - look around" tags="bg-underground" position="2771,1792" size="100,100">&lt;&lt;set $wanted[$wantedId].wanted.progress += randomInteger(25, 40)&gt;&gt;
&lt;&lt;if $wanted[$wantedId].wanted.progress &gt;= 100&gt;&gt;
	&lt;&lt;set $wantedPsg = &#39;Wanted - found&#39;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set $wantedPsg = &#39;Wanted - look around &#39; + randomInteger(1,3)&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;goto &#96;$wantedPsg&#96;&gt;&gt;
</tw-passagedata><tw-passagedata pid="130" name="Wanted - look around 1" tags="bg-underground" position="2884,1791" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/ask_around3.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you sip a drink in bar you overhear conversation about 
&lt;&lt;if $wanted[$wantedId].gender&gt;&gt;
guy
&lt;&lt;else&gt;&gt;
girl
&lt;&lt;/if&gt;&gt; you&#39;re looking for.
&lt;br /&gt;&lt;br /&gt;
[[Leave|Bar]]</tw-passagedata><tw-passagedata pid="131" name="Wanted - look around 2" tags="bg-underground" position="2989,1790" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/ask_around1.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You take a walk outside and for each passing by person show wanted poster to see if someone knows anything about them. 
&lt;br /&gt;&lt;br /&gt;
[[Leave|Bar]]</tw-passagedata><tw-passagedata pid="132" name="Wanted - look around 3" tags="bg-underground" position="3103,1790" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/ask_around4.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You notice friend of 
&lt;&lt;if $wanted[$wantedId].gender&gt;&gt;
guy
&lt;&lt;else&gt;&gt;
girl
&lt;&lt;/if&gt;&gt;
you&#39;re looking for so you decide to stay behind corner and listen the conversation. 
&lt;br /&gt;&lt;br /&gt;
[[Leave|Bar]]</tw-passagedata><tw-passagedata pid="133" name="Wanted - found" tags="" position="2885,1899" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;&lt;set $wantedGender = ($wanted[$wantedId].gender ? &#39;guy&#39; : &#39;girl&#39;)&gt;&gt;
&lt;&lt;set $wantedPron = ($wanted[$wantedId].gender ? &#39;he&#39; : &#39;she&#39;)&gt;&gt;
&lt;&lt;set $wantedPron2 = ($wanted[$wantedId].gender ? &#39;him&#39; : &#39;her&#39;)&gt;&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/wanted_found.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
After gathering all information you knew exactly  where to find &lt;&lt;=$wantedPron2&gt;&gt;.
&lt;br /&gt;
You waited for some time and it paid off. &lt;strong&gt;You see &lt;&lt;=$wantedPron2&gt;&gt;!&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;


&lt;&lt;set $wantedPsg = &#39;Catch &#39; + $wantedPron2&gt;&gt;

&lt;&lt;link &#96;$wantedPsg&#96;&gt;&gt;
	&lt;&lt;if $wanted[$wantedId].strength &lt; $player.strength&gt;&gt;
		&lt;&lt;if $wanted[$wantedId].unique&gt;&gt;
			&lt;&lt;set _gotoLink = &#39;Wanted - unique #&#39; + $wanted[$wantedId].uniqueKey&gt;&gt;
			&lt;&lt;goto &#96;_gotoLink&#96;&gt;&gt;
		&lt;&lt;elseif setup.percentageChance(30)&gt;&gt;
			&lt;&lt;goto &#39;Wanted - fight&#39;&gt;&gt;
		&lt;&lt;elseif setup.percentageChance(30) &amp;&amp; !$wanted[$wantedId].gender&gt;&gt;
			&lt;&lt;goto &#39;Wanted - parent&#39;&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Wanted - catched&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Wanted - escaped&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="134" name="Wanted - catched" tags="" position="2995,1901" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;&lt;set $wantedPron2 = ($wanted[$wantedId].gender ? &#39;him&#39; : &#39;her&#39;)&gt;&gt;
&lt;&lt;set $wantedGender = ($wanted[$wantedId].gender ? &#39;guy&#39; : &#39;girl&#39;)&gt;&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/catch_&#39; + $wantedGender + &#39;.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if !$wanted[$wantedId].gender&gt;&gt;
You put cuffs around her and push her against the wall
&lt;&lt;else&gt;&gt;
You beat his ass and cuff him as he lies on the ground
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$wanted[$wantedId].gender&gt;&gt;
	&lt;table&gt;
		&lt;tr&gt;
			&lt;td&gt;Beauty:&lt;/td&gt;&lt;td&gt;&lt;&lt;=$wanted[$wantedId].beauty&gt;&gt;&lt;/td&gt;
			&lt;td&gt;Age:&lt;/td&gt;&lt;td&gt;&lt;&lt;=setup.getAge($wanted[$wantedId], true)&gt;&gt;&lt;/td&gt;
		&lt;/tr&gt;
	&lt;/table&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $wantedLink = &#39;Bring &#39; + $wantedPron2 + &#39; in&#39;&gt;&gt;
&lt;&lt;link &#96;$wantedLink&#96;&gt;&gt;
	&lt;&lt;goto &#39;Wanted - collect reward&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;if !$wanted[$wantedId].gender&gt;&gt;
	&lt;&lt;link &#39;Use her&#39;&gt;&gt;
		&lt;&lt;addmins 30&gt;&gt;
		&lt;&lt;set $wantedPsg = &#39;Wanted - fuck &#39; + random(1,2)&gt;&gt;
		&lt;&lt;goto &#96;$wantedPsg&#96;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;if $slaves.length &lt; $basementLimit&gt;&gt;
		&lt;&lt;link &#39;Capture her and bring her home as slave&#39;&gt;&gt;
			&lt;&lt;set $wanted[$wantedId].capture = false&gt;&gt;
			&lt;&lt;set $slaves.push($wanted[$wantedId])&gt;&gt;
			&lt;&lt;set $wanted.splice($wantedId, 1)&gt;&gt;
			&lt;&lt;addhours 2&gt;&gt;
			&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="135" name="Blackjack" tags="" position="3486,1027" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/bar/blackjack_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

Underground city has it&#39;s own rules. House always goes last. If you don&#39;t like that - you know where doors are. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $blackjack to {
	bet: 0,
	deck: {},
	first: true,
	you: [],
	house: [],
	won: false,
	stand: false,
	bj: (typeof $blackjack !== &#39;undefined&#39; ? $blackjack.bj : false)
}&gt;&gt;
Bet: &lt;&lt;textbox &quot;$blackjack.bet&quot; 1&gt;&gt;
&lt;div id=&quot;blackjack-error&quot; style=&quot;color:red&quot;&gt;&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Bet&#39;&gt;&gt;
	&lt;&lt;addmins 15&gt;&gt;
	&lt;&lt;if typeof $player.gambler === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $player.gambler = 0&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $player.gambler++&gt;&gt;
	&lt;&lt;set $blackjack.bet = parseInt($blackjack.bet)&gt;&gt;
	&lt;&lt;if !Number.isInteger($blackjack.bet) || $blackjack.bet &lt; 1&gt;&gt;
		&lt;&lt;replace &quot;#blackjack-error&quot; style=&quot;color:red&quot;&gt;&gt;Invalid value&lt;&lt;/replace&gt;&gt;
	&lt;&lt;elseif $player.money &lt; $blackjack.bet&gt;&gt;
		&lt;&lt;replace &quot;#blackjack-error&quot;&gt;&gt;You don&#39;t have enough caps&lt;&lt;/replace&gt;&gt;
	&lt;&lt;elseif $blackjack.bet &gt; 100&gt;&gt;
		&lt;&lt;replace &quot;#blackjack-error&quot;&gt;&gt;Bet is too big. Max: 100&lt;&lt;/replace&gt;&gt;
	&lt;&lt;else&gt;&gt;
	  &lt;&lt;set $blackjack.deck = blackjackDeck()&gt;&gt;
	  &lt;&lt;set $player.money -= $blackjack.bet&gt;&gt;
	  &lt;&lt;if (randomInteger(1, 2) === 1) &amp;&amp; !$blackjack.bj&gt;&gt;
	  	&lt;&lt;goto &#39;Blackjack - bj&#39;&gt;&gt;
	  &lt;&lt;else&gt;&gt;
	  	 &lt;&lt;goto &#39;Blackjack - play&#39;&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;if $blackjack.bj&gt;&gt;
		&lt;&lt;goto &#39;Blackjack - bj end&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Bar&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run delete $blackjack&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;if ($blackjack.bj)&gt;&gt;
	&lt;&lt;include &#39;Blackjack bj&#39;&gt;&gt;		
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="136" name="Blackjack - play" tags="" position="3593,1031" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/bar/blackjack_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $blackjack.first&gt;&gt;
	&lt;&lt;run blackjackGiveCard($blackjack.house)&gt;&gt;
	&lt;&lt;run blackjackGiveCard($blackjack.house)&gt;&gt;
	
	&lt;&lt;run blackjackGiveCard($blackjack.you)&gt;&gt;
	&lt;&lt;run blackjackGiveCard($blackjack.you)&gt;&gt;
	&lt;&lt;set $blackjack.first = false&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;if $blackjack.stand&gt;&gt;
		&lt;&lt;if blackjackCountCards($blackjack.house) &lt; 17&gt;&gt;
			&lt;&lt;run blackjackGiveCard($blackjack.house)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;set $blackjack.finished = true&gt;&gt;
		&lt;&lt;if (blackjackCountCards($blackjack.you) &gt; blackjackCountCards($blackjack.house) || blackjackCountCards($blackjack.house) &gt; 21) &amp;&amp; blackjackCountCards($blackjack.you) &lt;= 21&gt;&gt;
			&lt;&lt;set $blackjack.won = true&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;if blackjackCountCards($blackjack.you) &gt; 21&gt;&gt;
			&lt;&lt;set $blackjack.finished = true&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;strong&gt;You have &lt;&lt;=blackjackCountCards($blackjack.you)&gt;&gt;&lt;/strong&gt;
	
&lt;&lt;if !$blackjack.finished&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Hit&#39;&gt;&gt;
		&lt;&lt;run blackjackGiveCard($blackjack.you)&gt;&gt;
		&lt;&lt;goto &#39;Blackjack - play&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#39;Stand&#39;&gt;&gt;
		&lt;&lt;set $blackjack.stand = true&gt;&gt;
		&lt;&lt;goto &#39;Blackjack - play&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;br /&gt;
	&lt;strong&gt;House has &lt;&lt;=blackjackCountCards($blackjack.house)&gt;&gt;&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	
	&lt;&lt;if $blackjack.won&gt;&gt;
		&lt;strong&gt;You WON! You won &lt;&lt;=$blackjack.bet&gt;&gt; caps&lt;/strong&gt;
		&lt;&lt;set $player.money += ($blackjack.bet * 2)&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;strong&gt;You LOST!&lt;/strong&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Play again&#39;&gt;&gt;
		&lt;&lt;goto &#39;Blackjack&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;if $blackjack.bj&gt;&gt;
			&lt;&lt;goto &#39;Blackjack - bj end&#39;&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Bar&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;run delete $blackjack&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if ($blackjack.bj)&gt;&gt;
	&lt;&lt;include &#39;Blackjack bj&#39;&gt;&gt;		
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="137" name="Wanted - escaped" tags="" position="2772,1900" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;&lt;set $wantedGender = ($wanted[$wantedId].gender ? &#39;guy&#39; : &#39;girl&#39;)&gt;&gt;
&lt;&lt;set $wantedPron = ($wanted[$wantedId].gender ? &#39;he&#39; : &#39;she&#39;)&gt;&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/escape_&#39; + $wantedGender + &#39;.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You fail to catch the &lt;&lt;=$wantedGender&gt;&gt; and &lt;&lt;=$wantedPron&gt;&gt; manages to run away.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Your strength failed&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set $wanted[$wantedId].wanted.progress -= 40&gt;&gt;
[[Leave|Bar]]</tw-passagedata><tw-passagedata pid="138" name="Wanted - collect reward" tags="" position="3106,1901" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;&lt;set $wantedPron2 = ($wanted[$wantedId].gender ? &#39;him&#39; : &#39;her&#39;)&gt;&gt;
&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/collect_reward.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You kick the door open and bring &lt;&lt;=$wantedPron2&gt;&gt; in. As you walk to reward collection corner you see crowd nodding and giving small applause as you drop &lt;&lt;=$wantedPron2&gt;&gt; off.
&lt;br /&gt;&lt;br /&gt;

&lt;strong&gt;Your bounty hunter reputation increased by 1&lt;/strong&gt;&lt;br /&gt;
&lt;strong&gt;You collected &lt;&lt;=$wanted[$wantedId].wanted.value&gt;&gt; caps&lt;/strong&gt;

&lt;&lt;set $player.reputation_bounty_hunter++&gt;&gt;
&lt;&lt;set $player.money += $wanted[$wantedId].wanted.value&gt;&gt;
&lt;&lt;set $wanted.splice($wantedId, 1)&gt;&gt;
&lt;&lt;addmins 60&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Bar]]</tw-passagedata><tw-passagedata pid="139" name="Wanted - fuck 1" tags="" position="2996,2010" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You put handcuffs around her hands and near the tree as you forcefully pull down her shorts and panties and slide dick inside her pussy.
&lt;br /&gt;&lt;br /&gt;
She begs you not to, as you continue to thrust inside her pussy.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/bar/hunter_1_1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
As you press against her back you hear a quiet moan from her and instantly notice she&#39;s getting more relaxed and even enjoys the fucking.
After some seconds she whispers something as she asks her to repeat. In answer she yells out with moan   &lt;strong&gt;uncuff me!!&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/bar/hunter_1_2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/bar/hunter_1_3&#39;&gt;&gt;
As soon as you uncuff her, she pushes you back on your back and jumps on your hard dick and slides it in all the way.&lt;br /&gt;
You barely hold it as you hear her ass clapping against your legs and a moment later you cum inside her without any warning...
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
[[Back|Wanted - catched]] </tw-passagedata><tw-passagedata pid="140" name="Bar - quest missing friend" tags="bg-underground" position="2280,1943" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;&lt;video &#39;/bar/bartender_missing_friend&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You approach the cute bartender as you discreetly ask if she has seen Blair&#39;s friend.&lt;br /&gt;
You tell that her name is  Ashley. She has long, red hair and she&#39;s in her 40s.
&lt;br /&gt;&lt;br /&gt;
The bartender giggles as soon as she hears her description. &lt;strong&gt;&quot;Get lost! You shouldn&#39;t try to find her. Knowing with who she liked to drink together, she&#39;s probably sold as slave somewhere or is laying dead in some dark alley&quot;&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
[[Continue|Bar]]
&lt;&lt;if typeof $characters.blair.quests !== &#39;undefined&#39;&gt;&gt;
	&lt;&lt;set $characters.blair.quests.missing_friend_talked = true&gt;&gt;
	&lt;&lt;set $characters.blair.quests.missing_friend_talked_day = $game.day&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="141" name="Wanted - fuck 2" tags="" position="3105,2007" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You find a rope near you and tie her down as you start to cuff her leather shorts as he tries to scream with some old, dirty cloth in her mouth.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/bar/hunter_2_1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You take out your hard cock and hold it in your hand while grabbing her by the hair and holding her steady as you shove dick in her mouth and fuck it.&lt;br /&gt;
Girls tries to resist and yell for help but pointless as you don&#39;t even take out dick to let her breath.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/bar/hunter_2_2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You untie her and throw her on some old chair next to you while wrapping rope around her legs. Instantly you go for her wet pussy.&lt;br /&gt;
You decide to rub her clitoris with your hand and by surprise, she squirts a bit.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/bar/hunter_2_3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You slide hard, dick back inside her wet pussy and a moment later cum inside her without any warning.
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Wanted - catched]] </tw-passagedata><tw-passagedata pid="142" name="Streets - warning tax" tags="bg-underground" position="2179,1577" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
As you turn corner into street your slaves work on you hear running steps coming from behind you and before you manage to turn around your image just goes black
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/streets/bat-assault.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Streets - warning tax 2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="143" name="Streets - warning tax 2" tags="bg-underground" position="2300,1579" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/streets/assault_smoke.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You get back your consciousness and hear some voices.&lt;br /&gt;
You slowly open your eyes and see an old guy smoking a cigarette as he sits right in front of you with anger in his eyes.
&lt;br /&gt;
He exhales smoke and throws away a cigarette while getting up.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;
Who the fuck you think you are!? We&#39;ve got some rules here. You can&#39;t just put your cheap whores on the street and decide that&#39;s good.
&lt;&lt;/dom&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Guy next to him shouts &lt;strong&gt;&quot;Let me kill him, boss&quot;&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;Maybe we should. That would be easier...&lt;&lt;/dom&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
The guy next to him pulls out a knife with a grin on his face as he slowly starts walking towards you. You try to get up but your hands and legs are tied up
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;
STOP! You know what - I&#39;ll let you work in these streets, BUT &lt;strong&gt;80%&lt;/strong&gt; of your girl income goes to me. There won&#39;t be any negotiations
&lt;&lt;/dom&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Accept the offer&#39;&gt;&gt;
	&lt;&lt;goto &#39;Streets&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="144" name="Streets - Blair quest missing friend - dead" tags="" position="788,2051" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/streets/ashley_dead.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
In the distance you see something laying in the street.
&lt;br /&gt;
You decide to get a closer look. As you get within a few meters you notice her red hair and instantly the worst thing that comes to mind as you move closer.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;That&#39;s Ashley...&lt;/strong&gt;
&lt;br /&gt;
Upon closer inspection you notice that her head is really messed up. Probably with a metal baseball bat.
&lt;br /&gt;
&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/streets/ashley_dead_close.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Her shirt has been ripped off and it looks like she was used many times before being killed. You look at her breasts and notice some strange dark substance all over her chest.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;
You should probably tell Blair about her...or maybe you shouldn&#39;t?
&lt;/strong&gt;

&lt;br /&gt;&lt;br /&gt;
[[Continue|Streets]]</tw-passagedata><tw-passagedata pid="145" name="Streets - Blair quest missing friend - alive" tags="" position="904,2052" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

As you walk down the street you hear some noises and decide to investigate. It&#39;s not far from the place where the bartender told you she was usually seen.&lt;br /&gt;
You notice a rusty unlocked door and slowly open it to check what&#39;s inside.

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/streets/lost_friend1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

You manage to find a light switch and turn it on...&lt;br /&gt;
There&#39;s a red headed girl locked in a cage.&lt;br /&gt;
You carefully move forward while checking your surroundings.&lt;br /&gt;

&lt;br /&gt;
You slowly open the cage but get no response from her. First thought that comes to your mind is that she&#39;s already dead but you decide to drag her out of the cage to check closer.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/streets/lost_friend2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;Ashley? ASHLEY! WAKE UP!&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
No response.. You give her a squeeze then slap her while expecting her to get her shit together. You even splash water on her - still nothing
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/streets/lost_friend3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;div id=&quot;lost-friend-buttons&quot;&gt;
	&lt;&lt;link &#39;Fuck her mouth&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#lost-friend-buttons&#39;).slideToggle()&gt;&gt;
		&lt;&lt;run $(&#39;#lost-friend-use&#39;).slideToggle()&gt;&gt;
		&lt;&lt;if typeof $characters.blair.quests !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $characters.blair.quests.lost_friend_used = true&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;run setTimeout(function() {
			$(&#39;#lost-friend-fight&#39;).slideToggle();
		}, 3000)&gt;&gt;
	&lt;&lt;/link&gt;&gt;
 	&lt;&lt;link &#39;Try to help her&#39;&gt;&gt;
   		You grab her by the hair and pull her toward your hard dick. She seems lost and confused but you decide to continue.
		&lt;&lt;run $(&#39;#lost-friend-fight&#39;).slideToggle()&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;lost-friend-use&quot; style=&quot;display: none;&quot;&gt;
	You grab her by hair and instantly pull her up toward your hard dick. She seems lost and doesn&#39;t understand what&#39;s even happening but you decide to continue.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/streets/lost_friend4&#39;&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;lost-friend-fight&quot; style=&quot;display:none&quot;&gt;
  &lt;br /&gt;&lt;br /&gt;
Suddenly you hear a noise behind you and as you turn around you notice a guy running toward you as he screams his lungs out.
&lt;br /&gt;&lt;br /&gt;
  &lt;&lt;link &#39;Fight&#39;&gt;&gt;
	  &lt;&lt;newguy&gt;&gt;
	  &lt;&lt;set 
	  	$enemies = [],
		$tmpGuy.strength = 30
	  &gt;&gt;
	  &lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	  &lt;&lt;fight $enemies &#39;Streets - Blair quest missing friend home&#39; &#39;Streets&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="146" name="Blair - quest missing friend found" tags="" position="1121,2055" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;you&gt;&gt;
	Listen, about Ashley. I found her&lt;br /&gt;
	&lt;&lt;if !$characters.blair.quests.missing_friend_found_dead&gt;&gt;
		She&#39;s alive. I managed to get her to your dad&#39;s farm behind the barn.
	&lt;&lt;else&gt;&gt;
		I am sorry... She&#39;s dead. She was involved with some bad people.
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;blair&gt;&gt;
	&lt;&lt;if !$characters.blair.quests.missing_friend_found_dead&gt;&gt;
		Really?! Oh my god, thank you so much. I won&#39;t forget this! I need to go see her and check if she&#39;s ok!  But before that I have a gift for you!
	&lt;&lt;else&gt;&gt;
		What? NO! How? Oh god NO!
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if !$characters.blair.quests.missing_friend_found_dead&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/kitchen/give_revolver.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;strong&gt;You received an revolver&lt;/strong&gt;
		&lt;&lt;pickup $backpack &#39;revolver&#39; 1&gt;&gt;
&lt;&lt;else&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/kitchen/cry_hug.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		She starts crying and runs to you for comfort. You hold her and let her cry it out. You didn&#39;t know they were so close.
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	You have done so much for me, I don&#39;t even know how to thank you. 
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;kitchen/friend_found_finished&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She pushes you against kitchen counter and starts to kiss you. You feel this is it, as you pull up her shirt and look at her firm breasts. You kiss her passionately and you&#39;re ready to take off your pants to fuck her hard..
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Sorry, I can&#39;t do that. You&#39;ve done so much for me, but I can&#39;t... I need to go.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Blair relationship increased by 5&lt;/strong&gt;
&lt;&lt;set $characters.blair.relationshop +=5&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addmins 30&gt;&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Kitchen-room&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="147" name="Fight" tags="" position="3381,755" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIGHT&lt;/h1&gt;
&lt;h2&gt;Enemies&lt;/h2&gt;
&lt;div id=&quot;fight-enemies&quot;&gt;
	&lt;&lt;for _i to 0; _i lt $fight.enemies.length; _i++&gt;&gt;
		&lt;&lt;capture _i&gt;&gt;
			&lt;div class=&quot;enemy-div&quot;&gt;
				&lt;div class=&quot;enemy-img&quot;&gt;
					[img[setup.ImagePath+&#39;places/fight/enemy_&#39; + $fight.enemies[_i].gender + &#39;.png&#39;]]
				&lt;/div&gt;
				&lt;&lt;=$fight.enemies[_i].name&gt;&gt;
				&lt;div class=&quot;enemy-hp&quot;&gt;
				&lt;div class=&quot;enemy-hp-border&quot;&gt;
					&lt;div class=&quot;enemy-hp-bar&quot; @style=&quot;&#39;width:&#39; + $fight.enemies[_i].hp + &#39;%&#39;&quot;&gt;&lt;/div&gt;
					&lt;div class=&quot;enemy-hp-count&quot;&gt;&lt;&lt;=$fight.enemies[_i].hp&gt;&gt;&lt;/div&gt;
				&lt;/div&gt;
				&lt;/div&gt;
				&lt;div class=&quot;enemy-weapons&quot;&gt;
					&lt;&lt;for _enemyWeaponI, _enemyWeapon range ($fight.enemies[_i].inventory ?? [])&gt;&gt;
						&lt;div class=&quot;fight-weapon-icon&quot;&gt;
							[img[setup.ImagePath+&#39;/game/inventory/&#39; + _enemyWeapon + &#39;.png&#39;]]
						&lt;/div&gt;
					&lt;&lt;/for&gt;&gt;
				&lt;/div&gt; 
				&lt;div class=&quot;enemy-actions&quot;&gt;
					&lt;&lt;link &#39;Hit&#39;&gt;&gt;
						&lt;&lt;fightAction _i&gt;&gt;
					&lt;&lt;/link&gt;&gt;
					&lt;&lt;if $backpack.has(&#39;knife&#39;)&gt;&gt;
						&lt;&lt;link &#39;Knife&#39;&gt;&gt;
							&lt;&lt;fightAction _i &#39;knife&#39;&gt;&gt;
						&lt;&lt;/link&gt;&gt;
					&lt;&lt;/if&gt;&gt;
					&lt;&lt;if $backpack.has(&#39;revolver&#39;) &amp;&amp; $backpack.has(&#39;bullet_revolver&#39;)&gt;&gt;
						&lt;&lt;link &#39;Revolver&#39;&gt;&gt;
							&lt;&lt;fightAction _i &#39;revolver&#39;&gt;&gt;
						&lt;&lt;/link&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;/div&gt;
&lt;&lt;if $fight.allies.length &gt; 0&gt;&gt;
	&lt;h2 style=&quot;margin-top: 30px;&quot;&gt;Allies&lt;/h2&gt;
	&lt;div id=&quot;fight-allies&quot;&gt;
	&lt;&lt;for _i to 0; _i lt $fight.allies.length; _i++&gt;&gt;
		&lt;&lt;capture _i&gt;&gt;
			&lt;div class=&quot;enemy-div&quot;&gt;
				&lt;div class=&quot;girl_info_picture enemy-img&quot;&gt;
					&lt;&lt;set _girlVisual = $fight.allies[_i]&gt;&gt;
					&lt;&lt;include &#39;Girl visual&#39;&gt;&gt;
				&lt;/div&gt;
				&lt;&lt;=$fight.allies[_i].name&gt;&gt;
				&lt;div class=&quot;enemy-hp&quot;&gt;
				&lt;div class=&quot;enemy-hp-border&quot;&gt;
					&lt;div class=&quot;enemy-hp-bar&quot; @style=&quot;&#39;width:&#39; + $fight.allies[_i].hp + &#39;%&#39;&quot;&gt;&lt;/div&gt;
					&lt;div class=&quot;enemy-hp-count&quot;&gt;&lt;&lt;=$fight.allies[_i].hp&gt;&gt;&lt;/div&gt;
				&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $fight.messages.length &gt; 0&gt;&gt;	
	&lt;br /&gt;&lt;br /&gt;
	 &lt;&lt;for _i to 0; _i lt $fight.messages.length; _i++&gt;&gt;
		&lt;&lt;print $fight.messages[_i]&gt;&gt;
		&lt;br /&gt;
	  &lt;&lt;/for&gt;&gt;
	&lt;hr /&gt;
	&lt;&lt;set $fight.messages = []&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;fight-your-hp&quot;&gt;
	&lt;div id=&quot;fight-your-hp-label&quot;&gt;
		Your HP:
	&lt;/div&gt;
	&lt;div id=&quot;fight-your-hp-border&quot;&gt;
		&lt;div id=&quot;fight-your-hp-bar&quot; @style=&quot;&#39;width:&#39; + $fight.hp + &#39;%&#39;&quot;&gt;&lt;/div&gt;
		&lt;div id=&quot;fight-your-hp-count&quot;&gt;&lt;&lt;=$fight.hp&gt;&gt;&lt;/div&gt;
	&lt;/div&gt;
	&lt;div style=&quot;clear:both;&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if ($fight.canRunAway ?? true)&gt;&gt;
  &lt;&lt;link &#39;Run away&#39;&gt;&gt;
	  &lt;&lt;goto &#39;Fight - run away&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;


&lt;style&gt;
	#fight-your-hp-label {
		float: left;
    	width: 9%;
	}
	#fight-your-hp-count {
	  position: absolute;
	  top: -5px;
	  left: 45%;
	}
	#fight-your-hp-border {
		float:left;
		border: 1px solid #4CAF50!important;
		width: 90%;
		position: relative;
	}
	
	#fight-your-hp-bar {
    	color: #000!important;
    	background-color: #4CAF50!important;
		height: 17px;
	}
	
	.enemy-actions {
		margin-top: 30px;
	}
	.enemy-hp-border {
		border: 1px solid #4CAF50!important;
		width: 100%;
		position: relative;
	}
	
	.enemy-hp-bar {
    	color: #000!important;
    	background-color: #4CAF50!important;
		height: 17px;
	}	
	
	.enemy-img {
		text-align:center;
	}
	.enemy-img img {
	  max-width: 100%;
	  height: auto;
	  width: auto;
	  max-height: 121px;
	}
	.enemy-hp-count {
	    position: absolute;
    	top: -5px;
    	left: 44%;
	}
	
	.fight-weapon-icon {
	  border: 1px solid orange;
	  border-radius: 6px;
	  width: 20px;
	  height: 20px;
	  padding: 2px;
	}
	
	.enemy-weapons {
	  height: 11px;
	  margin-top: 3px;
	  display: flex;
	  justify-content: space-evenly;
	}
	
	#fight-allies {
	    display: flex;
    	justify-content: space-evenly;
	}
	
	.girl_info_picture.enemy-img {
    	zoom: 100%;
   	 	margin: 0 auto;
	}
	
	#fight-your-hp {
		margin-top: 20px;
	}
	
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="148" name="Widget - fight" tags="widget" position="3261,753" size="100,100">&lt;&lt;widget fight&gt;&gt;
	&lt;&lt;set $fightStart = true&gt;&gt;
	&lt;&lt;set $fight = {
		enemies: [],
		allies: [],
		defeatedEnemies: [],
		defeatedAllies: [],
		defeatedEnemies: [],
		hp: 100,
		messages: [],
		reward: false,
		passageWon: $args[1] ?? null,
		passageLost: $args[2] ?? null,
		public: ($args[3] ?? false)
	}&gt;&gt;
	
	&lt;&lt;for _i to 0; _i lt $args[0].length; _i++&gt;&gt;
		&lt;&lt;set $args[0][_i].hp = 100&gt;&gt;
		&lt;&lt;run $fight.enemies.push($args[0][_i])&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	
	&lt;&lt;for _ally, _allyId range $player.companions&gt;&gt;
		&lt;&lt;set _allyKey = _ally.split(&#39;:&#39;)&gt;&gt;
		&lt;&lt;set _tmpAlly = $guests[_allyKey[1]]&gt;&gt;
		&lt;&lt;set _tmpAlly.key = _allyKey&gt;&gt;
		&lt;&lt;set _tmpAlly.hp = 100&gt;&gt;
		&lt;&lt;run $fight.allies.push(_tmpAlly)&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	
	&lt;&lt;goto &#39;Fight&#39;&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget fightAction&gt;&gt;
	&lt;&lt;if (typeof $args[1] === &#39;undefined&#39;)&gt;&gt;
		&lt;&lt;set $fight.enemies[$args[0]].hp -= Math.round($player.strength / 3, 0)&gt;&gt;
		&lt;&lt;if typeof $fight.enemies[$args[0]].attacks === &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $fight.enemies[$args[0]].attacks = []&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $fight.enemies[$args[0]].attacks.push(&#39;hit&#39;)&gt;&gt;
		&lt;&lt;set $fight.messages.push(&#39;You punched &#39; + $fight.enemies[$args[0]].name + &#39; in the face (- &#39; + Math.round($player.strength / 3, 0) + &#39;)&#39;)&gt;&gt;
	&lt;&lt;elseif $args[1] === &#39;knife&#39;&gt;&gt;
		&lt;&lt;set $fight.enemies[$args[0]].hp -= Math.round($player.strength / 2, 0)&gt;&gt;
		&lt;&lt;if typeof $fight.enemies[$args[0]].attacks === &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $fight.enemies[$args[0]].attacks = []&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $fight.enemies[$args[0]].attacks.push(&#39;knife&#39;)&gt;&gt;
		&lt;&lt;set $fight.messages.push(&#39;You stabbed &#39; + $fight.enemies[$args[0]].name + &#39; in chest (- &#39; + Math.round($player.strength / 2, 0) + &#39;)&#39;)&gt;&gt;
	&lt;&lt;elseif $args[1] === &#39;revolver&#39;&gt;&gt;
		&lt;&lt;drop $backpack &#39;bullet_revolver&#39; 1&gt;&gt;
		&lt;&lt;set $fight.enemies[$args[0]].hp = 0&gt;&gt;
		&lt;&lt;set $fight.enemies[$args[0]].killed = true&gt;&gt;
		&lt;&lt;if typeof $fight.enemies[$args[0]].attacks === &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $fight.enemies[$args[0]].attacks = []&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $fight.enemies[$args[0]].attacks.push(&#39;revolver&#39;)&gt;&gt;
		&lt;&lt;set $fight.messages.push(&#39;You shot &#39; + $fight.enemies[$args[0]].name + &#39; in the &#39; + either(&#39;chest&#39;, &#39;face&#39;))&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if $fight.enemies[$args[0]].hp &lt;= 0&gt;&gt;
		&lt;&lt;if (typeof $args[1] === &#39;undefined&#39;)&gt;&gt;
			&lt;&lt;set $fight.messages.push($fight.enemies[$args[0]].name + &#39; fall to the ground knocked out&#39;)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;run $fight.defeatedEnemies.push($fight.enemies[$args[0]])&gt;&gt;
		&lt;&lt;run $fight.enemies.splice(_i, 1)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	
		&lt;&lt;for _i to 0; _i lt $fight.allies.length; _i++&gt;&gt;
			&lt;&lt;if !$fight.enemies.length&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set _randomEnemyKey = Math.floor(Math.random() * $fight.enemies.length)&gt;&gt;
			&lt;&lt;set _allyStrength = Math.round($fight.allies[_i].strength / 3, 0)&gt;&gt;
			&lt;&lt;if typeof $fight.enemies[_randomEnemyKey].attacks === &#39;undefined&#39;&gt;&gt;
				&lt;&lt;set $fight.enemies[_randomEnemyKey].attacks = []&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set $fight.enemies[_randomEnemyKey].hp -= _allyStrength&gt;&gt;
			&lt;&lt;set $fight.enemies[_randomEnemyKey].attacks.push(&#39;hit&#39;)&gt;&gt;
			&lt;&lt;set $fight.messages.push($fight.allies[_i].name + &#39; punched &#39; + $fight.enemies[_randomEnemyKey].name + &#39; in the face (- &#39; + _allyStrength + &#39;)&#39;)&gt;&gt;

			&lt;&lt;if $fight.enemies[_randomEnemyKey].hp &lt;= 0&gt;&gt;
				&lt;&lt;run $fight.defeatedEnemies.push($fight.enemies[_randomEnemyKey])&gt;&gt;
				&lt;&lt;run $fight.enemies.splice(_randomEnemyKey, 1)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/for&gt;&gt;

	&lt;&lt;for _i to 0; _i lt $fight.enemies.length; _i++&gt;&gt;
		&lt;&lt;set _randomEnemyTargetArray = Object.keys($fight.allies)&gt;&gt;
		&lt;&lt;run _randomEnemyTargetArray.push(&#39;you&#39;)&gt;&gt;
		&lt;&lt;set _randomEnemyTarget = _randomEnemyTargetArray[Math.floor(Math.random() * _randomEnemyTargetArray.length)]&gt;&gt;
		&lt;&lt;set _isPlayerTarget = (_randomEnemyTarget === &#39;you&#39;)&gt;&gt;
		&lt;&lt;set _targetName = (_isPlayerTarget ? &#39;you&#39; : $fight.allies[_randomEnemyTarget].name)&gt;&gt;

		&lt;&lt;if $fight.enemies[_i].inventory&gt;&gt;
			&lt;&lt;if $fight.enemies[_i].inventory.includes(&#39;knife&#39;)&gt;&gt;
				&lt;&lt;set $enemyStrength = Math.round($fight.enemies[_i].strength / 2, 0) + 20&gt;&gt;
				&lt;&lt;if _isPlayerTarget&gt;&gt;
					&lt;&lt;if $player.endurance &gt; 0&gt;&gt;
						&lt;&lt;set $enemyStrength = Math.max($enemyStrength - (Math.round($player.endurance / 10, 0)), 1)&gt;&gt;
					&lt;&lt;/if&gt;&gt;
					&lt;&lt;perkAdd &#39;bleeding&#39;&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;run $fight.messages.push($fight.enemies[_i].name + &#39; stabbed &#39; + _targetName + &#39; (- &#39; + $enemyStrength + &#39;)&#39;)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;set $enemyStrength = Math.round($fight.enemies[_i].strength / 3, 0) + randomInteger(0, 10)&gt;&gt;
			&lt;&lt;if _isPlayerTarget&gt;&gt;
				&lt;&lt;if $player.endurance &gt; 0&gt;&gt;
					&lt;&lt;set $enemyStrength = Math.max($enemyStrength - (Math.round($player.endurance / 10, 0)), 1)&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;run $fight.messages.push($fight.enemies[_i].name + &#39; &#39; + either(
			  &#39;punched &#39; + _targetName + &#39; in the head&#39;, 
			  &#39;kicked &#39; + _targetName + &#39; in the stomach&#39;, 
			  &#39;hit &#39; + _targetName + &#39; with elbow&#39;
			) + &#39; (- &#39; + $enemyStrength + &#39;)&#39;)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;if _isPlayerTarget&gt;&gt;
			&lt;&lt;set $fight.hp -= $enemyStrength&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;set $fight.allies[_randomEnemyTarget].hp -= $enemyStrength&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;if !_isPlayerTarget&gt;&gt;
			&lt;&lt;if $fight.allies[_randomEnemyTarget].hp &lt;= 0&gt;&gt;
				&lt;&lt;run $fight.defeatedAllies.push($fight.allies[_randomEnemyTarget])&gt;&gt;
				&lt;&lt;run $fight.allies.splice(_randomEnemyTarget, 1)&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	
	&lt;&lt;unset $enemyStrength&gt;&gt;
	
	&lt;&lt;if !$fight.enemies.length&gt;&gt;
		&lt;&lt;if $fight.skipEnding&gt;&gt;
			&lt;&lt;goto $fight.passageWon&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Fight - won&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;elseif $fight.hp &lt;= 0&gt;&gt;
		&lt;&lt;if $fight.skipEnding&gt;&gt;
			&lt;&lt;goto $fight.passageLost&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Fight - lost&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Fight&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget fightEnd&gt;&gt;
	&lt;&lt;if typeof $fight === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $fight = {
			defeatedEnemies: [],
			defeatedAllies: [],
			killedEnemies: []
		}&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $fight.killedEnemies = $fight.killedEnemies ?? []&gt;&gt;
	&lt;&lt;for _i to 0; _i lt $fight.defeatedEnemies.length; _i++&gt;&gt;
		&lt;&lt;capture _i&gt;&gt;
			&lt;&lt;if $fight.defeatedEnemies[_i].killed&gt;&gt;
				&lt;&lt;statsAdd &#39;people_killed&#39;&gt;&gt;
				&lt;&lt;run $fight.killedEnemies.push($fight.defeatedEnemies[_i])&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $fight.defeatedEnemies[_i].captured&gt;&gt;
				&lt;&lt;run delete $fight.defeatedEnemies[_i].captured&gt;&gt;
				&lt;&lt;run delete $fight.defeatedEnemies[_i].hp&gt;&gt;
				&lt;&lt;set $fight.defeatedEnemies[_i].relationship = -100&gt;&gt;
				&lt;&lt;run $slaves.push($fight.defeatedEnemies[_i])&gt;&gt;
				&lt;&lt;statsAdd &#39;people_captured&#39;&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			
			&lt;&lt;if !$fight.defeatedEnemies[_i].captured &amp;&amp; !$fight.defeatedEnemies[_i].killed&gt;&gt;
				&lt;&lt;set $player.reputation++&gt;&gt;
				&lt;&lt;set $player.goodwill++&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	
	&lt;&lt;set $fight.won = ($args[0] ?? false)&gt;&gt;
	&lt;&lt;set $prevFight = $fight&gt;&gt;
	&lt;&lt;if (!$fight.won)&gt;&gt;
		&lt;&lt;perkAdd &#39;beaten&#39;&gt;&gt;
		&lt;&lt;goto $fight.passageLost&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto $fight.passageWon&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;unset $fight&gt;&gt;
	
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="149" name="Fight - won" tags="" position="3381,858" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIGHT&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/fight/won.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You &lt;strong&gt;&lt;&lt;=($fight.hp &lt; 20 ? &#39;barely&#39; : &#39;easy&#39;)&gt;&gt;&lt;/strong&gt; win the fight and manage to drop them all on the ground.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set $fight.enemiesAlive = false&gt;&gt;
&lt;&lt;set $fight.enemiesCaptured = 0&gt;&gt;
&lt;&lt;for _i to 0; _i lt $fight.defeatedEnemies.length; _i++&gt;&gt;
	&lt;&lt;capture _i&gt;&gt;
		&lt;&lt;if !setup.fightIsKilled($fight.defeatedEnemies[_i])&gt;&gt;
			&lt;&lt;set $fight.enemiesAlive = true&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;set $fight.defeatedEnemies[_i].killed = true&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $fight.defeatedEnemies[_i].captured&gt;&gt;
			&lt;&lt;set $fight.enemiesCaptured++&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;if !$fight.reward&gt;&gt;
	&lt;&lt;if $player.strength &lt; 100&gt;&gt;
		&lt;&lt;set $player.strength++&gt;&gt;
		&lt;strong&gt;Your strength increased by 1&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $fight.allies.length &gt; 0&gt;&gt;
		&lt;&lt;for _fightAllyI, _fightAlly range $fight.allies&gt;&gt;
			&lt;&lt;set _guestKey = _fightAlly.key[1]&gt;&gt;
			&lt;&lt;if $guests[_guestKey].strength &lt; 100&gt;&gt;
				&lt;&lt;set $guests[_guestKey].strength++&gt;&gt;
				&lt;strong&gt;&lt;&lt;=$guests[_guestKey].name&gt;&gt; strength increased by 1&lt;/strong&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/for&gt;&gt;
		&lt;br /&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;set $fight.gotCaps = randomInteger(5, 10)&gt;&gt;
	&lt;&lt;set $player.money += $fight.gotCaps&gt;&gt;
	You got &lt;strong&gt;&lt;&lt;=$fight.gotCaps&gt;&gt;&lt;/strong&gt; caps.&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set $fight.reward = true&gt;&gt;
	
	&lt;&lt;for _i, _enemy range $fight.defeatedEnemies&gt;&gt;
		&lt;&lt;capture _i&gt;&gt;
			&lt;&lt;if _enemy.inventory&gt;&gt;
				&lt;&lt;for _enemyInventoryI, _enemyInventory range _enemy.inventory&gt;&gt;
					&lt;&lt;pickup $backpack _enemyInventory 1&gt;&gt;
					&lt;div&gt;
						You picked up &lt;strong&gt;&lt;&lt;=Item.get(_enemyInventory).name&gt;&gt;&lt;/strong&gt; from &lt;strong&gt;&lt;&lt;=_enemy.name&gt;&gt;&lt;/strong&gt;
					&lt;/div&gt;
				&lt;&lt;/for&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	
	&lt;&lt;if $fight.public&gt;&gt;
	  &lt;br /&gt;&lt;br /&gt;
	  &lt;&lt;set $player.reputation++&gt;&gt;
	  &lt;strong&gt;Someone saw your fight. Your reputation increased by 1&lt;/strong&gt;
	  &lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if !$fight.enemiesAlive&gt;&gt;
	&lt;strong&gt;You look at them and noone of them is breathing. All of them are dead.&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;You look down at &lt;&lt;=($fight.defeatedEnemies.length &gt; 1 ? &#39;them&#39; : ($fight.defeatedEnemies[0].gender ? &#39;him&#39; : &#39;her&#39;))&gt;&gt; lying unconscious and you&#39;re deciding what to do with them&lt;/strong&gt;
	&lt;table id=&quot;fight-table&quot;&gt;
	  &lt;&lt;for _i to 0; _i lt $fight.defeatedEnemies.length; _i++&gt;&gt;
		  &lt;&lt;capture _i&gt;&gt;
		  	&lt;tr&gt;
				&lt;td @style=&quot;&#39;color:&#39; + (!$fight.defeatedEnemies[_i].gender ? &#39;pink&#39; : &#39;blue&#39;) + &#39;&#39;&quot;&gt;
					&lt;&lt;=$fight.defeatedEnemies[_i].name&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;if $fight.defeatedEnemies[_i].killed&gt;&gt;
						&lt;span style=&quot;color: red&quot;&gt;dead&lt;/span&gt;
					&lt;&lt;else&gt;&gt;
						&lt;&lt;if !$fight.defeatedEnemies[_i].captured &amp;&amp; !$fight.defeatedEnemies[_i].cantKill&gt;&gt;
						  	&lt;&lt;link &#39;kill&#39;&gt;&gt;
								&lt;&lt;set $fight.defeatedEnemies[_i].killed = true&gt;&gt;
								&lt;&lt;set $player.goodwill--&gt;&gt;
								&lt;&lt;goto &#39;Fight - won&#39;&gt;&gt;
					  		&lt;&lt;/link&gt;&gt;
					  &lt;&lt;/if&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;if !$fight.defeatedEnemies[_i].killed&gt;&gt;
						&lt;&lt;if $fight.defeatedEnemies[_i].captured&gt;&gt;
							&lt;span style=&quot;color: green&quot;&gt;captured&lt;/span&gt;
						&lt;&lt;else&gt;&gt;
							&lt;&lt;if ($slaves.length + $fight.enemiesCaptured) &lt; $basementLimit&gt;&gt;
							  &lt;&lt;link &#39;capture&#39;&gt;&gt;
								&lt;&lt;set $fight.defeatedEnemies[_i].captured = true&gt;&gt;
								&lt;&lt;goto &#39;Fight - won&#39;&gt;&gt;
		 					  &lt;&lt;/link&gt;&gt;
							&lt;&lt;/if&gt;&gt;
						&lt;&lt;/if&gt;&gt;
					&lt;&lt;/if&gt;&gt;
			 	&lt;/td&gt;
			&lt;/tr&gt;
		  &lt;&lt;/capture&gt;&gt;
	  &lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;fightEnd true&gt;&gt;
&lt;&lt;/link&gt;&gt;







</tw-passagedata><tw-passagedata pid="150" name="Fight - lost" tags="" position="3263,860" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIGHT&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/nightclub/attack_outside_lost.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;
You wake up after some time.&lt;br /&gt;
You feel dizzy and blood is all over your face and clothes. You were knocked out pretty hard.
&lt;br /&gt;
&lt;&lt;set $capsMissing = ($player.money - 20 &gt; 0 ? 20 : $player.money)&gt;&gt;
&lt;&lt;if $capsMissing&gt;&gt;
  &lt;&lt;set $player.money -= $capsMissing&gt;&gt;
  You check pockets and some caps are also missing.
  &lt;br /&gt;
  &lt;strong&gt;You lost &lt;&lt;=$capsMissing&gt;&gt; caps&lt;/strong&gt;
  &lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $fight.defeatedAllies.length &gt; 0&gt;&gt;
	&lt;&lt;for _fightAllyI, _fightAlly range $fight.defeatedAllies&gt;&gt;
		&lt;&lt;if setup.percentageChance(10)&gt;&gt;
			&lt;&lt;companionRemove _fightAlly.key.join(&#39;:&#39;)&gt;&gt;
			&lt;&lt;set _guestKey = _fightAlly.key[1]&gt;&gt;
			&lt;strong&gt;&lt;&lt;=_fightAlly.name&gt;&gt; was taken by enemies&lt;/strong&gt;
			&lt;&lt;run $guests.splice(_fightAlly.key[1], 1)&gt;&gt;
			&lt;br /&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;fightEnd false&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="151" name="Fight - run away" tags="" position="3501,756" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIGHT&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/fight/run_away.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You managed to run away&lt;br /&gt;&lt;br /&gt;
As you run away you dropped few things.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set $foodMissing = ($backpack.count(&#39;food&#39;) - 5 &gt; 0 ? 5 : $backpack.count(&#39;food&#39;))&gt;&gt;
&lt;&lt;set $capsMissing = ($player.money - 20 &gt; 0 ? 20 : $player.money)&gt;&gt;

&lt;&lt;if $capsMissing &gt; 0&gt;&gt;
	&lt;strong&gt;You dropped &lt;&lt;=$capsMissing&gt;&gt; caps&lt;/strong&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $foodMissing &gt; 0&gt;&gt;
	&lt;strong&gt;You dropped &lt;&lt;=$foodMissing&gt;&gt; food&lt;/strong&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;fightEnd false&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="152" name="Streets - Blair quest missing friend home" tags="" position="1014,2051" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/friend_lost_carry.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You pick up Ashley and carry her outside the building.&lt;br /&gt;
You have no idea where to take her so the only place you can imagine that will be safe is Vincent&#39;s.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/old_barn.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You reach the barn, put her down behind it, and tell Vincent. After that, you walk back to your place and give Blair the news..
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;set $characters.blair.quests.missing_friend_found = true&gt;&gt;
&lt;&lt;addhours 2&gt;&gt;
</tw-passagedata><tw-passagedata pid="153" name="Random event - no face #10" tags="" position="6217,354" size="100,100">You walk through a bushy place and hear some noise like a munching sound.  You get closer and notice a firm ass bent over.
&lt;br /&gt;
By the look of it she&#39;s eating something or searching for something...&quot;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Get closer&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/explore/no_face_1.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You get closer and she suddenly turns her head towards you..
	&lt;br /&gt;
	&lt;strong&gt;WHAT  THE FUCK!&lt;/strong&gt;&lt;br /&gt; 
	You see her face.. She looks human, but her face has been deformed. She has no eyes and half of her nose is missing.
	&lt;br /&gt;&lt;br /&gt;
	
	&lt;&lt;linkreplace &#39;Check her face closer&#39;&gt;&gt;
		&lt;center&gt;
  			[img[setup.ImagePath+&#39;places/explore/no_face_2.webp&#39;]]
	  	&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		As you get closer she jumps on you like she can smell where your dick is.  She successfully opens your pants and sucks your dick inside her mouth.
		&lt;br /&gt;&lt;br /&gt;
		
		&lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/explore/no_face_3.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			You throw her down on her back holding her as you shove your dick inside her dirty pussy.
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="154" name="Random event - beak humans #11" tags="" position="6218,464" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/beak_humans.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You hear a noise in the distance so you decide to crouch down waiting to see who&#39;s coming.
&lt;br /&gt;
Two naked girls are coming so you decide to jump out.  You freeze as soon as you notice strange looking guys wearing some weird ass costumes behind them.
&lt;br /&gt;&lt;br /&gt;

[[Leave|Outside]]</tw-passagedata><tw-passagedata pid="155" name="Vincent quest - pregnancy" tags="bg-farm" position="3070,1032" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;
&lt;&lt;you&gt;&gt;
	Listen, Vicent. I need help...&lt;br /&gt;
	How to put it right. Maybe you know or have heard about a method how to terminate pregnancy in these times? The safest way.
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/pregnancy.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Vincent takes a deep breath and exhales as you see in his eyes you&#39;ve let him down
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;vincent&gt;&gt;
I guess. I&#39;ve prepared one by myself but haven&#39;t tested it out so no idea if it will work. Only from words I&#39;ve heard around.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/pregnancy_potition.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Vincent gives you his own potion
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	Just think what you&#39;re doing..&lt;br /&gt;
	If by any chance you need more of them, you can try to prepare them yourself. There are few ingredients you need to get first.
	The first and main ingredient is &lt;strong&gt;glowing mushroom&lt;/strong&gt;. You can search for it in the forest.&lt;br /&gt;
	The second item is &lt;strong&gt;milk&lt;/strong&gt;. But not any, but woman milk. I could you sell you some but that won&#39;t be cheap.&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;And remember! There is always a chance a girl won&#39;t make it. It&#39;s small but it&#39;s always there!&lt;/strong&gt;
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addmins 10&gt;&gt;
&lt;&lt;pickup $backpack &#39;pregnancy_potion&#39; 1&gt;&gt;
[[Continue|Outside]]</tw-passagedata><tw-passagedata pid="156" name="Forest - mushrooms" tags="" position="2283,747" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;energy -30&gt;&gt;
&lt;&lt;if randomInteger(0,1) === 0&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/forest/glowing_mushroom.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;pickup $backpack &#39;glowing_mushroom&#39; 1&gt;&gt;
	&lt;strong&gt;You picked up 1 glowing mushroom&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	You found nothing...
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Outside]]

&lt;&lt;addmins 120&gt;&gt;</tw-passagedata><tw-passagedata pid="157" name="Girl - pregnancy potion" tags="" position="3114,220" size="100,100">&lt;&lt;addmins 15&gt;&gt;
&lt;&lt;drop $backpack &#39;pregnancy_potion&#39; 1&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/basement/drink_pregnancy_potion.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;=$tmpGirl.name&gt;&gt; drinks the pregnancy potion and lays down to wait and see what will happen...
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set $pregnancyDied = (randomInteger(0, 5) === 0)&gt;&gt;
&lt;&lt;if $pregnancyDied&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/basement/pregnancy_potion_died.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	She instantly feels a sharp pain in her stomach as she yells out that it hurts..
	&lt;br /&gt;
	Pain continues for some time and then she suddenly dies.
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; died&lt;/strong&gt;
	&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $slaves.splice($slaveId, 1)&gt;&gt;
	&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $guests.splice($guestId, 1)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	She feels pain in her stomach but after a few minutes it goes away and she feels fine.
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;Pregnancy terminated&lt;/strong&gt;
	&lt;&lt;run delete $tmpGirl.pregnancy&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;if $pregnancyDied&gt;&gt;
		&lt;&lt;if $tmpGirlBack&gt;&gt;
			&lt;&lt;goto $tmpGirlBack&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;if $tmpGirlViewBack&gt;&gt;
			&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto [[Girl view]]&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="158" name="Widget - shop" tags="widget" position="132,862" size="100,100">&lt;&lt;widget shop&gt;&gt;
	&lt;table id=&quot;farm-shop&quot; class=&quot;shop-table&quot;&gt;
		&lt;&lt;for _i, _shopItem range $args[0]&gt;&gt;
		  &lt;&lt;capture _i, _shopItem&gt;&gt;
			&lt;tr&gt;
				&lt;td class=&quot;shop-img&quot;&gt;
					[img[setup.ImagePath+&#39;game/inventory/&#39; + _shopItem.name + &#39;.png&#39;]] 
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;print Item.get(_shopItem.name).name&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;numberbox &quot;$shopItems[_i].qty&quot; 1&gt;&gt;
				&lt;/td&gt;
				&lt;td style=&quot;text-align: center;&quot;&gt;
					&lt;&lt;if (typeof _shopItem.sell === &#39;undefined&#39; || _shopItem.sell)&gt;&gt;
						$&lt;&lt;print _shopItem.price&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;if $backpack.has(_shopItem.name) &amp;&amp; (typeof _shopItem.sell === &#39;undefined&#39; || _shopItem.sell)&gt;&gt; 
						&lt;&lt;link &#39;Sell&#39;&gt;&gt; 
							&lt;&lt;if $backpack.count(_shopItem.name) &lt; $shopItems[_i].qty&gt;&gt;
								&lt;&lt;replace &#96;&#39;#shop-error-&#39;+_i&#96;&gt;&gt;You don&#39;t have enough items&lt;&lt;/replace&gt;&gt;
							&lt;&lt;elseif $shopItems[_i].qty &lt; 1&gt;&gt;
								&lt;&lt;replace &#96;&#39;#shop-error-&#39;+_i&#96;&gt;&gt;Quantity needs to be equal or more than 1&lt;&lt;/replace&gt;&gt;
							&lt;&lt;else&gt;&gt;
								&lt;&lt;set $player.money += ((_shopItem.price * ($args[1].ratio ?? 1)) * $shopItems[_i].qty)&gt;&gt;
								&lt;&lt;drop $backpack _shopItem.name $shopItems[_i].qty&gt;&gt;
								&lt;&lt;goto $args[1]&gt;&gt;
							&lt;&lt;/if&gt;&gt;

						&lt;&lt;/link&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;/td&gt;
				&lt;td style=&quot;text-align: center;&quot;&gt;
					$&lt;&lt;=(_shopItem.price * ($args[1].ratio ?? 1))&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;link &#39;Buy&#39;&gt;&gt; 
						&lt;&lt;if $player.money &lt; ((_shopItem.price * ($args[1].ratio ?? 1)) * $shopItems[_i].qty)&gt;&gt; 
							&lt;&lt;replace &#96;&#39;#shop-error-&#39;+_i&#96;&gt;&gt;You don&#39;t have enough caps&lt;&lt;/replace&gt;&gt;
						&lt;&lt;elseif $shopItems[_i].qty &lt; 1&gt;&gt;
							&lt;&lt;replace &#96;&#39;#shop-error-&#39;+_i&#96;&gt;&gt;Quantity needs to be equal or more than 1&lt;&lt;/replace&gt;&gt;
						&lt;&lt;else&gt;&gt;
							&lt;&lt;if $args[2]&gt;&gt;
								&lt;&lt;run $.wiki($args[2])&gt;&gt;
							&lt;&lt;/if&gt;&gt;
							&lt;&lt;set $player.money -= ((_shopItem.price * ($args[1].ratio ?? 1)) * $shopItems[_i].qty)&gt;&gt;
							&lt;&lt;pickup $backpack _shopItem.name $shopItems[_i].qty&gt;&gt;
							&lt;&lt;goto $args[1]&gt;&gt;
						&lt;&lt;/if&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;div @id=&quot;&#39;shop-error-&#39; +_i + &#39;&#39;&quot; style=&quot;color: red; font-weight: bold&quot;&gt;&lt;/div&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
	  	&lt;&lt;/capture&gt;&gt;		
	  &lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
	
	&lt;style&gt;
		.shop-table td {
			padding: 10px;
		}
	&lt;/style&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="159" name="Underground shop" tags="Place bg-underground" position="1941,2060" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;UNDERGROUND SHOP&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
  &lt;&lt;set $shopItems = [
	  {name:&#39;bandage&#39;,price:10},
	  {name:&#39;knife&#39;,price:100},
	  {name:&#39;solar_panel&#39;,price:30},
	  {name:&#39;fertility_potion&#39;, price: 15},
	  {name:&#39;pregnancy_speed_potion&#39;, price: 30},
	  {name:&#39;plastic&#39;, price: 10, sell: false}
  ]&gt;&gt;
&lt;&lt;shop $shopItems &#39;Underground shop&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Underground city]]</tw-passagedata><tw-passagedata pid="160" name="Underground city event - 2 girls bj" tags="" position="7315,26" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/underground/hookers_bj_met.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You notice two girls who wink at you and call you over.&lt;br /&gt;
When you approach they tell you that they&#39;ll suck you off for &lt;strong&gt;5 caps&lt;/strong&gt;.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.money &gt;= 5&gt;&gt;
	&lt;&lt;linkreplace &#39;Pay them&#39;&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/underground/hookers_bj.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		While one girl puts away the money the second girl drops to her knees in the middle of the alley and starts to suck your hard dick. 
		&lt;br /&gt;
		After putting away the money, the first one then joins in. 
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;horny_reset&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Leave|Underground city]] 


</tw-passagedata><tw-passagedata pid="161" name="Support" tags="" position="1125,9" size="100,100">&lt;style&gt;
.support-div {
	height: 300px;
	border: 2px solid #f1c40f;
}
.support-outer {
	width: 250px;
}
.support-text {
	padding: 15px;
	color:#ddd;
}

.support-logo {
	display: block;
	background: white;
}

.pe-img img {
	width: 100%;
}
&lt;/style&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;support-page&quot; style=&quot;display:flex; justify-content:space-evenly&quot;&gt;

&lt;div class=&quot;support-outer&quot;&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;support-div&quot;&gt;
	&lt;a href=&quot;https://subscribestar.adult/apocalyptic-world&quot; target=&quot;_blank&quot; class=&quot;support-logo&quot;&gt;
	  [img[setup.ImagePath+&#39;game/misc/ss_logo.png&#39;]]
  &lt;/a&gt;
  &lt;div class=&quot;support-text&quot;&gt;
  	If you like this game and want to see it grow, please consider supporting the development. &lt;br /&gt;&lt;br /&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;support-outer&quot;&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;support-div&quot;&gt;
  &lt;a href=&quot;https://f95zone.to/threads/apocalyptic-world-v0-07-ttyrke.137594&quot; target=&quot;_blank&quot; class=&quot;support-logo&quot;&gt;
	[img[setup.ImagePath+&#39;game/misc/f95_logo.png&#39;]]
  &lt;/a&gt;
	&lt;div class=&quot;support-text&quot;&gt;
  	Forum thread where update is released, discussed and bugs reported.
  &lt;/div&gt; 
&lt;/div&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;/div&gt;


&lt;div class=&quot;support-outer&quot;&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;support-div&quot;&gt;
  &lt;a href=&quot;https://discord.gg/x6CjzjChgu&quot; target=&quot;_blank&quot; class=&quot;support-logo&quot;&gt;
	  [img[setup.ImagePath+&#39;game/misc/discord_logo.png&#39;]]
	&lt;/a&gt;
&lt;div class=&quot;support-text&quot;&gt;
  	Discord server to report bugs, give suggestions or just talk about the game. 
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;support-outer&quot;&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;support-div&quot;&gt;
	&lt;a href=&quot;https://www.patreon.com/apocalyptic_world&quot; target=&quot;_blank&quot; class=&quot;support-logo&quot;&gt;
	  [img[setup.ImagePath+&#39;game/misc/patreon_logo.png&#39;]]
  &lt;/a&gt;
  &lt;div class=&quot;support-text&quot;&gt;
  	If you like this game and want to see it grow, please consider supporting the development. &lt;br /&gt;&lt;br /&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;&lt;include &#39;Patreon code&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div style=&quot;text-align: center;&quot;&gt;
	&lt;&lt;link &#39;Credits&#39;&gt;&gt;
		&lt;&lt;script&gt;&gt;Dialog.setup(&quot;Credits&quot;, &quot;Credits&quot;); Dialog.wiki(Story.get(&quot;Credits&quot;).processText()); Dialog.open();&lt;&lt;/script&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;style&gt;
	#support-page img {
		width: 100%;
	}
	
	#ss_logo img, #f95_logo img, #patreon_logo img {
		width: 300px;
	}
	
	#ss_logo img {
		width: 50%;
	}
	
	.support-outer {
    	margin: 0 20px;
	}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="162" name="Blair - quest missing friend thanks" tags="" position="453,2183" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

You enter your room and notice that Blair is already waiting for you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Finally!  I was hoping you would be home soon. I&#39;ve thought about you all day and a way to thank you! You have no idea!
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You reassure her that no thanks are needed, but she still insists.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Please, just don&#39;t think anything bad about me. I haven&#39;t done anything like this before.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She pushes you down on your back and unbuttons your pants with a shy smile.  She turns away as she slides her hand inside your pants and grabs your hard dick gently stroking it.  She almost seems afraid she might break it.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/blair_thank_you_1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She mumbles something under her breath like she&#39;s trying to follow her own instructions. You deeply exhale as you see her mouth slowly moving closer to your cock.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/blair_thank_you_2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	I am so sorry! I thought I could do it but I can&#39;t. Lets just go to bed.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Blair relationship increased by 5&lt;br /&gt;
Blair corruption increased by 5&lt;br /&gt;&lt;/strong&gt;
&lt;&lt;set $characters.blair.relationship += 5&gt;&gt;
&lt;&lt;set $characters.blair.corruption += 5&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &quot;Sleep&quot;&gt;&gt;&lt;&lt;sleep&gt;&gt;&lt;&lt;/link&gt;&gt;




</tw-passagedata><tw-passagedata pid="163" name="Blackjack - bj" tags="" position="3489,1148" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/bar/blackjack_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/bar/blackjack_bj_wink.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Some random girl smiles at you as you sit down.&lt;br /&gt;
She approaches you and asks if you want to get sucked while you play cards for &lt;strong&gt;5 caps&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.money &gt;= 5&gt;&gt;
  &lt;&lt;link &#39;Yes&#39;&gt;&gt;
	  &lt;&lt;set $blackjack.bj = true&gt;&gt;
	  &lt;&lt;set $player.money -= 5&gt;&gt;
	  &lt;&lt;goto &#39;Blackjack - play&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;No&#39;&gt;&gt;
	&lt;&lt;goto &#39;Blackjack - play&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="164" name="Blackjack - bj end" tags="" position="3603,1145" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/bar/blackjack_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/bar/blackjack_bj_end.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You push girl off your dick before you get up and leave without saying a word.&lt;br /&gt;
You look back at her and your precum is all over her lips
&lt;br /&gt;&lt;br /&gt;

[[Leave|Bar]]</tw-passagedata><tw-passagedata pid="165" name="Basement event - try escape" tags="" position="7445,25" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BASEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/basement/try_escape.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Your hear some noise and decide to check it out. You catch  &lt;strong&gt;&lt;&lt;=$slaves[$eventSlaveId].name&gt;&gt;&lt;/strong&gt; by surprise as she&#39;s trying to escape.
&lt;br /&gt;
She notices you and stares at you with fear in her eyes.
&lt;br /&gt;&lt;br /&gt;

&lt;div id=&quot;basement-event-button&quot;&gt;
   &lt;&lt;link &#39;Punish her&#39;&gt;&gt;
	  &lt;&lt;addmins 15&gt;&gt;
	  &lt;&lt;run $(&#39;#basement-event-button&#39;).slideToggle()&gt;&gt;
	  &lt;&lt;run $(&#39;#basement-event-action&#39;).slideToggle()&gt;&gt;
  	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;basement-event-action&quot; style=&quot;display:none;&quot;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/basement/try_escape_punish.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You tie her against the wall and thrash her back as hard as you can with your whip.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set $slaves[$eventSlaveId].sub++&gt;&gt;

&lt;strong&gt;&lt;&lt;=$slaves[$eventSlaveId].name&gt;&gt; submission increased by 1&lt;/strong&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;/div&gt;

&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;


</tw-passagedata><tw-passagedata pid="166" name="Fight cage - exercise" tags="bg-underground" position="2177,1352" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIGHT CAGE&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/fight/exercise.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You sparring with some random dude. You throw few unexpected punches and other guy goes down few times. You responses with few strong kicks too.&lt;br /&gt;
You shake your hands before getting out of the cage.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Your strength increased by 2&lt;/strong&gt;
&lt;br /&gt;
&lt;strong&gt;Your endurance increased by 1&lt;/strong&gt;
&lt;&lt;set $player.endurance++&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Back&#39;&gt;&gt;
	&lt;&lt;if $player.maxEnergy &lt;= 130 &amp;&amp; setup.percentageChance(30)&gt;&gt;
		&lt;&lt;goto &#39;Fight cage - drug dealer&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Fight cage&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;


&lt;&lt;set $player.strength +=2&gt;&gt;
&lt;&lt;energy -20&gt;&gt;
&lt;&lt;addmins 60&gt;&gt;</tw-passagedata><tw-passagedata pid="167" name="Fight cage - drug dealer" tags="bg-underground" position="2295,1349" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIGHT CAGE&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/fight/drug_dealer.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Some dirty guy who&#39;s scratching his neck all the time comes to you while nervously looking around.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;&quot;You want some drugs? They give you energy! Trust me&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
You look at one drug in his hand, looks shady as fuck and looks more like some C vitamin.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.money &gt;= 30&gt;&gt;
	&lt;&lt;linkreplace &#39;Buy for 30 caps&#39;&gt;&gt;
		&lt;&lt;set $player.money -= 30&gt;&gt;
		&lt;&lt;set $player.maxEnergy += 10&gt;&gt;
		&lt;strong&gt;Your max energy increased to &lt;&lt;=$player.maxEnergy&gt;&gt;&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Fight cage&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;addmins 30&gt;&gt;</tw-passagedata><tw-passagedata pid="168" name="Guest house" tags="Place" position="1219,769" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;GUEST HOUSE&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/guesthouse_head.jpg&#39;]]
&lt;/div&gt;
&lt;h3&gt;Guests&lt;/h3&gt;
&lt;&lt;set _guestHouseLimitShow = (($guesthouseLimit ?? 3) - ($guests ?? []).length)&gt;&gt;
&lt;&lt;if _guestHouseLimitShow &lt; 0&gt;&gt;
	&lt;&lt;set _guestHouseLimitShow = 0&gt;&gt;
&lt;&lt;/if&gt;&gt;
Free beds left: &lt;strong&gt;&lt;&lt;=_guestHouseLimitShow&gt;&gt;&lt;/strong&gt;

&lt;&lt;if ($guests ?? []).length &lt; 1&gt;&gt;
	&lt;div style=&quot;margin-top: 20px;&quot;&gt;
		You have no guests...
		&lt;br /&gt;&lt;br /&gt;
	&lt;/div&gt;
&lt;&lt;else&gt;&gt;
	&lt;table id=&quot;slaves&quot;&gt;
	&lt;&lt;for _guestI, _guest range $guests&gt;&gt;
		&lt;&lt;capture _guestI, _guest&gt;&gt;
			&lt;&lt;set _isSick = (typeof _guest.sick !== &#39;undefined&#39;)&gt;&gt;
			&lt;&lt;set _genderClass = &#39;gender-&#39; + (!_guest.gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
			&lt;&lt;if _guest.assignedTo === &#39;garden&#39; and timeBetween(&#39;08:00&#39;, &#39;16:00&#39;) &amp;&amp; !_isSick&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;	
			&lt;&lt;if _guest.assignedTo === &#39;forest&#39; and timeBetween(&#39;08:00&#39;, &#39;16:00&#39;) &amp;&amp; !_isSick&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;	
			&lt;&lt;if _guest.assignedTo === &#39;kitchen&#39; and timeBetween(&#39;08:00&#39;, &#39;22:00&#39;) &amp;&amp; !_isSick&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;	
			&lt;&lt;if _guest.assignedTo === &#39;mistress&#39; and timeBetween(&#39;12:00&#39;, &#39;22:00&#39;) &amp;&amp; !_isSick&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if _guest.assignedTo === &#39;streets&#39; and timeBetween(&#39;14:00&#39;, &#39;06:00&#39;) &amp;&amp; !_isSick&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if _guest.assignedTo === &#39;scavenging&#39; and timeBetween(&#39;12:00&#39;, &#39;20:00&#39;) &amp;&amp; !_isSick&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;tr&gt;
				&lt;td style=&quot;width: 300px&quot;&gt;
					&lt;&lt;if setup.getAge(_guest) &lt; 18&gt;&gt;
						&lt;span class=&quot;name-no-click&quot;&gt;&lt;&lt;=_guest.name&gt;&gt;&lt;/span&gt;
					&lt;&lt;else&gt;&gt;
						&lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
							&lt;&lt;link _guest.name&gt;&gt;
							  &lt;&lt;set $tmpGirl to _guest&gt;&gt;
							  &lt;&lt;set $tmpGirl.location = &#39;bedroom&#39;&gt;&gt;
							  &lt;&lt;set $tmpGirlBack = &#39;Guest house&#39;&gt;&gt;
							  &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
							  &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
							  &lt;&lt;set $guestId = _guestI&gt;&gt;
							  &lt;&lt;run delete $slaveId&gt;&gt;
							  &lt;&lt;set $tmpGirlViewBack = (!_guest.gender ? &#39;Girl&#39; : &#39;Guy&#39;) + &#39; view - guest&#39;&gt;&gt;
							  &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
							&lt;&lt;/link&gt;&gt;
						&lt;/span&gt;
						
						&lt;&lt;if _guest.pregnancy &gt;= 7&gt;&gt;
						  (pregnant &lt;&lt;=_guest.pregnancy&gt;&gt; days)
						&lt;&lt;/if&gt;&gt;
						&lt;&lt;if _isSick&gt;&gt;
							 (sick)
						&lt;&lt;/if&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;if !_guest.gender &amp;&amp; setup.getAge(_guest) &gt;= 17&gt;&gt;
						Beauty score: &lt;&lt;=_guest.beauty&gt;&gt;
					&lt;&lt;/if&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					Age: &lt;&lt;=setup.getAge(_guest)&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
				  &lt;&lt;if _guest.assignedTo&gt;&gt;
					  (&lt;&lt;=_guest.assignedTo&gt;&gt;)
				  &lt;&lt;/if&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;link &#39;Throw out&#39;&gt;&gt;
					  &lt;&lt;dialog &#39;Throw out&#39;&gt;&gt;
						  Are you sure you want to throw &lt;&lt;=(_guest.gender ? &#39;him&#39; : &#39;her&#39;)&gt;&gt; out?
						  &lt;br /&gt;
						  &lt;&lt;link &#39;Yes&#39; &#39;Guest house&#39;&gt;&gt;
						  		&lt;&lt;companionRemove &#39;guest:&#39; + _guestI&gt;&gt;
								&lt;&lt;companionRearange _guestI&gt;&gt;
							  &lt;&lt;run $guests.splice(_guestI, 1)&gt;&gt;
							  &lt;&lt;dialogclose&gt;&gt;
							  &lt;&lt;set $player.reputation--&gt;&gt;
							  &lt;&lt;set $player.goodwill--&gt;&gt;
						  &lt;&lt;/link&gt;&gt;	
					  &lt;&lt;/dialog&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
&lt;&lt;/if&gt;&gt;

[[Back|Wood cabin]]</tw-passagedata><tw-passagedata pid="169" name="Basement - release slave" tags="" position="1449,279" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BASEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _image = &#39;release&#39;&gt;&gt;
&lt;&lt;if $tmpGirl.gender&gt;&gt;
	&lt;&lt;set _image = _image + &#39;_male&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/basement/&#39; + _image + &#39;.webp&#39;]]
&lt;/center&gt;
 
You look at &lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt;&lt;/strong&gt; and open &lt;&lt;=setup.pronounceWhos($tmpGirl)&gt;&gt; cell door.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;=ucfirst(setup.pronounceWhat($tmpGirl))&gt;&gt; gets on &lt;&lt;=setup.pronounceWhos($tmpGirl)&gt;&gt; knees like &lt;&lt;=setup.pronounceWhat($tmpGirl)&gt;&gt; usually does when you come to visit &lt;&lt;=setup.pronounceWho($tmpGirl)&gt;&gt;, but you catch &lt;&lt;=setup.pronounceWho($tmpGirl)&gt;&gt; by surprise when you tell &lt;&lt;=setup.pronounceWho($tmpGirl)&gt;&gt; that you are going to release &lt;&lt;=setup.pronounceWho($tmpGirl)&gt;&gt;.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $tmpGirl.relationship &gt;= 30 &amp;&amp; ($game.location.guesthouse ?? false)&gt;&gt;
	&quot;&lt;strong&gt;Are you sure?&lt;/strong&gt;&quot; &lt;&lt;=ucfirst(setup.pronounceWhat($tmpGirl))&gt;&gt; asks. &lt;br /&gt;
	&quot;&lt;strong&gt;I really like it here with you. Is there any way I can stay?&lt;/strong&gt;&quot;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _linkMove = &#39;Move &#39; + setup.pronounceWho($tmpGirl) + &#39; to the guest house&#39;&gt;&gt;
&lt;&lt;set _linkLeave = &#39;Leave &#39; + setup.pronounceWho($tmpGirl) + &#39; in cell&#39;&gt;&gt;
&lt;&lt;set _linkRelease = &#39;Release &#39; + setup.pronounceWho($tmpGirl)&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &gt;= 30 &amp;&amp; ($game.location.guesthouse ?? false) &amp;&amp; (($guesthouseLimit ?? 3) - ($guests ?? []).length) &gt; 0&gt;&gt;
	&lt;&lt;link &#96;_linkMove&#96;&gt;&gt;
		&lt;&lt;if typeof $guests === &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $guests = []&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $tmpGirl.assignedTo = null&gt;&gt;
		&lt;&lt;set $guests.push($tmpGirl)&gt;&gt;
		&lt;&lt;run $slaves.splice($slaveId, 1)&gt;&gt;		
		&lt;&lt;goto &#39;Guest house&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#96;_linkLeave&#96;&gt;&gt;
	&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#96;_linkRelease&#96;&gt;&gt;
	&lt;&lt;run $slaves.splice($slaveId, 1)&gt;&gt;
	&lt;&lt;statsAdd &#39;slaves_released&#39;&gt;&gt;
	&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="170" name="Girl view - guest" tags="sex no-redirect girlview" position="1915,98" size="100,100">&lt;&lt;if !$tmpGirl.talked&gt;&gt;
	&lt;&lt;link &#39;Talk&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship += 3&gt;&gt;
		&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  			&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
 		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $tmpGirl.talked = true&gt;&gt;
		&lt;&lt;addmins 15&gt;&gt;
		&lt;&lt;set $tmpGirlViewBack = &#39;Girl view - guest&#39;&gt;&gt;
		&lt;&lt;goto &#39;Girl talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.energy &gt; 30 &amp;&amp; $tmpGirl.location !== &#39;garden&#39;&gt;&gt;
	&lt;&lt;link &#39;Fuck her&#39;&gt;&gt;
		&lt;&lt;set $tmpGirlViewBack = &#39;Girl view - guest&#39;&gt;&gt;
		&lt;&lt;set _randomGuestFuck = randomInteger(1,3)&gt;&gt;
		&lt;&lt;if $tmpGirl.relationship &lt; 50 || _randomGuestFuck === 3&gt;&gt;
			&lt;&lt;goto &#39;Girl fuck - no&#39;&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $guestId !== undefined&gt;&gt;
	
	&lt;&lt;if !($player.companions[&#39;guest:&#39; + $guestId] ?? false)&gt;&gt;
		&lt;&lt;link &#39;Add as companion&#39;&gt;&gt;
			&lt;&lt;companionAdd &#39;guest&#39; $guestId&gt;&gt;
			&lt;&lt;run delete $tmpGirl.assignedTo&gt;&gt;
			&lt;&lt;goto &#39;Girl view - guest&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;link &#39;Move her to the basement cell&#39;&gt;&gt;
		&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
		&lt;&lt;goto &#39;Guest move to basement&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	
	&lt;&lt;if !$tmpGirl.assignedTo &amp;&amp; !($player.companions[&#39;guest:&#39; + $guestId] ?? false)&gt;&gt;
		&lt;&lt;link &#39;Assign to&#39;&gt;&gt;
			&lt;&lt;dialog &#39;Assign to&#39;&gt;&gt;
				&lt;&lt;include &#39;Guest view assign to&#39;&gt;&gt;	
			&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if $tmpGirl.assignedTo&gt;&gt;
		&lt;&lt;link &quot;Remove assigned job ($tmpGirl.assignedTo)&quot;&gt;&gt;
			&lt;&lt;run delete $tmpGirl.assignedTo&gt;&gt;
			&lt;&lt;goto &#39;Girl view - guest&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if !$tmpGirl.workout &amp;&amp; $player.energy &gt;= 10&gt;&gt;
		&lt;&lt;link &#39;Workout together&#39;&gt;&gt;
			&lt;&lt;set $tmpGirl.workout = true&gt;&gt;
			&lt;&lt;energy -10&gt;&gt;
			&lt;&lt;goto &#39;Girl - workout together&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if !$tmpGirl.gift&gt;&gt;
		&lt;&lt;link &#39;Give gift&#39;&gt;&gt;
			&lt;&lt;script&gt;&gt;
				Dialog.setup(&quot;Give gift&quot;, &quot;Give gift&quot;);
				Dialog.wiki(Story.get(&quot;Give gift&quot;).processText());
				Dialog.open();
	  		&lt;&lt;/script&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;link &#39;Invite to your shower&#39;&gt;&gt;
		&lt;&lt;goto &#39;Event: Guest invite shower&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $tmpGirl.pregnancy &amp;&amp; $tmpGirl.pregnancy &gt;= 7&gt;&gt;
	&lt;&lt;if $backpack.has(&#39;pregnancy_potion&#39;)&gt;&gt;
		&lt;&lt;link &#39;Give pregnancy potion&#39;&gt;&gt;
			&lt;&lt;goto &#39;Girl - pregnancy potion&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if $backpack.has(&#39;pregnancy_speed_potion&#39;)&gt;&gt;
		&lt;&lt;link &#39;Give pregnancy speed potion&#39;&gt;&gt;
			&lt;&lt;goto &#39;Girl - pregnancy speed potion&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Customize&#39;&gt;&gt;
	&lt;&lt;goto &#39;Girl customize&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
	
 &lt;&lt;link &#39;Go back&#39;&gt;&gt;
	&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $charId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $characters[$charId] = $tmpGirl&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run delete $slaveId&gt;&gt;
	&lt;&lt;run delete $guestId&gt;&gt;
	&lt;&lt;run delete $charId&gt;&gt;
	&lt;&lt;if $tmpGirlBack&gt;&gt;
		&lt;&lt;goto $tmpGirlBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="171" name="Bar - bartender talk" tags="bg-underground" position="2389,1939" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;&lt;video &#39;/bar/bartender_missing_friend&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She tells that you&#39;re getting popular here and you should decide if it&#39;s good or bad as she smiles at you.
&lt;br /&gt;&lt;br /&gt;
She playfully looks around before proposing that she could show you her tits for a few caps...
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.money &gt;= 5&gt;&gt;
  &lt;div id=&quot;bar-event-boobs-button&quot;&gt;
	  &lt;&lt;link &#39;Give her 5 caps&#39;&gt;&gt;
		  &lt;&lt;run $(&#39;#bar-event-boobs-button&#39;).slideToggle()&gt;&gt;
		  &lt;&lt;run $(&#39;#bar-event-boobs&#39;).slideToggle()&gt;&gt;
		  &lt;&lt;set $player.money -=5&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
  &lt;/div&gt;
&lt;&lt;/if&gt;&gt;

&lt;div id=&quot;bar-event-boobs&quot; style=&quot;display:none&quot;&gt;
	&lt;&lt;video &#39;/bar/bartender_boobs&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	Her: &quot;&lt;strong&gt;You know what? Give me few more caps and I&#39;ll show you my ass&lt;/strong&gt;&quot;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $player.money &gt;= 5&gt;&gt;
		&lt;div id=&quot;bar-event-ass-button&quot;&gt;
			&lt;&lt;link &#39;Give her 5 more caps&#39;&gt;&gt;
				&lt;&lt;run $(&#39;#bar-event-ass-button&#39;).slideToggle()&gt;&gt;
				&lt;&lt;run $(&#39;#bar-event-ass&#39;).slideToggle()&gt;&gt;
				&lt;&lt;set $player.money -=5&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;/div&gt;
	  &lt;&lt;/if&gt;&gt;
  
  &lt;div id=&quot;bar-event-ass&quot; style=&quot;display:none&quot;&gt;
		&lt;&lt;video &#39;/bar/bartender_ass&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		She unbuttons her pants and pulls them down as she wiggles her ass a bit.&lt;br /&gt;She checks surroundings before pulling her panties down to get you more interested.&lt;br /&gt;&lt;br /&gt;
		She giggles while looking at you staring at her ass.&lt;br /&gt;&lt;br /&gt;
		She grabs your hand and pulls you behind counter as she drops on her knees and unzips your pants.&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;/bar/bartender_bj&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		She smiles as she sees your dick size and without hessitation puts it in her mouth and starts to suck it while checking if noone is seeing you both.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;if $player.reputation &lt; 100&gt;&gt;
			She sucks it brief moment before stopping &lt;strong&gt;&quot;That&#39;s enough for now. Maybe if you get more popular around here&quot; winks.&lt;/strong&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;say &#39;Bartender&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
				Fuck me! Right now!
			&lt;&lt;/say&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
				&lt;&lt;video &#39;/bar/bartender_fuck1&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				She pulls you slightly around the corner, minimizing the chance of being noticed, and turns her back to you. Sexually, she slides her hand down your abdomen before lifting a leg and pulling her panties to the side. You slowly insert your dick inside her pussy and slowly speed up as she moans and looks at you in pleasure.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;say &#39;Bartender&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
					I said fuck me! Harder!
				&lt;&lt;/say&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;video &#39;/bar/bartender_fuck2&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;say &#39;Bartender&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
				  	Oh fuck... Yes. Don&#39;t stop! Use me!
				&lt;&lt;/say&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				It seems like she&#39;s really enjoying this. While you&#39;re fucking her hard, she takes out a key from her pocket and unlocks the door that&#39;s right next to you. She pushes you away with her butt and leads you into a dark room, where she soon turns on the light and lays down on the table.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;video &#39;/bar/bartender_fuck3&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;say &#39;Bartender&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
				  	Just don&#39;t cum inside me. My man would kill me. Just say when you&#39;re ready
				&lt;&lt;/say&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;linkreplace &quot;Tell her you&#39;re ready&quot;&gt;&gt;
					&lt;&lt;addmins 20&gt;&gt;
					&lt;&lt;horny_reset&gt;&gt;
					&lt;&lt;video &#39;/bar/bartender_fuck4&#39;&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					She quickly jumps off the table to get on her knees, but before she can do that, You already start to cum and hit into her hair, which makes her blush.
					&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;/if&gt;&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;&lt;link &#39;End&#39;&gt;&gt;
	&lt;&lt;goto &#39;Bar&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="172" name="Bar - drink" tags="bg-underground" position="2505,1941" size="100,100">&lt;&lt;addmins 15&gt;&gt;
&lt;&lt;set $player.drunk++&gt;&gt;
&lt;&lt;if $player.drunk &gt; 3&gt;&gt;
	&lt;&lt;perkAdd &#39;drunk&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/bar/drink.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You order a beer at the bar and start drinking it.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if randomInteger(1,5) === 1&gt;&gt;
	&lt;&lt;goto &#39;Bar - random event #1&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Continue|Bar]] 
</tw-passagedata><tw-passagedata pid="173" name="Girl fuck - no" tags="sex" position="3000,223" size="100,100">&lt;center&gt;
	[img[setup.ImagePath+&#39;game/misc/no_fuck.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She tells you that she&#39;s not in the mood right now and just wants to be alone.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Not enough relationship or she&#39;s not in the mood&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if setup.percentageChance(40) &amp;&amp; $tmpGirl.relationship &gt;= 30&gt;&gt;
	&lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; notices your boner and suggestions that maybe you want a quick blowjob to calm it down. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;say tmpGirl.name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
		I am really not in the mood right now but how about I just give you a quick head? 
	&lt;&lt;/say&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Accept blowjob&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/cabin/fuck_no_blowjob.webp&#39;]]
		&lt;/center&gt;
		Without taking of her clothes, &lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; drops on her knees, unzips your pants and pulls out your already hard dick. As she wants to end it fast, she immediately starts sucking and jerking together. After few minutes you cum and she gets up and continues to do whatever she did before that. 
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;horny_reset&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;option2&quot;&gt;
  &lt;&lt;link &#39;Force her&#39;&gt;&gt;
	  &lt;&lt;set $tmpGirl.relationship -=30&gt;&gt;
	  &lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
  	&lt;&lt;if $tmpGirlViewBack&gt;&gt;
		&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto [[Girl view]]&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="174" name="Bar - random event #1" tags="bg-underground" position="2505,1833" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/bar/drunk_guy.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
The city drunk, stumbles by, bumping into you. If doesn&#39;t say sorry or even notice you as he continues to drink and dance alone.  
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;addmins 15&gt;&gt;

&lt;div id=&quot;bar-event-drunk-button&quot;&gt;
  &lt;&lt;link &#39;Demand an apology&#39;&gt;&gt;
  	  &lt;&lt;run $(&#39;#bar-event-drunk-button&#39;).slideToggle()&gt;&gt;
	  &lt;&lt;if randomInteger(1,3) === 1&gt;&gt;
		  &lt;&lt;run $(&#39;#bar-event-drunk-fight&#39;).slideToggle()&gt;&gt;
	  &lt;&lt;else&gt;&gt;
		 &lt;&lt;run $(&#39;#bar-event-drunk-no-fight&#39;).slideToggle()&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;bar-event-drunk-fight&quot; style=&quot;display:none;&quot;&gt;
	He looks at you and yells &lt;strong&gt;&quot;What the fuck you&#39;re looking at. Want to get your head smashed?&quot;&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Fight him&#39;&gt;&gt;
	&lt;&lt;newguy&gt;&gt;
	&lt;&lt;set $enemies = []&gt;&gt;
	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;fight $enemies &#39;Bar&#39; &#39;Bar&#39; true&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;bar-event-drunk-no-fight&quot; style=&quot;display:none;&quot;&gt;
	He looks at you while barelly standing on his feet as he yells &quot;sorry&quot; and continues to dance.
&lt;br /&gt;&lt;br /&gt;
&lt;/div&gt;

&lt;div id=&quot;bar-event-drunk-button-ignore&quot;&gt;
  &lt;&lt;link &#39;Ignore him&#39;&gt;&gt;
	  &lt;&lt;goto &#39;Bar&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="175" name="Random event - dig grave #12" tags="" position="6328,21" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
As you walk down the path near the forest it gets dark and starts to rain.
&lt;br /&gt;
Just off the trail you notice two guys.  It looks like one is trying to comfort the other.
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/dig_grave1.webp&#39;]]
&lt;/center&gt;

&lt;br /&gt;&lt;br /&gt;
One of them seems to be crying as he looks behind the tree.&lt;br /&gt;&lt;br /&gt;

&lt;div id=&quot;random-event-dig-grave-button&quot;&gt;
	&lt;&lt;link &#39;Get closer&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#random-event-dig-grave-button&#39;).slideToggle()&gt;&gt;
		&lt;&lt;run $(&#39;#random-event-dig-grave1&#39;).slideToggle()&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;random-event-dig-grave1&quot; style=&quot;display:none&quot;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/explore/dig_grave2.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You slowly walk toward them.  They notice you but look away almost immediately. You get closer and behind the tree you see a guy with a shovel in his hand screaming furiously, &quot;&lt;strong&gt;WHY! WHY!&lt;/strong&gt;&quot;
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;random-event-dig-grave-button1&quot;&gt;
	  &lt;&lt;link &#39;Approach them&#39;&gt;&gt;
		  &lt;&lt;run $(&#39;#random-event-dig-grave-button1&#39;).slideToggle()&gt;&gt;
		  &lt;&lt;run $(&#39;#random-event-dig-grave2&#39;).slideToggle()&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
	
	&lt;div id=&quot;random-event-dig-grave2&quot; style=&quot;display: none;&quot;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/explore/dig_grave3.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You notice another guy sitting by the grave who completely ignores you. He just stares into the shallow grave as it&#39;s getting deeper.
		&lt;br /&gt;&lt;br /&gt;
		
		&lt;div id=&quot;random-event-dig-grave-button2&quot;&gt;
		  &lt;&lt;link &#39;Offer to help&#39;&gt;&gt;
			  &lt;&lt;run $(&#39;#random-event-dig-grave-button2&#39;).slideToggle()&gt;&gt;
			  &lt;&lt;run $(&#39;#random-event-dig-grave3&#39;).slideToggle()&gt;&gt;
		  &lt;&lt;/link&gt;&gt;
		&lt;/div&gt;
		
		&lt;div id=&quot;random-event-dig-grave3&quot; style=&quot;display: none;&quot;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/explore/dig_grave4.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			The guy digging the grave thanks you as he gives you a shovel so you can take turns.&lt;br /&gt;
			A few times you look at the guy sitting next to you, but he still doesn&#39;t talk.&lt;br /&gt;
			The other guy tells that it&#39;s his &lt;&lt;=either(&#39;father&#39;, &#39;brother&#39;, &#39;sister&#39;)&gt;&gt;.&lt;br /&gt;
			They all came from &lt;strong&gt;The Sanctuary&lt;/strong&gt;.&lt;br /&gt;
			They were working different jobs but mainly building armor, knives, and other weapons.
&lt;br /&gt;&lt;br /&gt;
			&lt;strong&gt;
				Your intelligence increased by 1
			&lt;/strong&gt;
			&lt;&lt;set $player.int++&gt;&gt;
  			&lt;br /&gt;&lt;br /&gt;
		&lt;/div&gt;
		
	&lt;/div&gt;
&lt;/div&gt;


&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="176" name="Shooter game" tags="" position="4561,1001" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$shooter.title ?? &#39;Hunting&#39;&gt;&gt;&lt;/h1&gt;

&lt;div id=&quot;shooter-game&quot;&gt;
	
	&lt;div id=&quot;shooter-game-time-left&quot;&gt;
      &lt;h3&gt;Time left &lt;span id=&quot;time&quot;&gt;00:00&lt;/span&gt;&lt;/h3&gt;
	&lt;/div&gt;
      &lt;div class=&quot;board&quot; id=&quot;board&quot;&gt;
	  	&lt;div class=&quot;screen&quot; id=&quot;start-screen&quot;&gt;
			&lt;a href=&quot;#&quot; class=&quot;start passage link-internal&quot; id=&quot;start&quot;&gt;Start&lt;/a&gt;
			&lt;div id=&quot;shooter-start-info&quot;&gt;Tip: Just press on the targets&lt;/div&gt;
		&lt;/div&gt;
		&lt;div class=&quot;screen&quot; id=&quot;shooter-game-finished&quot;&gt;
			&lt;div id=&quot;shooter-game-finished-score&quot;&gt;&lt;/div&gt;
			&lt;&lt;link &#39;Continue&#39;&gt;&gt;
				&lt;&lt;goto &#96;$shooter.passageWon&#96;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;/div&gt;
	  &lt;/div&gt;
&lt;/div&gt;
&lt;&lt;script&gt;&gt;
$(document).one(&#39;:passagedisplay&#39;, function (eventObject) {	
	var startBtn = document.querySelector(&quot;#start&quot;),
		timeEl = document.querySelector(&quot;#time&quot;),
  		board = document.querySelector(&quot;#board&quot;),
		time = 10,
		score = 0,
		decreaseTimeInterval = false,
		finished = false;
		
	board.style.backgroundImage = &quot;url(&#39;&quot; + setup.ImagePath + &quot;places/shooter/&quot; + variables().shooter.place + &quot;.jpg&#39;)&quot;;
		
	startBtn.addEventListener(&quot;click&quot;, function(e) {
		e.preventDefault();
		startGame();
	});
	
	board.addEventListener(&quot;click&quot;, (e) =&gt; {
		if (e.target.classList.contains(&quot;target&quot;)) {
		  	score++;
		 	e.target.remove();
			if (!finished) {
		  		createTarget();
			}
		}
	});
	
	function startGame() {
  		decreaseTimeInterval = setInterval(decreaseTime, 1000);
		document.querySelector(&#39;#shooter-game-time-left&#39;).style.visibility = &quot;visible&quot;;
		document.querySelector(&#39;#start-screen&#39;).style.display = &quot;none&quot;;
  		createTarget();
  		setTime(time);
  	}
	
	function finishGame() {
		finished = true;
 		clearInterval(decreaseTimeInterval);
		timeEl.parentNode.classList.add(&quot;hide&quot;);
		document.querySelector(&quot;#shooter-game-finished&quot;).style.display = &quot;block&quot;;
		
  		document.querySelector(&quot;#shooter-game-finished-score&quot;).innerHTML = &quot;&lt;h1&gt;Your Score: &lt;span class = &#39;primary&#39;&gt;&quot; + score 		+ &quot;&lt;/span&gt;&lt;/h1&gt;&quot;;
		variables().shooter.score = score;
	}

	function decreaseTime() {
		if (time === 0) {
		  finishGame();
		} else {
		  let current = --time;
		  if (current &lt; 10) {
			current = &#96;0${current}&#96;;
		  }
		  setTime(current);
		}
	}
	
	function createTarget() {
	  var target = document.createElement(&quot;div&quot;),
		size = randomInteger(40, 100),
		{ width, height } = board.getBoundingClientRect(),
		x = randomInteger(0, width - size),
		y = randomInteger(0, height - size);

	  target.classList.add(&quot;target&quot;);
	  target.style.width = &#96;${size}px&#96;;
	  target.style.height = &#96;${size}px&#96;;
	  target.style.top = &#96;${y}px&#96;;
	  target.style.left = &#96;${x}px&#96;;
	  target.style.backgroundImage = &quot;url(&#39;&quot; + setup.ImagePath + &quot;places/shooter/&quot; + variables().shooter.target + &quot;.png&#39;)&quot;;
	  target.style.backgroundSize = &quot;contain&quot;;
	  target.style.backgroundRepeat = &quot;no-repeat&quot;;

	  board.append(target);
	}
	
	function setTime(value) {
  		timeEl.innerHTML = &#96;00:${value}&#96;;
	}
});
&lt;&lt;/script&gt;&gt;
&lt;style&gt;
#shooter-game {
	cursor: crosshair;
}

#shooter-game-finished {
	display: none;
}

a.link-external:after {
    content: &#39;&#39; !important;
}

#start-screen {
	background: #666;
    opacity: 0.9;
    border-radius: 20px;
    width: 220px;
    text-align: center;
    padding: 15px;
    padding-right: 25px;
    padding-top: 20px;
}
.board {
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  width: 100%;
  height: 500px;
  background: linear-gradient(118.38deg, #29323c -4.6%, #485563 200.44%);
  box-shadow: -8px -8px 20px #2a333d, 10px 7px 20px #475462;
  border-radius: 30px;
  overflow: hidden;
  background-size: contain;
}
.target {
  position: absolute;
  cursor: crosshair;
}

#shooter-game .screen {
	padding: 20px;
    background: #666;
    opacity: 0.9;
    border-radius: 20px;
}
#shooter-game-time-left {
	text-align: center;
	visibility: hidden;
}

&lt;/style&gt;</tw-passagedata><tw-passagedata pid="177" name="Widget - shooter game" tags="widget" position="4450,999" size="100,100">&lt;&lt;widget shooterGame&gt;&gt;
	&lt;&lt;set $shooterFight = true&gt;&gt;
	&lt;&lt;set $shooter = {
		enemies: $args[0],
		target: $args[1] ?? &#39;enemy_1&#39;,
		place: $args[2] ?? &#39;forest&#39;,
		passageWon: $args[3] ?? null,
		passageLost: $args[4] ?? null,
		title: $args[5] ?? &#39;Hunting&#39;
	}&gt;&gt;
	
	&lt;&lt;goto &#39;Shooter game&#39;&gt;&gt;
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="178" name="Forest - hunt" tags="" position="2402,746" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;run console.log($shooter)&gt;&gt;
&lt;&lt;if $shooter.score &gt;= 10&gt;&gt;
	&lt;&lt;if $shooter.target === &#39;deer&#39;&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/forest/deer_dead.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You managed to kill the deer. You slowly approach it and notice it&#39;s taking its last breath.
		&lt;br /&gt;&lt;br/&gt;
		&lt;strong class=&quot;iitem&quot;&gt;You collected 10 food&lt;/strong&gt;
		&lt;&lt;pickup $backpack &#39;food&#39; 10&gt;&gt;
	&lt;&lt;elseif $shooter.target === &#39;wolf&#39;&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/forest/hunting_wolf.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You managed to kill the wolf. You approach it and slowly skin it.
		&lt;br /&gt;&lt;br/&gt;
		&lt;&lt;pickup $backpack &#39;pelt_wolf&#39; 1&gt;&gt;
		&lt;strong class=&quot;iitem&quot;&gt;You collected 1 wolf pelt&lt;/strong&gt;
        &lt;br /&gt;
        &lt;&lt;pickup $backpack &#39;food&#39; 5&gt;&gt;
        &lt;strong class=&quot;iitem&quot;&gt;You collected 5 food&lt;/strong&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/forest/&#39; + $shooter.target + &#39;_runaway.webp&#39;]]
	&lt;/center&gt;
	&lt;&lt;if $shooter.target === &#39;deer&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		Deer managed to run away as you missed almost all of your arrows.
	&lt;&lt;elseif $shooter.target === &#39;wolf&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		Wolf managed to run away as you missed almost all of your arrows.
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;	</tw-passagedata><tw-passagedata pid="179" name="Underground city - random event #2" tags="" position="7318,134" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;UNDERGROUND CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/underground/old_lady.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
A woman screams at the top of her lungs. It is a terrible scream that echoes throughout the city.&lt;br /&gt;
It came from an old woman who was evicted from her home due to unpaid rent. She&#39;s an annoying old crone and she has been living in the streets ever since.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.money &gt;= 10 || ($game.location.guesthouse ?? false)&gt;&gt;
  &lt;div id=&quot;ug-event-old-lady-buttons&quot;&gt;
	  &lt;&lt;link &#39;Go closer&#39;&gt;&gt;
		  &lt;&lt;run $(&#39;#ug-event-old-lady-buttons&#39;).slideToggle()&gt;&gt;
		  &lt;&lt;run $(&#39;#ug-event-old-lady-help&#39;).slideToggle()&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
  &lt;/div&gt;
&lt;&lt;/if&gt;&gt; 

&lt;div id=&quot;ug-event-old-lady-help&quot; style=&quot;display:none;&quot;&gt;
	You approach her and ask what happened. She tells you her story with teary eyes.
&lt;br /&gt;&lt;br /&gt;
	&quot;&lt;strong&gt;Can you help me somehow?&lt;/strong&gt;&quot;
	&lt;br /&gt;&lt;br /&gt;
	
	&lt;div id=&quot;ug-event-old-lady-help-buttons&quot;&gt;
		  &lt;&lt;link &#39;Offer her help&#39;&gt;&gt;
			  &lt;&lt;run $(&#39;#ug-event-old-lady-help-buttons&#39;).slideToggle()&gt;&gt;
			  &lt;&lt;run $(&#39;#ug-event-old-lady-help-options&#39;).slideToggle()&gt;&gt;
		  &lt;&lt;/link&gt;&gt;
	  &lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;ug-event-old-lady-help-options&quot; style=&quot;display:none;&quot;&gt;
	&lt;div id=&quot;ug-event-old-lady-help-options-buttons&quot;&gt;
		&lt;&lt;if $player.money &gt;= 10&gt;&gt;
			&lt;&lt;link &#39;Give her 10 caps&#39;&gt;&gt;
			  &lt;&lt;run $(&#39;#ug-event-old-lady-help-options-buttons&#39;).slideToggle()&gt;&gt;
			  &lt;&lt;run $(&#39;#ug-event-old-lady-help-reward&#39;).slideToggle()&gt;&gt;
			  &lt;&lt;set $player.money -=10&gt;&gt;
		  &lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if ($game.location.guesthouse ?? false) &amp;&amp; (($guesthouseLimit ?? 3) - ($guests ?? []).length) &gt; 0&gt;&gt;
			&lt;&lt;link &#39;Offer her place in your guest house&#39;&gt;&gt;
			  &lt;&lt;run $(&#39;#ug-event-old-lady-help-options-buttons&#39;).slideToggle()&gt;&gt;
			  &lt;&lt;run $(&#39;#ug-event-old-lady-help-reward&#39;).slideToggle()&gt;&gt;
			  &lt;&lt;newgirl&gt;&gt;
			  &lt;&lt;set 
			  	$tmpGirl.birthDate = setup.getBirthDate(80),
				$tmpGirl.relationship = 30,
				$tmpGirl.virgin = false
			  &gt;&gt;
			  &lt;&lt;set $guests.push($tmpGirl)&gt;&gt;
		  &lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	  &lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;ug-event-old-lady-help-reward&quot; style=&quot;display:none;&quot;&gt;
	&quot;&lt;strong&gt;Thank you so much! I don&#39;t know how to even begin to thank you!
&lt;/strong&gt;&quot;
	&lt;br /&gt;&lt;br /&gt;
		&lt;div id=&quot;ug-event-old-lady-help-reward-buttons&quot;&gt;
		  &lt;&lt;link &#39;Tell her to get on her knees&#39;&gt;&gt;
			  &lt;&lt;run $(&#39;#ug-event-old-lady-help-reward-buttons&#39;).slideToggle()&gt;&gt;
			  &lt;&lt;run $(&#39;#ug-event-old-lady-help-reward-yes&#39;).slideToggle()&gt;&gt;
		  &lt;&lt;/link&gt;&gt;
	  &lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;ug-event-old-lady-help-reward-yes&quot; style=&quot;display:none;&quot;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/underground/old_lady_bj.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	She looks disappointed and angry at the same time but does what you tell her. . &lt;br /&gt;
She gets down and with a disgusted look on her face grabs your dick and puts it in her mouth. &lt;br /&gt;This feels different... You feel like she&#39;s missing most of her teeth.
	&lt;br /&gt;&lt;br /&gt;
&lt;/div&gt;



&lt;&lt;link &#39;Leave&#39; &#39;Underground city&#39;&gt;&gt;&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="180" name="Girl punish" tags="sex" position="2900,341" size="100,100">&lt;&lt;set _isMasochist = ($tmpGirl.traits ?? []).includes(&#39;masochist&#39;)&gt;&gt;

&lt;&lt;set _relStats = 1&gt;&gt;
&lt;&lt;set _subStats = 1&gt;&gt;
&lt;&lt;set _punishView = &#39;punish&#39;&gt;&gt;
&lt;&lt;if $punishType === &#39;paddle&#39;&gt;&gt;
	&lt;&lt;set 
		_relStats = 2,
		_subStats = 2,
		_punishView = _punishView + &#39;_paddle&#39;
	&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set _relChanged = true, _subChanged = true&gt;&gt;
&lt;&lt;if _isMasochist&gt;&gt;
	&lt;&lt;set 
		_relStats = 0, 
		_relChanged = false
	&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;actionImage $tmpGirl _punishView&gt;&gt;

&lt;&lt;set $tmpGirl.relationship -= _relStats&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &lt; -100&gt;&gt;
	&lt;&lt;set $tmpGirl.relationship = -100&gt;&gt;
	&lt;&lt;set _relChanged = false&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $tmpGirl.sub += _subStats&gt;&gt;
&lt;&lt;if $tmpGirl.sub &gt; 100&gt;&gt;
	&lt;&lt;set $tmpGirl.sub = 100&gt;&gt;
	&lt;&lt;set _subChanged = false&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;addmins 60&gt;&gt;
&lt;&lt;energy -10&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if _isMasochist&gt;&gt;
	&lt;strong&gt;&lt;&lt;print $tmpGirl.name&gt;&gt;&lt;/strong&gt; moans in enjoyment while looking over her shoulder straight in your eyes. 
	&lt;&lt;set $tmpGirl.horny = Math.min($tmpGirl.horny + 10, 100)&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;&lt;&lt;print $tmpGirl.name&gt;&gt;&lt;/strong&gt; yells in pain as you  punish her by whipping. 
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if _relChanged&gt;&gt;
	&lt;strong&gt;&lt;&lt;print $tmpGirl.name&gt;&gt;&lt;/strong&gt; relationship decreased by &lt;&lt;=_relStats&gt;&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if _subChanged&gt;&gt;
	&lt;strong&gt;&lt;&lt;print $tmpGirl.name&gt;&gt;&lt;/strong&gt; submission increased by &lt;&lt;=_subStats&gt;&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.energy &gt;= 10 &amp;&amp; hasTime(1)&gt;&gt;
  &lt;&lt;link &#39;Punish&#39;&gt;&gt;
  		&lt;&lt;run delete $punishType&gt;&gt;
	  &lt;&lt;goto &#39;Girl punish&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;if $backpack.has(&#39;paddle&#39;)&gt;&gt;
	  &lt;&lt;link &#39;Punish her with paddle&#39;&gt;&gt;
	  	&lt;&lt;set $punishType = &#39;paddle&#39;&gt;&gt;
		&lt;&lt;goto &#39;Girl punish&#39;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Back&#39;&gt;&gt;
	&lt;&lt;run delete $punishType&gt;&gt;
	&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="181" name="Slave - wash" tags="sex no-redirect" position="3232,102" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SHOWER&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
 &lt;center&gt;
 	[img[setup.ImagePath+&#39;places/shower/wash_slave&#39;+ randomInteger(1,2) +&#39;.webp&#39;]]
&lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
 You bring &lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt;&lt;/strong&gt; upstairs and let the hot water run in the shower.&lt;br /&gt;She starts to wash and you can&#39;t take your eyes off her.
 &lt;br /&gt;&lt;br /&gt;
 
 &lt;&lt;addmins 60&gt;&gt;
 &lt;&lt;set $tmpGirl.washed = true&gt;&gt;
 &lt;&lt;if !($tmpGirl.washDays ?? false)&gt;&gt;
 	&lt;&lt;set _beautyInc = randomInteger(1, 2)&gt;&gt;
	&lt;&lt;set $tmpGirl.washBeauty = _beautyInc&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt;&lt;/strong&gt; beauty temporary increased by &lt;&lt;=_beautyInc * 7&gt;&gt;&lt;br /&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt;&lt;/strong&gt; releationship increased by 5
	
	&lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship + 5, 100)&gt;&gt;
	&lt;&lt;set $tmpGirl.beauty = Math.min($tmpGirl.beauty + (_beautyInc * 7), 100)&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set $tmpGirl.beauty -= $tmpGirl.washBeauty * $tmpGirl.washDays&gt;&gt;
	&lt;&lt;set $tmpGirl.beauty = Math.min($tmpGirl.beauty + ($tmpGirl.washBeauty * 7), 100)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $tmpGirl.washDays = 7&gt;&gt;

&lt;&lt;linkreplace &#39;Help her&#39;&gt;&gt;
	 &lt;center&gt;
 		[img[setup.ImagePath+&#39;places/shower/wash_slave_help&#39;+ randomInteger(1,2) +&#39;.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You walk behind her and slowly massage her body as she quietly gasps. 
	&lt;br /&gt;
	She presses her body against yours and you think that she&#39;s really enjoying the moment. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
		&lt;&lt;horny_reset&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/shower/wash_slave_fuck&#39;+ randomInteger(1,2) +&#39;.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You slide your hard dick inside her nice clean pussy and pound her really hard.
		&lt;br /&gt;
		&lt;&lt;if $tmpGirl.relationship &gt; 30&gt;&gt;
			She begs you to keep going but cum outside.
		&lt;&lt;else&gt;&gt;
			She screams at you to STOP as you keep going and cum right on her.  
		&lt;&lt;/if&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;

&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Take her back to the cell&#39;&gt;&gt;
	&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="182" name="Blair quest - morning bj" tags="" position="576,2178" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/blair_bj1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You open your eyes wide as you feel someone grab your cock and stroke it. You pull off the sheet and see Blair&#39;s blushing face.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Sorry I woke you up. I couldn&#39;t sleep all night. I was thinking about it and couldn&#39;t take it anymore. Please don&#39;t be mad.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/blair_bj2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She catches you by surprise as the first thing she takes in her mouth isn&#39;t the tip of your dick but your balls, all of them!  She sucked them in like a vacuum cleaner.
&lt;br /&gt;
You utter a quiet moan before laying back and just enjoying it.
&lt;br /&gt;&lt;br /&gt;
After a few minutes she looks up with disappointment in her eyes because she couldn&#39;t make you cum.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
I am so sorry. I know I&#39;m not the best but I promise I can get better....
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She pulls your dick out of her mouth and grabs it so hard that it almost hurts.  While looking straight at it she picks up the pace.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/blair_bj3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
Please! Cum for me! Let me get that feeling for the first time. 
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Cum on her face&#39;&gt;&gt;
	&lt;&lt;horny_reset&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/blair_bj4&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You get up to cum on her face.  As you do that, she manages to open her mouth and catch some of it with her tongue.
&lt;br /&gt;
She giggles while cleaning her lip with her finger.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Get out of the bed&#39;&gt;&gt;
	&lt;&lt;goto &#39;Bedroom&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;&lt;set $characters.blair.quests.bj_day = $game.day&gt;&gt;
</tw-passagedata><tw-passagedata pid="183" name="Blair quest - first sex" tags="" position="691,2174" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You both get into bed and start to discuss today&#39;s events.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;You know I saw that, right?&lt;&lt;/blair&gt;&gt;
&lt;&lt;you&gt;&gt;What do you mean?&lt;&lt;/you&gt;&gt;
&lt;&lt;blair&gt;&gt;How you looked at those girls in the settlement..&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You don&#39;t know how to respond so just press yourself against her.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/blair_virgin1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
You should know that I&#39;m still a virgin. Till today I thought I&#39;d stay that way till I got married. After seeing you and those other girls something happened in me. I can&#39;t explain it...&lt;br /&gt;
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/blair_virgin2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She takes you by surprise and jumps on you wrapping her legs around you so you can&#39;t move.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	I think I&#39;m ready. Just don&#39;t move, please.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She slowly leans towards you and gently kisses your lips as you feel your dick hardening against her ass while she slowly continues kissing you.
&lt;br /&gt;
&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/bedroom/blair_virgin1.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She takes off her shirt and you help her take off her bra as she continues to passionately kiss you.&lt;br /&gt;
She rubs her breasts against your chest while gasping deeply.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Put your dick in&#39;&gt;&gt;
	&lt;&lt;video &#39;bedroom/blair_virgin3&#39;&gt;&gt;
	You give her a few more kisses then without warning, grab your dick and gently slide it inside her tight pussy.
	&lt;br /&gt;
	She twitches in pain for a second as she starts to bleed a little bit.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;blair&gt;&gt;Ouch! Uh! I, I LOVE YOU!&lt;&lt;/blair&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	Her confidence grows so you decide to increase the pace as you shove your dick deeper and faster inside her.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/bedroom/blair_virgin2.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You pull out and push her on her back while grabbing her legs and putting them up. While holding her firmly you shove your dick back inside her with a big thrust and she starts to shiver.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;bedroom/blair_virgin4&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;blair&gt;&gt;
		Please don&#39;t stop! Oh my god!
	&lt;&lt;/blair&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You fuck her tight pussy for a while.  Next you flip her over, grab her ass and squeeze it hard before pulling her onto her knees for doggy. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;bedroom/blair_virgin5&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;blair&gt;&gt;
		Please, please - cum in me! Oh lord!
	&lt;&lt;/blair&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	As you start to cum inside her you change your mind and pull out a few seconds too late and cover her ass and pussy in your warm cum.&quot;
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/bedroom/blair_virgin3.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Sleep&#39;&gt;&gt;
		&lt;&lt;sleep&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;run delete $characters.blair.virgin&gt;&gt;</tw-passagedata><tw-passagedata pid="184" name="Vincent quest - settlement start" tags="bg-farm" position="2959,1028" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$player.name&gt;&gt;&lt;/strong&gt;! Right when I wanted to talk to you. Listen up kid; I need your help with something. It must be discreet and you can tell noone about it.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;
You nod as approve and listen to him carefully.&lt;br /&gt;
He starts to tell you what he needs you for while putting a lot of his building stuff in his wheelbarrow.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	I&#39;ll need you to get some items for me.&lt;br /&gt;
	You&#39;ll need to get &lt;strong class=&quot;iitem&quot;&gt;5 solar panels&lt;/strong&gt; and &lt;strong class=&quot;iitem&quot;&gt;100 wood&lt;/strong&gt;.
	&lt;br /&gt;
	Don&#39;t ask why, just get it, please. I hope your building skills are good too. 
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.count(&#39;wood&#39;) &gt;= 100 &amp;&amp; $backpack.count(&#39;solar_panel&#39;) &gt;=5&gt;&gt;
	&lt;&lt;linkreplace &#39;Tell him you already got them&#39;&gt;&gt;
		You told him that you already got those items and you&#39;re ready go go even now.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;vincent&gt;&gt;
			Really? Didn&#39;t expect that. Meet me here tomorrow in the morning. We need to get going as early as we can
		&lt;&lt;/vincent&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;set $characters.vincent.relationship += 5&gt;&gt;
		&lt;strong class=&quot;stats-changed-inc&quot;&gt;Relationship with Vincent increased by 5&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &quot;Continue&quot;&gt;&gt;
	&lt;&lt;goto &#39;Farm&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;set $characters.vincent.quests.new_settlement_day = $game.day&gt;&gt;</tw-passagedata><tw-passagedata pid="185" name="Settlement - intro" tags="" position="2838,1026" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	You&#39;re ready? Good! Lets hit the road.
&lt;&lt;/vincent&gt;&gt;
&lt;&lt;blair&gt;&gt;
	Morning &lt;&lt;=$player.name&gt;&gt;!
	&lt;br /&gt;
	Dad, where are we going? Why the secrecy?
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You pack your bags and go straight toward the underground city maybe to do some business.  The thought crosses your mind that going to the city seems a bit strange as Blair is going with you, and is wanted there. Can&#39;t be right...
&lt;br /&gt;&lt;br /&gt;
Suddenly you take a sharp turn into the forest. No roads, only thick forest.
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/intro_forest.webp&#39;]]
&lt;/center&gt;

&lt;br /&gt;&lt;br /&gt;
You keep walking for a while when finally Blair can&#39;t take it anymore and asks again.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Dad! Where are we going?
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	Shhhh!  Keep it quiet! We&#39;re going to help some of my old friends.  We&#39;re close so just wait.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
The sun has already started to shine brightly when suddenly, as you go through the thickest branches, there appear some big white tents in the middle of nowhere.
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/intro_tents.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You turn to Vincent and ask him curiously...
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;
	Where are we? Who are they? and Are they hostile?
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	Haha, no, not really. Just follow me, you&#39;ll see with your own eyes.
&lt;&lt;/vincent&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Continue&#39;&gt;&gt;
	&lt;&lt;set $game.location.settlement = true&gt;&gt;
	You slowly walk toward the camp and see some friendly looking people.  
	&lt;br /&gt;
	As you are following Vincent you look around and notice a few more people. By the looks of it they moved here recently and are hoping to be settled so are preparing this place to be their new home.
	&lt;br /&gt;
	A girl notices you but immediately looks away and continues chopping wood.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/intro_chop_wood.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You continue to walk toward the first white tent unsure if someone is waiting for Vincent.
	&lt;br /&gt;
	Blair grabs your hand and walks as close to you as she can. You keep looking around and notice a cow that a young girl is milking.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/intro_cow.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	Finally you reach the tent and a couple comes out greeting you all..
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Greet them&#39;&gt;&gt;
		&lt;&lt;eve&gt;&gt;
			Thank you so much, Vincent! Who are you friends? You can just leave those items by the tent.
		&lt;&lt;/eve&gt;&gt;
		&lt;&lt;rodger&gt;&gt;
			Welcome, old friend! I Haven&#39;t seen you in what, Vincent, 5 years? Feels like an eternity. I really appreciate that you could get these things for us and help us with the building. God is watching.
		&lt;&lt;/rodger&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		They talk for a while before Vincent remembers to introduce you to them.
		&lt;&lt;vincent&gt;&gt;
			Oh, sorry! This is &lt;&lt;=$player.name&gt;&gt;. He&#39;s actually the one who got all that you need and he&#39;s willing to help out.
		&lt;&lt;/vincent&gt;&gt;
		&lt;br /&gt;
		&lt;&lt;eve&gt;&gt;
			Oh thank you! We don&#39;t even know how to say thank you!&lt;br /&gt;
			You&#39;re really a blessing.
		&lt;&lt;/eve&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		As Eve wraps her arms around you and hugs you firmly Vincent turns around and tells you about his friend.
		&lt;&lt;vincent&gt;&gt;
			&lt;&lt;=$player.name&gt;&gt;, This is Rodger. He&#39;s a priest as long as I remember him. The thing they&#39;re building here is a closed society because they couldn&#39;t take any more of the underground city. The murders, kidnappings, and violence.
		&lt;&lt;/vincent&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;rodger&gt;&gt;
			Thank you, Vincent! See, &lt;&lt;=$player.name&gt;&gt; the Lord told me that this would be the right place where we could settle down and build our own village. &lt;br /&gt;
			The first thing that we want to build is a church. After that - God will tell us. Anyway, the sun is already up so we should get to work.
		&lt;&lt;/rodger&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Help them&#39;&gt;&gt;
			All day you chopped wood, sawed wood, and dug big holes for the church foundation.
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;
		[img[setup.ImagePath+&#39;places/settlement/intro_foundation.png&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			Sunset was coming and the three of you decided to pack your things and go back home.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;rodger&gt;&gt;
				Thank you all very much! We&#39;ll intercede for you to God. If by any chance you have some spare time and want to help us more - our doors will always be open to you!
			&lt;&lt;/rodger&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;set $tmpGuy = {
				relationship: 5,
				quests: {},
				birthDate: setup.getBirthDate(52)
			}&gt;&gt;
			&lt;&lt;set $characters.rodger = $tmpGuy&gt;&gt;
			&lt;&lt;newgirl&gt;&gt;
			&lt;&lt;set
				$tmpGirl.name = &#39;Eve&#39;,
				$tmpGirl.corruption = 0,
				$tmpGirl.hair = &#39;black&#39;,
				$tmpGirl.race = &#39;white&#39;,
				$tmpGirl.quests = {},
				$tmpGirl.relationship = 5,
				$tmpGirl.birthDate =  setup.getBirthDate(32)
			&gt;&gt;
			&lt;&lt;set $characters.eve = $tmpGirl&gt;&gt;
			&lt;&lt;drop $backpack &#39;wood&#39; 100&gt;&gt;
			&lt;&lt;drop $backpack &#39;solar_panel&#39; 5&gt;&gt;
			&lt;&lt;link &#39;Go home&#39;&gt;&gt;
				&lt;&lt;set $gameDate.setHours(22)&gt;&gt;
				&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;



</tw-passagedata><tw-passagedata pid="186" name="Settlement" tags="Place bg-settlement" position="1831,2224" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SETTLEMENT&lt;/h1&gt;
&lt;div class=&quot;menu-grid&quot;&gt;
   &lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;16:00&#39;) ? 30 : 1)&gt;&gt;
  &lt;&lt;grid settlement square &#39;Main square&#39; &#39;Main square&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;if ($game.location.settlement_church ?? false)&gt;&gt;
   	&lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;16:00&#39;) ? 30 : 1)&gt;&gt;
  	&lt;&lt;grid settlement church &#39;Church&#39; &#39;Church&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if ($game.location.settlement_shop ?? false)&gt;&gt;
   	&lt;&lt;set $isDisabled = (!timeBetween(&#39;08:00&#39;, &#39;16:00&#39;) ? 30 : 1)&gt;&gt;
  	&lt;&lt;grid settlement settlement_shop &#39;Settlement - shop&#39; &#39;Shop&#39; 0 $isDisabled&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/div&gt; 
&lt;br /&gt;&lt;br /&gt;
[[Leave|Outside]]

&lt;&lt;if isMetChar(&#39;octavia&#39;) &amp;&amp; !$characters.octavia.quests.burned_settlement &amp;&amp; $game.day &gt; 80 &amp;&amp; setup.percentageChance(40)&gt;&gt;
	&lt;&lt;goto &#39;Octavia - burn settlement&#39;&gt;&gt;
&lt;&lt;elseif isMetChar(&#39;octavia&#39;) &amp;&amp; $characters.octavia.quests.burned_settlement &amp;&amp; !$characters.octavia.quests.eve_kidnapped &amp;&amp; ($characters.octavia.quests.burn_day + 5) &lt; $game.day&gt;&gt;
	&lt;&lt;goto &#39;Octavia - eve kidnapped&#39;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;if !$locationEvents.settlement&gt;&gt;
	  &lt;&lt;if randomInteger(0, 100) &lt;= 5&gt;&gt;
		  &lt;&lt;set $locationEvents.settlement = true&gt;&gt;
		  &lt;&lt;goto &#39;Settlement - random event #1&#39;&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="187" name="Sleep eval" tags="" position="1207,280" size="100,100">&lt;&lt;sleep&gt;&gt;</tw-passagedata><tw-passagedata pid="188" name="Main square" tags="Place bg-settlement" position="1943,2339" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;MAIN SQUARE&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/settlement/square_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if !($game.location.settlement_church ?? false)&gt;&gt;
	&lt;&lt;link &#39;Help to build church&#39;&gt;&gt;
		&lt;&lt;goto &#39;Settlement - build church&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $characters.rodger.quests.shop_talk &amp;&amp; !($game.location.settlement_shop ?? false)&gt;&gt;
	&lt;&lt;link &#39;Help to build shop&#39;&gt;&gt;
		&lt;&lt;goto &#39;Settlement - build shop&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if ($player.horse ?? false)&gt;&gt;
	&lt;&lt;link &#39;Horse ride with a girl&#39;&gt;&gt;
		&lt;&lt;run delete $horseRideAction&gt;&gt;
		&lt;&lt;goto &#39;Event: Settlement - horse ride&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Leave|Settlement]]</tw-passagedata><tw-passagedata pid="189" name="Settlement - build church" tags="bg-settlement" position="2577,2227" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;&lt;if typeof $locationData === &#39;undefined&#39;&gt;&gt;
	&lt;&lt;set $locationData = {
		settlement: {
			church_level: 0
		}
	}&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/intro_foundation.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Church done: (&lt;&lt;=$locationData.settlement.church_level * 20&gt;&gt;%)
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $locationData.settlement.church_level === 0&gt;&gt;
	You need &lt;strong class=&quot;iitem&quot;&gt;50 wood&lt;/strong&gt; to help with the building&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $backpack.count(&#39;wood&#39;) &gt;= 50 &amp;&amp; $player.energy &gt;= 80&gt;&gt;
		&lt;&lt;link &#39;Help build church&#39;&gt;&gt;
			&lt;&lt;drop $backpack &#39;wood&#39; 50&gt;&gt;
			&lt;&lt;set $locationData.settlement.church_level++&gt;&gt;
			&lt;&lt;addhours 8&gt;&gt;
			&lt;&lt;energy -80&gt;&gt;
			&lt;&lt;goto &#39;Settlement - build church #1&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;elseif $locationData.settlement.church_level === 1&gt;&gt;
	You need &lt;strong class=&quot;iitem&quot;&gt;50 wood&lt;/strong&gt; to help with the building&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $backpack.count(&#39;wood&#39;) &gt;= 50 &amp;&amp; $player.energy &gt;= 80&gt;&gt;
		&lt;&lt;link &#39;Help build church&#39;&gt;&gt;
			&lt;&lt;drop $backpack &#39;wood&#39; 50&gt;&gt;
			&lt;&lt;addhours 8&gt;&gt;
			&lt;&lt;energy -80&gt;&gt;
			&lt;&lt;set $locationData.settlement.church_level++&gt;&gt;
			&lt;&lt;goto &#39;Settlement - build church #2&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;elseif $locationData.settlement.church_level === 2 || $locationData.settlement.church_level === 3&gt;&gt;
	&lt;&lt;if $player.energy &gt;= 80&gt;&gt;
	  &lt;&lt;link &#39;Help build church&#39;&gt;&gt;
		  &lt;&lt;addhours 8&gt;&gt;
		  &lt;&lt;energy -80&gt;&gt;
		  &lt;&lt;set $locationData.settlement.church_level++&gt;&gt;
		  &lt;&lt;goto &#39;Settlement - build church #2&#39;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	You need &lt;strong class=&quot;iitem&quot;&gt;5 ropes&lt;/strong&gt; to help finish the building&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $backpack.count(&#39;rope&#39;) &gt;= 5 &amp;&amp; $player.energy &gt;= 80&gt;&gt;
		&lt;&lt;link &#39;Finish church church&#39;&gt;&gt;
			&lt;&lt;drop $backpack &#39;rope&#39; 5&gt;&gt;
			&lt;&lt;addhours 8&gt;&gt;
			&lt;&lt;energy -80&gt;&gt;
			&lt;&lt;set $game.location.settlement_church = true&gt;&gt;
			&lt;&lt;goto &#39;Settlement - church finished&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Main square&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="190" name="Settlement - build church #1" tags="bg-settlement" position="2692,2228" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/build_church1.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You don&#39;t waste your time as you jump in helping others.
&lt;br /&gt;
They see that you&#39;ve got some experience with construction so they let you lead.
&lt;br /&gt;&lt;br /&gt;
It&#39;s hot outside and as you continue working you feel your back getting wet from the sweat so you decide to take off your shirt.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/build_church2.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you do, you notice Eve who takes a quick glance at you and then turns away.. But after that you see that she takes a few glances.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;settlement/eve_watch&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.eve.relationship++&gt;&gt;
&lt;&lt;set $characters.rodger.relationship++&gt;&gt;
&lt;strong&gt;Relationship with Eve and Rodger increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Finish&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="191" name="Settlement - build church #2" tags="bg-settlement" position="2810,2228" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/build_church&#39; + randomInteger(3,4) + &#39;.webp&#39;]]
&lt;/center&gt;

Eve couldn&#39;t help but watch as you worked. You&#39;re very muscular compared to her husband and you have a rugged charm that she found irresistible. Every time you looked up and caught her gaze, she blushed and turned away.


&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.eve.relationship++&gt;&gt;
&lt;&lt;set $characters.rodger.relationship++&gt;&gt;
&lt;strong&gt;Relationship with Eve and Rodger increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Finish&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="192" name="Settlement - random event #1" tags="bg-settlement" position="1848,2779" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SETTLEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
 
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/random_event1_girl.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Some girl you&#39;ve seen around comes over to you.
&lt;br /&gt;
&quot;Excuse me? Could you help me with the cow. She doesn&#39;t want to get up and I need to move her to another stockyard.&quot;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Offer your help&#39;&gt;&gt;
	&lt;&lt;replace &quot;#settlement-event1-no&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/settlement/random_event1.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	As she approaches the cow laying on the ground to show you what she has tried, the cow suddenly kicks her and knocks her out.
	&lt;br /&gt;
	You look around but nobody saw it or is around to help.
	&lt;br /&gt;&lt;br /&gt;
	You decide to carry her over to the closest pile of straw.
	&lt;br /&gt;&lt;br /&gt;
		
	&lt;div id=&quot;settlement-event1-help&quot;&gt;
	  &lt;&lt;linkreplace &#39;Look for help&#39;&gt;&gt;
			&lt;&lt;replace &quot;#settlement-event1-use&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
				&lt;center&gt;
					[img[setup.ImagePath+&#39;places/settlement/random_event1_help.webp&#39;]]
				&lt;/center&gt;
				&lt;br /&gt;&lt;br /&gt;
				You yell for help and Eve hears you and comes running.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;eve&gt;&gt;
					Thank you so much &lt;&lt;=$player.name&gt;&gt;. We will take care of her.
				&lt;&lt;/eve&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;if $characters.eve.relationship &lt; 20&gt;&gt;
					&lt;&lt;set $characters.eve.relationship++&gt;&gt;
					&lt;strong&gt;Relationship with Eve increased by 1&lt;/strong&gt;
				&lt;&lt;else&gt;&gt;
					You can&#39;t increase relationship with Eve with this action anymore
				&lt;&lt;/if&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;link &#39;Leave&#39;&gt;&gt;
					&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
				&lt;&lt;/link&gt;&gt;
	  &lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	
	&lt;div id=&quot;settlement-event1-use&quot;&gt;
	  &lt;&lt;linkreplace &#39;Use her&#39;&gt;&gt;
	  		&lt;&lt;replace &quot;#settlement-event1-help&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
		  	&lt;&lt;set $player.goodwill--&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/settlement/random_event1_fucked0.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			You pull her behind the pile of straw and take off her clothes.
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/settlement/random_event1_fucked1.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			As she lays unconscious you shove your dick inside her pussy and fuck her as hard has you can while keeping your head up to see if someone is coming.
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/settlement/random_event1_fucked2.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			You pull your throbbing dick out and cum all over her face. While your cum is still shooting out of your dick she slowly starts to wake up.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Run&#39;&gt;&gt;
				&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
	  &lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	
&lt;&lt;/linkreplace&gt;&gt;

&lt;div id=&quot;settlement-event1-no&quot;&gt;
  &lt;&lt;link &#39;Say no&#39;&gt;&gt;
	  &lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="193" name="Buy a round for everyone" tags="bg-underground" position="2612,1939" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BAR&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;Next round is on me!!!&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/buy_round1.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Everyone cheers and nods at you as you increased they mood drasticly.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/buy_round2.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.reputation &lt; 50&gt;&gt;
	&lt;&lt;set $player.reputation++&gt;&gt;
	&lt;strong&gt;Your reputation increased by 1&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;You can&#39;t increase your reputation anymore with this action&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;addmins 60&gt;&gt;
&lt;&lt;if randomInteger(0, 1) === 0&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/bar/buy_round_girl&#39; + randomInteger(1,2) + &#39;.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	Some girl winks at you as she drinks the beer you bought to her and comes to you.&lt;br /&gt;
	&lt;strong&gt;&quot;Thanks for the drink. How about I repay you for it?&quot;&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Go to the bathroom&#39;&gt;&gt;
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;run delete $slaveId&gt;&gt;
		&lt;&lt;run delete $guestId&gt;&gt;
		&lt;&lt;run delete $charId&gt;&gt;
		&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
		&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
		&lt;&lt;run delete $slaveId, $charId, $guestId&gt;&gt;
		&lt;&lt;set $tmpGirl.location = &#39;nightclub&#39;&gt;&gt;
		&lt;&lt;set $tmpGirlBack = &#39;Bar&#39;&gt;&gt;
		&lt;&lt;set $tmpGirlViewBack = &#39;Bar&#39;&gt;&gt;
		&lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#39;No thanks&#39;&gt;&gt;
		&lt;&lt;goto &#39;Bar&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
[[Leave|Bar]]</tw-passagedata><tw-passagedata pid="194" name="Settlement - church finished" tags="bg-settlement" position="2918,2230" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;

&lt;br /&gt;&lt;br /&gt;
A smile slowly appears on everyone&#39;s faces as you all slowly put last touches to finish the church. A few additional nails in a few places, a few brushes of paint and place was almost finished.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/finish_church.webp&#39;]]
	&lt;br /&gt;&lt;br /&gt;
	[img[setup.ImagePath+&#39;places/settlement/build_church3.webp&#39;]]
	&lt;br /&gt;&lt;br /&gt;
&lt;/center&gt;
	Everyone cheers, and as Eve passes you she smiles and gently puts a hand on your shoulder.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;eve&gt;&gt;We should celebrate. We wouldn&#39;t have done it without you&lt;&lt;/eve&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set $characters.eve.relationship += 5&gt;&gt;
	&lt;strong&gt;Relationship with Eve increased by 5&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	You return a smile to Eve, but your eye contact interrupts Roger, who&#39;s running toward the church.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;rodger&gt;&gt;
		HIDE! They&#39;ve found us! Just do what the say and do not resist, please!
	&lt;&lt;/rodger&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement - church finished #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="195" name="Church" tags="Place bg-settlement" position="1943,2446" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/settlement/church_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $charactersInLocation[&#39;church&#39;].includes(&#39;rodger&#39;) &amp;&amp; !$characters.rodger.talked&gt;&gt;
	&lt;&lt;link &#39;Talk with Rodger&#39;&gt;&gt;
		&lt;&lt;set $characters.rodger.talked = true&gt;&gt;
		&lt;&lt;goto &#39;Rodger - church talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $characters.rodger.quests.book &amp;&amp; timeBetween(&#39;08:00&#39;, &#39;16:00&#39;)&gt;&gt;
  &lt;&lt;link &#39;Read book&#39;&gt;&gt;
	  &lt;&lt;goto &#39;Church - read book&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Leave|Settlement]]</tw-passagedata><tw-passagedata pid="196" name="Childbirth" tags="" position="3277,470" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;game/misc/childbirth1.webp&#39;]]
&lt;/center&gt;

You hear screams and you rush toward the source. As you get to your destination you realize it&#39;s &lt;&lt;=$tmpGirl.name&gt;&gt;.

Her contractions grew stronger, &lt;&lt;=$tmpGirl.name&gt;&gt; knew that she didn&#39;t have much time left. She asks you to create a makeshift birthing area.

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.count(&#39;towel&#39;) &gt;= 5 || true&gt;&gt;
	&lt;&lt;linkreplace &#39;Grab towels and make a birthing area&#39;&gt;&gt;
		&lt;&lt;drop $backpack &#39;towel&#39; 5&gt;&gt;
	  &lt;center&gt;
		  [img[setup.ImagePath+&#39;game/misc/childbirth2.jpg&#39;]]
	  &lt;/center&gt;
	  &lt;br /&gt;&lt;br /&gt;
	  You lay down towels on the ground and hope that will do. 
	  &lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;else&gt;&gt;
	You look around but see nothing that could work (missing towels)
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
	
&lt;&lt;linkreplace &#39;Continue&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;game/misc/childbirth3.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;addhours 7&gt;&gt;
	&lt;&lt;energy -70&gt;&gt;
	The labor was long and painful, but &lt;&lt;=$tmpGirl.name&gt;&gt; was determined to bring her child into the world. Finally, after hours of pushing, she heard the sound of a baby&#39;s cry.&lt;br /&gt;
	&lt;&lt;=$tmpGirl.name&gt;&gt; held her newborn child close, tears streaming down her face. She knew that they were still in a dangerous situation, but for the moment, all that mattered was the new life in her arms.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;game/misc/childbirth4.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set _childGender = randomInteger(0,1)&gt;&gt;
	Congratulation, it&#39;s a &lt;&lt;if !_childGender&gt;&gt;&lt;span style=&quot;color:pink&quot;&gt;girl&lt;/span&gt;&lt;&lt;else&gt;&gt; &lt;span style=&quot;color:blue&quot;&gt;boy&lt;/span&gt;&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	What will be &lt;&lt;if !_childGender&gt;&gt;her&lt;&lt;else&gt;&gt;his&lt;&lt;/if&gt;&gt; name: &lt;&lt;textbox &quot;_childName&quot; &#39;&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Continue&#39;&gt;&gt;
		&lt;&lt;set _mother = $tmpGirl&gt;&gt;
		
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;set _child = (!_childGender ? $tmpGirl : $tmpGuy)&gt;&gt;
		&lt;&lt;set 
		  	_child.birthDate = $gameDate,
		  	_child.anal = 0,
			_child.bj = 0,
			_child.food = 100,
			_child.pussy = 0,
			_child.relationship = 0,
			_child.virgin = true,
			_child.strength = 0,
			_child.orgasms = 0,
			_child.name = _childName,
			_child.birthDate = $gameDate,
			_child.beauty = _mother.beauty,
			_child.race = _mother.race,
			_child.breasts = _mother.breasts,
			_child.hair = _mother.hair,
			_child.strength = Math.round(_mother.strength / 2, 0),
			_child.virgin = true
		&gt;&gt;
		
		&lt;&lt;set _child.family = {}&gt;&gt;
		&lt;&lt;set _child.family.mother = _mother.id&gt;&gt;
		&lt;&lt;if _mother.pregnancy_father&gt;&gt;
			&lt;&lt;set _child.family.father = _mother.pregnancy_father&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		
		&lt;&lt;if typeof _mother.family === &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set _mother.family = {
				kids: []
			}&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;run _mother.family.kids.push(_child.id)&gt;&gt;
		&lt;&lt;run delete _mother.pregnancy&gt;&gt;
		&lt;&lt;if $pregnancyHappening.type === &#39;slave&#39;&gt;&gt;
			&lt;&lt;set $slaves[$pregnancyHappening.id] = _mother&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;set $guests[$pregnancyHappening.id] = _mother&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		
		&lt;&lt;if ($game.location.nursery ?? false)&gt;&gt;
			&lt;&lt;run $nursery.push(_child)&gt;&gt;
		&lt;&lt;elseif ($game.location.guesthouse ?? false)&gt;&gt;
			&lt;&lt;run $guests.push(_child)&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;run $slaves.push(_child)&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;run delete $pregnancyHappening&gt;&gt;
		&lt;&lt;goto &#39;Bedroom&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="197" name="Guest move to basement" tags="" position="1335,279" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;GUEST HOUSE&lt;/h1&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/guesthouse/move_to_basement.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You tell &lt;&lt;=$tmpGirl.name&gt;&gt; that you will take her basement cell. &lt;br /&gt;
She starts to resist and scream and tries to escape your grab and fails as you throw
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/guesthouse/move_to_basement2.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She starts to cry while laying on the ground.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $tmpGirl.relationship -= 30&gt;&gt;
&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; relationship decreased by 30&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;companionRemove &#39;guest:&#39; + $guestId&gt;&gt;
	&lt;&lt;companionRearange $guestId&gt;&gt;
	&lt;&lt;set $tmpGirl.assignedTo = null&gt;&gt;
	&lt;&lt;run $guests.splice($guestId, 1)&gt;&gt;		
	&lt;&lt;set $slaves.push($tmpGirl)&gt;&gt;
	&lt;&lt;run delete $guestId&gt;&gt;
	&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="198" name="Settlement - church finished #2" tags="bg-settlement" position="3034,2229" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;MAIN SQUARE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/finish_church_attack1.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You look behind Rodger and notice at least 5 people, all geared up with leather jackets, with their faces covered with dirt or blood and they&#39;re coming closer and closer
&lt;br /&gt;&lt;br /&gt;
Rodger repeats himself that everyone should stay calm and not resist as he&#39;s trying to hide Eve behind a few other people.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;octavia&gt;&gt;
	Who we got here? Who are you? Answer!
&lt;&lt;/octavia&gt;&gt;
&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
Please! We mean no harm! We&#39;re just small group of people who&#39;re trying to live quietly and we won&#39;t disturb you
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Your group slowly steps back, but not one of the biggest guys from the settlement. He stands his ground
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;octavia&gt;&gt;
This is our land! And we&#39;ve come to take what&#39;s ours!
&lt;&lt;/octavia&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Suddenly the big guy who stood on the ground yells at her that she can go fuck herself and this place is theirs
&lt;br /&gt;&lt;br /&gt;
Without hesitation she acts...
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/finish_church_attack2.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She slices big guy guts open and he drops down and bleeds in seconds as she stands up and looks at Rodger
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/finish_church_attack3.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;octavia&gt;&gt;
Now listen carefully everyone. Noone has to die; we just need a few things from you as you use your land. And don&#39;t worry, we&#39;ll come each week to collect.
&lt;&lt;/octavia&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You look behind you and see noone willing to fight back with you...
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Fight them anyway&#39;&gt;&gt;
	&lt;&lt;set $enemies = []&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
  	&lt;&lt;fight $enemies &#39;Settlement - church finished - won&#39; &#39;Settlement - church finished - lost&#39; true&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Keep quiet&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement - church finished - done&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;newgirl&gt;&gt;
&lt;&lt;set 
	$tmpGirl.hair = &#39;black&#39;,
	$tmpGirl.strength = 100,
	$tmpGirl.name = &#39;Octavia&#39;,
	$tmpGirl.beauty = 95,
	$tmpGirl.birthDate = setup.getBirthDate(19),
	$tmpGirl.race = &#39;white&#39;,
	$tmpGirl.quests = {}
&gt;&gt;
&lt;&lt;set $characters.octavia = $tmpGirl&gt;&gt;




</tw-passagedata><tw-passagedata pid="199" name="Settlement - church finished - lost" tags="bg-settlement" position="3148,2232" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;MAIN SQUARE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;perkAdd &#39;beaten&#39;&gt;&gt; 
&lt;&lt;perkAdd &#39;bleeding&#39;&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/finish_church_lost.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you open your eyes girl is looking straight at you with smile on her face
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;octavia&gt;&gt;
You&#39;re one stupid mother fucker, I give you that. I&#39;ll let you live, for now. Maybe one day you will decide to join us.  
&lt;&lt;/octavia&gt;&gt;

&lt;&lt;set _moneyTaken = Math.min($player.money, 100)&gt;&gt;
&lt;&lt;set $player.money -= _moneyTaken&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She checks your pockets and manages to finds &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_moneyTaken&gt;&gt;&lt;/strong&gt; caps.
&lt;br /&gt;&lt;br /&gt;
You keep laying on the ground as you see them leaving the settlement.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;eve&gt;&gt;
Are you okey &lt;&lt;=$player.name&gt;&gt;? Thank you for trying! 
&lt;&lt;/eve&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.eve.relationship += 5&gt;&gt;
&lt;strong&gt;Eve relationship increased by 5&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
That was stupid! Please go home &lt;&lt;=$player.name&gt;&gt;. Please!
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;


</tw-passagedata><tw-passagedata pid="200" name="Settlement - church finished - won" tags="bg-settlement" position="3263,2231" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;MAIN SQUARE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;perkAdd &#39;beaten&#39;&gt;&gt; 
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/finish_church_won.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You look at the girl and see fear in her eyes as she stares at you and her people lying on the ground.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.octavia.sub += 10&gt;&gt;
&lt;strong&gt;Octavia&#39;s submission increased by 10&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;octavia&gt;&gt;
I will remember you. You&#39;re dead! 
&lt;&lt;/octavia&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You look at her as they flee the settlement.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;eve&gt;&gt;
Are you okey &lt;&lt;=$player.name&gt;&gt;? That was something. You&#39;re bravest man I know. 
&lt;&lt;/eve&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.eve.relationship += 5&gt;&gt;
&lt;strong&gt;Eve relationship increased by 5&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
That was stupid! Please go home &lt;&lt;=$player.name&gt;&gt;. Please!
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;


</tw-passagedata><tw-passagedata pid="201" name="Settlement - church finished - done" tags="bg-settlement" position="3366,2231" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;MAIN SQUARE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/finish_church_attack_done.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
They take bags with vegetables, flour, and other stuff. &lt;br /&gt;
While they&#39;re doing that, girl comes toward you and checks your pocket, grabbing her crouch for a second before finding some caps in your pocket. 
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/grab_crotch.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She smiles and rejoins the group as they walk away from the settlement.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _moneyTaken = Math.min($player.money, 50)&gt;&gt;
&lt;&lt;set $player.money -= _moneyTaken&gt;&gt;
You lost &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_moneyTaken&gt;&gt;&lt;/strong&gt; caps.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
Thank you for not doing anything stupid!
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.rodger.relationship += 5&gt;&gt;
&lt;strong&gt;Rodger relationship increased by 5&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;


</tw-passagedata><tw-passagedata pid="202" name="Rodger - church talk" tags="bg-settlement" position="2267,2340" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;

&lt;&lt;if !$characters.rodger.quests.book &amp;&amp; randomInteger(0,2) == 2&gt;&gt;
	&lt;&lt;set $characters.rodger.quests.book = true&gt;&gt;
	&lt;&lt;goto &#39;Rodger - book&#39;&gt;&gt;
&lt;&lt;elseif !$characters.rodger.quests.champagne &amp;&amp; setup.percentageChance(60)&gt;&gt;
	&lt;&lt;set $characters.rodger.quests.champagne = true&gt;&gt;
	&lt;&lt;goto &#39;Rodger - champagne&#39;&gt;&gt;
&lt;&lt;elseif $characters.rodger.quests.champagne &amp;&amp; !$characters.eve.quests.sex &amp;&amp; $game.cabinName&gt;&gt;
	&lt;&lt;set $characters.eve.quests.sex = true&gt;&gt;
	&lt;&lt;goto &#39;Rodger - champagne sex&#39;&gt;&gt;
&lt;&lt;elseif $characters.eve.quests.sex &amp;&amp; $game.day &gt; $characters.rodger.quests.champagne_day + randomInteger(15, 25)&gt;&gt;
	&lt;&lt;goto &#39;Eve champagne&#39;&gt;&gt;
&lt;&lt;elseif ($game.cabinName ?? false) &amp;&amp; !$characters.rodger.quests.shop_talk&gt;&gt;
	&lt;&lt;goto &#39;Rodger - shop&#39;&gt;&gt;
&lt;&lt;elseif ($game.location.settlement_shop ?? false) &amp;&amp; !$characters.rodger.quests.horse&gt;&gt;
	&lt;&lt;goto &#39;Rodger - horse #1&#39;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set _rodgerText = either([
		&#39;One time we stayed with the group, sharing our faith and helping them to find hope in the midst of their despair. As they listened to my words, they began to believe that there was a better future waiting for them.&#39;,
		&quot;I don&#39;t usually talk about her, but my wife before she met me worked at some place called &lt;strong class=&#39;iitem&#39;&gt;The Sanctuary&lt;/strong&gt;. Nasty place, she barely made out. I am not sure what she did there as she doesn&#39;t want to talk about that, maybe you could pursuit her?&quot;,
		&#39;Somtimes me and others survivors encountered other groups of people, some of whom were hostile, others desperate for help. I still continue to share my faith with all those I meet, offering them hope and compassion in a world where both are in short supply.&#39;
	])&gt;&gt;
	&lt;&lt;rodger&gt;&gt;
		&lt;&lt;=_rodgerText&gt;&gt;
	&lt;&lt;/rodger&gt;&gt;
	
	&lt;&lt;if $characters.rodger.relationship &lt;= 20&gt;&gt;
	  &lt;&lt;set $characters.rodger.relationship++&gt;&gt;
	  &lt;br /&gt;&lt;br /&gt;
	  &lt;strong&gt;Relationship with Rodger increased by 1&lt;/strong&gt;
	&lt;&lt;else&gt;&gt;
		&lt;strong&gt;You can&#39;t increase relationship with this action anymore.&lt;/strong&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Church&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="203" name="Random event - hospital #13" tags="" position="6331,128" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
 &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/hospital_outside.jpg&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
 You explore around the city borders and stumble upon a hospital.&lt;br /&gt;
 From outside it look like it has been robbed numerous times.&lt;br /&gt;
 All windows are broken and by the look nothing should be left inside to grab.
 
 &lt;br /&gt;&lt;br /&gt;
 &lt;&lt;linkreplace &#39;Go inside hospital&#39;&gt;&gt;
  &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/hospital_inside.jpg&#39;]]
 &lt;/center&gt;&lt;br /&gt;&lt;br /&gt;
 	&lt;&lt;if randomInteger(1,2) === 1&gt;&gt;
		&lt;&lt;pickup $backpack &#39;antibiotics&#39; 2&gt;&gt;
		You found &lt;strong class=&quot;iitem&quot;&gt;2&lt;/strong&gt; bottles of &lt;strong class=&quot;iitem&quot;&gt;antibiotics&lt;/strong&gt;
	&lt;&lt;else&gt;&gt;
		You found nothing and decided to leave
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
 &lt;&lt;/linkreplace&gt;&gt;
 &lt;&lt;link &#39;Leave&#39;&gt;&gt;
 	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
 &lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="204" name="Rodger - book" tags="bg-settlement" position="2376,2339" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
Glad you&#39;re here &lt;&lt;=$player.name&gt;&gt;! I need your help.&lt;br /&gt;
Could you, please, go and try to find an old book in my friends old house?&lt;br /&gt;
I could use it in the church. Eve will go with you and guide you. 
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_book3.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;eve&gt;&gt;
Oh I will gladly go with you, &lt;&lt;=$player.name&gt;&gt;
&lt;&lt;/eve&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Rodger - book #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="205" name="Rodger - book #2" tags="" position="2485,2339" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;&lt;addhours 6&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_book_train.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You started your journey together with Eve. She suggested that you walk along the railway track. You kept walking for few hours before you reached destroyed train station.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Ask her about her before she met Rodger&#39;&gt;&gt;
	&lt;&lt;eve&gt;&gt;
		Why you&#39;re so interested in my past?&lt;br /&gt;
		I lived in a place called &lt;strong class=&quot;iitem&quot;&gt;The Santuary&lt;/strong&gt;. At that time I was young and I thought that&#39;s what I wanted. Later it changed when I escaped and met Rodger. He helped me a lot. Life is much simplier with him, maybe even too much.
	&lt;&lt;/eve&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She understood she said too much and turned away and kept walking.
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Rodger - book #3&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="206" name="Church - read book" tags="bg-settlement" position="2055,2447" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addhours 4&gt;&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/church_read_book.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;i&gt;&quot;&lt;&lt;=either([
&#39;The path to enlightenment is not an easy one, for it requires us to confront our own limitations and transcend them. But for those who are willing to take up the challenge, the rewards are boundless, and the possibilities infinite&#39;,
&#39;Those who seek power for its own sake will ultimately find only emptiness and despair. True strength lies in the ability to serve others, to uplift the weak and the oppressed, and to embody the virtues of humility and compassion.&#39;,
&#39;The key to unlocking the secrets of the universe lies not in the accumulation of knowledge, but in the letting go of preconceptions and the embracing of the unknown.&#39;,
&#39;Beyond the boundaries of our mortal realm lies a world of untold wonders and terrors. Those who seek to uncover its secrets must be prepared to face the darkness within their own souls,   for the journey to enlightenment is not without peril.&#39;
])&gt;&gt;&quot;&lt;/i&gt;
&lt;&lt;set $player.int++&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Your intelligence increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.horny &gt;= 50&gt;&gt;
	You&#39;re all alone and you feel a horny as you see some sexual drawings in the book.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Masturbate&#39;&gt;&gt;
		&lt;&lt;goto &#39;Church - read book masturbate&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Church&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="207" name="Rodger - book #3" tags="" position="2594,2341" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;&lt;addhours 3&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_book_house.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
After few more hour of walk you finally reached an old house. You went in and Even instantly went upstairs as she would know where was it. 
&lt;br /&gt;
You follow her and without a surprise - she found it very quickly. 
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_book2.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You picked up the book and read the title &quot;&lt;strong&gt;Book of Knowledge&lt;/strong&gt;&quot;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;
	What is in it? What it is about?
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;
&lt;&lt;eve&gt;&gt;
	Oh I don&#39;t really know. Rodger just really wanted it for the church. You can come and read it anytime you want. It will always be there. 
&lt;&lt;/eve&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.eve.relationship++&gt;&gt;
&lt;strong&gt;Relationship with Eve increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Go back to the settlement&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="208" name="Scavenging - didnt came home" tags="" position="4732,996" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;GUEST HOUSE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_empty_bed.png&#39;]]
&lt;/center&gt;
You went to the guest house and noticed that
&lt;strong&gt;&lt;&lt;=$guests[$scavengingDidntReturn].name&gt;&gt;&lt;/strong&gt; didn&#39;t came home from the scavenging last night
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Go look for her&#39;&gt;&gt;
	&lt;&lt;goto &#39;Scavenging - look for girl&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Ignore&#39;&gt;&gt;
	&lt;&lt;if randomInteger(0,1) === 1&gt;&gt;
		&lt;&lt;run $guests.splice($scavengingDidntReturn, 1)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;goto &#39;Bedroom&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="209" name="Scavenging - look for girl" tags="" position="4848,996" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_walk.webp&#39;]]
&lt;/center&gt;
&lt;&lt;addhours 3&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You took your stuff and decided to walk in the direction you thought she would go. You walk for a few hours till you reached crossroads and you had to decide where to go next.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _crossroadOptions = either(
	&#39;Scavenging - look for girl dead&#39;,
	&#39;Scavenging - look for girl alive&#39;,
	&#39;Scavenging - look for girl fight&#39;,
	&#39;Scavenging - look for girl not found&#39;
)&gt;&gt;
&lt;&lt;addhours 3&gt;&gt;
&lt;&lt;link &#39;Go left&#39;&gt;&gt;
	&lt;&lt;goto &#96;_crossroadOptions&#96;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Go straight&#39;&gt;&gt;
	&lt;&lt;goto &#96;_crossroadOptions&#96;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Go right&#39;&gt;&gt;
	&lt;&lt;goto &#96;_crossroadOptions&#96;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="210" name="Scavenging - look for girl dead" tags="" position="4739,1104" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_dead.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You kept walking for few hours and suddently you noticed someone in the distance on the ground. Your rushed toward her and found that it&#39;s her.
&lt;br /&gt;
Her clothes were ripped apart and she was left laying on the ground with a knife wound. She&#39;s dead. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Return home&#39;&gt;&gt;
	&lt;&lt;set _eventCompanionKey = &#39;guest:&#39; + $scavengingDidntReturn&gt;&gt;
	&lt;&lt;companionRemove &#96;_eventCompanionKey&#96;&gt;&gt;
	&lt;&lt;companionRearange $scavengingDidntReturn&gt;&gt;
	&lt;&lt;run $guests.splice($scavengingDidntReturn, 1)&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="211" name="Scavenging - look for girl alive" tags="" position="4845,1104" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_walk_girl.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
After few hours of walking you finally noticed her in the distance as she walked towards you.&lt;br /&gt;
She noticed you and started to run towards you. When she finally reached you she jumped around your neck and huged you strongly with tears all over her eyes.
&lt;br /&gt;
&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_hug.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;
&lt;br /&gt;
She told you that she met some grounders and decided to hide till they went away
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &quot;Tell her that you&#39;re disappointed&quot;&gt;&gt;
	She wiped her eyes and gets on her knees while looking at you and telling that she&#39;s really sorry and that won&#39;t happen again. &lt;br /&gt;
	She unzips your pants and puts your dick in her mouth and starts to suck it.
	&lt;center&gt;
  		[img[setup.ImagePath+&#39;places/outside/scavenging_bj.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set $guests[$scavengingDidntReturn].sub += 5&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$guests[$scavengingDidntReturn].name&gt;&gt; submission increased by 5&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Tell her turn around&#39;&gt;&gt;
		She instantly gets up, pulls down her pants and turns around and presses herself against the fence.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
  			[img[setup.ImagePath+&#39;places/outside/scavenging_ass.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You grab your dick and shove it inside her ass and fuck her while she still sobs up and keeps telling you that she&#39;s really sorry. 
		&lt;br /&gt;
		&lt;br /&gt;
		&lt;&lt;set $guests[$scavengingDidntReturn].sub += 5&gt;&gt;
		&lt;strong&gt;&lt;&lt;=$guests[$scavengingDidntReturn].name&gt;&gt; submission increased by 5&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Take her home&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="212" name="Scavenging - look for girl fight" tags="" position="4955,996" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_fuck.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You took the route through the forest and after some time you heard a scream in the distance. Someone screamed for help. You rushed toward the sound and noticed your girl, tied up to the tree as two guys fucked her and she couldn&#39;t do anything.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Keep watching&#39;&gt;&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_cum.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She begged them to stop while she still tried to scream for help. After few rough minutes they untied her and punched her few times as one of them hold her by hair and second one started to cum all over her face
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
	&lt;&lt;set $enemies = []&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
	&lt;&lt;if randomInteger(0, 10) === 0&gt;&gt;
		&lt;&lt;set 
			$tmpGuy.inventory = [],
			$tmpGuy.inventory.push(&#39;knife&#39;)
		&gt;&gt;
	&lt;&lt;/if&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
  	&lt;&lt;fight $enemies &#39;Scavenging - look for girl fight won&#39; &#39;Scavenging - look for girl fight lost&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;link &#39;Leave her&#39;&gt;&gt;
	&lt;&lt;run $guests.splice($scavengingDidntReturn, 1)&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="213" name="Scavenging - look for girl not found" tags="" position="4955,1104" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_walk.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You kept walking but didn&#39;t saw a living soul anywhere. After few more hours your hope to find the girl was gone.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Return home&#39;&gt;&gt;
	&lt;&lt;if randomInteger(0,1) === 1&gt;&gt;
		&lt;&lt;run $guests.splice($scavengingDidntReturn, 1)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="214" name="Scavenging - look for girl fight won" tags="" position="5062,997" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
  [img[setup.ImagePath+&#39;places/outside/scavenging_untie.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As both guys were laying on the ground, you went to &lt;&lt;=$guests[$scavengingDidntReturn].name&gt;&gt; and untied her hands.
&lt;br /&gt;&lt;br /&gt;
She felt ashamed and couldn&#39;t even look at you.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &quot;Tell her that you&#39;re disappointed&quot;&gt;&gt;
	She wiped her eyes and gets on her knees while looking at you and telling that she&#39;s really sorry and that won&#39;t happen again. &lt;br /&gt;
	She unzips your pants and puts your dick in her mouth and starts to suck it.
	&lt;center&gt;
  		[img[setup.ImagePath+&#39;places/outside/scavenging_bj.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set $guests[$scavengingDidntReturn].sub += 5&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$guests[$scavengingDidntReturn].name&gt;&gt; submission increased by 5&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Tell her turn around&#39;&gt;&gt;
		She instantly gets up, pulls down her pants and turns around.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
  			[img[setup.ImagePath+&#39;places/outside/scavenging_ass.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Take her home&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;


</tw-passagedata><tw-passagedata pid="215" name="Scavenging - look for girl fight lost" tags="" position="5175,994" size="100,100">&lt;&lt;run $guests.splice($scavengingDidntReturn, 1)&gt;&gt;
&lt;&lt;goto &#39;Outside&#39;&gt;&gt;</tw-passagedata><tw-passagedata pid="216" name="Church - read book masturbate" tags="bg-settlement" position="2165,2447" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;horny 10&gt;&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/church_mast.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You stroke your hard cock and thing about fucking some tight pussy. You almost got caught as you didn&#39;t hear someone enter.
As you almost pull your hard dick back in your pants, Eve enters the room but acts like she didn&#39;t saw anything.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/church_mast_caught.webp&#39;]]
&lt;/center&gt;
&lt;&lt;set $player.int++&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;eve&gt;&gt;H, Hey... &lt;&lt;=$player.name&gt;&gt;! Sorry, didn&#39;t knew you were here&lt;&lt;/eve&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if typeof $characters.eve.corruption === &#39;undefined&#39;&gt;&gt;
	&lt;&lt;set $characters.eve.corruption = 0&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if typeof $characters.eve.corruption == &#39;undefined&#39;&gt;&gt;
&lt;&lt;set $characters.eve.corruption = 0&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $characters.eve.corruption &lt; 20&gt;&gt;
	&lt;&lt;set $characters.eve.corruption++&gt;&gt;
	&lt;strong&gt;Eve corruption increased by 1&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;Can&#39;t increase Eve corruption with this action anymore&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.eve.quests.sex&gt;&gt;
	&lt;&lt;eve&gt;&gt;
		You can continue if you like
	&lt;&lt;/eve&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Continue&#39;&gt;&gt;
		&lt;&lt;video &#39;/settlement/book_eve_1&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You pull out your hard cock and continue to stroke it while Eve tries not to look. 
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;/settlement/book_eve_2&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You notice she&#39;s peeking but she&#39;s to shy to jump in so you device to grab her hand and move it towards your cock. She grabs it and slowly increases the speed. 
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;/settlement/book_eve_3&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You cum all over your shirt but she doesn&#39;t stop! With big smile on her face she still continues to stroke your dick as fast as she possible can but after some time just releases it and runs out of the church. 
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;if $characters.eve.corruption &lt; 30&gt;&gt;
			&lt;&lt;set $characters.eve.corruption++&gt;&gt;
			&lt;strong&gt;Eve corruption increased by 1&lt;/strong&gt;
		&lt;&lt;else&gt;&gt;
			&lt;strong&gt;Can&#39;t increase Eve corruption with this action anymore&lt;/strong&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;horny_reset&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Church&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="217" name="Guest view assign to" tags="" position="2149,98" size="100,100">Where do you want to assign &lt;&lt;=setup.pronounceWho($tmpGirl)&gt;&gt;?
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $tmpGirl.relationship &gt; 30 &amp;&amp; setup.assignedToCount(&#39;garden&#39;) &lt; $workersLimitGarden&gt;&gt;
	&lt;div&gt;
	  &lt;&lt;link &#39;Assign to garden&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirl.assignedTo = &#39;garden&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirl.gardenDay = 0&gt;&gt;
		  &lt;&lt;dialogclose&gt;&gt;
		  &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
	  &lt;&lt;/link&gt;&gt; (Provides you with food)
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$tmpGirl.gender &amp;&amp; !setup.getPersonsForLocation($guests, &#39;kitchen&#39;).length &amp;&amp; !$tmpGirl.assignedTo&gt;&gt;
	&lt;div&gt;
	  &lt;&lt;link &#39;Assign to kitchen&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirl.assignedTo = &#39;kitchen&#39;&gt;&gt;
		  &lt;&lt;dialogclose&gt;&gt;
		  &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !setup.getPersonsForLocation($guests, &#39;shop&#39;).length &amp;&amp; !$tmpGirl.assignedTo &amp;&amp; ($game.location.shop ?? false) &amp;&amp; ($tmpGirl.traits ?? []).includes(&#39;shopkeeper&#39;)&gt;&gt;
	&lt;div&gt;
	  &lt;&lt;link &#39;Assign to shop&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirl.assignedTo = &#39;shop&#39;&gt;&gt;
		  &lt;&lt;dialogclose&gt;&gt;
		  &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
	  &lt;&lt;/link&gt;&gt; (Will work in shop and sell/buy items for you automatically)
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$tmpGirl.gender &amp;&amp; !setup.getPersonsForLocation($guests, &#39;mistress&#39;).length &amp;&amp; !$tmpGirl.assignedTo &amp;&amp; ($tmpGirl.traits ?? []).includes(&#39;sadistic&#39;)&gt;&gt;
	&lt;div&gt;
	  &lt;&lt;link &#39;Assign as mistress&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirl.assignedTo = &#39;mistress&#39;&gt;&gt;
		  &lt;&lt;dialogclose&gt;&gt;
		  &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
	  &lt;&lt;/link&gt;&gt; (Keeps slaves in order. Increases submission for them)
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;

&lt;div&gt;
  &lt;&lt;link &#39;Assign to forest&#39;&gt;&gt;
	  &lt;&lt;set $tmpGirl.assignedTo = &#39;forest&#39;&gt;&gt;
	  &lt;&lt;dialogclose&gt;&gt;
		  &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt; (Provides you with wood)
&lt;/div&gt;

&lt;div&gt;
  &lt;&lt;link &#39;Assign to scavenging&#39;&gt;&gt;
	  &lt;&lt;set $tmpGirl.assignedTo = &#39;scavenging&#39;&gt;&gt;
	  &lt;&lt;dialogclose&gt;&gt;
	  &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt; (Provides you with plastic, glass, rope, etc)
&lt;/div&gt;

&lt;&lt;if $tmpGirl.relationship &gt;= 50 &amp;&amp; !$tmpGirl.gender &amp;&amp; !$tmpGirl.assignedTo&gt;&gt;
	&lt;&lt;link &#39;Assign to streets&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.assignedTo = &#39;streets&#39;&gt;&gt;
		&lt;&lt;dialogclose&gt;&gt;
		&lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
	&lt;&lt;/link&gt;&gt; (Earns you money as hooker)
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $tmpGirl.strength &gt;= 30&gt;&gt;
	&lt;div&gt;
	  &lt;&lt;link &#39;Assign as guard&#39;&gt;&gt;
		  &lt;&lt;set $tmpGirl.assignedTo = &#39;guard&#39;&gt;&gt;
		  &lt;&lt;dialogclose&gt;&gt;
		  &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
	  &lt;&lt;/link&gt;&gt; (Decreases the chance of someone breaking in and stealing, and sometimes might catch intruders)
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;


</tw-passagedata><tw-passagedata pid="218" name="Girl - workout together" tags="" position="3081,583" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;&lt;addmins 60&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/workout_guest1_&#39; + randomInteger(1,2) + &#39;.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You start with some light stretches to warm up your muscles and prevent injury. You chat and catch up as you do some arm circles, shoulder rolls, and leg stretches.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $tmpGirl.strength++&gt;&gt;
&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; strength increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _wantToHaveFunWorkoutTogether = $tmpGirl.horny &gt; 50 || setup.percentageChance(70)&gt;&gt;
&lt;&lt;linkreplace &#39;Pull down her shorts&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/cabin/workout_guest2_&#39; + randomInteger(1,2) + &#39;.webp&#39;]]
  	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if _wantToHaveFunWorkoutTogether&gt;&gt;
		She giggles and smiles at you as you pull down her shorts.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
		&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; relationship increased by 1&lt;/strong&gt;
	&lt;&lt;else&gt;&gt;
		She flinches and asks you to stop. She&#39;s not in the mood right now. 
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/cabin/workout_guest3_&#39; + randomInteger(1,2) + &#39;.webp&#39;]]
  		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You shove your hard dick inside her sweaty pussy and fuck her as she moans.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;if _wantToHaveFunWorkoutTogether&gt;&gt;
			&lt;&lt;set $tmpGirl.horny = 0&gt;&gt;
			&lt;&lt;set $tmpGirl.relationship += 3&gt;&gt;
			&lt;&lt;set $tmpGirl.strength++&gt;&gt;
			&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; relationship increased by 3&lt;/strong&gt;
			&lt;br /&gt;
			&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; strength increased by 1&lt;/strong&gt;
			&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;set $tmpGirl.horny = 0&gt;&gt;
			&lt;&lt;set $tmpGirl.relationship -= 10&gt;&gt;
			&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; relationship decreased by 10&lt;/strong&gt;
			&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Finish&#39;&gt;&gt;
	&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="219" name="Basement event - horny slave" tags="" position="7552,24" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BASEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/basement/horny_slave_beg.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You walk downstairs to the basement to check the girls and as you walk by 
&lt;&lt;=$slaves[$hornySlaveId].name&gt;&gt; she starts to beg you that she wants you.&lt;br /&gt;
She&#39;s horny and want you to take her.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Put dick inside her cell&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/basement/horny_slave_2.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	She drops on her knees and grabs your dick with one hand, strokes it while looking at in and after a brief moment puts it all inside her mouth and sucks it. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set $slaves[$hornySlaveId].relationship++&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$slaves[$hornySlaveId].name&gt;&gt; relationship increased by 1&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Tell her to turn around&#39;&gt;&gt;
		&lt;&lt;set _fucked = true&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/basement/horny_slave_1.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		Without hesitation she drops her pants and turns her ass and presses her asscheeks against cell bars. 
		&lt;br /&gt;
		You grab bars and hold them as you shove your dick inside her moist pussy&lt;br /&gt;
		She moans and begs you not to stop as she trembles while enjoying your dick.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
			&lt;&lt;set $slaves[$hornySlaveId].horny = 0&gt;&gt;
			&lt;&lt;horny_reset&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/basement/horny_slave3.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
				She drops on her knees and tries to catch all your cum in her mouth but fails and a lot of it gets on her face.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;set $slaves[$hornySlaveId].relationship++&gt;&gt;
			&lt;strong&gt;&lt;&lt;=$slaves[$hornySlaveId].name&gt;&gt; relationship increased by 1&lt;/strong&gt;
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;if !_fucked&gt;&gt;
		&lt;&lt;set $slaves[$hornySlaveId].horny -=20&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="220" name="background" tags="" position="1232,12" size="100,100">&lt;&lt;if tags().includes(&#39;bg-kitchen&#39;)&gt;&gt;

&lt;&lt;elseif tags().includes(&#39;bg-underground&#39;)&gt;&gt;
	&lt;&lt;script&gt;&gt;
		$(&#39;html&#39;).css(&#39;background-image&#39;, &#39;url(&quot;&#39; + setup.ImagePath + &#39;/game/misc/bg/underground_city.jpg&quot;)&#39;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;elseif tags().includes(&#39;bg-farm&#39;)&gt;&gt;
	&lt;&lt;script&gt;&gt;
		$(&#39;html&#39;).css(&#39;background-image&#39;, &#39;url(&quot;&#39; + setup.ImagePath + &#39;/game/misc/bg/farm.jpg&quot;)&#39;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;elseif tags().includes(&#39;bg-settlement&#39;)&gt;&gt;
	&lt;&lt;script&gt;&gt;
		$(&#39;html&#39;).css(&#39;background-image&#39;, &#39;url(&quot;&#39; + setup.ImagePath + &#39;/game/misc/bg/settlement.jpg&quot;)&#39;);
	&lt;&lt;/script&gt;&gt;	
&lt;&lt;else&gt;&gt;
	&lt;&lt;script&gt;&gt;
		$(&#39;html&#39;).css(&#39;background-image&#39;, &#39;url(&quot;&#39; + setup.ImagePath + &#39;/game/misc/bg/bg.jpg&quot;)&#39;);
	&lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="221" name="Random event - bikes #14" tags="" position="6327,241" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You took a path through city to check if maybe there&#39;s a new place you have missed.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;explore/bikes&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
While walking through the ruins of the city you notice an old guy and some girl pushing trolley with some junk in it. 
&lt;br /&gt;
They look harmless but you decide to wait a bit. 
&lt;br /&gt;
After some time you hear some noise in the distance...
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;explore/bikes2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;8&lt;/strong&gt; people are driving on motorcycles. One of them tackles an old guy and a few seconds after they just shot his head off.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;explore/bikes3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Girl screams  for help as they pull her off the road and are prepared to rape and kill her afterwards.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Help her&#39;&gt;&gt;
	&lt;&lt;set _isGirl = false&gt;&gt;
	&lt;&lt;if setup.percentageChance(30)&gt;&gt;
		&lt;&lt;set _isGirl = true&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $player.reputation++&gt;&gt;
	&lt;&lt;set $enemies = []&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
	&lt;&lt;set $tmpGuy.strength = 6&gt;&gt;
	&lt;&lt;if randomInteger(0, 10) === 0&gt;&gt;
		&lt;&lt;set 
			$tmpGuy.inventory = [],
			$tmpGuy.inventory.push(&#39;knife&#39;)
		&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;newguy&gt;&gt;
	&lt;&lt;set $tmpGuy.strength = 6&gt;&gt;
	&lt;&lt;if randomInteger(0, 10) === 0&gt;&gt;
		&lt;&lt;set 
			$tmpGuy.inventory = [],
			$tmpGuy.inventory.push(&#39;knife&#39;)
		&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;newguy&gt;&gt;
	&lt;&lt;set $tmpGuy.strength = 6&gt;&gt;
	&lt;&lt;if randomInteger(0, 10) === 0&gt;&gt;
		&lt;&lt;set 
			$tmpGuy.inventory = [],
			$tmpGuy.inventory.push(&#39;knife&#39;)
		&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	
	&lt;&lt;if _isGirl&gt;&gt;
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;set $tmpGuy.strength = 6&gt;&gt;
		&lt;&lt;if randomInteger(0, 10) === 0&gt;&gt;
			&lt;&lt;set 
				$tmpGuy.inventory = [],
				$tmpGuy.inventory.push(&#39;knife&#39;)
			&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;/if&gt;&gt;
  	&lt;&lt;fight $enemies &#39;Random event - bikes #14 won&#39; &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;set $player.goodwill--&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="222" name="Random event - bikes #14 won" tags="" position="6451,242" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;&lt;newgirl&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
 &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/random_event_motorcycle.webp&#39;]]
 &lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you finish off guys around the girl you&#39;re prepared to fight other 4 but they just drive off without looking back.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $player.reputation++&gt;&gt;
&lt;strong&gt;Your reputation increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
 &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/random_event_motorcycle_hug.webp&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
 Girl instantly jumps on you and hugs you with &quot;Thank you! Thank you!&quot;
 &lt;br /&gt;
 She tells you that she&#39;s going to a place called &lt;strong class=&quot;iitem&quot;&gt;The Sanctuary&lt;/strong&gt; before they jump us. She tells you that she really doesn&#39;t have a plan what to do...
 &lt;br /&gt;&lt;br /&gt;
 &lt;&lt;set 
 	$tmpGirlCapture = false,
 	$slaveId = null,
	$charId = null
 &gt;&gt;
 &lt;&lt;set $tmpGirl.beauty = Math.min($tmpGirl.beauty + 30, 100)&gt;&gt;
 &lt;&lt;run delete $slaveId&gt;&gt;
 &lt;&lt;run delete $charId&gt;&gt;
 &lt;&lt;run delete $guestId&gt;&gt;
 &lt;&lt;include &#39;NPC info&#39;&gt;&gt;

&lt;&lt;if (($game.location.basement ?? false) &amp;&amp; $slaves.length &lt; $basementLimit)&gt;&gt;
	&lt;&lt;link &#39;Capture her&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship - 30, 100)&gt;&gt;
		&lt;&lt;run $slaves.push($tmpGirl)&gt;&gt;
		&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if (($game.location.guesthouse ?? false) &amp;&amp; $guests.length &lt; $guesthouseLimit)&gt;&gt;
	&lt;&lt;link &#39;Tell her that she can live at your place&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship + 30, 100)&gt;&gt;
		&lt;&lt;run $guests.push($tmpGirl)&gt;&gt;
		&lt;&lt;goto &#39;Guest house&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Leave her&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="223" name="Fire place" tags="Place" position="630,446" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FIRE PLACE&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/fireplace_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.energy &gt;= 20 &amp;&amp; hasTime(1) &amp;&amp; timeBetween(&#39;08:00&#39;,&#39;22:00&#39;)&gt;&gt;
	&lt;&lt;link &#39;Train your strength&#39;&gt;&gt;
		&lt;&lt;addhours 1&gt;&gt;
		&lt;&lt;set $player.strength +=1&gt;&gt;
		&lt;&lt;energy -20&gt;&gt;
		&lt;&lt;goto &#39;Fireplace - train strength&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#39;Train your endurance&#39;&gt;&gt;
		&lt;&lt;addhours 1&gt;&gt;
		&lt;&lt;if typeof $player.endurance === &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $player.endurance = 0&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $player.endurance +=1&gt;&gt;
		&lt;&lt;energy -20&gt;&gt;
		&lt;&lt;goto &#39;Fireplace - train endurance&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if isMetChar(&#39;blair&#39;) &amp;&amp; $characters.blair.quests.house_party&gt;&gt;
	&lt;&lt;if $backpack.count(&#39;food&#39;) &gt;= 20 &amp;&amp; $backpack.count(&#39;champagne&#39;) &gt;= 1 &amp;&amp; timeBetween(&#39;19:00&#39;, &#39;21:00&#39;)&gt;&gt;
		&lt;&lt;link &#39;Throw a party&#39;&gt;&gt;
			&lt;&lt;goto &#39;House party&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
		&lt;&lt;linkdesc&gt;&gt;
		 -20 food, -1 champagne
		&lt;&lt;/linkdesc&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;div class=&quot;link-internal&quot; style=&quot;background: #ccc&quot;&gt;
			Throw a party
		&lt;/div&gt;
		&lt;&lt;linkdesc&gt;&gt;
			20 food, 1 champagne and time between 19:00 - 21:00
		&lt;&lt;/linkdesc&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if (setup.getAvailablePersons18yo($guests)[0] ?? []).length &gt;= 3&gt;&gt;
	&lt;&lt;if timeBetween(&#39;19:00&#39;,&#39;20:30&#39;)&gt;&gt;
		&lt;&lt;link &#39;Group workout with guests&#39;&gt;&gt;
			&lt;&lt;energy 40&gt;&gt;
			&lt;&lt;addmins 90&gt;&gt;
			&lt;&lt;goto &#39;Group workout - guests&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;div class=&quot;link-internal&quot; style=&quot;background: #ccc&quot;&gt;
			Group workout with guests
		&lt;/div&gt;
		&lt;&lt;linkdesc&gt;&gt;
			Time between 19:00 - 20:30. Energy 40
		&lt;&lt;/linkdesc&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if ($player.horse ?? false)&gt;&gt;
	&lt;&lt;link &#39;Go to your horse&#39;&gt;&gt;
		&lt;&lt;goto &#39;Horse&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

[[Leave|Wood cabin]]</tw-passagedata><tw-passagedata pid="224" name="Fireplace - train endurance" tags="" position="752,552" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/cabin/workout_endurance.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You decide to run through the forest.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Your endurance increased by 1&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Fire place]]</tw-passagedata><tw-passagedata pid="225" name="Farm - blair barn" tags="bg-farm" position="803,2176" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;
&lt;br /&gt;
You carefully open barn door so Vincent doesn&#39;t hear you and you walk inside and there she is..
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/farm/meet_blair1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She&#39;s cleaning the barn but stops as soon as you walk in. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
Hey &lt;&lt;=$player.name&gt;&gt;! You shouldn&#39;t be her. My dad could see us.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Tell that you are thinking about her&#39;&gt;&gt;
	&lt;&lt;blair&gt;&gt;
		Oh you do? I thought I wasn&#39;t important to you as you spend almost all the time with other girls.
	&lt;&lt;/blair&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She smiles and turns her ass and lifts her dress up &quot;&lt;strong&gt;You miss this?&lt;/strong&gt;&quot;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/farm/blair_barn1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;blair&gt;&gt;
		I really hoped you would turn your attention back to me as I&#39;ve missed you inside me this whole time. Just please, be fast!
	&lt;&lt;/blair&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/farm/blair_barn2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;option1&quot;&gt;
		&lt;&lt;linkreplace &#39;Push her down on her knees&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option3&#39;).show()&gt;&gt;
			&lt;&lt;addmins 60&gt;&gt;
			&lt;&lt;video &#39;/farm/blair_barn3&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			She goes for a kiss but instead you push her down on her knees and tell her to suck your hard dick.
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option2&quot;&gt;
		&lt;&lt;linkreplace &#39;Fuck her pussy&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option3&#39;).show()&gt;&gt;
		  	&lt;&lt;addmins 60&gt;&gt;
			&lt;&lt;video &#39;/farm/blair_barn4&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option3&quot; style=&quot;display:none&quot;&gt;
		&lt;&lt;linkreplace &#39;Cum on her&#39;&gt;&gt;
			&lt;&lt;video &#39;/farm/blair_barn5&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			She gets on her knees and opens her mouth wide open ready for your warm cum. Instead of cumming inside her mouth, you cum all over her breasts.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;if $characters.blair.relationship &gt; 60&gt;&gt;
				&lt;strong&gt;You can&#39;t increase relationship with this action anymore&lt;/strong&gt;
				&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set $characters.blair.relationship +=5&gt;&gt;
				&lt;strong&gt;Relationship with Blair increased by 5&lt;/strong&gt;
				&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Farm&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="226" name="Train strength event #1" tags="" position="352,842" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
		 &lt;center&gt;
				[img[setup.ImagePath+&#39;places/cabin/workout_takeoff_top.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			She slowly walks toward you with cute grin on her face. She stops right in front of you, slides her finger across your chest and takes of her top&lt;br /&gt;
			&lt;strong&gt;&quot;I got an idea&quot;&lt;/strong&gt; as she pushes you down on the nearest bench.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;Kiss her breasts&#39;&gt;&gt;
				&lt;center&gt;
					[img[setup.ImagePath+&#39;places/cabin/workout_fuck1.webp&#39;]]
				&lt;/center&gt;
				&lt;br /&gt;&lt;br /&gt;
				You passionately kiss her breasts as she gets on you, grabs your hard cock and guides it toward her pussy. A moment later she gently slides onto you and rides your hard dick.
				&lt;&lt;addmins 10&gt;&gt;
				You fuck for good 10 minutes as she through moans tells you &quot;&lt;strong&gt;cum inside me&lt;/strong&gt;&quot;
				&lt;br /&gt;&lt;br /&gt;
				&lt;div id=&quot;option1&quot;&gt;
				  &lt;&lt;linkreplace &#39;Cum inside her&#39;&gt;&gt;
				  	&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
					&lt;&lt;run $(&#39;#option3&#39;).show()&gt;&gt;
						&lt;center&gt;
							[img[setup.ImagePath+&#39;places/cabin/workout_cum.webp&#39;]]
						&lt;/center&gt;
						&lt;&lt;horny_reset&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						She wraps her hands around your neck as you cum inside her.
						&lt;br /&gt;&lt;br /&gt;
						&lt;strong&gt;Your relationship with &lt;&lt;=$guests[$randomPerson].name&gt;&gt; increased by 5&lt;/strong&gt;
						&lt;&lt;set $guests.relationship = Math.min($guests[$randomPerson].relationship +5, 100)&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
				  &lt;&lt;/linkreplace&gt;&gt;
				&lt;/div&gt;
				&lt;div id=&quot;option2&quot;&gt;
					&lt;&lt;linkreplace &#39;Cum outside&#39;&gt;&gt;
						&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
						&lt;&lt;run $(&#39;#option3&#39;).show()&gt;&gt;
						&lt;center&gt;
							[img[setup.ImagePath+&#39;places/cabin/workout_cum_outside.webp&#39;]]
						&lt;/center&gt;
						&lt;&lt;horny_reset&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						In the last moment you pull out and cum outside. She looks disappointed.
						&lt;br /&gt;&lt;br /&gt;
						&lt;strong&gt;&lt;&lt;=$guests[$randomPerson].name&gt;&gt; submission increased by 5&lt;/strong&gt;
						&lt;&lt;set $guests.sub = Math.min($guests[$randomPerson].sub +5, 100)&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;/linkreplace&gt;&gt;
				&lt;/div&gt;
				
			&lt;&lt;/linkreplace&gt;&gt;
&lt;div id=&quot;option3&quot; style=&quot;display:none&quot;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Fire place&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="227" name="Nightclub - invite" tags="" position="3003,1464" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/nightclub/dress_up.webp&#39;]]
&lt;/center&gt;

&lt;&lt;include &#39;NPC info&#39;&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
After having fun in restroom she picks up her clothes and dresses while making a small talk with you.
&lt;br /&gt;&lt;br /&gt;


&lt;&lt;if (($game.location.guesthouse ?? false) &amp;&amp; $guests.length &lt; $guesthouseLimit)&gt;&gt;
	&lt;&lt;linkreplace &#39;Ask if she would like to move in with you&#39;&gt;&gt;
		&lt;&lt;if $orgasmsBefore === $tmpGirl.orgasms&gt;&gt;
			She giggles while looking at you &quot;&lt;strong&gt;Why would I&lt;/strong&gt;&quot;
		&lt;&lt;elseif setup.percentageChance(50)&gt;&gt;
			You&#39;re a live savior. I recently started to look for a new place&lt;br /&gt; I&#39;ll go live with you! 
			&lt;br /&gt;&lt;br /&gt;
			&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; moved in as guest&lt;/strong&gt;
			&lt;&lt;run $guests.push($tmpGirl)&gt;&gt;
		&lt;&lt;else&gt;&gt;
			Sorry but no. You look like a nice guy but I&#39;ve my family and I won&#39;t leave them for you.
		&lt;&lt;/if&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Nightclub - inside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;


</tw-passagedata><tw-passagedata pid="228" name="Girl visual" tags="" position="3374,99" size="100,100">&lt;&lt;set _visualType = &#39;&#39;&gt;&gt;
&lt;&lt;if _girlVisual.gender === 1&gt;&gt;
	&lt;&lt;set _visualType = &#39;_male&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;girl_body&quot; @style=&quot;&#39;background-image: url(\&#39;&#39; + setup.ImagePath+&#39;game/doll/body_&#39; + _girlVisual.race + _visualType + &#39;.gif\&#39;)&#39;&quot;&gt;&lt;/div&gt;
&lt;&lt;if !_girlVisual.gender&gt;&gt;
	&lt;div id=&quot;girl_hair&quot; @class=&quot;&#39;girl_body_hair_&#39; + _girlVisual.hair + &#39;&#39;&quot; @style=&quot;&#39;background-image: url(\&#39;&#39; + setup.ImagePath+&#39;game/doll/hair_&#39; + _girlVisual.hair + &#39;.gif\&#39;)&#39;&quot;&gt;&lt;/div&gt;
	&lt;div id=&quot;girl_top&quot; @class=&quot;&#39;top&#39; + _girlVisual.clothes.top + &#39;&#39;&quot; @style=&quot;&#39;background-image: url(\&#39;&#39; + setup.ImagePath+&#39;game/doll/top_&#39; + _girlVisual.clothes.top + &#39;.gif\&#39;)&#39;&quot;&gt;&lt;/div&gt;
	&lt;&lt;if _girlVisual.clothes.bot&gt;&gt;
		&lt;div id=&quot;girl_bot&quot; @class=&quot;&#39;bot&#39; + _girlVisual.clothes.bot + &#39;&#39;&quot; @style=&quot;&#39;background-image: url(\&#39;&#39; + setup.ImagePath+&#39;game/doll/bot_&#39; + _girlVisual.clothes.bot + &#39;.gif\&#39;)&#39;&quot;&gt;&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="229" name="Girl - pregnancy speed potion" tags="" position="3226,220" size="100,100">&lt;&lt;addmins 15&gt;&gt;
&lt;&lt;drop $backpack &#39;pregnancy_speed_potion&#39; 1&gt;&gt;
&lt;&lt;set $tmpGirl.pregnancy += 100&gt;&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/basement/drink_pregnancy_potion.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;=$tmpGirl.name&gt;&gt; drinks pregnancy speed potion.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Pregnancy period decreased by 100 days&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;if $tmpGirlViewBack&gt;&gt;
		&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto [[Girl view]]&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;


</tw-passagedata><tw-passagedata pid="230" name="Rodger - champagne" tags="bg-settlement" position="2373,2447" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
Glad you&#39;re here &lt;&lt;=$player.name&gt;&gt;! Listen, as we finished the church and our group anual celebration is coming I wanted to ask if you could help me.&lt;br /&gt;
I know a place to an old tavern in the city. Maybe you could go there and check if there&#39;s some wine left? 
&lt;br /&gt;&lt;br /&gt;
Our community would really appreciate it.
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Go to the city alone&#39;&gt;&gt;
		&lt;&lt;goto &#39;Rodger - champagne #2&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;&lt;linkreplace &#39;Ask if Eve will come too&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
	&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/rodger_book3.webp&#39;]]
&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;eve&gt;&gt;
			I don&#39;t know if I should. I need to do some chores around her.&lt;br /&gt;
			But if you think it would be better I can go. 
		&lt;&lt;/eve&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Go to the city with Eve&#39;&gt;&gt;
		&lt;&lt;set $characters.rodger.quests.champagne_eve = true&gt;&gt;
		&lt;&lt;goto &#39;Rodger - champagne #2&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#39;Go to the city without Eve&#39;&gt;&gt;
		&lt;&lt;goto &#39;Rodger - champagne #2&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="231" name="Rodger - champagne #2" tags="" position="2485,2447" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;intro/empty_city.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.rodger.quests.champagne_eve&gt;&gt;
	Together you went to the ruined city.
&lt;&lt;else&gt;&gt;
	&lt;&lt;setPlayerStats endurance 1&gt;&gt;
	&lt;strong&gt;Your endurance increased by 1&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	You went alone to the city.
&lt;&lt;/if&gt;&gt;

 The city looks dead. Even after such a long time, human bones can still be found scattered in the middle of the road.
You remember this place from your childhood, when you came here with your grandfather to eat ice cream.
You feel like someone is watching you, but when you look around, you see no one.
Nowhere in the city do you see any green plants. Everything is dead.
The cars on the side of the road are either destroyed or burned afterwards.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.rodger.quests.champagne_eve&gt;&gt;
	&lt;&lt;eve&gt;&gt;
		Have you seen a car? I have seen one before from the distance.  These exhausting walks are becoming more and more difficult.
	&lt;&lt;/eve&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addhours 4&gt;&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_tavern.jpg&#39;]]
&lt;/center&gt;
After a few hours of walking, you reached Roger&#39;s friend&#39;s pub. The door is broken down and the building looks partially burnt from the outside. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Go inside&#39;&gt;&gt;
	&lt;&lt;goto &#39;Rodger - champagne #3&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="232" name="Rodger - champagne #3" tags="" position="2596,2449" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You cautiously enter and slowly begin to look around.
&lt;br /&gt;
&lt;br /&gt;
&lt;&lt;addhours 2&gt;&gt;
Roger mentioned some secret doors to the basement, but you couldn&#39;t find them. As you continued to wander around the first floor, your foot sank into the floor. As a precaution, you tapped your foot on the floor a few more times, and the hole became even bigger. It was big enough for a person to climb through. Nearby, you found some old metal stairs, which you placed in the hole leading down to the basement.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_basement.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

Downstairs was dark and damp. Mold was everywhere and you had trouble seeing where you were even walking. After a moment, you heard the sound of a glass bottle breaking. Looking down next to you, you noticed many champagne bottles and two wine bottles.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;pickup $backpack &#39;champagne&#39; 10&gt;&gt;
&lt;strong&gt;You picked up &lt;span class=&quot;iitem&quot;&gt;10 champagne&lt;/span&gt; bottles&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_basement_storage.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
A moment after collecting the bottles, suddenly you hear the sound of many people upstairs. They are making a lot of noise and causing a commotion, and one of them shouts, &quot;I saw someone come in here!
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.rodger.quests.champagne_eve&gt;&gt;
  &lt;&lt;eve&gt;&gt;
  	&lt;&lt;=$player.name&gt;&gt;...
  &lt;&lt;/eve&gt;&gt;
  &lt;br /&gt;&lt;br /&gt;
  	Eve also hears something upstairs. And just as she tries to tell you, you forcefully put your hand over her mouth and press her against the wall.
	&lt;br /&gt;&lt;br /&gt;
	  &lt;center&gt;
	  [img[setup.ImagePath+&#39;places/cabin/rodger_bottles_hand_over_mouth.webp&#39;]]
	  &lt;/center&gt;
 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
The sound of people from upstairs continues for a while, and after some time, when they give up their search, it can be heard that they have decided to stay overnight on the first floor.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Carefully check how many of them there are&#39;&gt;&gt;
	Cautiously and quietly climbing up the stairs, you see at least 2 men and 1 woman.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Ambush them&#39;&gt;&gt;
		&lt;&lt;set $enemies = []&gt;&gt;
		&lt;&lt;for _fightRange = 0; _fightRange &lt; 3; _fightRange++&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;if setup.percentageChance(10)&gt;&gt;
					&lt;&lt;set 
						$tmpGuy.inventory = [],
						$tmpGuy.inventory.push(&#39;knife&#39;)
					&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;/for&gt;&gt;
		&lt;&lt;for _fightRange = 0; _fightRange &lt; 1; _fightRange++&gt;&gt;
			&lt;&lt;newgirl&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
		&lt;&lt;/for&gt;&gt;
  		&lt;&lt;fight $enemies &#39;Rodger - champagne #5&#39; &#39;Rodger - champagne #5&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Sleep in the basement overnight&#39;&gt;&gt;
	&lt;&lt;goto &#39;Rodger - tavern - sleep&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="233" name="Rodger - tavern - sleep" tags="" position="2704,2447" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodget_bottles_dirty_cover.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

You find yourself in an old, dirty basement and lie down in the corner on an old, sagging sofa. However, shouting and the sound of bottles can be heard from above. It seems like they&#39;re having a drinking party up there.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $characters.rodger.quests.champagne_eve&gt;&gt;
 	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/cabin/rodget_bottles_sleep_rub.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You cover yourselves with a blanket and snuggle very close to each other, as the mattress is very small. She strokes your hand while you slowly and passionately run your hand over her stomach. It seems like she doesn&#39;t object, or at least she doesn&#39;t say anything.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if typeof $characters.eve.corruption == &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $characters.eve.corruption = 0&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $characters.eve.relationship++&gt;&gt;
	&lt;&lt;set $characters.eve.corruption++&gt;&gt;
	&lt;strong&gt;
		Eve relationship increased by 1&lt;br /&gt;
		Eve corruption increased by 1
	&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Sleep&#39;&gt;&gt;
	&lt;&lt;set $characters.rodger.quests.eve_slept_overnight = true&gt;&gt;
	&lt;&lt;sleep &#39;Rodger - champagne #5&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="234" name="Rodger - champagne #5" tags="" position="2813,2449" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;&lt;addhours 3&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.rodger.quests.eve_slept_overnight&gt;&gt;
	In the next morning at sunrise, you returned back. Everyone was still asleep except for Roger, who was already waiting for you at the church.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;rodger&gt;&gt;
		Where were you? Is everything okay with you? I&#39;m worried that something bad happened to you.
	&lt;&lt;/rodger&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $characters.rodger.quests.champagne_eve&gt;&gt;
		&lt;&lt;eve&gt;&gt;
			Everything is fine. We were spotted by a couple of thugs, so we decided to hide and spent the night in hiding in a tavern.
		&lt;&lt;/eve&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;you&gt;&gt;
			Nothing to worry about. Found what you were looking for.
		&lt;&lt;/you&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	It was already dusk outside when you arrived. At that moment, Roger was helping someone in the church, and he was surprised to see you because he didn&#39;t expect you to come back so soon.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;rodger&gt;&gt;
		Already back? That was fast. 
	&lt;&lt;/rodger&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Roger took the wine bottles from you, and Eva accompanied you with a look and a smile on her face.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="235" name="Cheat menu" tags="" position="29,1203" size="100,100">&lt;div id=&quot;ingame-ui-buttons-side&quot; class=&quot;cheatmenu&quot;&gt;
  &lt;&lt;link &#39;Add 100 caps&#39;&gt;&gt;
	  &lt;&lt;set $player.money += 100&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Add slave&#39;&gt;&gt;
	  &lt;&lt;newgirl&gt;&gt;
	  &lt;&lt;run $slaves.push($tmpGirl)&gt;&gt;
	  &lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Set all guest relationship to max&#39;&gt;&gt;
  		&lt;&lt;for _cheatGuestI, _cheatGuest range $guests&gt;&gt;
			&lt;&lt;set $guests[_cheatGuestI].relationship = 100&gt;&gt;
		&lt;&lt;/for&gt;&gt;
		&lt;&lt;if typeof $guestId !== &#39;undefined&#39; &amp;&amp; $tmpGirl&gt;&gt;
			&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;if recall($suppCode)&gt;&gt;
    &lt;&lt;link &#39;Set all slave relationship to max&#39;&gt;&gt;
  		&lt;&lt;for _cheatslaveI, _cheatSlave range $slaves&gt;&gt;
			&lt;&lt;set $slaves[_cheatslaveI].relationship = 100&gt;&gt;
		&lt;&lt;/for&gt;&gt;
		&lt;&lt;if typeof $slaveId !== &#39;undefined&#39; &amp;&amp; $tmpGirl&gt;&gt;
			&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  	&lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;link &#39;Add champagne bottle&#39;&gt;&gt;
  	&lt;&lt;pickup $backpack &#39;champagne&#39; 1&gt;&gt;
  	&lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Add antibiotics&#39;&gt;&gt;
  	&lt;&lt;pickup $backpack &#39;antibiotics&#39; 1&gt;&gt;
	&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Clear companion list&#39;&gt;&gt;
  	&lt;&lt;set $player.companions = {}&gt;&gt;
  	&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Increase guest house limit&#39;&gt;&gt;
  	&lt;&lt;set $guesthouseLimit++&gt;&gt;
	&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Increase MC strength&#39;&gt;&gt;
  	&lt;&lt;set $player.strength++&gt;&gt;
	&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Increase MC intelligence&#39;&gt;&gt;
  	&lt;&lt;set $player.int++&gt;&gt;
	&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;if recall($suppCode)&gt;&gt;
  	&lt;&lt;link &#39;Skip time (1 week)&#39;&gt;&gt;
		&lt;&lt;sleep&gt;&gt;
		&lt;&lt;sleep&gt;&gt;
		&lt;&lt;sleep&gt;&gt;
		&lt;&lt;sleep&gt;&gt;
		&lt;&lt;sleep&gt;&gt;
		&lt;&lt;sleep&gt;&gt;
		&lt;&lt;sleep&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/div&gt;

&lt;style&gt;
 .cheatmenu .link-internal.macro-link {
 	display:block;
	padding-left: 20px;
 }
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="236" name="Blair - house party" tags="" position="1239,2054" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;

&lt;&lt;blair&gt;&gt;
I heard that you found a couple of bottles of champagne. Could I taste it? I have never drunk it before and have no idea how it tastes.
&lt;br /&gt;
Please, pretty please.
&lt;br /&gt;
By the way, the girls are complaining that they are tired and fed up with just working and not doing anything else. Maybe we could have a sit-down by the campfire one evening with some champagne?
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;You will need &lt;span class=&quot;iitem&quot;&gt;20 food&lt;/span&gt; and &lt;span class=&quot;ittem&quot;&gt;1&lt;/span&gt; champagne.&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addmins 30&gt;&gt;
[[Leave|Kitchen-room]] 
</tw-passagedata><tw-passagedata pid="237" name="House party" tags="" position="456,841" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/house_party_table.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
The house party starts slowly. The table is set and guests begin to arrive slowly. There is food on the table that is not usually eaten on a daily basis, so everyone sits down at the table with an elevated mood. You open a champagne bottle and pour a glass for each guest.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/house_party_champagne.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Champagne is such a rare thing in this world that only a few have ever tasted it. For most people, this is the first time and their bodies are not accustomed to it, so they get drunk very quickly.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/house_party_champagne_mouth.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
The e is almost empty and the girls are so drunk that they decide to pour the last bit left in the bottle into one of the girl&#39;s mouth from a distance. The girl falls to her knees and while the champagne is pouring into her mouth, another girl pulls down her shirt and sucks on her nipple.
&lt;&lt;addhours 4&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;for _guestI, _guest range $guests&gt;&gt;
	&lt;&lt;if _guest.gender || setup.getAge(_guest) &lt; 17&gt;&gt;
		&lt;&lt;continue&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;setNpcStats &#39;guest&#39; _guestI &#39;relationship&#39; +10&gt;&gt;
	&lt;&lt;=$guests[_guestI].name&gt;&gt; relationship increased by 10&lt;br /&gt;
&lt;&lt;/for&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;perkAdd &#39;drunk&#39;&gt;&gt;
&lt;&lt;drop $backpack &#39;champagne&#39; 1&gt;&gt;
&lt;&lt;drop $backpack &#39;food&#39; 20&gt;&gt;

&lt;div id=&quot;girls_top_table&quot;&gt;
	&lt;h4&gt;Guests attending the party&lt;/h4&gt;
	&lt;table id=&quot;slaves&quot;&gt;
		&lt;&lt;for _guestI, _guest range $guests&gt;&gt;
			&lt;&lt;if _guest.gender || setup.getAge(_guest) &lt; 17&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;capture _guestI, _guest&gt;&gt;
				&lt;tr&gt;
				  &lt;td style=&quot;width: 300px&quot;&gt;
					 	  &lt;&lt;=_guest.name&gt;&gt; 
						  &lt;&lt;if _guest.pregnancy &gt;= 7&gt;&gt;
							(pregnant &lt;&lt;=_guest.pregnancy&gt;&gt; days)
						  &lt;&lt;/if&gt;&gt;
				  &lt;/td&gt;
				  &lt;td&gt;
						Beauty score: &lt;&lt;print _guest.beauty&gt;&gt;
				  &lt;/td&gt;
				  &lt;td&gt;
						Age: &lt;&lt;=setup.getAge(_guest)&gt;&gt;
				  &lt;/td&gt;
				  &lt;td&gt;
				  		&lt;&lt;link &#39;Invite to the bedroom&#39;&gt;&gt;
							&lt;&lt;if setup.percentageChance(30) || !$characters.blair.quests.house_party_finished&gt;&gt;
								&lt;&lt;set $tmpGirl to _guest&gt;&gt;
								&lt;&lt;set $guestId = _guestI&gt;&gt;
								&lt;&lt;set $characters.blair.quests.house_party_finished = true&gt;&gt;
								&lt;&lt;goto &#39;House party - threesome&#39;&gt;&gt;
							&lt;&lt;else&gt;&gt;
								&lt;&lt;set $tmpGirl to _guest&gt;&gt;
								&lt;&lt;set $tmpGirl.location = &#39;bedroom&#39;&gt;&gt;
								&lt;&lt;set $tmpGirlViewBack = &#39;Sleep eval&#39;&gt;&gt;
								&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
								&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
								&lt;&lt;set $guestId = _guestI&gt;&gt;
								&lt;&lt;run delete $slaveId&gt;&gt;
								&lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
							&lt;&lt;/if&gt;&gt;
						&lt;&lt;/link&gt;&gt;
				  &lt;/td&gt;
				&lt;/tr&gt;
			&lt;&lt;/capture&gt;&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;/div&gt;

&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;linkreplace &#39;Scold them&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
		&lt;&lt;for _guestI, _guest range $guests&gt;&gt;
			&lt;&lt;setNpcStats &#39;guest&#39; _guestI &#39;sub&#39; +5&gt;&gt;
			&lt;&lt;=$guests[_guestI].name&gt;&gt; submission increased by 5&lt;br /&gt;
		&lt;&lt;/for&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;linkdesc&gt;&gt;
		+5 submission
	&lt;&lt;/linkdesc&gt;&gt;
&lt;/div&gt;
&lt;&lt;if $backpack.has(&#39;champagne&#39;)&gt;&gt;
	&lt;div id=&quot;option2&quot;&gt;
		&lt;&lt;linkreplace &#39;Offer another bottle of champagne&#39;&gt;&gt;
			&lt;&lt;drop $backpack &#39;champagne&#39; 1&gt;&gt;
			&lt;&lt;run $(&#39;#option1, #girls_top_table, #option2_desc&#39;).hide()&gt;&gt;
			&lt;&lt;run $(&#39;#girls_bottom_table&#39;).show()&gt;&gt;
			You bring another bottle and pour a glass for each of the guests, they thank you with a smile and flirtatiously look at you until one sits down in front of you and spreads her legs with the text &quot;Thank you!&quot;
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;						
				[img[setup.ImagePath+&#39;places/cabin/house_party_champagne_skirt.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			Meanwhile, another girl is playfully teasing with the first bottle and starts to put it in her mouth to show how deep she can take it inside.
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;						
				[img[setup.ImagePath+&#39;places/cabin/house_party_champagne_bj.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			The girls applaud and cheer as the girl with the empty champagne bottle approaches, until one of the girls pushes you towards her and without hesitation, she pulls down your pants and takes your hard penis into her mouth.
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;						
				[img[setup.ImagePath+&#39;places/cabin/house_party_champagne_bj2.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;for _guestI, _guest range $guests&gt;&gt;
				&lt;&lt;if _guest.gender || setup.getAge(_guest) &lt; 17&gt;&gt;
					&lt;&lt;continue&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;setNpcStats &#39;guest&#39; _guestI &#39;relationship&#39; +10&gt;&gt;
				&lt;&lt;=$guests[_guestI].name&gt;&gt; relationship increased by 10&lt;br /&gt;
			&lt;&lt;/for&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			
		&lt;&lt;/linkreplace&gt;&gt;
		&lt;div id=&quot;option2_desc&quot;&gt;
		  &lt;&lt;linkdesc&gt;&gt;
			  -1 champagne; +10 relationship
		  &lt;&lt;/linkdesc&gt;&gt;
		&lt;/div&gt;
	&lt;/div&gt;		
&lt;&lt;/if&gt;&gt;

&lt;div id=&quot;girls_bottom_table&quot; style=&quot;display:none&quot;&gt;
	&lt;h4&gt;Guests attending the party&lt;/h4&gt;
	&lt;table id=&quot;slaves&quot;&gt;
		&lt;&lt;for _guestI, _guest range $guests&gt;&gt;
			&lt;&lt;if _guest.gender || setup.getAge(_guest) &lt; 17&gt;&gt;
				&lt;&lt;continue&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;capture _guestI, _guest&gt;&gt;
				&lt;tr&gt;
				  &lt;td style=&quot;width: 300px&quot;&gt;
					 	  &lt;&lt;=_guest.name&gt;&gt; 
						  &lt;&lt;if _guest.pregnancy &gt;= 7&gt;&gt;
							(pregnant &lt;&lt;=_guest.pregnancy&gt;&gt; days)
						  &lt;&lt;/if&gt;&gt;
				  &lt;/td&gt;
				  &lt;td&gt;
						Beauty score: &lt;&lt;print _guest.beauty&gt;&gt;
				  &lt;/td&gt;
				  &lt;td&gt;
						Age: &lt;&lt;=setup.getAge(_guest)&gt;&gt;
				  &lt;/td&gt;
				  &lt;td&gt;
				  		&lt;&lt;link &#39;Invite to the bedroom&#39;&gt;&gt;
							&lt;&lt;if setup.percentageChance(30) || !$characters.blair.quests.house_party_finished&gt;&gt;
								&lt;&lt;set $tmpGirl to _guest&gt;&gt;
								&lt;&lt;set $guestId = _guestI&gt;&gt;
								&lt;&lt;set $characters.blair.quests.house_party_finished = true&gt;&gt;
								&lt;&lt;goto &#39;House party - threesome&#39;&gt;&gt;
							&lt;&lt;else&gt;&gt;
								&lt;&lt;set $tmpGirl to _guest&gt;&gt;
								&lt;&lt;set $tmpGirl.location = &#39;bedroom&#39;&gt;&gt;
								&lt;&lt;set $tmpGirlViewBack = &#39;Sleep eval&#39;&gt;&gt;
								&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
								&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
								&lt;&lt;set $guestId = _guestI&gt;&gt;
								&lt;&lt;run delete $slaveId&gt;&gt;
								&lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
							&lt;&lt;/if&gt;&gt;
						&lt;&lt;/link&gt;&gt;
				  &lt;/td&gt;
				&lt;/tr&gt;
			&lt;&lt;/capture&gt;&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;/div&gt;

&lt;&lt;link &#39;End party&#39;&gt;&gt;
	&lt;&lt;goto &#39;Bedroom&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="238" name="Event: Common capital" tags="" position="336,1079" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;GUESTHOUSE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/event_common_capital.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _persons = setup.getPersonsForLocation($guests, &#39;garden&#39;)&gt;&gt;
&lt;&lt;set _randomPersons = setup.getRandomPersons(_persons, 2)&gt;&gt;
&lt;&lt;set 
	_randomPerson1Id = _randomPersons[0],
	_randomPerson2Id = _randomPersons[1]
&gt;&gt;
&lt;&lt;set _money = randomInteger(50, 75)&gt;&gt;
&lt;&lt;set _splitMoneyPerPerson = Math.round(_money / 3, 0)&gt;&gt;
&lt;&lt;set _splitMoney = _money - _splitMoneyPerPerson * 2&gt;&gt;
&lt;strong&gt;&lt;&lt;=$guests[_randomPerson1Id].name&gt;&gt;&lt;/strong&gt; and &lt;strong&gt;&lt;&lt;=$guests[_randomPerson2Id].name&gt;&gt;&lt;/strong&gt; are arguing and fighting over a rusty metal box which lays on the ground between them.&lt;br /&gt;
They both claim ownership over the coins inside; one for finding the box, and the other for getting the lock open.
There are &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_money&gt;&gt;&lt;/strong&gt; caps inside, enough to considerably help the entire colony if needed.
&lt;br /&gt;&lt;br /&gt;

&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;set _linkName = &#39;Interview &#39; + $guests[_randomPerson1Id].name&gt;&gt;
	&lt;&lt;linkreplace &#96;_linkName&#96;&gt;&gt;
		&lt;&lt;set $guestId = _randomPerson1Id&gt;&gt;
		&lt;&lt;set $tmpGirl = $guests[_randomPerson1Id]&gt;&gt;
		&lt;&lt;capture $tmpGirl&gt;&gt;
			&lt;&lt;include &#39;NPC info&#39;&gt;&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;set _linkName = &#39;Interview &#39; + $guests[_randomPerson2Id].name&gt;&gt;
	&lt;&lt;linkreplace &#96;_linkName&#96;&gt;&gt;
		&lt;&lt;set $guestId = _randomPerson2Id&gt;&gt;
		&lt;&lt;set $tmpGirl = $guests[_randomPerson2Id]&gt;&gt;
		&lt;&lt;capture $tmpGirl&gt;&gt;
			&lt;&lt;include &#39;NPC info&#39;&gt;&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;&lt;linkreplace &#39;Render judgment&#39;&gt;&gt;
	&lt;br /&gt;
	You&#39;ve decided.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set _linkName = &#39;Give box to &#39; + $guests[_randomPerson1Id].name&gt;&gt;
	&lt;&lt;link &#96;_linkName&#96;&gt;&gt;
		&lt;&lt;set $guests[_randomPerson1Id].relationship = Math.min($guests[_randomPerson1Id].relationship + 10, 100)&gt;&gt;
		&lt;&lt;set $guests[_randomPerson2Id].relationship -= 20&gt;&gt;
		&lt;&lt;goto &#39;Guest house&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;linkdesc&gt;&gt;
		+10 relationship &lt;&lt;=$guests[_randomPerson1Id].name&gt;&gt;; -20 relationship &lt;&lt;=$guests[_randomPerson2Id].name&gt;&gt;
	&lt;&lt;/linkdesc&gt;&gt;
	&lt;&lt;set _linkName = &#39;Give box to &#39; + $guests[_randomPerson2Id].name&gt;&gt;
	&lt;&lt;link &#96;_linkName&#96;&gt;&gt;
		&lt;&lt;set $guests[_randomPerson2Id].relationship = Math.min($guests[_randomPerson2Id].relationship + 10, 100)&gt;&gt;
		&lt;&lt;set $guests[_randomPerson1Id].relationship -= 20&gt;&gt;
		&lt;&lt;goto &#39;Guest house&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;linkdesc&gt;&gt;
		+10 relationship &lt;&lt;=$guests[_randomPerson2Id].name&gt;&gt;; -20 relationship &lt;&lt;=$guests[_randomPerson1Id].name&gt;&gt;
	&lt;&lt;/linkdesc&gt;&gt;
	&lt;&lt;link &#39;Split between you three&#39;&gt;&gt;
		&lt;&lt;set $guests[_randomPerson2Id].relationship -= 10&gt;&gt;
		&lt;&lt;set $guests[_randomPerson1Id].relationship -= 10&gt;&gt;
		&lt;&lt;set $player.money += _splitMoney&gt;&gt;
		&lt;&lt;goto &#39;Guest house&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;linkdesc&gt;&gt;
		+&lt;&lt;=_splitMoney&gt;&gt; caps; -10 relationship
	&lt;&lt;/linkdesc&gt;&gt;
	&lt;&lt;link &#39;Keep them to yourself&#39;&gt;&gt;
		&lt;&lt;set $guests[_randomPerson2Id].relationship -= 20&gt;&gt;
		&lt;&lt;set $guests[_randomPerson1Id].relationship -= 20&gt;&gt;
		&lt;&lt;set $player.money += _money&gt;&gt;
		&lt;&lt;goto &#39;Guest house&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;linkdesc&gt;&gt;+&lt;&lt;=_money&gt;&gt; caps; -20 relationship&lt;&lt;/linkdesc&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="239" name="Event: Rotten Rations" tags="" position="457,961" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/event_rotten_food.png&#39;]]
&lt;/center&gt;

&lt;&lt;set _persons = setup.getPersonsForLocation($guests, &#39;garden&#39;)&gt;&gt;
&lt;&lt;set _randomPerson = _persons[Math.floor(Math.random()*_persons.length)]&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
A weary &lt;strong&gt;&lt;&lt;=$guests[_randomPerson.name]&gt;&gt;&lt;/strong&gt; reports grave news. Some of the food rations appear to have gone bad. Somebody had forgotten to shield them properly, allowing bugs to get into the containers.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _amountFood = Math.round($backpack.count(&#39;food&#39;) - ((20 / 100) * $backpack.count(&#39;food&#39;)), 0)&gt;&gt;


&lt;&lt;set _foodOut = $backpack.count(&#39;food&#39;) - Math.min(_amountFood, $backpack.count(&#39;food&#39;))&gt;&gt;
Bickering about whose fault the situation quickly evolves into a different discussion, as the hungry guests begin to argue if they can afford to throw away precious food, even if a little past its prime.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Throw the food out&#39;&gt;&gt;
	&lt;&lt;drop $backpack &#39;food&#39; _foodOut&gt;&gt;
	&lt;&lt;goto &#39;Kitchen-room&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;linkdesc&gt;&gt;
	Throw &lt;&lt;=_foodOut&gt;&gt; food out
&lt;&lt;/linkdesc&gt;&gt;
&lt;&lt;link &#39;Keep the food&#39;&gt;&gt;
	&lt;&lt;if setup.percentageChance(50)&gt;&gt;
		&lt;&lt;set $game.foodRotten = true&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;goto &#39;Kitchen-room&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;linkdesc&gt;&gt;
	Chance that your guests or slaves will get ill from food poisoning
&lt;&lt;/linkdesc&gt;&gt;
&lt;&lt;set $game.rotten_rations_day = $game.day&gt;&gt;</tw-passagedata><tw-passagedata pid="240" name="House party - threesome" tags="" position="565,838" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/house_party_champagne_panties.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You take &lt;&lt;=$guests[$guestId].name&gt;&gt; to the room and leaving the door half-closed, you slowly undress her. She seems eager and doesn&#39;t resist you at all. After removing her clothes, you lay her down on her stomach and immediately penetrate her without any foreplay.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/house_party_threesome1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;=$guests[$guestId].name&gt;&gt; is surprised, but presses her head into the pillow and enjoys your hard penis, making sure that no one hears them. Occasionally, she turns and looks at you with a lustful gaze, whispering &quot;Harder&quot;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/house_party_threesome2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Unexpectedly, Blair enters your room and with a smile, lies down next to you, already having taken off her shirt.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Can I join? 
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;=$guests[$guestId].name&gt;&gt; opens up with a wide smile on her face, watching as Blair unexpectedly undresses fully without waiting for a response and lies down next to you. 
&lt;br /&gt;
Blair grabs your hand and directs it between her legs, inviting you to start massaging her pussy.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;bedroom/house_party_threesome3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;linkreplace &#39;Fuck Blair&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
		&lt;&lt;run $(&#39;#other_options&#39;).show()&gt;&gt;
		&lt;&lt;video &#39;bedroom/house_party_threesome4&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You pull our your hard dick, grab Blair by legs and pull her toward you. Instantly you shove your dick inside her wet pussy and fuck her hard while &lt;&lt;=$guests[$guestId].name&gt;&gt; looks for a brief moment before getting onto Blair and letting her lick her pussy. 
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;set _linkName = &#39;Fuck &#39; + $guests[$guestId].name + &#39; in doggy&#39;&gt;&gt;
	&lt;&lt;linkreplace &#96;_linkName&#96;&gt;&gt;
		&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
		&lt;&lt;run $(&#39;#other_options&#39;).show()&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;bedroom/house_party_threesome5&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You adjust &lt;&lt;=$guests[$guestId].name&gt;&gt; ass as Blair lie down in front of &lt;&lt;=$guests[$guestId].name&gt;&gt;. As you shove your hard dick inside &lt;&lt;=$guests[$guestId].name&gt;&gt; she leans down and licks Blair&#39;s pussy passionately.
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;other_options&quot; style=&quot;display: none;&quot;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;bedroom/house_party_threesome6&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
		Blair climbs on top of you and is ready to ride on you, but &lt;&lt;=$guests[$guestId].name&gt;&gt; decides to grab your dick and suck it for a moment. As she&#39;s way too drunk and way too into sucking it, Blair decides to join her.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;bedroom/house_party_threesome7&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
		They both doesn&#39;t take heir eyes off your dick and a moment later you cum.
		&lt;br /&gt;
		Both of them do not take their eyes off your still hard dick and you can see that they are proud of what they have accomplished together.
		&lt;br /&gt;
		They carefully examine your warm cum with a big smile on their faces.
	&lt;br /&gt;&lt;br /&gt;
&lt;/div&gt;


&lt;&lt;link &#39;Go to sleep&#39;&gt;&gt;
	&lt;&lt;horny_reset&gt;&gt;
	&lt;&lt;sleep&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="241" name="Blair - gate" tags="" position="911,2178" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;&lt;addmins 30&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
Listen, &lt;&lt;=$player.name&gt;&gt;. I was thinking about this place.
&lt;br /&gt;
Your little cabin has already progressed quite a bit. You have worked very well. Have you thought about turning this place into a small village? Of course, you should understand that in this way you will not only attract traveling merchants or people looking for a place to spend the night, but also certainly unfavorable individuals and bandits. It would definitely be necessary to start with the construction of a secure gate.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She places a large, crumpled paper roll on the table and slowly unrolls it, placing two empty glasses on either side, and then leans over the table and places two more empty cylinders.
&lt;br/&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/gate_cleavage.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
My father wanted to build such gates a long time ago, but eventually realized that he was too old and wouldn&#39;t be able to handle it all. I took the drawings from his house, maybe they will be useful to you.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/gate_blueprint.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
When the gates are ready, you could even come up with a name for this place and put up a big sign so people know what this place is called.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Tell her that you\&#39;ll think about it&#39;&gt;&gt;
	&lt;&lt;addmins 30&gt;&gt;
	&lt;&lt;goto &#39;Kitchen-room&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="242" name="Blair - gate done" tags="" position="1024,2180" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CABIN&lt;/h1&gt;
&lt;br /&gt;
&lt;&lt;addhours 10&gt;&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/gate_finished.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Wow! You really did it! It&#39;s so beautiful and now girls can finally call this place a real home.
	&lt;br /&gt;
	Have you already thought of a name for this place?
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You&#39;ll call this place: &lt;&lt;textbox &quot;_gateName&quot; &#39;Cabin&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
You also need to create a flag for your village so that other villages and travelers can recognize you
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue with flag&#39;&gt;&gt;
	&lt;&lt;set $game.cabinName = _gateName&gt;&gt;
	&lt;&lt;goto &#39;Blair - gate done flag&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="243" name="Blair - gate done flag" tags="" position="1138,2178" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;

&lt;div id=&quot;flag_choose&quot; style=&quot;display: flex; justify-content: center&quot;&gt;
	&lt;div class=&quot;flag_choose_item&quot;&gt;
		[img[setup.ImagePath+&#39;game/misc/flag/bg_red.png&#39;]]
		&lt;&lt;link &#39;Choose&#39;&gt;&gt;
			&lt;&lt;set $game.flagBg = &#39;red&#39;&gt;&gt;
			&lt;&lt;goto &#39;Blair - gate done flag&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
	&lt;div class=&quot;flag_choose_item&quot;&gt;
		[img[setup.ImagePath+&#39;game/misc/flag/bg_blue.png&#39;]]
		&lt;&lt;link &#39;Choose&#39;&gt;&gt;
			&lt;&lt;set $game.flagBg = &#39;blue&#39;&gt;&gt;
			&lt;&lt;goto &#39;Blair - gate done flag&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
	&lt;div class=&quot;flag_choose_item&quot;&gt;
		[img[setup.ImagePath+&#39;game/misc/flag/bg_green.png&#39;]]
		&lt;&lt;link &#39;Choose&#39;&gt;&gt;
			&lt;&lt;set $game.flagBg = &#39;green&#39;&gt;&gt;
			&lt;&lt;goto &#39;Blair - gate done flag&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
&lt;/div&gt;

&lt;div id=&quot;icon_choose&quot; style=&quot;display: flex; justify-content: center&quot;&gt;
	&lt;div class=&quot;flag_icon_choose_item&quot;&gt;
		[img[setup.ImagePath+&#39;game/misc/flag/icon_1.png&#39;]]
		&lt;&lt;link &#39;Choose&#39;&gt;&gt;
			&lt;&lt;set $game.flagIcon = 1&gt;&gt;
			&lt;&lt;goto &#39;Blair - gate done flag&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
	&lt;div class=&quot;flag_icon_choose_item&quot;&gt;
		[img[setup.ImagePath+&#39;game/misc/flag/icon_2.png&#39;]]
		&lt;&lt;link &#39;Choose&#39;&gt;&gt;
			&lt;&lt;set $game.flagIcon = 2&gt;&gt;
			&lt;&lt;goto &#39;Blair - gate done flag&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
	&lt;div class=&quot;flag_icon_choose_item&quot;&gt;
		[img[setup.ImagePath+&#39;game/misc/flag/icon_3.png&#39;]]
		&lt;&lt;link &#39;Choose&#39;&gt;&gt;
			&lt;&lt;set $game.flagIcon = 3&gt;&gt;
			&lt;&lt;goto &#39;Blair - gate done flag&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
&lt;/div&gt;

&lt;&lt;if $game.flagIcon &amp;&amp; $game.flagBg&gt;&gt;
	&lt;div style=&quot;display: flex; justify-content: center; text-align: center;&quot;&gt;
	&lt;div&gt;
	  Result
	  &lt;br /&gt;
	  &lt;&lt;flag&gt;&gt;
	&lt;/div&gt;
	&lt;/div&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Continue&#39;&gt;&gt;
		&lt;&lt;goto &#39;Blair - gate done finish&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;


&lt;style&gt;
.flag_choose_item {
	margin: 0px 30px;
}
.flag_icon_choose_item {
    width: 102px;
    margin: 0 53px;
}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="244" name="Blair - gate done finish" tags="" position="1249,2179" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
I&#39;m so proud of you! Who would have thought that you, who relatively recently emerged from your bunker, would be able to create your own place that people and you yourself could call home.&lt;br /&gt;
I.. I love you...
&lt;&lt;/blair&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/gate_hug.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Go to sleep&#39;&gt;&gt;
	&lt;&lt;set $game.showFlag = true&gt;&gt;
	&lt;&lt;goto &#39;Sleep eval&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="245" name="Random event #15 ammo box" tags="" position="6331,461" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

You decide to explore what&#39;s happening in one of the corners of the destroyed city. After walking around this corner for a couple of hours, you didn&#39;t see a single living soul until you decided to approach a burnt-out car that reminded you from a distance of a police car. And so it was. 
&lt;br /&gt;&lt;br /&gt;
 &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/police_car.png&#39;]]
 &lt;/center&gt;
 &lt;br /&gt;&lt;br /&gt;
 
The car was completely destroyed, most likely from the shockwave of a bomb explosion. 
&lt;br /&gt; 
Your attention was drawn to a piece of metal that had fallen into a sewer hole.
&lt;br /&gt;&lt;br /&gt;
You reach out your hand and grab the cardboard box, pulling out the strange object. They were 0.38 caliber bullets
&lt;br /&gt;&lt;br /&gt;
 &lt;center&gt;
 [img[setup.ImagePath+&#39;places/explore/ammo_box.png&#39;]]
 &lt;/center&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;You picked up 6 .38 bullets&lt;/strong&gt;
&lt;&lt;pickup $backpack &#39;bullet_revolver&#39; 6&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="246" name="Event: A lone survivor" tags="" position="570,954" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$game.cabinName ?? &#39;&#39;&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/gate_lone_survivor.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
A lone survivor approaches the gate, claiming to be a doctor who can provide valuable medical assistance to your settlement. However, you also know that they have a history of stealing from other settlements. 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;anonguy&gt;&gt;
	Please, sir. Can I stay here for one night? I&#39;m hungry and I don&#39;t have the strength to continue my journey. I beg you. I could offer you something in return for it.. 
&lt;&lt;/anonguy&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.has(&#39;food&#39;)&gt;&gt;
	&lt;&lt;link &#39;Let him in&#39;&gt;&gt;
		&lt;&lt;drop $backpack &#39;food&#39; 2&gt;&gt;
		&lt;&lt;set $game.lone_survivor = true&gt;&gt;
		&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;linkdesc&gt;&gt;
	-2 food.
&lt;&lt;/linkdesc&gt;&gt;
&lt;&lt;link &#39;Tell him to go away&#39;&gt;&gt;
	&lt;&lt;set $player.goodwill--&gt;&gt;
	&lt;&lt;set $player.reputation--&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="247" name="Event: A lone survivor: gift" tags="" position="674,954" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$game.cabinName ?? &#39;&#39;&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/gate_lone_survivor.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
The lone survivor that you let stay overnight and feed at your camp yesterday has gathered his belongings and is waiting for you at the gate.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;anonguy&gt;&gt;
Thank you very much! I will never forget your hospitality. I have a gift of gratitude for you.
&lt;&lt;/anonguy&gt;&gt;

&lt;&lt;pickup $backpack &#39;antibiotics&#39; 1&gt;&gt;

&lt;strong&gt;You received &lt;strong class=&quot;iitem&quot;&gt;1 antibiotics&lt;/strong&gt;&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="248" name="Event: A lone survivor: steal" tags="" position="783,948" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$game.cabinName ?? &#39;&#39;&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/gate_lone_survivor_steal.png&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
The lone survivor that you let stay overnight and feed at your camp yesterday is nowhere to be found. The gate is left half-open and it appears that food has been taken from the storage.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _food = Math.min(20, $backpack.count(&#39;food&#39;))&gt;&gt;

&lt;&lt;drop $backpack &#39;food&#39; _food&gt;&gt;

&lt;strong&gt;You lost &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_food&gt;&gt; food&lt;/strong&gt;&lt;/strong&gt; 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="249" name="Rodger - champagne sex" tags="bg-settlement" position="2374,2554" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
I heard that you&#39;ve transformed your little place into a small village and even built yourself gates with a real flag. 
&lt;br /&gt;
We&#39;re very happy for you! By the way, you&#39;ll definitely want to celebrate all of this. 
&lt;br /&gt;
Are you willing to go with Eve to a friend&#39;s bar for champagne again?
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Go to the city with Eve&#39;&gt;&gt;
	&lt;&lt;goto &#39;Rodger - champagne sex #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="250" name="Rodger - champagne sex #2" tags="" position="2481,2555" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addhours 4&gt;&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_tavern.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
After a few hours of walking, you reached Roger&#39;s friend&#39;s pub. The door is broken down and the building looks partially burnt from the outside. 
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_basement.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

Downstairs was dark and damp. Mold was everywhere and you had trouble seeing where you were even walking. You already knew the place where bottles were so you went straight for them.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;pickup $backpack &#39;champagne&#39; 10&gt;&gt;
&lt;strong&gt;You picked up &lt;span class=&quot;iitem&quot;&gt;10 champagne&lt;/span&gt; bottles&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_basement_storage.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
A moment after collecting the bottles, suddenly you hear the sound of many people upstairs. They are making a lot of noise and causing a commotion, and one of them shouts, &quot;I saw someone come in here again!&quot;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	  [img[setup.ImagePath+&#39;places/cabin/rodger_bottles_hand_over_mouth.webp&#39;]]
&lt;/center&gt;

&lt;br /&gt;&lt;br /&gt;
Your reaction is the same as the first time. You force yourself towards Eve and press her mouth shut. However, this time you have decided to always deal with them on top.

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Carefully check how many of them there are&#39;&gt;&gt;
	&lt;strong&gt;There&#39;s only one guy and one girl&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;option1&quot;&gt;
		&lt;&lt;link &#39;Call them out and fight them&#39;&gt;&gt;
			&lt;&lt;set $enemies = []&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;newgirl&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
			&lt;&lt;fight $enemies &#39;Rodger - champagne sex #3&#39; &#39;Rodger - champagne sex #3&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
	&lt;&lt;if $player.int &gt;= 20&gt;&gt;
		&lt;&lt;linkreplace &#39;Ambush guy from behind and knock him out&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_knockout.webp&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			You slowly approach the men from behind, and while he is not looking, you hit him on the head and he immediately falls to the ground. The woman sees you and rushes towards you.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Fight the girl&#39;&gt;&gt;
				&lt;&lt;set $enemies = []&gt;&gt;
				&lt;&lt;newgirl&gt;&gt;
				&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
				&lt;&lt;fight $enemies &#39;Rodger - champagne sex #3&#39; &#39;Rodger - champagne sex #3&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="251" name="Rodger - champagne sex #3" tags="" position="2589,2556" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_bodies_on_ground.jpg&#39;]]
&lt;/center&gt;

&lt;&lt;set _isGirlAlive = true&gt;&gt;
&lt;&lt;for _killedEnemyI, _killedEnemy range $prevFight.killedEnemies&gt;&gt;
	&lt;&lt;if !_killedEnemy.gender&gt;&gt;
		&lt;&lt;set _isGirlAlive = false&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;if !$prevFight.enemiesAlive&gt;&gt;
	Both of the enemies are laying on the ground dead. 
&lt;&lt;elseif _isGirlAlive&gt;&gt;
	The man lies on the ground while the girl in the corner begs for forgiveness and says that she will never be a problem to you again.
&lt;&lt;else&gt;&gt;
	Both of the enemies are laying on the ground. 
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;
&lt;br /&gt;

&lt;&lt;if _isGirlAlive&gt;&gt;
	&lt;&lt;linkreplace &#39;Fuck girl&#39;&gt;&gt;
		You slowly approach the girl who is asking for forgiveness on the ground. You lift her up and take off her clothes.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_ripped_clothes.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		She starts screaming for you to leave her alone and tries to break free from your grasp, but falls to the ground. You take advantage of the moment to take off her underwear.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_ripped_clothes2.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		She tries to crawl away from you while shouting loudly for you to stop, but you push her down, spread her legs, and enter her with all your strength.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_fuck3.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		She gasps for breath but continues to resist even after you mercilessly continue to fuck her pussy for 5 minutes.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_fuck4.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You unexpectedly look around and see that Eve is watching you with a blush on her cheeks, but it seems like she hasn&#39;t noticed you. You decide to stop.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_peeping.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;set $characters.eve.corruption +=5&gt;&gt;
		Eve corruption increased by 5
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Go back to Eve&#39;&gt;&gt;
	&lt;&lt;goto &#39;Rodger - champagne sex #4&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;style&gt;
.passage img {
    min-height: 400px;
}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="252" name="Rodger - champagne sex #4" tags="" position="2701,2556" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;eve&gt;&gt;
	Everything okay? What was that noise from upstairs?
&lt;&lt;/eve&gt;&gt;

&lt;&lt;linkreplace &#39;Everyting is fine&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You both lie down under the blanket you found in the basement, and Eve snuggles up very close to you.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/cabin/rodget_bottles_sleep_rub.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	She presses her ass against your bulge and possibly unintentionally grinds against your for a moment.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/settlement/champagne_eve1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	Eve lets out a deep sigh and presses herself even tighter against you, grabbing your bulge. She plays with your bulge until accidentally your dick slips out and she instantly takes her hand away.
	&lt;br /&gt;
	You use the moment and decide to rub it agains her panties. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/settlement/champagne_eve2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She continues to remain silent but keeps pressing her hips against you. Slowly, you can no longer resist and gently pull down her panties and gently push your dick inside her moist pussy. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/settlement/champagne_eve3&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	To your surprise, she doesn&#39;t just lie there but takes the initiative upon herself and starts grinding your dick. You just lay there still as she does all the job. Feels like she has been waiting it for some time and
	she definitely knows what she&#39;s doing.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/settlement/champagne_eve4&#39;&gt;&gt;
	&lt;&lt;horny 100&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
		Without a warning you cum inside her warm pussy and you feel how your cum drips out of it.
		&lt;br /&gt;
		&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_eve_cum.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		She pushes herself slightly away from you and without saying a word, goes to sleep.
		&lt;&lt;horny_reset&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Go to sleep&#39;&gt;&gt;
			&lt;&lt;sleep &#39;Rodger - champagne sex finish&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;style&gt;
.passage img {
    min-height: 400px;
}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="253" name="Rodger - champagne sex finish" tags="" position="2810,2559" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
The next morning, as you wake up, you see that Eve has already packed her bag and is ready to hit the road.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;eve&gt;&gt;
We should go back...
&lt;&lt;/eve&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
The journey back is silent, and she doesn&#39;t say a word. After a couple of hours, you have already arrived back in the village, and Roger is waiting for you with open arms.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/intro_tents.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
	My heroes! I don&#39;t know what I would do without both of you. Thank you once again.
&lt;&lt;/rodger&gt;&gt;
&lt;&lt;addhours 4&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;set $characters.rodger.quests.champagne_day = $game.day&gt;&gt;</tw-passagedata><tw-passagedata pid="254" name="Blackjack bj" tags="" position="3715,1030" size="100,100">&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;blackjack-bj&quot;&gt;
	&lt;&lt;if $player.horny === 100&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/bar/blackjack_bj_cum.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;
		&lt;br /&gt;
			Without hesitation you cum in her mouth without warning but she takes it like a champ.&lt;br /&gt;
			Not a single drop of cum fell on the floor.
		&lt;br /&gt;
		&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/bar/blackjack_bj_end.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You push her away from yourself. 
		&lt;&lt;set $blackjack.bj = false&gt;&gt;
		&lt;&lt;horny_reset&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/bar/blackjack_bj&#39; + randomInteger(1,3) + &#39;.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;
		Random girl sucks your dick under the table
		&lt;&lt;horny 5&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="255" name="Eve champagne" tags="bg-settlement" position="2376,2668" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
Hey we&#39;re low on wine and champagne. Could you please take another journey with Eve?
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Go to the city with Eve&#39;&gt;&gt;
	&lt;&lt;goto &#39;Eve champagne #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Maybe some other time&#39;&gt;&gt;
	&lt;&lt;set $characters.rodger.quests.champagne_day = $game.day&gt;&gt;
	&lt;&lt;goto &#39;Rodger - church talk&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="256" name="Eve champagne #2" tags="" position="2483,2667" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addhours 4&gt;&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_tavern.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
After a few hours of walking, you reached Roger&#39;s friend&#39;s pub. The door is broken down and the building looks partially burnt from the outside. 
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_basement.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

Downstairs was dark and damp. Mold was everywhere and you had trouble seeing where you were even walking. You already knew the place where bottles were so you went straight for them.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;pickup $backpack &#39;champagne&#39; 10&gt;&gt;
&lt;strong&gt;You picked up &lt;span class=&quot;iitem&quot;&gt;10 champagne&lt;/span&gt; bottles&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_basement_storage.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You collect the bottles.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Suggest that you could spend the night here&#39;&gt;&gt;
	&lt;&lt;goto &#39;Eve champagne #3&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Eve champagne home&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="257" name="Eve champagne #3" tags="" position="2591,2667" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/eve_bottles_undress.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You undress and turn around, but in front of you, Eve has already taken off her clothes, leaving only a top. You help her get rid of that too.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/settlement/champagne_eve_repeatable1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Both of you crawl under the covers, but instead of lying down next to you, she settles on top of you.
&lt;br /&gt;
She grabs your dick and puts it between her breasts.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/settlement/champagne_eve_repeatable2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
After sloppy titfuck and some giggles a wide smile appears on her face. &lt;br /&gt;
She leans lower and puts your dick in her mouth.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/settlement/champagne_eve_repeatable3&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Her blowjob isn&#39;t the best you had but I guess she&#39;s trying. Her pussy from the other hand is something else.
&lt;br /&gt;
She&#39;s almost as tight as Blair..
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;/settlement/champagne_eve_repeatable4&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She quietly maons as you tell her that you will cum soon.
&lt;br /&gt;
She grabs your dick and pulls it out, letting you cum all over pussy but not inside.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Go to sleep&#39;&gt;&gt;
	&lt;&lt;sleep &#39;Eve champagne home&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="258" name="Eve champagne home" tags="" position="2701,2664" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/rodger_bottles_dressup.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
The next morning, as you wake up, you see that Eve is getting dressed.&lt;br /&gt;
She looks at you with a smile on her face.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;eve&gt;&gt;
Good morning. We should get back
&lt;&lt;/eve&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
The journey back goes without any problems. After a couple of hours, you have already arrived back in the village, and Roger is waiting for you with open arms.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/intro_tents.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
	My heroes! I don&#39;t know what I would do without both of you. Thank you once again.
&lt;&lt;/rodger&gt;&gt;
&lt;&lt;addhours 4&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $characters.eve.corruption &lt; 40&gt;&gt;
	&lt;&lt;set $characters.eve.corruption +=5&gt;&gt;
	&lt;strong&gt;Corruption with Eve increased by 5&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;Can&#39;t increase corruption anymore with this action&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;
&lt;&lt;if $characters.eve.relationship &lt; 35&gt;&gt;
	&lt;&lt;set $characters.eve.relationship++&gt;&gt;
	&lt;strong&gt;Relationship with Eve increased by 1&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;strong&gt;Can&#39;t increase relationship anymore with this action&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;set $characters.rodger.quests.champagne_day = $game.day&gt;&gt;</tw-passagedata><tw-passagedata pid="259" name="Blair - nursery" tags="" position="451,2296" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;

&lt;&lt;blair&gt;&gt;
	By the way, good job with the gate, &lt;&lt;=$player.name&gt;&gt;!
	&lt;br /&gt;
Given the current situation, you should consider whether or not it would be necessary to have a separate house specifically for children. They would have their own little corner where they could play and wouldn&#39;t have to witness what&#39;s happening around them as often.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;Nursery unlocked in workbench&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
[[Leave|Kitchen-room]] 

&lt;&lt;set $game.location.bar = true&gt;&gt;
&lt;&lt;addmins 30&gt;&gt;</tw-passagedata><tw-passagedata pid="260" name="Nursery - built" tags="" position="1553,281" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NURSERY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/nursery_built.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
Well, not exactly what I had imagined, but having a roof over their head will definitely be suitable. Maybe in the future, you could consider making it more colorful and appealing to children&#39;s eyes.
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _newGuests = []&gt;&gt;
&lt;&lt;set _newSlaves = []&gt;&gt;
&lt;&lt;set _tempCompanions = []&gt;&gt;
&lt;&lt;for _nursCompI, _nursComp range $player.companions ?? []&gt;&gt;
	&lt;&lt;set _nursCompKey = _nursCompI.split(&#39;:&#39;)&gt;&gt;
	&lt;&lt;run _tempCompanions.push($guests[_nursCompKey[1]].name + &#39;:&#39; + $guests[_nursCompKey[1]].birthDate.getTime())&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;set $nursery = []&gt;&gt;
&lt;&lt;for _nurGuestI to 0; _nurGuestI lt ($guests ?? []).length; _nurGuestI++&gt;&gt;
	&lt;&lt;capture _nurGuestI&gt;&gt;
		&lt;&lt;if setup.getAge($guests[_nurGuestI]) &lt; 17&gt;&gt;
		  	&lt;&lt;run $nursery.push($guests[_nurGuestI])&gt;&gt;
	  	&lt;&lt;else&gt;&gt;
			&lt;&lt;run _newGuests.push($guests[_nurGuestI])&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;
&lt;&lt;for _nurSlaveI to 0; _nurSlaveI lt ($slaves ?? []).length; _nurSlaveI++&gt;&gt;
	&lt;&lt;capture _nurSlaveI&gt;&gt;
		&lt;&lt;if setup.getAge($slaves[_nurSlaveI]) &lt; 17&gt;&gt;
		  	&lt;&lt;run $nursery.push($slaves[_nurSlaveI])&gt;&gt;
	  	&lt;&lt;else&gt;&gt;
			&lt;&lt;run _newSlaves.push($slaves[_nurSlaveI])&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;set _tempCompanionsNew = {}&gt;&gt;
&lt;&lt;for _newGuestI, _newGuest range _newGuests&gt;&gt;
	&lt;&lt;if _tempCompanions.includes(_newGuest.name + &#39;:&#39; + _newGuest.birthDate.getTime())&gt;&gt;
		&lt;&lt;set _tempCompanionsNew[&#39;guest:&#39; + _newGuestI] = true&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;set $guests = _newGuests&gt;&gt;
&lt;&lt;set $slaves = _newSlaves&gt;&gt;
&lt;&lt;set $player.companions = _tempCompanionsNew&gt;&gt;

&lt;&lt;set $game.location.nursery = true&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="261" name="Nursery" tags="Place" position="1346,773" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NURSERY&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/guesthouse_head.jpg&#39;]]
&lt;/div&gt;
&lt;h3&gt;Kids&lt;/h3&gt;

&lt;&lt;if ($nursery ?? []).length &lt; 1&gt;&gt;
	&lt;div style=&quot;margin-top: 20px;&quot;&gt;
		Noone is living here...
	&lt;/div&gt;
&lt;&lt;else&gt;&gt;
	&lt;table id=&quot;slaves&quot;&gt;
	&lt;&lt;for _nurseryI, _nursery range $nursery&gt;&gt;
		&lt;&lt;capture _nurseryI, _nursery&gt;&gt;
			&lt;&lt;set _genderClass = &#39;gender-&#39; + (!_nursery.gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
			&lt;tr&gt;
				&lt;td style=&quot;width: 300px&quot;&gt;
					&lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
						&lt;&lt;link _nursery.name&gt;&gt;
							 &lt;&lt;set $childId = _nurseryI&gt;&gt;
							 &lt;&lt;set $tmpGirl = _nursery&gt;&gt;
							 &lt;&lt;goto &#39;Child view&#39;&gt;&gt;
						&lt;&lt;/link&gt;&gt;
					&lt;/span&gt;
				&lt;/td&gt;
				&lt;td&gt;
					Age: &lt;&lt;=setup.getAge(_nursery)&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;link &#39;Throw out&#39;&gt;&gt;
					  &lt;&lt;dialog &#39;Throw out&#39;&gt;&gt;
						  Are you sure you want to throw &lt;&lt;=(_nursery.gender ? &#39;him&#39; : &#39;her&#39;)&gt;&gt; out?
						  &lt;br /&gt;
						  &lt;&lt;link &#39;Yes&#39; &#39;Nursery&#39;&gt;&gt;
							  &lt;&lt;run $nursery.splice(_nurseryI, 1)&gt;&gt;
							  &lt;&lt;dialogclose&gt;&gt;
							  &lt;&lt;set $player.goodwill -= 2&gt;&gt;
						  &lt;&lt;/link&gt;&gt;	
					  &lt;&lt;/dialog&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
&lt;&lt;/if&gt;&gt;

[[Back|Wood cabin]]</tw-passagedata><tw-passagedata pid="262" name="Event: Baby merchant" tags="" position="888,949" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$game.cabinName ?? &#39;&#39;&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/old_merchant.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;anonguy&gt;&gt;
What kind of place is this? It doesn&#39;t really matter. I have a generous offer for you. Do you have small children or newborns? I&#39;m ready to buy them from you.
&lt;&lt;/anonguy&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;options&quot;&gt;
	&lt;&lt;linkreplace &#39;What he will do with them&#39;&gt;&gt;
		&lt;&lt;anonguy&gt;&gt;
			Why do you care? Have you ever eaten them? Get ready for a delicious soup. Mmm...
		&lt;&lt;/anonguy&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;link &#39;Yes&#39;&gt;&gt;
		&lt;&lt;goto &#39;Event: Baby merchant sell&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#39;Maybe some other time&#39;&gt;&gt;
		&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;&lt;linkreplace &#39;Kill him&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#options&#39;).hide()&gt;&gt;
	&lt;center&gt;						
		[img[setup.ImagePath+&#39;places/cabin/baby_merchant_killed.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	Looking into his eyes, you find an old, rusted pipe within arm&#39;s reach, and you strike him in the head with it. He wasn&#39;t prepared for it and falls dead to the ground. Within seconds, the ground around him turns red.
	&lt;br /&gt;
	&lt;br /&gt;
	&lt;strong&gt;People like him will leave you alone for a while.&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;set $player.godwill++&gt;&gt;
	&lt;&lt;set $game.baby_merchant_day = $game.day&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="263" name="Wanted - fight" tags="" position="3215,1789" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/wanted_trap.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Chasing after &lt;&lt;=$wantedPron2&gt;&gt;, &lt;&lt;=$wantedPron2&gt;&gt; runs around the corner into a dark alley. 
&lt;br /&gt; 
Following closely behind and catching up to &lt;&lt;=$wantedPron2&gt;&gt;, to your surprise, you are met by a gang consisting of &lt;strong&gt;4 people&lt;/strong&gt;, all ready to defend &lt;&lt;=$wantedPron2&gt;&gt;.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
	&lt;&lt;set $enemies = []&gt;&gt;
 	&lt;&lt;newguy&gt;&gt;
	&lt;&lt;if setup.percentageChance(10)&gt;&gt;
		&lt;&lt;set 
			$tmpGuy.inventory = [],
			$tmpGuy.inventory.push(&#39;knife&#39;)
		&gt;&gt;
	&lt;&lt;/if&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;newgirl&gt;&gt;
	&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
  	&lt;&lt;fight $enemies &#39;Wanted - catched&#39; &#39;Streets&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;set _linkName = &#39;Leave &#39; + $wantedPron2 + &#39; alone&#39;&gt;&gt;
&lt;&lt;link &#96;_linkName&#96;&gt;&gt;
	&lt;&lt;set $player.reputation_bounty_hunter--&gt;&gt;
	&lt;&lt;set $wanted.splice($wantedId, 1)&gt;&gt;
	&lt;&lt;goto &#39;Bar&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="264" name="Wanted - parent" tags="" position="3207,1894" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/wanted_parent.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $wanted[$wantedId].birthDate = setup.getBirthDate(randomInteger(19,25))&gt;&gt;
Chasing after &lt;&lt;=$wantedPron2&gt;&gt;, &lt;&lt;=$wantedPron&gt;&gt; runs into a tent district.
&lt;br /&gt;
Following closely behind and catching up to &lt;&lt;=$wantedPron2&gt;&gt;, to your surprise, you see that she has run to her mother and hugged her deeply as she cries her eyes out.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;&quot;They found me mother! I am scared! Please no!!&quot;&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
The mother notices you and pushes the girl behind her, falling to her knees with tear-filled eyes, begging you to leave her daughter alone, as the only thing she did wrong was stealing a couple of food so her younger brother could eat.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/wanted_parent2.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;anongirl&gt;&gt;
	Please leave her alone! Take me instead! Just leave her out of it. Forget that you even saw her. I BEG YOU!
&lt;&lt;/anongirl&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Tell her that they both need to suck you off&#39;&gt;&gt;
		&lt;&lt;video &#39;/bar/wanted_parent1&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		The mother immediately drops to her knees and understands what she needs to do. The daughter is still in shock, but after a moment, she realizes what her mother is doing and asks her to stop because she can no longer watch and takes over the control.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;/bar/wanted_parent2&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		Both of their faces show disgust and dislike, but they continue to do it.
		&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;&lt;link &#39;Push her away from the daughter&#39;&gt;&gt;
	&lt;&lt;set $player.goodwill--&gt;&gt;
	&lt;&lt;goto &#39;Wanted - catched&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;if $game.location.basement &amp;&amp; $slaves.length &lt; $basementLimit &amp;&amp; $player.energy &gt;= 30&gt;&gt;
	&lt;&lt;link &#39;Take mother as slave&#39;&gt;&gt;
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;set $tmpGirl.birthDate = setup.getBirthDate(randomInteger(38, 44))&gt;&gt;
		&lt;&lt;set $tmpGirl.race = $wanted[$wantedId].race ?? &#39;white&#39;&gt;&gt;
		&lt;&lt;run $slaves.push($tmpGirl)&gt;&gt;
		&lt;&lt;set $player.reputation_bounty_hunter--&gt;&gt;
		&lt;&lt;set $wanted.splice($wantedId, 1)&gt;&gt;
		&lt;&lt;goto &#39;Bar&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Forget about them&#39;&gt;&gt;
	&lt;&lt;set $player.reputation_bounty_hunter--&gt;&gt;
	&lt;&lt;set $player.reputation++&gt;&gt;
	&lt;&lt;set $player.goodwill++&gt;&gt;
	&lt;&lt;set $wanted.splice($wantedId, 1)&gt;&gt;
	&lt;&lt;goto &#39;Bar&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="265" name="Wanted - unique #1" tags="" position="3317,1896" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
Under the cover of ruins, you make your way to the warehouse, your senses heightened and your equipment ready. The dilapidated building stands as a haunting testament to its former purpose. The creaking doors and broken windows are reminders of its neglected state.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/wanted_unique1_1.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you cautiously enter the warehouse, the only source of light emanates from the weak light filtering through the cracks. The sound of your footsteps echoes ominously in the empty space, adding to the tension that fills the air. You stay alert, every sense attuned to the surroundings.
&lt;br /&gt;&lt;br /&gt;
Suddenly, you detect a faint sound coming from a nearby room. Following the noise, you inch closer, your pulse quickening with anticipation. Peering through a partially open door, you catch a glimpse of The Ghost, meticulously examining an item on a table.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/bar/wanted_unique1_2.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $player.int &gt; 10&gt;&gt;
	&lt;&lt;link &#39;Attack him from behind in stealth mode&#39;&gt;&gt;
		&lt;&lt;goto &#39;Wanted - unique #1 end&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Fight&#39;&gt;&gt;
	&lt;&lt;set $enemies = []&gt;&gt;
	&lt;&lt;set $wanted[$wantedId].strength = randomInteger(30, 50)&gt;&gt;
  	&lt;&lt;run $enemies.push($wanted[$wantedId])&gt;&gt;
  	&lt;&lt;fight $enemies &#39;Wanted - unique #1 end&#39; &#39;Wanted - unique #1 lost&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="266" name="Event: Baby merchant sell" tags="" position="996,954" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$game.cabinName ?? &#39;&#39;&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/old_merchant.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;anonguy&gt;&gt;
Let me take a look... I am ready to pay 20 caps for one.
&lt;&lt;/anonguy&gt;&gt;

&lt;&lt;set _hasBabies = false&gt;&gt;
&lt;table id=&quot;slaves&quot;&gt;
&lt;&lt;for _nurseryI, _nursery range ($nursery ?? [])&gt;&gt;
	&lt;&lt;set _hasBabies = true&gt;&gt;
	&lt;&lt;capture _nurseryI, _nursery&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
				&lt;span class=&quot;name-no-click&quot;&gt;&lt;&lt;=_nursery.name&gt;&gt;&lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge(_nursery)&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;link &#39;Sell&#39;&gt;&gt;
				  &lt;&lt;dialog &#39;Throw out&#39;&gt;&gt;
					  Are you sure you want to sell &lt;&lt;=(_nursery.gender ? &#39;him&#39; : &#39;her&#39;)&gt;&gt;?
					  &lt;br /&gt;
					  &lt;&lt;link &#39;Yes&#39; &#39;Event: Baby merchant sell&#39;&gt;&gt;
						  &lt;&lt;run $nursery.splice(_nurseryI, 1)&gt;&gt;
						  &lt;&lt;dialogclose&gt;&gt;
						  &lt;&lt;set $player.goodwill -= 2&gt;&gt;
						  &lt;&lt;set $player.money += 20&gt;&gt;
					  &lt;&lt;/link&gt;&gt;	
				  &lt;&lt;/dialog&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;
&lt;/table&gt;

&lt;table id=&quot;slaves&quot;&gt;
&lt;&lt;for _slaveI, _slave range $slaves&gt;&gt;
	&lt;&lt;if setup.getAge(_slave) &gt; 17&gt;&gt;
		&lt;&lt;continue&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set _hasBabies = true&gt;&gt;
	&lt;&lt;capture _slaveI, _slave&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
				&lt;span class=&quot;name-no-click&quot;&gt;&lt;&lt;=_slave.name&gt;&gt;&lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge(_slave)&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;link &#39;Sell&#39;&gt;&gt;
				  &lt;&lt;dialog &#39;Throw out&#39;&gt;&gt;
					  Are you sure you want to sell &lt;&lt;=(_slave.gender ? &#39;him&#39; : &#39;her&#39;)&gt;&gt;?
					  &lt;br /&gt;
					  &lt;&lt;link &#39;Yes&#39; &#39;Event: Baby merchant sell&#39;&gt;&gt;
						  &lt;&lt;run $slaves.splice(_slaveI, 1)&gt;&gt;
						  &lt;&lt;dialogclose&gt;&gt;
						  &lt;&lt;set $player.goodwill -= 2&gt;&gt;
						  &lt;&lt;set $player.money += 20&gt;&gt;
					  &lt;&lt;/link&gt;&gt;	
				  &lt;&lt;/dialog&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;
&lt;/table&gt;

&lt;table id=&quot;slaves&quot;&gt;
&lt;&lt;for _guestI, _guest range $guests&gt;&gt;
	&lt;&lt;if setup.getAge(_guest) &gt; 17&gt;&gt;
		&lt;&lt;continue&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set _hasBabies = true&gt;&gt;
	&lt;&lt;capture _guestI, _guest&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
				&lt;span class=&quot;name-no-click&quot;&gt;&lt;&lt;=_guest.name&gt;&gt;&lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge(_guest)&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;link &#39;Sell&#39;&gt;&gt;
				  &lt;&lt;dialog &#39;Throw out&#39;&gt;&gt;
					  Are you sure you want to sell &lt;&lt;=(_guest.gender ? &#39;him&#39; : &#39;her&#39;)&gt;&gt;?
					  &lt;br /&gt;
					  &lt;&lt;link &#39;Yes&#39; &#39;Event: Baby merchant sell&#39;&gt;&gt;
					  	  &lt;&lt;companionRearange _guestI&gt;&gt;
						  &lt;&lt;run $guests.splice(_guestI, 1)&gt;&gt;
						  &lt;&lt;dialogclose&gt;&gt;
						  &lt;&lt;set $player.goodwill -= 2&gt;&gt;
						  &lt;&lt;set $player.money += 20&gt;&gt;
					  &lt;&lt;/link&gt;&gt;	
				  &lt;&lt;/dialog&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;
&lt;/table&gt;

&lt;&lt;if !_hasBabies&gt;&gt;
	&lt;strong&gt;You have nothing to sell...&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Finish trading&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="267" name="Wanted - unique #1 end" tags="" position="3428,1894" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You go and take a look at what&#39;s on the table in the corner of the room.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.has(&#39;revolver&#39;)&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/bar/wanted_unique1_4.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	Nothing...
&lt;&lt;else&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/bar/wanted_unique1_3.webp&#39;]]
	&lt;/center&gt;
	&lt;&lt;pickup $backpack &#39;revolver&#39; 1&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You picked up &lt;strong class=&quot;iitem&quot;&gt;revolver&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wanted - collect reward&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;


</tw-passagedata><tw-passagedata pid="268" name="Wanted - unique #1 lost" tags="" position="3543,1893" size="100,100">&lt;&lt;set $wanted[$wantedId].wanted.progress -= 50&gt;&gt;
&lt;&lt;goto &#39;Streets&#39;&gt;&gt;</tw-passagedata><tw-passagedata pid="269" name="Vincent - car talk" tags="" position="2714,1029" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	&lt;&lt;=$player.name&gt;&gt;!! Good! I wanted to talk with you. Grab the things from the table and lets take a walk.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/fishing_rod.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Looking at the table, you see two old fishing rods with a couple of floats and bait. You take everything and pack it in a bag, while Vincent is already waiting for you at the door.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Follow Vincent&#39;&gt;&gt;
	As you step outside, Vincent mentions that he wants to talk to you about something, but he doesn&#39;t want Blair to know anything about this conversation. You slowly distance yourselves from the farm and head towards the river.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;vincent&gt;&gt;
		I heard that you have built gates for your camp and even created a flag. I don&#39;t know who suggested this idea to you, but it&#39;s the dumbest idea you could have had. You realize that now you&#39;ve put your location on the map, and that doesn&#39;t mean people will only seek help from you, but also all sorts of murderers and kidnappers, right?
	&lt;&lt;/vincent&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	While Vincent continues to reiterate a few times in different ways that building gates was the dumbest thing you could have done, you have already reached the river. Vincent takes out his fishing rod and casts his line into the water.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/fishing.webp&#39;]]
&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;vincent&gt;&gt;
		Alright. You definitely know better what to do. I&#39;m just worried about both you and Blair. I&#39;ve seen how she looks at you. I&#39;m not a fool. Just don&#39;t hurt her feelings...
	&lt;&lt;/vincent&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;vincent&gt;&gt;
		Did she tell you how her mother died? No? We also tried something similar. We wanted our farm to help people in need, so we spread the news in the nearby town that our doors were open to anyone who needed assistance. Yes, there were people who genuinely needed it, but then some really bad individuals showed up. At that time, I had started my little project. My wife tried to stop them from taking our car. I prayed for her to stay calm, but she was very insistent on not letting anyone harm us...
	&lt;&lt;/vincent&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
		Vincent&#39;s tears began to flow. He paused for a moment and, while trying to control his tears, put a partially burned piece of paper into your hands.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		&lt;div class=&quot;img-no-w&quot;&gt;
			[img[setup.ImagePath+&#39;places/farm/car_blueprint.png&#39;]]
		&lt;/div&gt;
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;vincent&gt;&gt;
		Those bastards were from &lt;strong class=&quot;iitem&quot;&gt;The Santuary&lt;/strong&gt;... And everything because of that stupid car...
		&lt;br /&gt;
		Sorry. I can&#39;t... You can keep it...
	&lt;&lt;/vincent&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;addhours 6&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="270" name="Blair bug warning" tags="" position="34,1325" size="100,100">&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;
&lt;div style=&quot;padding: 20px; background-color: #f1c40f; color:#2c3e50; font-weight:bold&quot;&gt;
Warning! 
&lt;br /&gt;
Game has detected a game breaking bug for Blair!! 
&lt;br /&gt;
Please save the game to the file and report it as bug without making any other movements. 
&lt;br /&gt;
&lt;/div&gt;
&lt;div class=&quot;caut-bar&quot;&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="271" name="Event: Base attack" tags="" position="343,959" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$game.cabinName ?? &#39;&#39;&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/event_base_attack.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you stroll through your village, enjoying the warm sunshine on your face, a sudden commotion catches your attention. One of your girls, sprints towards you, her face contorted with fear and her eyes wide with panic. She screams at the top of her lungs, &quot;Help! Help! They&#39;re attacking our base!&quot;
&lt;br /&gt;&lt;br /&gt;
Between gasps for breath, the girl manages to respond, her voice trembling, &quot;A group of bandits! They stormed our gates and managed to break through! They&#39;re wreaking havoc inside!&quot;
&lt;br /&gt;&lt;br /&gt;
As you arrive at the gate, the sight that greets you is one of chaos. Gates lie broken and splintered, remnants of a violent struggle and in front of you are standing 4 guys and one girl.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $prevFight = {}&gt;&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Attack them&#39;&gt;&gt;
		&lt;&lt;set $enemies = []&gt;&gt;
		&lt;&lt;for _baseAttackI = 0; _baseAttackI &lt; 4; _baseAttackI++&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;set $tmpGuy.strength = randomInteger(40, 70)&gt;&gt;
			&lt;&lt;if setup.percentageChance(20)&gt;&gt;
				&lt;&lt;set 
					$tmpGuy.inventory = [],
					$tmpGuy.inventory.push(&#39;knife&#39;)
				&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;/for&gt;&gt;
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
		&lt;&lt;fight $enemies &#39;Wood cabin&#39; &#39;Event: Base attack - lost&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;&lt;linkreplace &#39;Try to negotiate&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
	&lt;&lt;if $player.int &lt; 30&gt;&gt;
		&lt;center&gt;						
			[img[setup.ImagePath+&#39;places/cabin/event_base_attack_laugh.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		They all start laughing in your face. One of them spits on your face.
		&lt;br /&gt;&lt;br /&gt;
		&lt;strong class=&quot;iitem&quot;&gt;Your intelligence  failed&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Attack them&#39;&gt;&gt;
			&lt;&lt;set $enemies = []&gt;&gt;
			&lt;&lt;for _baseAttackI = 0; _baseAttackI &lt; 4; _baseAttackI++&gt;&gt;
				&lt;&lt;newguy&gt;&gt;
				&lt;&lt;set $tmpGuy.strength = randomInteger(40, 70)&gt;&gt;
				&lt;&lt;if setup.percentageChance(20)&gt;&gt;
					&lt;&lt;set 
						$tmpGuy.inventory = [],
						$tmpGuy.inventory.push(&#39;knife&#39;)
					&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;/for&gt;&gt;
			&lt;&lt;newgirl&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
			&lt;&lt;fight $enemies &#39;Wood cabin&#39; &#39;Event: Base attack - lost&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;
		They mockingly look at each other and nods their heads.
		&lt;br /&gt;&lt;br /&gt;
		&quot;&lt;strong&gt;You have a deal! But we&#39;ll take on of your slaves with us&lt;/strong&gt;&quot;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Accept the offer&#39;&gt;&gt;
			&lt;&lt;goto &#39;Event: Base attack - lost&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
		&lt;&lt;linkdesc&gt;&gt;
			Will take one of your slaves.
		&lt;&lt;/linkdesc&gt;&gt;
		&lt;&lt;link &#39;Attack them&#39;&gt;&gt;
			&lt;&lt;set $enemies = []&gt;&gt;
			&lt;&lt;for _baseAttackI = 0; _baseAttackI &lt; 4; _baseAttackI++&gt;&gt;
				&lt;&lt;newguy&gt;&gt;
				&lt;&lt;set $tmpGuy.strength = randomInteger(40, 70)&gt;&gt;
				&lt;&lt;if setup.percentageChance(20)&gt;&gt;
					&lt;&lt;set 
						$tmpGuy.inventory = [],
						$tmpGuy.inventory.push(&#39;knife&#39;)
					&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;/for&gt;&gt;
			&lt;&lt;newgirl&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
			&lt;&lt;fight $enemies &#39;Wood cabin&#39; &#39;Event: Base attack - lost&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="272" name="Event: Base attack - lost" tags="" position="458,1083" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$game.cabinName ?? &#39;&#39;&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/event_base_attack_capture.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _eventBaseAttackCapturedGirls = 1&gt;&gt;
&lt;&lt;if Object.keys($prevFight).length &amp;&amp; setup.percentageChance(50) &amp;&amp; $slaves.length &gt; 1&gt;&gt;
	&lt;&lt;set _eventBaseAttackCapturedGirls++&gt;&gt;
&lt;&lt;/if&gt;&gt;

As you look outside your gates in the distance you see group of attackers walking away with &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_eventBaseAttackCapturedGirls&gt;&gt;&lt;/strong&gt; of your slaves.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _eventBaseAttackSlaveListIds = setup.getRandomPersonIds($slaves, _eventBaseAttackCapturedGirls).sort().reverse()&gt;&gt;
They took: 
&lt;br /&gt;
&lt;&lt;set _beforeSlaves = clone($slaves)&gt;&gt;
&lt;&lt;for _eventBaseAttackSlaveListId, _eventBaseAttackSlaveList range _eventBaseAttackSlaveListIds&gt;&gt;
	&lt;&lt;capture _eventBaseAttackSlaveListId&gt;&gt;
		&lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=$slaves[_eventBaseAttackSlaveList].name&gt;&gt;&lt;/strong&gt;&lt;br /&gt;
		&lt;&lt;set $slaves.splice(_eventBaseAttackSlaveList, 1)&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;
	
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Get up&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="273" name="Give gift" tags="" position="1719,36" size="100,100">&lt;div id=&quot;inventory&quot;&gt;
    &lt;&lt;for _item, _amount range $backpack.table&gt;&gt;
		&lt;&lt;if typeof setup.gifts[_item] === &#39;undefined&#39;&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;capture _item&gt;&gt;
		  &lt;&lt;set $icon = _item&gt;&gt;
		  &lt;div class=&#39;inventory-item tooltip&#39;&gt;
			  &lt;div class=&#39;inventory-img&#39;&gt;
				  [img[setup.ImagePath+&#39;game/inventory/&#39; + $icon + &#39;.png&#39;]]
			  &lt;/div&gt;
			  &lt;div class=&#39;inventory-title&#39;&gt;
				  &lt;&lt;= Item.get(_item).name&gt;&gt; 
				  &lt;&lt;if !Item.get(_item).unique&gt;&gt;
					  &lt;span class=&#39;inventory-amount&#39;&gt;x_amount&lt;/span&gt;
				  &lt;&lt;/if&gt;&gt;
			  &lt;/div&gt;
			  &lt;&lt;if Item.get(_item).description&gt;&gt;
				&lt;span class=&quot;tooltiptext&quot;&gt;&lt;&lt;=Item.get(_item).description&gt;&gt;&lt;/span&gt;
			  &lt;&lt;/if&gt;&gt;

			 	&lt;&lt;link &#39;Gift&#39;&gt;&gt;
					&lt;&lt;drop $backpack _item 1&gt;&gt;
					&lt;&lt;set $tmpGirl.gift = true&gt;&gt;
					&lt;&lt;set $tmpGirl.relationship = Math.min(100, $tmpGirl.relationship + setup.gifts[_item].rel)&gt;&gt;
					&lt;&lt;script&gt;&gt;Dialog.close();&lt;&lt;/script&gt;&gt;
					&lt;&lt;script&gt;&gt;state.display(state.active.title, null, &quot;back&quot;)&lt;&lt;/script&gt;&gt;
				&lt;&lt;/link&gt;&gt;
		  &lt;/div&gt;
		&lt;&lt;/capture&gt;&gt;
    &lt;&lt;/for&gt;&gt;
&lt;/div&gt;

&lt;style&gt;
#inventory {
	display: grid;
	grid-template-columns: repeat(6, 1fr);
	grid-column-gap: 10px;
	grid-row-gap: 10px;
}

.inventory-item {
	 flex: 0 0 33.3333%;
}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="274" name="Rodger - shop" tags="bg-settlement" position="2374,2774" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
Can we ask for your help once again? Currently, we are mostly elderly people and women here, and our strength is limited. Therefore, it&#39;s difficult for us to obtain a few things. Perhaps you could help us to get  &lt;strong class=&quot;iitem&quot;&gt;20&lt;/strong&gt; wood and &lt;strong class=&quot;iitem&quot;&gt;5&lt;/strong&gt; ropes? We would be very grateful.&lt;br /&gt;
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/settlement/rodger_shop_talk.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You both continued talking and walked up to the straw field, where a girl in the middle of the field was doing something.
&lt;br /&gt;
As you approached her you noticed that she&#39;s making hand made jewelry.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
Since occasional travelers pass by us, the girls have come up with the idea that we could open our own small shop where we could sell straw, handmade jewelry, and other small items.
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.rodger.quests.shop_talk = true&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;addhours 2&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="275" name="Settlement - build shop" tags="" position="2482,2776" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SHOP&lt;/h1&gt;
&lt;br /&gt;
&lt;br /&gt;
You need &lt;strong class=&quot;iitem&quot;&gt;5 ropes&lt;/strong&gt; and &lt;strong class=&quot;iitem&quot;&gt;20 wood&lt;/strong&gt; to build the shop
&lt;br /&gt;
&lt;br /&gt;
&lt;&lt;if $backpack.count(&#39;rope&#39;) &gt;= 5 &amp;&amp; $player.energy &gt;= 80&gt;&gt;
	&lt;&lt;link &#39;Build shop&#39;&gt;&gt;
		&lt;&lt;drop $backpack &#39;rope&#39; 5&gt;&gt;
		&lt;&lt;drop $backpack &#39;wood&#39; 20&gt;&gt;
		&lt;&lt;addhours 8&gt;&gt;
		&lt;&lt;energy -80&gt;&gt;
		&lt;&lt;set $game.location.settlement_shop = true&gt;&gt;
		&lt;&lt;goto &#39;Settlement - shop&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Main square&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="276" name="Settlement - shop" tags="Place bg-settlement" position="1942,2557" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SETTLEMENT SHOP&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
  &lt;&lt;set $shopItems = [
	  {name:&#39;necklace_cheap&#39;,price:10,sell:false},
	  {name:&#39;flower&#39;,price:5,sell:false},
	  {name:&#39;hay&#39;,price:1,sell:false},
	  {name:&#39;wood&#39;,price:1},
	  {name:&#39;piercing&#39;,price:10}
  ]&gt;&gt;
&lt;&lt;shop $shopItems &#39;Settlement - shop&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="277" name="Guy view" tags="sex noredirect girlview" position="5012,30" size="100,100">&lt;&lt;if !$tmpGirl.talked&gt;&gt;
	&lt;&lt;link &#39;Talk&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship += 3&gt;&gt;
		&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  			&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
 		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $tmpGirl.talked = true&gt;&gt;
		&lt;&lt;addmins 15&gt;&gt;
		&lt;&lt;goto &#39;Girl talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.energy &gt;= 30 &amp;&amp; $tmpGirl.location !== &#39;garden&#39;&gt;&gt;
	&lt;&lt;link &#39;Fuck him&#39;&gt;&gt;
		&lt;&lt;goto &#39;Guy fuck&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $tmpGirl.relationship &gt;= 30 &amp;&amp; $slaveId !== undefined &amp;&amp; !$tmpGirl.assignedTo &amp;&amp; setup.assignedToCount(&#39;garden&#39;) &lt; $workersLimitGarden&gt;&gt;
	&lt;&lt;link &#39;Assign to garden&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.assignedTo = &#39;garden&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.gardenDay = 0&gt;&gt;
		&lt;&lt;if $tmpGirlBack&gt;&gt;
			&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
			&lt;&lt;set $slaveId to null&gt;&gt;
			&lt;&lt;goto $tmpGirlBack&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;goto &#39;Guy view&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set _availableGirlSlaves = setup.getAvailablePersons18yo($slaves)&gt;&gt;
&lt;&lt;if (_availableGirlSlaves[0] ?? []).length &amp;&amp; !$tmpGirl.offerSlave&gt;&gt;
	&lt;&lt;link &#39;Offer him one of your slave girls&#39;&gt;&gt;
		&lt;&lt;script&gt;&gt;
			Dialog.setup(&quot;Basement - Offer slave&quot;, &quot;Basement - Offer slave&quot;);
			Dialog.wiki(Story.get(&quot;Basement - Offer slave girl to slave guy: choose&quot;).processText());
			Dialog.open();
	  	&lt;&lt;/script&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $tmpGirl.assignedTo&gt;&gt;
	&lt;&lt;link &quot;Remove assigned job ($tmpGirl.assignedTo)&quot;&gt;&gt;
		&lt;&lt;run delete $tmpGirl.assignedTo&gt;&gt;
		&lt;&lt;goto &#39;Guy view&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$tmpGirl.gift&gt;&gt;
	&lt;&lt;link &#39;Give gift&#39;&gt;&gt;
		&lt;&lt;script&gt;&gt;
			Dialog.setup(&quot;Give gift&quot;, &quot;Give gift&quot;);
			Dialog.wiki(Story.get(&quot;Give gift&quot;).processText());
			Dialog.open();
	  	&lt;&lt;/script&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.energy &gt;= 10 &amp;&amp; hasTime(1)&gt;&gt;
	&lt;&lt;link &#39;Punish him&#39;&gt;&gt;
		&lt;&lt;if $backpack.has(&#39;paddle&#39;)&gt;&gt;
			&lt;&lt;set $punishType = &#39;&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;goto &#39;Guy punish&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
	
&lt;&lt;link &#39;Change name&#39;&gt;&gt;
	&lt;&lt;dialog &#39;Change name&#39;&gt;&gt;	
		What you will call your slave? &lt;&lt;textbox &quot;_tmpGirlName&quot; $tmpGirl.name&gt;&gt;
		&lt;&lt;link &#39;OK&#39;&gt;&gt;
			&lt;&lt;set $tmpGirl.name = _tmpGirlName&gt;&gt;
			&lt;&lt;dialogclose&gt;&gt;	
			&lt;&lt;goto &#39;Guy view&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/dialog&gt;&gt;	
&lt;&lt;/link&gt;&gt;

 &lt;&lt;link &#39;Go back&#39;&gt;&gt;
	&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $charId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $characters[$charId] = $tmpGirl&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run delete $charId&gt;&gt;
	&lt;&lt;run delete $guestId&gt;&gt;
	&lt;&lt;run delete $slaveId&gt;&gt;
	&lt;&lt;if $tmpGirlBack&gt;&gt;
		&lt;&lt;goto $tmpGirlBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="278" name="Rodger - horse #1" tags="" position="2972,2451" size="100,100">&lt;&lt;set $characters.rodger.quests.horse = true&gt;&gt;

&lt;h1 class=&quot;ptitle&quot;&gt;CHURCH&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
	Word had spread of a solitary wanderer named Harper, renowned for navigating the treacherous wilderness on horseback. Tales of Harper&#39;s bond with a majestic horse echoed through the barren lands. We were hoping that maybe he would agree to sell it to us so maybe you can find him. I hope this will be enough.
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;
&lt;strong class=&quot;iitem&quot;&gt;You received 100 caps&lt;/strong&gt;
&lt;&lt;set $player.money += 100&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Start your journey&#39;&gt;&gt;
	&lt;&lt;goto &#39;Rodger - horse #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="279" name="Rodger - horse #2" tags="" position="3091,2446" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;WORLD&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
As you trudged through the desolate wasteland on foot, exhaustion weighing heavy on your weary legs, you noticed an abandoned house in the distance. A lone horse stood outside, a silent sentinel in this ravaged world. Intrigued and desperate for shelter, I cautiously approached the house, hoping that would be Harper who mentioned Rodger.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/harper_house.jpg&#39;]]
&lt;/center&gt;
	
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Go closer&#39;&gt;&gt;
	As you approach the horse old guy jumps out of the abandoned house and aims at you with his gun
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/settlement/harper_meet.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;harper&gt;&gt;
		Looking for trouble kid? You can find them here..
	&lt;&lt;/harper&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Tell him about Rodger and his horse&#39;&gt;&gt;
		Just as you finished telling about Roger and his offer about horse, you take out a small sac from your pocket with the 100 caps, given by Roger and reach out your hand towards Harper&#39;s direction.
		&lt;br /&gt;&lt;br /&gt;
		&lt;strong&gt;Harper laughs while looking at the small sac you&#39;re holding in your hand.&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;harper&gt;&gt;
			I don&#39;t know how much you got there but that won&#39;t be enough... I want 300 for it! 
		&lt;&lt;/harper&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;if Object.keys($player.companions).length &gt;= 2&gt;&gt;
			He looks at your companions with an creepy smile..
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;harper&gt;&gt;
				Actually I might even trade him for these two beauties...
			&lt;&lt;/harper&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Trade for your companions&#39;&gt;&gt;
				&lt;&lt;set $characters.rodger.quests.horse_get = &#39;companions&#39;&gt;&gt;
				&lt;&lt;goto &#39;Rodger - horse get&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if $player.money &gt;= 300&gt;&gt;
			&lt;&lt;link &#39;Pay him 300 caps&#39;&gt;&gt;
				&lt;&lt;set $characters.rodger.quests.horse_get = &#39;pay&#39;&gt;&gt;
				&lt;&lt;set $player.money -= 300&gt;&gt;
				&lt;&lt;goto &#39;Rodger - horse get&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &#39;Try to attack him&#39;&gt;&gt;
			&lt;&lt;set $characters.rodger.quests.horse_get = &#39;no_fight&#39;&gt;&gt;
			&lt;&lt;goto &#39;Rodger - horse lost&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &#39;No deal&#39;&gt;&gt;
			&lt;&lt;set $characters.rodger.quests.horse_get = &#39;no_deal&#39;&gt;&gt;
			&lt;&lt;goto &#39;Rodger - horse lost&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="280" name="Rodger - horse lost" tags="" position="3205,2444" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;WORLD&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $characters.rodger.quests.horse_get === &#39;no_fight&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/settlement/harper_shotgun.gif&#39;]]
	&lt;/center&gt;
	&lt;strong&gt;Harper points at your leg and shoots!&lt;/strong&gt;
	&lt;&lt;perkAdd &#39;bleeding&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong class=&quot;iitem&quot;&gt;You started to bleed&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;harper&gt;&gt;
		Well, your loss.
	&lt;&lt;/harper&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/harper_horse_no.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
He slowly mounts his horse while your leg is seriously bleeding, and swiftly rides away.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Continue&#39;&gt;&gt;
  &lt;&lt;if $characters.rodger.quests.horse_get === &#39;no_fight&#39;&gt;&gt;
  	&lt;&lt;addhours 8&gt;&gt;
	Limping and slowly, you return to Rodger&#39;s camp where he is already waiting for you with wide-open eyes and shock.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;rodger&gt;&gt;
		Oh my God! What happened? Are you alright?
	&lt;&lt;/rodger&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
  &lt;&lt;else&gt;&gt;
  	&lt;&lt;addhours 6&gt;&gt;
	You quickly return to Rodger&#39;s camp, where he is already waiting for you.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;rodger&gt;&gt;
		Seeing that you have returned without the horse, you have bad news, it seems...
	&lt;&lt;/rodger&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
  &lt;&lt;/if&gt;&gt;
  	&lt;&lt;link &#39;Tell him that he was too stubborn&#39;&gt;&gt;
		&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="281" name="Rodger - horse get" tags="" position="3313,2445" size="100,100">
&lt;&lt;if $characters.rodger.quests.horse_get === &#39;companions&#39;&gt;&gt;
	&lt;&lt;set _eventCompanions = setup.objectSortReverse(clone($player.companions ?? []))&gt;&gt;
	&lt;&lt;for _eventCompanionI, _eventCompanion range _eventCompanions&gt;&gt;
		&lt;&lt;companionRemove &#96;_eventCompanionI&#96;&gt;&gt;
		&lt;&lt;set _eventCompanionId = _eventCompanionI.split(&#39;:&#39;)&gt;&gt;
		&lt;&lt;set $guests.splice(_eventCompanionId[1], 1)&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;addhours 4&gt;&gt;

&lt;h1 class=&quot;ptitle&quot;&gt;WORLD&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/harper_horse_get.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
At a fast pace, you ride on horseback through the forest and soon reach Roger&#39;s settlement. How comfortable it is to have a horse...
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
	&lt;&lt;= $player.name&gt;&gt;! You got it! I never doubted you.
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You slowly dismount from the horse and tell him thanks.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/harper_horse_pat.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You tell Roger that Harper wanted more than you gave him, and Rodger will remain indebted to you.
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
  &lt;&lt;linkreplace &#39;Give horse to Rodger&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
		&lt;&lt;rodger&gt;&gt;
			You are worth your weight in gold! God truly watches over us. He will help us a lot.
		&lt;&lt;/rodger&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		
		&lt;&lt;set $characters.rodger.relationship += 10&gt;&gt;
		&lt;strong class=&quot;iitem&quot;&gt;Relationship with Rodger increased by 10&lt;/strong&gt;
		&lt;&lt;set $player.goodwill += 5&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
  &lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;option2&quot;&gt;
  &lt;&lt;linkreplace &#39;Keep the horse&#39;&gt;&gt;
  		&lt;&lt;set $characters.rodger.quests.horse_kept = true&gt;&gt;
		&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
		&lt;&lt;rodger&gt;&gt;
			What? Why? Well, we can&#39;t blame you... Everything happens as it must. Eve and the settlers will be somewhat disappointed to hear this.
		&lt;&lt;/rodger&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		Roger turns around and slowly walks away while you turn towards the horse and look at him with a smile on your face. In that moment, you realize that you don&#39;t even know his name and decide to come up with a name for him yourself.
		&lt;br /&gt;&lt;br /&gt;
		What you will call your horse? &lt;&lt;textbox &quot;_tmpHorseName&quot; &#39;Bullet&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		While you&#39;re patting a horse a settlement girl comes to you from behind and taps on your shoulder.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;anongirl&gt;&gt;
			Oh my god! A horse! Please, please take me for a ride.
		&lt;&lt;/anongirl&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Accept&#39;&gt;&gt;
			&lt;&lt;set $player.horse = _tmpHorseName&gt;&gt;
			&lt;&lt;goto &#39;Event: Settlement - horse ride&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
		&lt;&lt;link &#39;Maybe some other time&#39;&gt;&gt;
			&lt;&lt;set $player.horse = _tmpHorseName&gt;&gt;
			&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
  &lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;


</tw-passagedata><tw-passagedata pid="282" name="Explore event: wolves" tags="" position="6986,18" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
As you roamed through the desolate ruins of the city, its once vibrant streets now reduced to debris and decay, a chilling silence hung heavy in the air. 
&lt;br /&gt;
Every step echoed, reminding you of the world that was lost. Amidst the broken buildings and crumbling structures, you became acutely aware of your solitude.
&lt;br /&gt;&lt;br /&gt;
But then, a distant howl pierced through the stillness. It was haunting, yet strangely alluring. You turned your gaze towards the source of the sound and saw a pack of wolves emerge from the shadows, their eyes gleaming with a fierce hunger. They moved gracefully, their presence a stark reminder of the tenacity of life in this barren wasteland.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/wolves.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
For a moment, time stood still as you locked eyes, neither predator nor prey. There was a primal understanding between you, an unspoken acknowledgment of survival in a world stripped bare.
&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Attack them&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
		&lt;&lt;set _wolvesKilled = 0&gt;&gt;
		&lt;&lt;if $player.strength &gt; 100 &amp;&amp; setup.percentageChance(60)&gt;&gt;
			&lt;&lt;set _wolvesKilled = 3&gt;&gt;
		&lt;&lt;elseif $player.strength &gt; 50 &amp;&amp; setup.percentageChance(30)&gt;&gt;
			&lt;&lt;set _wolvesKilled = 1&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		
		But your bravado was short-lived. The wolves, sensing my aggression, quickly circled and closed in on me with a ferocity that left me paralyzed with fear. Their fangs gleamed under the pale sunlight, and their eyes burned with an intensity that matched their predatory instincts.
		&lt;br /&gt;&lt;br /&gt;
		With a swift and coordinated attack, they lunged at me, tearing through my feeble defenses.
		
		They left you bleeding in the middle of the streets...
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;if _wolvesKilled&gt;&gt;
			You managed to kill _wolvesKilled of them.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;pickup $backpack &#39;pelt_wolf&#39; _wolvesKilled&gt;&gt;
			&lt;strong class=&quot;iitem&quot;&gt;You collected &lt;&lt;=_wolvesKilled&gt;&gt; wolf pelt&lt;&lt;=(_wolvesKilled &gt; 1 ? &#39;s&#39; : &#39;&#39;)&gt;&gt;&lt;/strong&gt;
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;perkAdd &#39;bleeding&#39;&gt;&gt;
		
		
		&lt;&lt;if setup.percentageChance(40) &amp;&amp; Object.keys($player.companions ?? {}).length &gt; 0&gt;&gt;
			&lt;&lt;set _eventCompanionKey = Object.keys($player.companions)[0]&gt;&gt;
			&lt;&lt;set _companionFirst = _eventCompanionKey.split(&#39;:&#39;)[1]&gt;&gt;
			As you bleed out you notice that few of the wolves have torn apart &lt;strong&gt;&lt;&lt;=$guests[_companionFirst].name&gt;&gt;&lt;/strong&gt; body and are dragging her away while leaving a trail of blood behind them.
			&lt;&lt;companionRemove &#96;_eventCompanionKey&#96;&gt;&gt;
			&lt;&lt;companionRearange _companionFirst&gt;&gt;
			&lt;&lt;run $guests.splice(_companionFirst, 1)&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/if&gt;&gt;
		
		
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;

&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;link &#39;Leave them&#39;&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="283" name="Event: Settlement - horse ride" tags="" position="1958,2779" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SETTLEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _horseRideMapping = {
	1: &#39;The girl turned around on the back of the horse, facing you, and sensually began to kiss you and pull off her blouse.&#39;,
	2: &#39;Girl kisses our chest and in a matter of seconds your dick is already in her mouth&#39;,
	3: &#39;You slowly pull her on you and push her wet pussy onto your hard dick&#39;,
	4: &#39;She spreads her legs and takes the lead&#39;,
	5: &#39;She turns around and you cum in her firm ass as she keeps rubbing it against your dick&#39;,
}&gt;&gt;

&lt;&lt;set _videoName = &#39;/settlement/horse_ride&#39; + ($horseRideAction ?? 1)&gt;&gt;
&lt;&lt;video &#96;_videoName&#96;&gt;&gt;
&lt;&lt;if $horseRideAction !== 5&gt;&gt;
	&lt;&lt;horny 15&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;= _horseRideMapping[($horseRideAction ?? 1)]&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $horseRideAction !== 5&gt;&gt;
  &lt;&lt;link &#39;Blowjob&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $horseRideAction = 2&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;

  &lt;&lt;link &#39;Fuck her&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $horseRideAction = 3&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;

  &lt;&lt;link &#39;Let her ride you&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $horseRideAction = 4&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  
  &lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	&lt;&lt;link &#39;Cum&#39;&gt;&gt;
		&lt;&lt;addmins 5&gt;&gt;
		&lt;&lt;set $horseRideAction = 5&gt;&gt;
		&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
	&lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $horseRideAction === 5&gt;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="284" name="Blair event - basement" tags="" position="571,2292" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BASEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;blair&gt;&gt;
	&lt;&lt;=$player.name&gt;&gt;! I wanted talk to you.
	&lt;br /&gt;
	This might sound strange, but I&#39;ve heard what you do with girls in the basement... And... I want you to do the same with me too.
&lt;&lt;/blair&gt;&gt;

&lt;br /&gt;&lt;br /&gt;
She takes you by the hand and leads you to the basement.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Follow her&#39;&gt;&gt;
	You walk down and as she looks at you with flirtatious eyes, you tie her to one of the radiators.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/basement/blair_basement1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She seems relaxed and is enjoying the moment.
	&lt;br /&gt;
	She backs away and looks around, as she has never been here before.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/basement/blair_basement2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	In a slow pace, you approach her and unexpectedly rip her blouse open. A momentary shock appears on her face, but it is quickly replaced by playful giggling.
	&lt;br /&gt;
	You slap her face few times as she thank you for that. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;blair&gt;&gt;
		My breasts! Slap them too! Please!
	&lt;&lt;/blair&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/basement/blair_basement4&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You continue to slap her medium size breasts as she moans before grabbing your dick and shoving it in her mouth.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Fuck her&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl = $characters.blair&gt;&gt;
	  	&lt;&lt;set $tmpGirl.location = &#39;basement&#39;&gt;&gt;
	  	&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
	  	&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
	  	&lt;&lt;run delete $slaveId&gt;&gt;
	  	&lt;&lt;run delete $guestId&gt;&gt;
	  	&lt;&lt;set $charId = &#39;blair&#39;&gt;&gt;
	  	&lt;&lt;set $tmpGirlViewBack = &#39;Sleep eval&#39;&gt;&gt;
	  	&lt;&lt;set $tmpGirlBack = &#39;Sleep eval&#39;&gt;&gt;
	  	&lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="285" name="Explore event: The Dying Elderly Survivor" tags="" position="6534,20" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE OF THE CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
While you were walking a few kilometers outside the city limits, you noticed a partially abandoned farmhouse where it seemed like you saw a head looking at you from one of the windows.
&lt;br /&gt;&lt;br /&gt;
You decided to cautiously enter and expected someone to attack you from a corner. As you walked into the next room, you started thinking that perhaps you were experiencing hallucinations, until you reached one of the end rooms...
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/event_old_ill_man.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
In the corner of the room, near the window, there lies an old man... He appears to be barely breathing, and his skin looks like he has been exposed to a significant amount of radiation. He exhales quietly, beckoning you to come closer.
&lt;br /&gt;&lt;br /&gt;
You sat down next to him, and he spoke quietly but clearly, explaining that his grandson went out over a week ago to find something to eat. He understood what had likely happened after a few days. His grandson was most likely dead... And he saw no reason to live anymore, neither before nor now... But his grandson insisted and was too weak to end his life... That&#39;s why he&#39;s asking for your help.
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;linkreplace &#39;Kill him with pillow&#39;&gt;&gt;
		&lt;&lt;statsAdd &#39;people_killed&#39;&gt;&gt;
		&lt;&lt;set $player.goodwill -=5&gt;&gt;
		&lt;&lt;run $(&#39;#option2, #option3&#39;).hide()&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/explore/event_old_ill_man_pillow.gif&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You took the pillow that was standing on the chair next to the bed, raised your legs, and placed it on the old man&#39;s head. He didn&#39;t resist, but after a moment, reflexes kicked in, and he weakly struck your hands a few times. After a while, he had passed away.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Search the house&#39;&gt;&gt;
			&lt;&lt;if setup.percentageChance(40)&gt;&gt;
				&lt;strong class=&quot;iitem&quot;&gt;You found 4 .38 bullets&lt;/strong&gt;
				&lt;&lt;pickup $backpack &#39;bullet_revolver&#39; 4&gt;&gt;
			&lt;&lt;else&gt;&gt;
				You found nothing...
			&lt;&lt;/if&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;&lt;if $backpack.has(&#39;revolver&#39;) &amp;&amp; $backpack.has(&#39;bullet_revolver&#39;)&gt;&gt;
	&lt;div id=&quot;option3&quot;&gt;
		&lt;&lt;linkreplace &#39;Shoot him&#39;&gt;&gt;
			&lt;&lt;drop $backpack &#39;bullet_revolver&#39; 1&gt;&gt;
			&lt;&lt;statsAdd &#39;people_killed&#39;&gt;&gt;
			&lt;&lt;set $player.goodwill -=5&gt;&gt;
			&lt;&lt;run $(&#39;#option1, #option2&#39;).hide()&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/explore/eldery_man_gun.gif&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			You take out your revolver from the pocket and with trembling hands aim at the old man. You fire... Silence... The entire pillow suddenly gets stained in red.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;Search the house&#39;&gt;&gt;
				&lt;&lt;if setup.percentageChance(40)&gt;&gt;
					&lt;strong class=&quot;iitem&quot;&gt;You found 4 .38 bullets&lt;/strong&gt;
					&lt;&lt;pickup $backpack &#39;bullet_revolver&#39; 4&gt;&gt;
				&lt;&lt;else&gt;&gt;
					You found nothing...
				&lt;&lt;/if&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;link &#39;Leave&#39;&gt;&gt;
				&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;linkreplace &#39;Say no and leave&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option1, #option3&#39;).hide()&gt;&gt;
		He barely manages to sit up from the bed and starts shouting at you.
		&lt;br /&gt;&lt;br /&gt;
		&lt;strong&gt;&quot;YOU ARE ALL THE SAME! COWARDS! JUST LIKE JOHN! GET OUT!&quot;&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;

</tw-passagedata><tw-passagedata pid="286" name="Explore event: The Enslaved Settlement" tags="" position="6653,17" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/event_enslaved_huts.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You decide to turn off the main road of the city and walk along the place where there used to be a beautiful park with a forest in the middle. As you walk, unexpectedly, you see two self-made huts in front of you with bonfires next to them and some sounds coming from behind them.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Explore them&#39;&gt;&gt;
	&lt;&lt;video &#39;explore/event_enslaved_village1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You slowly walk along the edge of one of the huts until you notice a woman tied to a hook behind the planks.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Continue to explore&#39;&gt;&gt;
		&lt;&lt;video &#39;explore/event_enslaved_village2&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You leave the woman hanging and approach the other hut. As you walk around the corner, the sight is horrifying. Another woman is tied up, her legs spread apart, and only her lower body is visible, protruding through a hole in the wall.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;anongirl&gt;&gt;
			Hello? Is someone there? Please help us! Please! They soon will be back
		&lt;&lt;/anongirl&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Help them&#39;&gt;&gt;
			&lt;&lt;set $player.goodwill++&gt;&gt;
			&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
			&lt;&lt;video &#39;explore/event_enslaved_village4&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;anongirl&gt;&gt;
				Thank you so much mister! How we can repay to you?
			&lt;&lt;/anongirl&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;Tell her to suck you&#39;&gt;&gt;
				&lt;&lt;video &#39;explore/event_enslaved_village3&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				Without hesitation, she throws herself on her knees. It seems that your offer has been much better than what they have experienced in this place.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;if ($slaves.length + 2) &lt;= $basementLimit &amp;&amp; ($game.location.basement ?? false)&gt;&gt;
					&lt;&lt;link &#39;Capture both of them as slaves&#39;&gt;&gt;
						&lt;&lt;newgirl&gt;&gt;
						&lt;&lt;set 
							$tmpGirl.relationship = 12,
							$tmpGirl.birthDate = setup.getBirthDate(21),
							$tmpGirl.beauty = randomInteger(50,70)
						&gt;&gt;						
						&lt;&lt;run $slaves.push($tmpGirl)&gt;&gt;
						&lt;&lt;newgirl&gt;&gt;
						&lt;&lt;set 
							$tmpGirl.relationship = 10,
							$tmpGirl.birthDate = setup.getBirthDate(21),
							$tmpGirl.beauty = randomInteger(50,70)
						&gt;&gt;						
						&lt;&lt;run $slaves.push($tmpGirl)&gt;&gt;
						&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;if ($guests.length + 2) &lt;= $guesthouseLimit &amp;&amp; ($game.location.guesthouse ?? false)&gt;&gt;
					&lt;&lt;link &#39;Invite them both as guests&#39;&gt;&gt;
						&lt;&lt;newgirl&gt;&gt;
						&lt;&lt;set 
							$tmpGirl.relationship = 60,
							$tmpGirl.birthDate = setup.getBirthDate(19),
							$tmpGirl.beauty = randomInteger(50,70)
						&gt;&gt;
						&lt;&lt;run $guests.push($tmpGirl)&gt;&gt;
						&lt;&lt;newgirl&gt;&gt;
						&lt;&lt;set 
							$tmpGirl.relationship = 55,
							$tmpGirl.birthDate = setup.getBirthDate(21),
							$tmpGirl.beauty = randomInteger(50,70)
						&gt;&gt;
						&lt;&lt;run $guests.push($tmpGirl)&gt;&gt;
						&lt;&lt;goto &#39;Guest house&#39;&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;link &#39;Leave&#39;&gt;&gt;
					&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
				&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;	
&lt;&lt;/linkreplace&gt;&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="287" name="Explore event: toxic waste" tags="" position="6764,15" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/event_toxic_waste.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _companionNames = []&gt;&gt;
&lt;&lt;set _companionFirst = null&gt;&gt;
&lt;&lt;for _eventCompanionI, _eventCompanion range $player.companions&gt;&gt;
	&lt;&lt;run _companionNames.push($guests[_eventCompanionI.split(&#39;:&#39;)[1]].name)&gt;&gt;
	&lt;&lt;if !_companionFirst&gt;&gt;
		&lt;&lt;set _companionFirst = _eventCompanionI.split(&#39;:&#39;)[1]&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

Together with &lt;strong&gt;&lt;&lt;=_companionNames.join(&#39;, &#39;)&gt;&gt;&lt;/strong&gt; you decide to walk past a chemical factory.
&lt;br /&gt;
As you approach, you smell a strong and sharp odor, but it&#39;s unclear what it really is.
&lt;br /&gt;
A moment later, you decide not to get any closer, but unexpectedly &lt;strong&gt;&lt;&lt;=$guests[_companionFirst].name&gt;&gt;&lt;/strong&gt; slips and falls into a nearby ditch. &lt;strong&gt;&lt;&lt;=$guests[_companionFirst].name&gt;&gt;&lt;/strong&gt; is completely wet because she fell face-first into some yellow liquid. Strange-looking barrels are everywhere around.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Ask if she is okey&#39;&gt;&gt;
	She wiped her face off from the unknown liquid and said that she was fine. However, after a while, she started to feel nauseous and began to vomit.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/explore/event_girl_vomit.gif&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $backpack.has(&#39;antibiotics&#39;)&gt;&gt;
		You start to look into your backpack and lucky you find &lt;strong&gt;antibiotics&lt;/strong&gt;.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Give it to her&#39;&gt;&gt;
			&lt;&lt;drop $backpack &#39;antibiotics&#39; 1&gt;&gt;
			&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
			She took antibiotics, but the vomiting persisted... After approximately 20 minutes, however, everything calmed down, and she started to feel better. You decided to return home.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Go back home&#39;&gt;&gt;
				&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
		&lt;div id=&quot;option1&quot;&gt;
			&lt;&lt;link &#39;Leave her to die&#39;&gt;&gt;
				&lt;&lt;set _eventCompanionKey = &#39;guest:&#39; + _companionFirst&gt;&gt;
				&lt;&lt;companionRemove &#96;_eventCompanionKey&#96;&gt;&gt;
				&lt;&lt;companionRearange _companionFirst&gt;&gt;
				&lt;&lt;run $guests.splice(_companionFirst, 1)&gt;&gt;
				&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;/div&gt;
	&lt;&lt;else&gt;&gt;
		You start to look into your backpack but you can&#39;t find anything that could help her...
		&lt;br /&gt;
		&lt;strong&gt;The only choice is to leave her to die here alone&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave her to die&#39;&gt;&gt;
			&lt;&lt;set _eventCompanionKey = &#39;guest:&#39; + _companionFirst&gt;&gt;
			&lt;&lt;companionRemove &#96;_eventCompanionKey&#96;&gt;&gt;
			&lt;&lt;companionRearange _companionFirst&gt;&gt;
			&lt;&lt;run $guests.splice(_companionFirst, 1)&gt;&gt;
			&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="288" name="Explore event: mysterious illness settlement" tags="" position="6877,20" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/event_mysterious_illness_settlement.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
While walking through a place where a small village used to be, you come across a small group of people. Some of them have homemade face masks on, while others appear to have their skin peeling off their faces. You approach them, maintaining a safe distance, and they tell you that they have all been affected by some kind of illness over the past month. There is not a single healthy person among them...
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $backpack.has(&#39;antibiotics&#39;)&gt;&gt;
	&lt;&lt;linkreplace &#39;Give them bottle of antibiotics&#39;&gt;&gt;
		&lt;&lt;drop $backpack &#39;antibiotics&#39; 1&gt;&gt;
		&lt;&lt;set $player.goodwill++&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/explore/event_mysterious_illness_settlement_thanks.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		A woman, upon seeing you giving the bottle of antibiotics to them, suddenly rush towards you, hugging you and praising you, mentioning that you are the reason why her children will be able to live a few more days.
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;set $player.goodwill--&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="289" name="NPC info" tags="" position="2510,216" size="100,100">
&lt;&lt;set _unknown = (typeof $guestId === &#39;undefined&#39; &amp;&amp; typeof $charId === &#39;undefined&#39; &amp;&amp; typeof $slaveId === &#39;undefined&#39;)&gt;&gt;
&lt;&lt;if _forceKnown&gt;&gt;
	&lt;&lt;set _unknown = false&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set _age = setup.getAge($tmpGirl, ($tmpGirlCapture &amp;&amp; !$guestId &amp;&amp; !$charId))&gt;&gt;
&lt;&lt;set _ageReal = setup.getAge($tmpGirl)&gt;&gt;
&lt;div id=&quot;girl_info_stats&quot;&gt;
&lt;div id=&quot;girl_info_left&quot; style=&quot;float: left; width: 60%&quot;&gt;
	&lt;div id=&quot;girl_description&quot;&gt;
		&lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;= $tmpGirl.race&gt;&gt; &lt;&lt;=setup.getNpcAgeDescription($tmpGirl)&gt;&gt;&lt;/strong&gt; with &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=$tmpGirl.hair&gt;&gt;&lt;/strong&gt; hair
		&lt;&lt;if !$tmpGirl.gender &amp;&amp; setup.getAge($tmpGirl) &gt;= 18&gt;&gt;
			and &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=$tmpGirl.breasts&gt;&gt;&lt;/strong&gt; 
			&lt;&lt;if $tmpGirl.piercedBoobs&gt;&gt;
				pierced 
			&lt;&lt;/if&gt;&gt;
			breasts.
			&lt;&lt;if !$tmpGirl.gender &amp;&amp; $tmpGirl.virgin &amp;&amp; !_unknown&gt;&gt;
			 &lt;strong class=&quot;iitem&quot; style=&quot;font-weight: normal;&quot;&gt;She&#39;s a virgin&lt;/strong&gt;
			&lt;&lt;/if&gt;&gt;
		 &lt;&lt;/if&gt;&gt;
	&lt;/div&gt;
	
	&lt;div id=&quot;npc_stats&quot;&gt;
		&lt;span&gt;Name: &lt;&lt;=$tmpGirl.name&gt;&gt;&lt;/span&gt;
		&lt;span&gt;Age: &lt;&lt;=_age&gt;&gt;&lt;/span&gt;
		
		&lt;&lt;if !$tmpGirl.gender&gt;&gt;
			&lt;span&gt;Beauty score: &lt;&lt;print $tmpGirl.beauty&gt;&gt;&lt;/span&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;if !$tmpGirlCapture&gt;&gt;
		  &lt;span&gt;Relationship: &lt;&lt;print $tmpGirl.relationship&gt;&gt;&lt;/span&gt;
		&lt;&lt;/if&gt;&gt;
		
		&lt;&lt;if typeof $slaveId !== &#39;undefined&#39; || typeof $guestId !== &#39;undefined&#39; || typeof $charId !== &#39;undefined&#39;&gt;&gt;
			&lt;span&gt;Strength: &lt;&lt;=$tmpGirl.strength&gt;&gt;&lt;/span&gt;
			&lt;span&gt;Submission: &lt;&lt;= $tmpGirl.sub ?? 0&gt;&gt;&lt;/span&gt;

			&lt;&lt;if !$tmpGirl.gender&gt;&gt;
				&lt;span&gt;Orgasms: &lt;&lt;=$tmpGirl.orgasms&gt;&gt;&lt;/span&gt;
				&lt;span&gt;Anal: &lt;&lt;= $tmpGirl.anal ?? 0&gt;&gt;&lt;/span&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;/div&gt;

	&lt;&lt;if !_unknown || $player.int &gt; 30 || _isSlaveMarket&gt;&gt;
		&lt;&lt;if !_unknown&gt;&gt;
			&lt;div id=&quot;npc-birthday&quot;&gt;
				Birthday: &lt;&lt;=$tmpGirl.birthDate.getDate()&gt;&gt; &lt;&lt;=window.GameMonths[$tmpGirl.birthDate.getMonth()]&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/if&gt;&gt;
	  &lt;div id=&quot;girl-traits&quot;&gt;
			Traits: 
			&lt;&lt;if Object.keys($tmpGirl.traits ?? {}).length &gt; 0&gt;&gt;
			  &lt;&lt;for _trait range $tmpGirl.traits ?? {}&gt;&gt;
				  &lt;div class=&quot;trait tooltip&quot;&gt;
					  &lt;&lt;=setup.traits[_trait].title&gt;&gt;
					  &lt;span class=&quot;tooltiptext&quot;&gt;&lt;&lt;=setup.traits[_trait].description&gt;&gt;&lt;/span&gt;
				  &lt;/div&gt;
			  &lt;&lt;/for&gt;&gt;
			&lt;&lt;else&gt;&gt;
				none
			&lt;&lt;/if&gt;&gt;
	  &lt;/div&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;if typeof $tmpGirl.clothes === &#39;undefined&#39;&gt;&gt;
	&lt;&lt;set $tmpGirl.clothes = {
		top: either(1,2,3),
		bottom: either(1,2,3)
	}&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;div class=&quot;girl_info_picture&quot; style=&quot;float: right;&quot;&gt;
	&lt;&lt;if typeof $tmpGirl.family !== &#39;undefined&#39;&gt;&gt;
		&lt;div id=&quot;family-tree&quot;&gt;
			&lt;span class=&quot;glyph&quot;&gt;&amp;#19940;&lt;/span&gt;
			&lt;div id=&quot;family-tree-expanded&quot;&gt;
				&lt;&lt;showFamilyTree $tmpGirl.family&gt;&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;
  &lt;&lt;set _girlVisual = $tmpGirl&gt;&gt;
 	&lt;&lt;if setup.getAge($tmpGirl) &gt;= 18&gt;&gt;
  		&lt;&lt;include &#39;Girl visual&#39;&gt;&gt;
  	&lt;&lt;/if&gt;&gt;

&lt;/div&gt;
&lt;div style=&quot;clear: both; margin-bottom: 5px;&quot;&gt;&lt;/div&gt; 
&lt;&lt;if false&gt;&gt;
	&lt;&lt;set $objectKeys = Object.keys($tmpGirl)&gt;&gt;
	&lt;&lt;for _i to 0; _i lt $objectKeys.length; _i++&gt;&gt;
	  &lt;&lt;capture _i&gt;&gt;
		&lt;&lt;print $objectKeys[_i]&gt;&gt;:
		&lt;strong&gt;&lt;&lt;print $tmpGirl[$objectKeys[_i]]&gt;&gt;&lt;/strong&gt;
		&lt;br /&gt;
	  &lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;hr /&gt;
&lt;&lt;/if&gt;&gt;

&lt;style&gt;
	#girl_description::first-letter {
		text-transform:capitalize;
	}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="290" name="Nightclub - outside fight recognize" tags="bg-underground" position="2888,1567" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIGHTCLUB&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/nightclub/nightclub_ambush_recognize.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
They are ready to attack you, but just before that, one of them tells the others to stop. He has heard and seen you. They decide not to harm you after all and apologize to you.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Grab girl by hand&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/nightclub/nightclub_ambush_recognize_grab_hand.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	The other men glance at what you are doing but decide to ignore it and quickly walk away, leaving the girl alone with you.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Use her&#39;&gt;&gt;
		&lt;&lt;video &#39;/nightclub/ambush1&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You pull her around the corner and instantly yank off her shirt, simultaneously slapping her as well.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;anongirl&gt;&gt;
			Please... Stop! That won&#39;t happen again! PLEASE!
		&lt;&lt;/anongirl&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;/nightclub/ambush3&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You completely ignore both her and the person observing you from a distance. You stand behind her and thrust your hard dick inside her pussy as she&#39;s bent over.
		&lt;br /&gt;&lt;br /&gt;
		She resists for a few more minutes but after that gets relaxed and starts to enjoy it. Another few minutes later she asks you to get on your back so she can ride you. 
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;/nightclub/ambush4&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		After powerful 10 minutes, you finally feel that you are close and without saying anything, you finish inside her.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/nightclub/nightclub_ambush_recognize_creampie.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;if $game.location.basement &amp;&amp; $slaves.length &lt; $basementLimit &amp;&amp; $player.energy &gt;= 30&gt;&gt;
	  &lt;&lt;link &#39;Capture her&#39;&gt;&gt;
	  	&lt;&lt;energy 30&gt;&gt;
		&lt;&lt;run $slaves.push($tmpGirl)&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Nightclub&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="291" name="Horse" tags="" position="58,1480" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/horse_black.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Groom him&#39;&gt;&gt;
	&lt;&lt;goto &#39;Horse - pet&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Change name&#39;&gt;&gt;
	&lt;&lt;dialog &#39;Change name&#39;&gt;&gt;	
		What you will call your horse? &lt;&lt;textbox &quot;_tmpHorseName&quot; $player.horse&gt;&gt;
		&lt;&lt;link &#39;OK&#39;&gt;&gt;
			&lt;&lt;set $player.horse = _tmpHorseName&gt;&gt;
			&lt;&lt;dialogclose&gt;&gt;	
			&lt;&lt;goto &#39;Horse&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/dialog&gt;&gt;	
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="292" name="Horse - pet" tags="" position="175,1482" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/horse_pet.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You ensure that the horse is well-groomed by brushing him multiple times. 
&lt;br /&gt;
As you do so, he lifts his head up and emits a gentle nicker, clearly expressing his enjoyment of the grooming session.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $guests.length &gt; 0&gt;&gt;
	&lt;&lt;set _randomPerson = setup.getRandomPersonIds($guests, 1)&gt;&gt;
	&lt;&lt;if !$guests[_randomPerson[0]].gender &amp;&amp; setup.getAge($guests[_randomPerson[0]]) &gt;= 18&gt;&gt;
		&lt;&lt;set $guestId = _randomPerson[0]&gt;&gt;
		&lt;&lt;video &#39;/cabin/horse_fuck1&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		While you are grooming the horse and brushing it, &lt;&lt;=$guests[$guestId].name&gt;&gt; approaches you from behind and flirtatiously asks if maybe she could go for a ride with him or you...
		&lt;br /&gt;&lt;br /&gt;
	
		&lt;&lt;link &#39;Undress her&#39;&gt;&gt;
			&lt;&lt;set $horseRideAction = null&gt;&gt;
			&lt;&lt;goto &#39;Horse - fuck&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Fire place&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
			</tw-passagedata><tw-passagedata pid="293" name="Horse - fuck" tags="" position="290,1486" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _horseRideMapping = {
	2: &#39;You instantly pull down her tank top and put her breast right into your mouth.&lt;br /&gt;She tries to unbutton your shirt but instead you pull down her pants&#39;,
	3: &#39;As her pants are down, you push her onto stack of hay and lick her juicy and wet pussy&#39;,
	4: &#39;She struggles with your dick but after you decide to help her a bit she manages to get it all into her mouth&#39;,
	5: &#39;You lay her on her back and pull her pants up a little and slowly slide into her.&#39;,
	6: &#39;She drops on her knees and is ready to swallow your dick but instead of that you cum all over her face without a chance to warn her&#39;,
}&gt;&gt;

&lt;&lt;set _videoName = &#39;/cabin/horse_fuck&#39; + ($horseRideAction ?? 2)&gt;&gt;
&lt;&lt;video &#96;_videoName&#96;&gt;&gt;
&lt;&lt;if $horseRideAction !== 6&gt;&gt;
	&lt;&lt;horny 20&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;= _horseRideMapping[($horseRideAction ?? 2)]&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $horseRideAction !== 6&gt;&gt;
	&lt;&lt;link &#39;Lick her&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $horseRideAction = 3&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  	&lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Blowjob&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $horseRideAction = 4&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Fuck her&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $horseRideAction = 5&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  
  &lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	&lt;&lt;link &#39;Cum&#39;&gt;&gt;
		&lt;&lt;addmins 5&gt;&gt;
		&lt;&lt;set $horseRideAction = 6&gt;&gt;
		&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
	&lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $horseRideAction === 6&gt;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Fire place&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="294" name="Storage" tags="" position="974,766" size="100,100">&lt;&lt;if typeof $storage === &#39;undefined&#39;&gt;&gt;
  &lt;&lt;newinv $storage&gt;&gt;
  &lt;&lt;set $storage to Inventory.create()&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set 
	_qtyTransferBackpack = {},
	_qtyTransferStorage = {}
&gt;&gt;
&lt;&lt;set _backpackItems = $backpack.table&gt;&gt;
&lt;&lt;set _storageItems = $storage.table&gt;&gt;
&lt;div id=&quot;storage-transfer&quot;&gt;
	&lt;div id=&quot;storage-transfer-left&quot;&gt;
		&lt;fieldset&gt;
  			&lt;legend&gt;Backpack&lt;/legend&gt;
			&lt;table&gt;
				&lt;&lt;for _itemStorageBackpack, _amountStorageTransfer range _backpackItems&gt;&gt;
					&lt;&lt;capture _itemStorageBackpack, _qtyTransferBackpack&gt;&gt;
						&lt;&lt;if Item.get(_itemStorageBackpack).unique&gt;&gt;
							&lt;&lt;continue&gt;&gt;
						&lt;&lt;/if&gt;&gt;
						&lt;&lt;set $icon = _itemStorageBackpack&gt;&gt;
						&lt;tr&gt;
							&lt;td class=&quot;icon&quot;&gt;
								[img[setup.ImagePath+&#39;game/inventory/&#39; + $icon + &#39;.png&#39;]]
							&lt;/td&gt;
							&lt;td class=&quot;name&quot;&gt;&lt;&lt;=Item.get(_itemStorageBackpack).name&gt;&gt;&lt;/td&gt; 
							&lt;td class=&quot;qty&quot;&gt;  
								&lt;&lt;numberbox &#96;&quot;_qtyTransferBackpack[_itemStorageBackpack]&quot;&#96; _amountStorageTransfer&gt;&gt;
							&lt;/td&gt; 
							&lt;td class=&quot;transfer&quot;&gt;
								&lt;&lt;link &#39;&gt;&gt;&#39;&gt;&gt;
									&lt;&lt;if parseInt(_qtyTransferBackpack[_itemStorageBackpack]) &lt; 0 || $backpack.count(_itemStorageBackpack) &lt; parseInt(_qtyTransferBackpack[_itemStorageBackpack])&gt;&gt;
										&lt;&lt;notify 6s&gt;&gt;
											Error. Not enough stock
										&lt;&lt;/notify&gt;&gt;
									&lt;&lt;else&gt;&gt;
										&lt;&lt;transfer $backpack $storage _itemStorageBackpack &#96;parseInt(_qtyTransferBackpack[_itemStorageBackpack])&#96;&gt;&gt;
										&lt;&lt;script&gt;&gt;
											Dialog.setup(&quot;Storage&quot;, &quot;Storage&quot;);
											Dialog.wiki(Story.get(&quot;Storage&quot;).processText());
											Dialog.open();
										&lt;&lt;/script&gt;&gt;
										&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
									&lt;&lt;/if&gt;&gt;
								&lt;&lt;/link&gt;&gt;
							&lt;/td&gt;
						&lt;/tr&gt;
					&lt;&lt;/capture&gt;&gt;
				&lt;&lt;/for&gt;&gt;
			&lt;/table&gt;
		&lt;/fieldset&gt;
	&lt;/div&gt;
	&lt;div id=&quot;storage-transfer-right&quot;&gt;
		&lt;fieldset&gt;
  			&lt;legend&gt;Storage&lt;/legend&gt;
			&lt;table&gt;
				&lt;&lt;for _itemStorageBackpack, _amountStorageTransfer range _storageItems&gt;&gt;
					&lt;&lt;capture _itemStorageBackpack, _qtyTransferStorage&gt;&gt;
						&lt;&lt;if Item.get(_itemStorageBackpack).unique&gt;&gt;
							&lt;&lt;continue&gt;&gt;
						&lt;&lt;/if&gt;&gt;
						&lt;&lt;set $icon = _itemStorageBackpack&gt;&gt;
						&lt;tr&gt;
							&lt;td class=&quot;transfer&quot;&gt;
								&lt;&lt;link &#39;&lt;&lt;&#39;&gt;&gt;
									&lt;&lt;if parseInt(_qtyTransferStorage[_itemStorageBackpack]) &lt; 0 || $storage.count(_itemStorageBackpack) &lt; parseInt(_qtyTransferStorage[_itemStorageBackpack])&gt;&gt;
										&lt;&lt;notify 6s&gt;&gt;
											Error! Not enough stock
										&lt;&lt;/notify&gt;&gt;
									&lt;&lt;else&gt;&gt;
									&lt;&lt;transfer $storage $backpack _itemStorageBackpack &#96;parseInt(_qtyTransferStorage[_itemStorageBackpack])&#96;&gt;&gt;
										&lt;&lt;script&gt;&gt;
											Dialog.setup(&quot;Storage&quot;, &quot;Storage&quot;);
											Dialog.wiki(Story.get(&quot;Storage&quot;).processText());
											Dialog.open();
										&lt;&lt;/script&gt;&gt;
										&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
									&lt;&lt;/if&gt;&gt;
								&lt;&lt;/link&gt;&gt;
							&lt;/td&gt;
							&lt;td class=&quot;qty&quot;&gt;  
								&lt;&lt;numberbox &#96;&quot;_qtyTransferStorage[_itemStorageBackpack]&quot;&#96; _amountStorageTransfer&gt;&gt;
							&lt;/td&gt; 
							&lt;td class=&quot;icon&quot;&gt;
								[img[setup.ImagePath+&#39;game/inventory/&#39; + $icon + &#39;.png&#39;]]
							&lt;/td&gt;
							&lt;td class=&quot;name&quot;&gt;&lt;&lt;=Item.get(_itemStorageBackpack).name&gt;&gt;&lt;/td&gt; 
						&lt;/tr&gt;
					&lt;&lt;/capture&gt;&gt;
				&lt;&lt;/for&gt;&gt;
			&lt;/table&gt;
		&lt;/fieldset&gt;
	&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="295" name="Changelog" tags="" position="1467,21" size="100,100">&lt;div id=&quot;vc-wrapper&quot; class=&quot;tabs&quot;&gt;
&lt;!--// add &gt; checked=&quot;checked&quot; &lt; to top tab for open by default//--&gt;
&lt;!--// Template
&lt;div class=&quot;tab&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;v000&quot; name=&quot;rd&quot;&gt;
&lt;label class=&quot;tab-label&quot; for=&quot;v000&quot;&gt;0.00&lt;/label&gt;
&lt;div class=&quot;tab-content&quot;&gt;
&lt;h3&gt;&lt;/h3&gt;&lt;ul&gt;
##content goes here##
&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;

at css some explanation for icons //--&gt; 


&lt;div class=&quot;tab&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;v022&quot; name=&quot;rd&quot; checked=&quot;checked&quot;&gt;
&lt;label class=&quot;tab-label&quot; for=&quot;v020&quot;&gt;&lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57862;&lt;/span&gt; 0.22 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57748;&lt;/span&gt; 8 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57751;&lt;/span&gt; 22 &lt;span class=&quot;vc-top-fill&quot;&gt;&lt;/span&gt;&lt;/label&gt;
&lt;div class=&quot;tab-content&quot;&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57748;&lt;/span&gt;FIXES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Firefox autoplay video now will work.&lt;/li&gt;
  &lt;li&gt;Bathhouse related beauty decreased too much&lt;/li&gt;
  &lt;li&gt;Fixed slave wash with only 10 energy. (It showed that you&#39;re out of cum and girl could get infinity beauty)&lt;/li&gt;
  &lt;li&gt;Fixed random washBeauty error.&lt;/li&gt;
  &lt;li&gt;If woman gave birth to another child it didn&#39;t show in the family tree&lt;/li&gt;
  &lt;li&gt;Guests not disappear from guesthouse while working on streets&lt;/li&gt;
  &lt;li&gt;Guests not disappear from guesthouse while working as scavengers&lt;/li&gt;
  &lt;li&gt;Scavenger didn&#39;t come home event not triggering&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57751;&lt;/span&gt;FEATURES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Increased garden workers limit from 7 to 8.&lt;/li&gt;
  &lt;li&gt;Increased guestroom bed limit from 20 to 25.&lt;/li&gt;
  &lt;li&gt;Event: Dom [Ex worker daughters]&lt;/li&gt;
  &lt;li&gt;Event: Bar [With high reputation now you can **** bartender]&lt;/li&gt;
  &lt;li&gt;Event: Guest not in the mood to ****, she might suggest a quick ****&lt;/li&gt;
  &lt;li&gt;New item: Cosmetics (Will be able to increase girl beauty permanently in future release)&lt;/li&gt;
  &lt;li&gt;Event [Explore]: Abandoned mall&lt;/li&gt;
  &lt;li&gt;Event [Cabin]: Uninvited couple (existing). Added option to fight them.&lt;/li&gt;
  &lt;li&gt;Event [Slave market]: You&#39;ve been noticed. (If you sell enough slaves, you get access to event + better slaves in market (younger, more beautiful, chance to get more traits)&lt;/li&gt;
  &lt;li&gt;In NPC info block now you&#39;ll see if girl is a virgin.&lt;/li&gt;
  &lt;li&gt;Event: [Bedroom] Horny guests might visit you in bedroom&lt;/li&gt;
  &lt;li&gt;Event: [Bedroom] Blair might join for threesome when guest visits (For supporters)&lt;/li&gt;
  &lt;li&gt;Event: Dom [A missing diplomat]&lt;/li&gt;
  &lt;li&gt;Event: Kitchen [Girl assigned to kitchen work might sometimes get stuck in the sink]&lt;/li&gt;
  &lt;li&gt;Event: Shower [Invite guest to your shower]&lt;/li&gt;
  &lt;li&gt;Event: New Character (Dr. Finch (Laura)) (scientist) [Toxic rain]&lt;/li&gt;
  &lt;li&gt;Event: Laura [Successful test]&lt;/li&gt;
  &lt;li&gt;New item: growth potion (in 0.22 release only few test vials. Mechanics will be in 0.23)&lt;/li&gt;
  &lt;li&gt;Nursery: Gender colors + option to click on childs&lt;/li&gt;
  &lt;li&gt;Event: Laura [Growth vials]&lt;/li&gt;
  &lt;li&gt;Cheat menu: Set all slave relationship to max (For supporters)&lt;/li&gt;
  &lt;li&gt;Compressed all videos. (50% size decrease (Hopefully works on ios as videos were only compressed and not converted to other format (Still uses H.264))&lt;/li&gt;  
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;tab&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;v021&quot; name=&quot;rd&quot;&gt;
&lt;label class=&quot;tab-label&quot; for=&quot;v020&quot;&gt;&lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57862;&lt;/span&gt; 0.21 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57748;&lt;/span&gt; 8 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57751;&lt;/span&gt; 33 &lt;span class=&quot;vc-top-fill&quot;&gt;&lt;/span&gt;&lt;/label&gt;
&lt;div class=&quot;tab-content&quot;&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57748;&lt;/span&gt;FIXES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Guys scavenging go missing event. Removed event for males (for now)&lt;/li&gt;
  &lt;li&gt;Scolding guests in party. Fixed submission increase&lt;/li&gt;
  &lt;li&gt;Guy anal stats too low. Fixed image&lt;/li&gt;
  &lt;li&gt;Fixed that first guest if was scavenger and went missing. Event didn&#39;t trigger&lt;/li&gt;
  &lt;li&gt;Fixed bug when sometimes after fucking female guest you were thrown back to slave options&lt;/li&gt;
  &lt;li&gt;After cum in guy face, redirect to girl view&lt;/li&gt;
  &lt;li&gt;Error after fucking girl in the nightclub&lt;/li&gt;
  &lt;li&gt;Family tree. Didn&#39;t show properly mother and father (only childs worked)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57751;&lt;/span&gt;FEATURES:&lt;/h3&gt;
&lt;ul&gt;
	&lt;li&gt;Cheat menu: Skip time (1 week) (For supporters)&lt;/li&gt;
	&lt;li&gt;Event: &quot;Trespassing girl&quot;. If security assigned. (For supporters bonus event option)&lt;/li&gt;
	&lt;li&gt;Decreased sex scenes time consumption from 15 minutes to 5 minutes&lt;/li&gt;
	&lt;li&gt;Buy a round in the bar. Increased max reputation from 20 to 50&lt;/li&gt;
	&lt;li&gt;Decreased Dom&#39;s required reputation from 150 to 100 for &quot;Invite&quot; event.&lt;/li&gt;
	&lt;li&gt;Guest girls can be assigned to work on street&lt;/li&gt;
	&lt;li&gt;Now you can buy plastic in Underground city shop&lt;/li&gt;
	&lt;li&gt;Workbench - higher intelligence will decrease amount of energy spent&lt;/li&gt;
	&lt;li&gt;New job: guard. (Decreases the chance of someone breaking in and stealing, and sometimes might catch intruders. (Intruder event will be added in 0.22 event update)&lt;/li&gt;
	&lt;li&gt;Decreased chance of event &quot;Food forager&quot; and &quot;Uninvited couple&quot; if guard is assigned&lt;/li&gt;
	&lt;li&gt;&quot;MC stats&quot; now will show how much reputation you got + description of how well known you are in world.&lt;/li&gt;
	&lt;li&gt;Event: &quot;Slave to slave&quot;. Offer slave girl to one of your slave guys (to increase relationship)&lt;/li&gt;
	&lt;li&gt;Waterfall event (existing). Now traits will be randomized + warning that int was too low if you get knocked out without fight.&lt;/li&gt;
	&lt;li&gt;&quot;Group workout&quot; - will consume energy&lt;/li&gt;
	&lt;li&gt;Morning messages. Now they&#39;re grouped. You&#39;ll also see &quot;shop&quot; group when you can see what your shopkeeper sold/bought.&lt;/li&gt;
	&lt;li&gt;New item: piercing (Can buy in Rodger&#39;s shop)&lt;/li&gt;
	&lt;li&gt;Customize girls. Added option to pierce their nipples&lt;/li&gt;
	&lt;li&gt;Drop items. Option to drop items from your inventory&lt;/li&gt;
	&lt;li&gt;Basement black girl images in sex scenes&lt;/li&gt;
	&lt;li&gt;Male punish. (Beat, slap or paddle)&lt;/li&gt;
	&lt;li&gt;Added NPC birthdate in info view&lt;/li&gt;
	&lt;li&gt;Shopkeeper can buy/sell hay&lt;/li&gt;
	&lt;li&gt;Slave girl workout&lt;/li&gt;
	&lt;li&gt;Changed chance of traits from 30 to 50% + additional 30% to get additional trait&lt;/li&gt;
	&lt;li&gt;Event (Bikers (existing)). Relationship will increase/decrease of the outcome (if you enslave or invite)&lt;/li&gt;
	&lt;li&gt;New trait: sadistic. Only girls with sadistic trait can be assigned as mistress&lt;/li&gt;
	&lt;li&gt;New trait: squirter. Additional image when girl gets orgasm (pussy or anal)&lt;/li&gt;
	&lt;li&gt;When kids in nursery reach 18. They will be automatically moved to guest house&lt;/li&gt;
	&lt;li&gt;Anal sex. Added more text, according to npc anal stats (females)&lt;/li&gt;
	&lt;li&gt;New sex option: Lick her (cunilingus). (Way to give her orgasms without taking her virginity)&lt;/li&gt;
	&lt;li&gt;New building: Bathhouse (slaves and guests automatically will wash) (Outside their work times)&lt;/li&gt;
	&lt;li&gt;Option to kill baby cannibal merchant (Will leave you alone for 60 days)&lt;/li&gt;
	&lt;li&gt;Underground streets - added gender colors&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;div class=&quot;tab&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;v020&quot; name=&quot;rd&quot;&gt;
&lt;label class=&quot;tab-label&quot; for=&quot;v020&quot;&gt;&lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57862;&lt;/span&gt; 0.20 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57748;&lt;/span&gt; 4 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57751;&lt;/span&gt; 16 &lt;span class=&quot;vc-top-fill&quot;&gt;&lt;/span&gt;&lt;/label&gt;
&lt;div class=&quot;tab-content&quot;&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57748;&lt;/span&gt;FIXES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Sidebar Wednesday going outside.&lt;/li&gt;
  &lt;li&gt;MC stats dialog fixed &quot;Leave&quot; button.&lt;/li&gt;
  &lt;li&gt;Very rare case when save was corrupted with error &quot;Cannot read properties of null (reading &#39;traits&#39;).&quot;&lt;/li&gt;
  &lt;li&gt;Fixed explore event: toxic waste (Didn&#39;t trigger even with companions).&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57751;&lt;/span&gt;FEATURES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Explore event: Waterfall (Chance to get girl with 3 traits + high beauty) (For supporters)&lt;/li&gt;
  &lt;li&gt;Blair event: date (repeatable) (For supporters)&lt;/li&gt;
  &lt;li&gt;Added credits screen (You&#39;re welcome to send in your small explore/city/settlement events)&lt;/li&gt;
  &lt;li&gt;Basement event: First visit (First visit after you&#39;ve captured your slave) (All old slaves will trigger this error too)&lt;/li&gt;
  &lt;li&gt;Cabin event: Food forager&lt;/li&gt;
  &lt;li&gt;Octavia event: Burning church&lt;/li&gt;
  &lt;li&gt;Octavia event: Eve kidnapped&lt;/li&gt;
  &lt;li&gt;Explore event: Old couple&lt;/li&gt;
  &lt;li&gt;Explore event: The Dying Elderly Survivor (existing). Added option to shoot him&lt;/li&gt;
  &lt;li&gt;Greenhouse event: Gardening competition&lt;/li&gt;
  &lt;li&gt;Blare event: Morning surprise (repeatable)&lt;/li&gt;
  &lt;li&gt;Cabin event: Uninvited couple&lt;/li&gt;
  &lt;li&gt;Tech stuff: Update option to more simply add new events while traveling (will add events as you go from one location, to other)&lt;/li&gt;
  &lt;li&gt;Travel event: Tree ambush&lt;/li&gt;
  &lt;li&gt;Travel event: City ambush&lt;/li&gt;
  &lt;li&gt;Explore event: Tits bar&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;tab&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;v019&quot; name=&quot;rd&quot;&gt;
&lt;label class=&quot;tab-label&quot; for=&quot;v019&quot;&gt;&lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57862;&lt;/span&gt; 0.19 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57748;&lt;/span&gt; 9 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57751;&lt;/span&gt; 21 &lt;span class=&quot;vc-top-fill&quot;&gt;&lt;/span&gt;&lt;/label&gt;
&lt;div class=&quot;tab-content&quot;&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57748;&lt;/span&gt;FIXES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Remove companion. Fixed names duplicating in removal dialog&lt;/li&gt;
  &lt;li&gt;Typos&lt;/li&gt;
  &lt;li&gt;Male slave assign to garden. Fixed limit. (7 instead of 6)&lt;/li&gt;
  &lt;li&gt;Male while taking won&#39;t tell &quot;She had X orgasms&quot;&lt;/li&gt;
  &lt;li&gt;Releasing slave - will take into account free beds in the guest house.&lt;/li&gt;
  &lt;li&gt;When talking to slave male, you were redirected to the female view&lt;/li&gt;
  &lt;li&gt;Children in the nursery will consume food as in other places (-30pts per day)&lt;/li&gt;
  &lt;li&gt;Rotten food event. Right food amount. Before that, if you had 1600 food, 1300 were rotten. Now it will be only 20%, around 320ish.&lt;/li&gt;
  &lt;li&gt;Changelog scrollbar not visible&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57751;&lt;/span&gt;FEATURES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Cheat menu - Option to clear companion list&lt;/li&gt;
  &lt;li&gt;Workbench. When building basement cell, you&#39;ll stay in Workbench&lt;/li&gt;
  &lt;li&gt;Hunting. Now you have a 70% chance to get deer. If you get a wolf and kill him, you get a pelt (already in the game) + 5 food (new)&lt;/li&gt;
  &lt;li&gt;Increased male NPC base strength&lt;/li&gt;
  &lt;li&gt;Greenhouse. Females/males now have their own color (same as in the basement)&lt;/li&gt;
  &lt;li&gt;Changes in searchActions.js so it works for Linux&lt;/li&gt;
  &lt;li&gt;Added warning on the intro page if a newer version/patch is available&lt;/li&gt;
  &lt;li&gt;Added MC stats. People captured, people killed, slaves released, girls impregnated, etc.&lt;/li&gt;
  &lt;li&gt;Release male slaves. Either release them or add them to your guest house&lt;/li&gt;
  &lt;li&gt;Male guests&lt;/li&gt;
  &lt;li&gt;Implemented Patreon code (additional events for supporters &lt;3 in the future)&lt;/li&gt;
  &lt;li&gt;Guest group workout (increase all guest strength at once)&lt;/li&gt;
  &lt;li&gt;Random event after group workout&lt;/li&gt;
  &lt;li&gt;Male slave NPC fuck (gay content)&lt;/li&gt;
  &lt;li&gt;Event: Horse merchant (random event where you can buy a horse if you gave yours away or he died)&lt;/li&gt;
  &lt;li&gt;While punishing a girl who&#39;s a masochist, her horny level will also increase&lt;/li&gt;
  &lt;li&gt;New trait: Shopkeeper (Only with this trait will it be available to assign an NPC to your village shop and manage your goods automatically)&lt;/li&gt;
  &lt;li&gt;Vincent event&lt;/li&gt;
  &lt;li&gt;New location: shop (In your settlement. For macro management. Set item limits and your shopkeeper will sell/buy them automatically)&lt;/li&gt;
  &lt;li&gt;Option to move your backpack items to storage&lt;/li&gt;
  &lt;li&gt;If you have your shop available, gathered items by your guests/slaves will be put automatically in storage and not in your backpack&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;tab&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;v018a&quot; name=&quot;rd&quot;&gt;
&lt;label class=&quot;tab-label&quot; for=&quot;v018a&quot;&gt;&lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57862;&lt;/span&gt; 0.18a &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57748;&lt;/span&gt; 4&lt;span class=&quot;vc-top-fill&quot;&gt;&lt;/span&gt;&lt;/label&gt;
&lt;div class=&quot;tab-content&quot;&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57748;&lt;/span&gt;FIXES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Typos&lt;/li&gt;
  &lt;li&gt;Dom event. After cum, you couldn&#39;t leave the scene.&lt;/li&gt;
  &lt;li&gt;Made changes in journal. Instead of &quot;Keep playing,&quot; it will show how many days you need to reach.&lt;/li&gt;
  &lt;li&gt;Didn&#39;t set as &quot;finished.&quot; event [Prepare yourself and meet Vincent at the farm], so it was repeating all the time.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;tab&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;v018&quot; name=&quot;rd&quot;&gt;
&lt;label class=&quot;tab-label&quot; for=&quot;v018&quot;&gt;&lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57862;&lt;/span&gt; 0.18 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57748;&lt;/span&gt; 4 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57751;&lt;/span&gt; 17 &lt;span class=&quot;vc-top-fill&quot;&gt;&lt;/span&gt;&lt;/label&gt;
&lt;div class=&quot;tab-content&quot;&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57748;&lt;/span&gt;FIXES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Changing male slave name made to appear fuck/punish buttons&lt;/li&gt;
  &lt;li&gt;Now you&#39;ll be able to travel to slave market at 13:30 (30minutes travel time) so you&#39;ll be able to be there as soon as it opens)&lt;/li&gt;
  &lt;li&gt;Slave/guest sickness fix (Had error when sleeping)&lt;/li&gt;
  &lt;li&gt;Male &quot;visual&quot; doll not showing for non-white race.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57751;&lt;/span&gt;FEATURES:&lt;/h3&gt;&lt;ul&gt;
  &lt;li&gt;In settings you can change sidebar background color. Yellow (default or gray)&lt;/li&gt;
  &lt;li&gt;New item: Wedding ring&lt;/li&gt;
  &lt;li&gt;Rodger event&lt;/li&gt;
  &lt;li&gt;Blair event (wedding)&lt;/li&gt;
  &lt;li&gt;Dom event&lt;/li&gt;
  &lt;li&gt;Better street girl earnings and less taxes. Depending on Dom event.&lt;/li&gt;
  &lt;li&gt;Random event underground city: ball&lt;/li&gt;
  &lt;li&gt;Dom quest (champagne)&lt;/li&gt;
  &lt;li&gt;Dom event + fuck scene&lt;/li&gt;
  &lt;li&gt;Rotten food event. Added check that next time it might only happen is after 7 days.&lt;/li&gt;
  &lt;li&gt;Throw a party link will be always available (disabled if requirements not met) with what you need&lt;/li&gt;
  &lt;li&gt;Pregnant girls with 280+ days will have 100% chance to give birth&lt;/li&gt;
  &lt;li&gt;Vincent quest&lt;/li&gt;
  &lt;li&gt;Vincent event&lt;/li&gt;
  &lt;li&gt;Started to work on content for patreons/subscribers. (Probably two events in each event update starting from the 0.20 (or 0.22)).&lt;/li&gt;
  &lt;li&gt;Explore event: Lost child&lt;/li&gt;
  &lt;li&gt;Explore event: The Elderly Refugee&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;tab&quot;&gt;&lt;input type=&quot;radio&quot; id=&quot;v017&quot; name=&quot;rd&quot;&gt;
&lt;label class=&quot;tab-label&quot; for=&quot;v017&quot;&gt;&lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57862;&lt;/span&gt; 0.17 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57748;&lt;/span&gt; 3 &lt;span class=&quot;glyph vc-icon-top&quot;&gt;&amp;#57751;&lt;/span&gt; 22 &lt;span class=&quot;vc-top-fill&quot;&gt;&lt;/span&gt;&lt;/label&gt;
&lt;div class=&quot;tab-content&quot;&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57748;&lt;/span&gt;FIXES:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Bounty hunter: Parent event. Fixed images&lt;/li&gt;
  &lt;li&gt;Explore event: The Enslaved Settlement (you can only enslave or invite girls if you have built basement or guesthouse)&lt;/li&gt;
  &lt;li&gt;Converted webm to mp4 for (H.256 support (IOS))&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;span class=&quot;glyph vc-icon-con&quot;&gt;&amp;#57751;&lt;/span&gt;FEATURES:&lt;/h3&gt;&lt;ul&gt;

&lt;li&gt;Food consumption moved to the end of the check. That means slaves/guest first will grow their food before eating something.&lt;/li&gt;
  &lt;li&gt;Kids will start to consume &quot;food&quot; only when they&#39;re 3yo+&lt;/li&gt;
  &lt;li&gt;Guests working in forest have 10% chance to also find some berries (food)&lt;/li&gt;
  &lt;li&gt;Travel time while in your cabin (settlement) will be 10 minutes instead of an hour&lt;/li&gt;
  &lt;li&gt;New race: latina&lt;/li&gt;
  &lt;li&gt;Horse now consumes hay (1 per day)&lt;/li&gt;
  &lt;li&gt;Explore event: Pack of wolves (Now there&#39;s a 40% chance they&#39;ll drag away one of your companions)&lt;/li&gt;
  &lt;li&gt;Added few more clothes for girls&lt;/li&gt;
  &lt;li&gt;Companions can&#39;t be assigned to jobs&lt;/li&gt;
  &lt;li&gt;Reworked sidebar UI (Thanks to e801207)&lt;/li&gt;
  &lt;li&gt;Implemented guy NPC slaves. (Bare minimum. Can assign to work in garden)&lt;/li&gt;
  &lt;li&gt;Existing explore event: mysterious illness settlement (added proper ending if you give them medicine)&lt;/li&gt;
  &lt;li&gt;Existing explore event: The Dying Elderly Survivor (added proper ending)&lt;/li&gt;
  &lt;li&gt;Decreased max fighter ranking from 1000 to 100.&lt;/li&gt;
  &lt;li&gt;Nightclub event: If you go into trap, depending on your reputation or fighter rank, they might recognize and leave you alone + fuck scene&lt;/li&gt;
  &lt;li&gt;Family tree. Now when a child is born, you can see the mother&#39;s children in her profile. (Later will add MC stats of how many children you have had in total, etc. for achievements, etc.) (For MC to be a father, it will work only for new pregnancies, no existing ones)&lt;/li&gt;
  &lt;li&gt;Added sickness functionality. For now, only food poisoning. Later will add more lethal stuff. If a guest/slave is sick, they won&#39;t work.&lt;/li&gt;
  &lt;li&gt;Event: Rotten Rations. Instead of static 20 food, it will calculate 20% of your food. Added consequence - if you choose to keep the rotten food, there&#39;s a 50% chance some of your girls will get sick.&lt;/li&gt;
  &lt;li&gt;Added horse icon in the sidebar if you get one.&lt;/li&gt;
  &lt;li&gt;Option to pet your horse or change his name at the fireplace&lt;/li&gt;
  &lt;li&gt;Fuck event while petting your horse&lt;/li&gt;
  &lt;li&gt;Added ingame changelog&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;&lt;/div&gt;

&lt;/div&gt;</tw-passagedata><tw-passagedata pid="296" name="Vincent - wedding ring" tags="" position="2605,1028" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	&lt;&lt;=$player.name&gt;&gt;, please sit down. I wanted to show you something
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
While Vincent goes to the next room, you sit down in a chair by the entrance, not really understanding what he went after for. 
&lt;br /&gt;&lt;br /&gt;
After a short while, he returns holding something in his hand. It can be seen that he is visibly worried, and the old man&#39;s hands are trembling a bit even.
&lt;br /&gt;
He opens his hand... &lt;strong&gt;wedding ring...&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/wedding_ring.gif&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
I am very grateful to her because I know that because of me, she has sacrificed something in her own life... Blair... Just don&#39;t think that I&#39;m forcing you. You can decide for yourself what you want, but know this - my story would be fulfilled if you both got married. She doesn&#39;t stop talking about you...
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
  &lt;&lt;linkreplace &#39;Take the ring and say you would be honored&#39;&gt;&gt;
      &lt;&lt;run $(&#39;#option3, #option2&#39;).hide()&gt;&gt;
	  &lt;&lt;run $(&#39;#option-leave&#39;).show()&gt;&gt;
	  &lt;&lt;pickup $backpack &#39;wedding_ring&#39; 1&gt;&gt;
	  &lt;&lt;vincent&gt;&gt;
		  Really!? Oh my God, I&#39;m so happy. Being together, at least I know that she will be safe and I won&#39;t have to worry about her.
	  &lt;&lt;/vincent&gt;&gt;
  &lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;option2&quot;&gt;
  &lt;&lt;linkreplace &#39;Take the ring and tell you will think about it&#39;&gt;&gt;
    	&lt;&lt;run $(&#39;#option1, #option3&#39;).hide()&gt;&gt;
		&lt;&lt;run $(&#39;#option-leave&#39;).show()&gt;&gt;
	  &lt;&lt;pickup $backpack &#39;wedding_ring&#39; 1&gt;&gt;
	  &lt;&lt;vincent&gt;&gt;
		  I understand... It&#39;s a difficult decision. But if you still decide to do it, know this - I will be very happy.
	  &lt;&lt;/vincent&gt;&gt;
  &lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;option3&quot;&gt;
  &lt;&lt;linkreplace &#39;Tell no&#39;&gt;&gt;
  	&lt;&lt;run $(&#39;#option1, #option2&#39;).hide()&gt;&gt;
	&lt;&lt;run $(&#39;#option-leave&#39;).show()&gt;&gt;
	  &lt;&lt;vincent&gt;&gt;
		  I understand... It&#39;s a difficult decision. But if you still decide to do it, know this - I will be very happy.
	  &lt;&lt;/vincent&gt;&gt;
  &lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;option-leave&quot; style=&quot;display:none&quot;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Farm&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;

&lt;&lt;set $game.canMarry = true&gt;&gt;
&lt;&lt;set $characters.vincent.quests.wedding_talk_day = $game.day&gt;&gt;
</tw-passagedata><tw-passagedata pid="297" name="Blair - marry #1" tags="" position="689,2293" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/kitchen/blair_propose.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You get down on your knee while she&#39;s preparing breakfast, and when she turns around, she immediately understands what&#39;s happening and throws herself around your neck.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/kitchen/blair_propose_yes.gif&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Yes, yes, yes!!!! 
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She immediately puts on the ring and admires it. A moment later, she starts getting anxious and suggests that we should have the ceremony tonight. The sooner, the better, and she rushes out the door to start preparing.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Wait evening&#39;&gt;&gt;
	&lt;&lt;addhours 11&gt;&gt;
	&lt;&lt;goto &#39;Blair - marry #2&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="298" name="Blair - marry #2" tags="" position="803,2294" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;GREENHOUSE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/greenhouse/wedding.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;


The air was heavy with an eerie silence as I approached the dilapidated greenhouse. Its fragile structure had weathered the harsh conditions of the post-apocalyptic world, barely holding onto its former glory. Inside, a soft glow emanated from flickering candles scattered across the room, casting dancing shadows on the cracked glass walls.
&lt;br /&gt;&lt;br /&gt;

As you stepped through the creaking door, you found yourself amidst a small gathering of survivors. The ambiance was both somber and hopeful, as if they were preserving a sliver of normalcy amidst the chaos that enveloped their lives. The group huddled together, their eyes reflecting a mix of resilience and vulnerability.
&lt;br /&gt;&lt;br /&gt;
At the heart of the room stood Blair, adorned in a once-beautiful, now tattered wedding dress. Its white fabric was stained with dirt and grime, but she wore it with an undeniable grace. Beside her, her father stood tall, a symbol of strength and protection, supporting her through this solemn occasion.
&lt;br /&gt;&lt;br /&gt;
The father&#39;s eyes met yours as you entered, and he nodded with a mix of pride and apprehension. You approached him, offering a reassuring smile, understanding the weight of the situation. The world had changed, and yet, love persevered. In this moment, amidst the ruins and uncertainty, a ray of hope emerged.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/greenhouse/wedding_ring.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you sealed your vows with a gentle kiss and ring, the gathered witnesses erupted into a soft applause, your emotions released in a moment of shared joy. It was a fleeting respite from the hardships of your reality, but it was a reminder that even in the darkest of times, love and unity have the power to prevail.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Start small after ceremony&#39;&gt;&gt;
	&lt;&lt;set $characters.blair.family = {
		husband: &#39;mc&#39;
	}&gt;&gt;
	&lt;&lt;set $characters.blair.quests.married = true&gt;&gt;
	&lt;&lt;drop $backpack &#39;wedding_ring&#39;  1&gt;&gt;
	&lt;&lt;goto &#39;Blair - marry #3&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="299" name="Blair - marry #3" tags="" position="913,2294" size="100,100">&lt;&lt;set _randomGuest = setup.getRandomPersonIdsGirls($guests, 1)&gt;&gt;

&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/kitchen/wedding.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
After the heartfelt ceremony in the greenhouse, the small group of survivors moved to the kitchen, which had been transformed into an intimate gathering space. The dim lighting created a cozy atmosphere, and the flickering candlelight added a touch of warmth to the cold surroundings.
&lt;br /&gt;&lt;br /&gt;
The bride&#39;s father bid his daughter a tearful farewell, his eyes filled with a mix of joy and longing. With a heavy heart, he departed, leaving the bride in the care of her newfound friends. The girls formed a protective circle around her, their presence a reminder that they were all in this together, navigating the desolate world with strength and resilience.
&lt;br /&gt;&lt;br /&gt;
Laughter and whispers filled the air as the girls embraced the bride, enveloping her in a sisterhood forged through shared experiences. They had all faced loss and hardship, but this night was a chance to revel in the love and joy that had been found amidst the ruins.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
How about our wedding night? I will go freshen up, but after 10 minutes, I&#39;ll be waiting for you in the room
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Blair left, and the girls bid her good night with giggles on their faces, knowing what would unfold in that room.
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
&lt;&lt;if _randomGuest&gt;&gt;
&lt;&lt;linkreplace &#39;Keep a company to the girls&#39;&gt;&gt;
	Just as Blair left the kitchen, some of the girls turned their gazes towards you. After a moment, &lt;strong class=&quot;gender-girl&quot;&gt;&lt;&lt;=$guests[_randomGuest[0]].name&gt;&gt;&lt;/strong&gt; approached you.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;anongirl&gt;&gt;
		How about we warm you up? You&#39;re gonna have a long night...
	&lt;&lt;/anongirl&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
		&lt;div id=&quot;option2&quot;&gt;
		  &lt;&lt;link &#39;Decline and say that tonight you belong to Blair&#39;&gt;&gt;
			  &lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
		  &lt;&lt;/link&gt;&gt;
		&lt;/div&gt;
		&lt;&lt;linkreplace &#39;Agree&#39;&gt;&gt;
			&lt;&lt;horny 10&gt;&gt;
			&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
			&lt;strong class=&quot;gender-girl&quot;&gt;&lt;&lt;=$guests[_randomGuest[0]].name&gt;&gt;&lt;/strong&gt; drops on her knees and crawls under table, unzipping your pants and quickly taking a look around if Blair isn&#39;t coming back.
			&lt;br /&gt;&lt;br /&gt;
				&lt;center&gt;
					[img[setup.ImagePath+&#39;places/kitchen/wedding_bj.webp&#39;]]
				&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;Deepthroat her&#39;&gt;&gt;
				You grab her head and push your dick as far as you can inside her mouth as she gags but still tries to take it all.
				&lt;br /&gt;&lt;br /&gt;
				&lt;center&gt;
					[img[setup.ImagePath+&#39;places/kitchen/wedding_dp.webp&#39;]]
				&lt;/center&gt;
				&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;/div&gt;
&lt;&lt;link &#39;Go to the bedroom&#39;&gt;&gt;
	&lt;&lt;goto &#39;Blair - marry #4&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="300" name="Blair - marry #4" tags="" position="1019,2296" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;horny 100&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/bedroom/wedding_night.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Entering the bedroom, Blair is already waiting for you, lying on the bed. Upon seeing you, a wide smile appears on her face, and without saying anything, she simply starts kissing you and, after a moment, she lifts her dress and turns her back towards you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Fuck me! Like there is no tomorrow!
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Without hesitation, you insert your hard dick inside her pussy and without taking her dress off fuck her tight pussy.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/bedroom/blair_wedding1.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She presses against counter and quietly starts to moan while looking over her shoulder in your eyes.
&lt;br/&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/bedroom/blair_wedding2.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She moves away from the nightstand and, leaning down, touches the ground with her hands.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Take off my dress and fuck me as hard as you can!
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Take off her dress&#39;&gt;&gt;
	&lt;&lt;video &#39;/bedroom/wedding3&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You rip off her wedding dress on throw her on the bed in the same doggy position. She lets out load moan as you keep bounding her tight pussy. You grab her by neck and pull her head upwards as she continues to stare in your eyes.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/bedroom/wedding1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You turn her around and slide your dick back inside her pussy.
	&lt;br /&gt;
	She completely loses any sense of shyness and she screams as loudly as she can, not caring at all whether someone hears her or not. She begs you not to stop.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/bedroom/wedding2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She lifts her leg and redirects your hand towards her clit as she keeps screaming her lungs out
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/bedroom/blair_wedding_cum.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
			You pull out but keep rubbing your dick against her pussy as you start to cum and cover her new ring in your warm cum.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Sleep eval&#39;&gt;&gt;
			&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="301" name="Streets - Dom invite" tags="" position="3338,1460" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_invite_harass.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you turn around the corner where your girls are standing you see that three big guys are harassing one of your girl.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Attack them&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
	When you are ready to jump on them suddenly from behind, you hear someone shouting.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;dom&gt;&gt;
		STOP! 
		&lt;br /&gt;
		We need to talk.
	&lt;&lt;/dom&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Approach him&#39;&gt;&gt;
		You slowly begin to approach him. Meanwhile, he orders his men who harrased the girl to leave her alone. They step back and scornfully glare at you.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;dom&gt;&gt;
			Everything is clear with you. And I thought you were just worthless trash like everyone else who comes here. It&#39;s evident that your girls work properly, and people in the city cringe at the mention of your name.
Your current deal is not the best, so I am ready to offer you a new one.
		&lt;&lt;/dom&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Listen to him&#39;&gt;&gt;
			&lt;&lt;dom&gt;&gt;
				Not here. There are enough ears around, so for safety reasons, it&#39;s better if we go to my place.
			&lt;&lt;/dom&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;Follow him&#39;&gt;&gt;
				You slowly follow him, and his henchmen walk alongside. At some point, you turn into a small side path that you had never noticed before, and you continue your way in darkness for a while. After a moment, light starts to appear in the distance again, and you see thick metal doors where two of his henchmen stay behind while you, Dom, and one other person continue upstairs, climbing the stairs.
				&lt;br /&gt;&lt;br /&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;places/streets/dom_invite2.jpg&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					As you climb up and open the doors, an incredible sight unfolds before you - the place looks as if a war had never taken place. The living area resembles something out of a movie, with vintage furniture and paintings on the walls. Continuing further, you notice a woman sitting in a chair.
					&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;video &#39;/streets/dom_wife1&#39;&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;dom&gt;&gt;
						Bored? Please leave the room darling.
					&lt;&lt;/dom&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					She gets up and slowly walks outside the room while taking a good look at you. 
					&lt;br /&gt;&lt;br /&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;places/streets/dom_invite_walk_away.webp&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;dom&gt;&gt;
						And now listen carefully. I am ready to offer you 60% profit instead of 20%. Additionally, I will pay more attention to the protection of your girls. How does that sound?
I have heard about your reputation and know that I can rely on you. Occasionally, one of my men will approach you, and you will need to accompany him without any objections or questions to get something done.
What do you say?
					&lt;&lt;/dom&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;div id=&quot;option_accept_yes&quot;&gt;
						&lt;&lt;linkreplace &#39;Accept his deal&#39;&gt;&gt;
							&lt;&lt;run $(&#39;#option_accept_no&#39;).hide()&gt;&gt;
							&lt;&lt;set $characters.dom.quests.accepted_deal = true&gt;&gt;
							&lt;&lt;set $characters.dom.quests.day = $game.day&gt;&gt;
							&lt;&lt;dom&gt;&gt;
								I knew I could rely on you. You can trust that your girls will be safe. As safe as they can be in this cursed city, at least.
							&lt;&lt;/dom&gt;&gt;
							&lt;br /&gt;&lt;br /&gt;
							&lt;&lt;link &#39;Leave&#39;&gt;&gt;
								&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
							&lt;&lt;/link&gt;&gt;
						&lt;&lt;/linkreplace&gt;&gt;
					&lt;/div&gt;
					&lt;div id=&quot;option_accept_no&quot;&gt;
						&lt;&lt;linkreplace &#39;Say no&#39;&gt;&gt;
							&lt;&lt;run $(&#39;#option_accept_yes&#39;).hide()&gt;&gt;
							&lt;&lt;set $characters.dom.quests.accepted_deal = false&gt;&gt;
							&lt;&lt;dom&gt;&gt;
								What? Do you even understand what you missed? Well, fine. I&#39;m sure our paths will cross again. Escort him away, guys.
							&lt;&lt;/dom&gt;&gt;
							&lt;br /&gt;&lt;br /&gt;
							&lt;&lt;link &#39;Leave&#39;&gt;&gt;
								&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
							&lt;&lt;/link&gt;&gt;
						&lt;&lt;/linkreplace&gt;&gt;
					&lt;/div&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
</tw-passagedata><tw-passagedata pid="302" name="Underground city - kids ball #3" tags="" position="7320,246" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;UNDERGROUND CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/underground/kids_ball.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Walking through the dark city, suddenly around the corner you hear a strange but familiar sound. You decide to see what it is, and you see that little children are playing with a ball in a partially lit square.
&lt;br /&gt;&lt;br /&gt;
One of the children runs up to you and asks if you have anything to eat and if you could give them something to snack on.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.has(&#39;food&#39;)&gt;&gt;
	&lt;&lt;link &#39;Give him food&#39;&gt;&gt;
		&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt;
		&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;linkdesc&gt;&gt;
	-1 food
	&lt;&lt;/linkdesc&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Say no and leave&#39;&gt;&gt;
	&lt;&lt;set $player.godwill--&gt;&gt;
	&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="303" name="Dom - quest #1" tags="" position="3450,1461" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_invite1.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You turn around the corner where your girls are standing and you see that Dom and some of his people are already waiting for you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;
	Let&#39;s go
&lt;&lt;/dom&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Follow him&#39;&gt;&gt;
	You already know the way you are going. You are heading towards Dom&#39;s residence. Surely, once again, he will come up with excuses about many different ears around and all of this being a secret... Sure...
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/streets/dom_invite2.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You walk up the stairs, and they leave you alone for a moment while they go to another room.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Sit down&#39;&gt;&gt;
		Just as you sit down on the couch, you notice that Dom&#39;s wife is standing in the doorway and has been watching you for a while.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/streets/dom_wife.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;isabel&gt;&gt;
			You acted foolishly by accepting his offer. Either you will die following his instructions, or if by some miracle you manage to survive, you will despise yourself. 
		&lt;&lt;/isabel&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		She barely managed to finish her sentence as Dom returned to the room and sat down opposite you.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;dom&gt;&gt;
			Don&#39;t worry. Your first task will be to easy one. Rumors are circulating about a priest who has set up a camp somewhere outside the city. I have no idea of his whereabouts, but I&#39;ve heard that he occasionally throws small gatherings and has managed to find some champagne. And it&#39;s not just a one-time occurrence, so he must have some sort of hideout or something. I want you to bring me &lt;strong class=&quot;iitem&quot;&gt;10 bottles of champagne&lt;/strong&gt;, by any means necessary.
		&lt;&lt;/dom&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;if $backpack.count(&#39;champagne&#39;) &gt;= 10&gt;&gt;
			&lt;&lt;link &#39;Tell him you already got the champagne&#39;&gt;&gt;
				&lt;&lt;goto &#39;Dom - quest #1 done&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;link &#39;Tell him you will do it&#39;&gt;&gt;
			&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="304" name="Dom - quest #1 done" tags="" position="3565,1458" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_invite1.jpg&#39;]]
&lt;/center&gt; 
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;
	You never cease to surprise me. What if we came to my place and enjoyed a bottle together?
&lt;&lt;/dom&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Accept&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
	&lt;&lt;set $characters.dom.relationship += 5&gt;&gt;
	You go to Dom&#39;s place, and while you settle into his elegant and comfortable couch, he opens one of the bottles you brought.
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/streets/dom_open_champagne.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	Dom takes the first sip of the glass and ecstatically starts playing the piano, filling the room with joyful melodies. Full of excitement, he calls his wife into the room as well.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;dom&gt;&gt;
		Darling! Come here! You have to taste this. It&#39;s just as I remember it. Perfect!
	&lt;&lt;/dom&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/streets/dom_champagne1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	Dom&#39;s wife, dressed in a sexy dress, gracefully walks over to you and greets you while taking a sip from Dom&#39;s glass of champagne. After a moment, Dom waves to one of his guard, who brings another woman into the room.
	&lt;br/&gt;&lt;br /&gt;
	&lt;&lt;video &#39;/streets/dom_champagne2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;dom&gt;&gt;
		You&#39;ve earned her. Not a scratch can be on her after she finishes with you.
	&lt;&lt;/dom&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;linkreplace &#39;Have fun with her&#39;&gt;&gt;
		&lt;&lt;goto &#39;Dom - quest #1 award&#39;&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option3&quot;&gt;
		&lt;&lt;linkreplace &#39;Refuse&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
			&lt;&lt;dom&gt;&gt;
				Really? Your loss. You should probably leave now
			&lt;&lt;/dom&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Leave&#39;&gt;&gt;
				&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Refuse&#39;&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;&lt;set $characters.dom.quests.quest1_done = true&gt;&gt;
&lt;&lt;set $characters.dom.relationship += 5&gt;&gt;</tw-passagedata><tw-passagedata pid="305" name="Dom - quest #1 award" tags="" position="3674,1458" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;DOM&#39;S HOUSE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _actionsMapping = {
	1: &#39;Without saying a word she undresses fully and stands shyly in front of you&#39;,
	2: &#39;Shyly and quietly she drops on her knees and pulls your dick out. You can see in her eyes that she is amazed by it. She starts to suck it cold but after a moment warms up and smiles at you&#39;,
	3: &#39;She climbs on top of you and jerks you off while you suck her hard nipples inside your mouth&#39;,
	4: &#39;You lay her on her back and pull her pants up a little and slowly slide into her.&#39;,
	5: &#39;She spreads her legs wide open as you fuck her wet pussy. You feel that she is enjoying it but tries to be quiet. Probably because of others in next room.&#39;,
	6: &#39;Without warning her you cum right inside her. She tries to break free but you hold her down as your cum starts dripping out of her pussy&#39;
}&gt;&gt;

&lt;&lt;set _videoName = &#39;/streets/dom_quest1_award&#39; + ($game.domSexAction ?? 1)&gt;&gt;
&lt;&lt;video &#96;_videoName&#96;&gt;&gt;
&lt;&lt;if $game.domSexAction !== 6 &amp;&amp; $game.domSexAction !== 3&gt;&gt;
	&lt;&lt;horny 20&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;= _actionsMapping[($game.domSexAction ?? 1)]&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $game.domSexAction !== 6&gt;&gt;
	&lt;&lt;link &#39;Lick her breasts&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $game.domSexAction = 3&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  	&lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Blowjob&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $game.domSexAction = 2&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Missionary&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $game.domSexAction = 4&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Reverse cowgirl&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $game.domSexAction = 5&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  
  &lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	&lt;&lt;link &#39;Cum&#39;&gt;&gt;
		&lt;&lt;addmins 5&gt;&gt;
		&lt;&lt;set $game.domSexAction = 6&gt;&gt;
		&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
	&lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $game.domSexAction === 6&gt;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;run delete $game.domSexAction&gt;&gt;
		&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="306" name="Patreon code" tags="" position="1233,1043" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;PATREON CODE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
   
&lt;&lt;if recall($suppCode) is true &gt;&gt;
	&lt;div class=&quot;patreon-box&quot;&gt;
		Patreon code activated! Thank you!
	&lt;/div&gt;
&lt;&lt;else&gt;&gt;
	&lt;div class=&quot;patreon-box&quot;&gt;
		Enter patreon code below to open more unique events.
		&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;textbox  &quot;_testcode&quot; &quot;&quot;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	  &lt;div class=&quot;link-button passage&quot;&gt;
		  &lt;&lt;link &#39;Check&#39;&gt;&gt;
		   	&lt;&lt;if _testcode == setup.decrypt($mcCache)&gt;&gt;
			  &lt;&lt;run memorize($suppCode, true)&gt;&gt;
			  &lt;&lt;notify 6s&gt;&gt;Patreon code activated!&lt;&lt;/notify&gt;&gt;
			  &lt;&lt;dialogclose&gt;&gt;
			  &lt;&lt;goto &#96;passage()&#96;&gt;&gt;
		  	&lt;&lt;else&gt;&gt;
			  &lt;&lt;notify 6s&gt;&gt;Wrong!&lt;&lt;/notify&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		  &lt;&lt;/link&gt;&gt;
	  &lt;/div&gt;
	&lt;/div&gt;
 &lt;&lt;/if&gt;&gt;
 
&lt;style&gt;
	.patreon-box {
		background:#f1c40f; 
		border-radius: 20px; 
		padding: 20px;
		color: #000;
	}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="307" name="Vincent - sanctuary talk" tags="" position="2718,1148" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	&lt;&lt;=$player.name&gt;&gt;, good. Recently, I&#39;ve been thinking quite a lot about my wife, daughter, and my car that those scoundrels took away from me. I&#39;ve realized that I want it back. We can&#39;t have too many people, so you can only bring two companions with you, and they need to be strong enough to defend themselves if necessary (40 strength).
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Vincent started packing a knife, rope, and other items that might be useful on the journey to &lt;strong&gt;The Sanctuary&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/knife.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
When you&#39;re ready. Come back to the farm
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Tell him you will be back soon&#39;&gt;&gt;
	&lt;&lt;goto &#39;Farm&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="308" name="Vincent - sanctuary go" tags="" position="2945,1149" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You four started your journey to The Sanctuary. You had heard about this place x times before, but you didn&#39;t really know what it was because no one had ever really told you about it. The only thing you knew was that the most ruthless and dangerous criminals from this area were staying there.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/sanctuary_intro.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Your journey took you through a city whose underground you already knew very well. It seemed to you that no one lived on the surface at all, but it turns out that wasn&#39;t true. When you asked Vincent where they all actually stayed, the only thing he replied was, &quot;You&#39;ll see for yourself.&quot;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
  They stay near the port, almost at the other end of the city, so we still have a bit more to walk. Remember, once we&#39;re there, don&#39;t show yourself to anyone and stay hidden. They must not see us, not even the locals who are not directly associated with them, as they could betray us.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addhours 5&gt;&gt;
After a few hours of walking, you start to hear the sound of engines in the distance. Vincent signals for you to always stay hidden and avoid showing yourself to anyone.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Continue&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/farm/sanctuary_intro2.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You walk another hundred meters, and ahead you see something unprecedented. A massive tanker ship has been washed ashore and is blocking the street. It has a huge ramp, and at that very moment, a gang of bandits on motorcycles is riding up it.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Hide&#39;&gt;&gt;
		All four of you hide in a small alcove next to a partially collapsed building.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;vincent&gt;&gt;
			Alright. You all wait here. I&#39;ll go explore the surroundings. This place is more familiar to me, so it will be safer for me to go alone.
		&lt;&lt;/vincent&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		Vincent disappears around the corner of a nearby house, leaving the three of you behind.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Wait for Vincent&#39;&gt;&gt;
			&lt;&lt;addmins 30&gt;&gt;
			More than 30 minutes pass, and still no sign of him. You start to feel bored, but Vincent made it clear that you shouldn&#39;t show yourselves to anyone.
			&lt;br /&gt;&lt;br /&gt;
			&lt;div id=&quot;option1&quot;&gt;
				&lt;&lt;linkreplace &#39;Have fun with your girls&#39;&gt;&gt;
					&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
					&lt;&lt;set _companionKeys = Object.keys($player.companions)&gt;&gt;
					&lt;&lt;set _firstCompanion = _companionKeys[0].split(&#39;:&#39;)[1]&gt;&gt;
					&lt;&lt;set _secondCompanion = _companionKeys[1].split(&#39;:&#39;)[1]&gt;&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;places/farm/sanctuary_intro_bj.webp&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					You drop &lt;strong class=&quot;gender-girl&quot;&gt;&lt;&lt;=$guests[_firstCompanion].name&gt;&gt;&lt;/strong&gt; on her knees and pull out your already hard dick. She smiles and instantly puts it all inside her mouth and sucks you off with joy on her face.
					&lt;br /&gt;&lt;br /&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;places/farm/sanctuary_intro_bj2.webp&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					As she spits on your cock and gets louder &lt;strong class=&quot;gender-girl&quot;&gt;&lt;&lt;=$guests[_secondCompanion].name&gt;&gt;&lt;/strong&gt; just looks nervously around to see if Vincent is not coming.
					&lt;br /&gt;&lt;br /&gt;
					Suddenly, you hear a sound from around the corner. It seems that a tin can or something else has fallen over.
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;linkreplace &#39;Look&#39;&gt;&gt;
						&lt;center&gt;
							[img[setup.ImagePath+&#39;places/farm/sanctuary_intro_wall.jpg&#39;]]
						&lt;/center&gt;
						&lt;br /&gt;&lt;br /&gt;
						You are taken aback in shock. You see a new woman who has been peering through a hole in the wall at you for some time. She notices that you have spotted her, but your penis is still in &lt;strong class=&quot;gender-girl&quot;&gt;&lt;&lt;=$guests[_secondCompanion].name&gt;&gt;&lt;/strong&gt; mouth.
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;link &#39;Go after her&#39;&gt;&gt;
							&lt;&lt;set $game.vincentSanctuaryGirlFun = true&gt;&gt;
							&lt;&lt;goto &#39;Vincent - sanctuary go #2&#39;&gt;&gt;
						&lt;&lt;/link&gt;&gt;
					&lt;&lt;/linkreplace&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;/div&gt;
			&lt;div id=&quot;option2&quot;&gt;
				&lt;&lt;link &#39;Wait for Vincent&#39;&gt;&gt;
					&lt;&lt;goto &#39;Vincent - sanctuary go #2&#39;&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="309" name="Vincent - sanctuary check companions" tags="" position="2831,1147" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _questSuccess = false&gt;&gt;
&lt;&lt;if Object.keys($player.companions).length &gt; 2&gt;&gt;
	&lt;&lt;vincent&gt;&gt;
		&lt;&lt;=$player.name&gt;&gt;, you can only take two companions with you.
	&lt;&lt;/vincent&gt;&gt;
&lt;&lt;elseif Object.keys($player.companions).length &lt; 2&gt;&gt;
	&lt;&lt;vincent&gt;&gt;
		&lt;&lt;=$player.name&gt;&gt;, you need to take two companions with you.
	&lt;&lt;/vincent&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set _isStrengthMet = true&gt;&gt;
	&lt;&lt;for _companionQuestI, _companionQuest range ($player.companions ?? {})&gt;&gt;
		&lt;&lt;if $guests[_companionQuestI].strength &lt; 40&gt;&gt;
			&lt;&lt;set _isStrengthMet = false&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	&lt;&lt;if _isStrengthMet&gt;&gt;
		&lt;&lt;set _questSuccess = true&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if _questSuccess&gt;&gt;
	&lt;&lt;goto &#39;Vincent - sanctuary go&#39;&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Farm&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="310" name="Vincent - sanctuary go #2" tags="" position="3056,1146" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/sanctuary_intro_run.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
From around the corner, Vincent suddenly appears, running as fast as possible while shouting something from a distance. You realize that the situation is not good and start running as fast as your legs can carry you, as there are at least 10 people chasing after him.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	RUN, RUN! RUUUUUUN
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Run&#39;&gt;&gt;
	&lt;&lt;if $game.vincentSanctuaryGirlFun&gt;&gt;
		&lt;&lt;set _companionKeys = Object.keys($player.companions)&gt;&gt;
		&lt;&lt;set _firstCompanion = _companionKeys[0].split(&#39;:&#39;)[1]&gt;&gt;
		
		&lt;strong class=&quot;gender-girl&quot;&gt;&lt;&lt;=$guests[_firstCompanion].name&gt;&gt;&lt;/strong&gt; is still on the ground, on her knees, and she believe that you are chasing after the girl so that she doesn&#39;t escape. However, suddenly, the girl who was peering at you through the hole in the wall comes running from the corner with a knife in her hand and stabs &lt;strong class=&quot;gender-girl&quot;&gt;&lt;&lt;=$guests[_firstCompanion].name&gt;&gt;&lt;/strong&gt; in the neck.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/farm/sanctuary_intro_stab.gif&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		She instantly drops on the ground and there isn&#39;t anything you can do to help her.
		&lt;br /&gt;&lt;br /&gt;
		
		&lt;&lt;companionRemove _companionKeys[0]&gt;&gt;
		&lt;&lt;companionRearange _firstCompanion&gt;&gt;
		&lt;&lt;run $guests.splice(_firstCompanion, 1)&gt;&gt;
	&lt;&lt;/if&gt;&gt;	
			
		At some point, you manage to break away and hide in one of the collapsed buildings nearby. You are tired and frightened, realizing that things probably won&#39;t go as planned.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;vincent&gt;&gt;
			Fuck, fuck, fuck! I&#39;m sorry! I don&#39;t know what got into me... This is a suicide mission... It&#39;s impossible. There were so many more of them than I had thought, and the guards are practically on every corner. Unfortunately, I&#39;ll have to abandon this idea. It&#39;s better to go back home. I am sorry...
		&lt;&lt;/vincent&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Go home&#39;&gt;&gt;
			&lt;&lt;run delete $game.vincentSanctuaryGirlFun&gt;&gt;
			&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;&lt;set $characters.vincent.quests.sanctuary_done = true&gt;&gt;</tw-passagedata><tw-passagedata pid="311" name="Explore event: The Lost Child" tags="" position="6636,189" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;


As you venture through the desolate forest, you suddenly hear a sound—a cry emanating from the nearby bushes. You cautiously scan your surroundings, but you see no one. However, this absence of visible presence does not necessarily guarantee that it is not an ambush.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Investigate&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
	You slowly approach the bushes and gently push them aside to see what hides behind them.
	&lt;br /&gt;&lt;br /&gt;
	 &lt;center&gt;
 		[img[setup.ImagePath+&#39;places/explore/lost_child1.jpg&#39;]]
 	&lt;/center&gt;
 	&lt;br /&gt;&lt;br /&gt;
	You see frightened and disheveled child. He appear to be lost and hungry. His eyes widen with hope as they spot you.
	&lt;br /&gt;
	&lt;strong&gt;Child: &quot;Excuse me, sir/madam. Are you here to help me? I&#39;m lost, and I can&#39;t find my parents. I&#39;m really hungry too. Do you have any food?&quot;&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	You notice the child&#39;s ragged clothes and unkempt appearance, his vulnerability tugging at your heartstrings
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $backpack.has(&#39;food&#39;)&gt;&gt;
		&lt;&lt;linkreplace &#39;Give him food&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option2_desc&#39;).hide()&gt;&gt;
			&lt;&lt;drop $backpack &#39;food&#39; 1&gt;&gt;
		   &lt;center&gt;
			  [img[setup.ImagePath+&#39;places/explore/lost_child2.jpg&#39;]]
		  &lt;/center&gt;
		  	&lt;br /&gt;&lt;br /&gt;
			You take out a piece of food and hand it to him. You notice joy in his eyes, and he immediately lunges at the food as if he had never eaten before.
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/linkreplace&gt;&gt;
		&lt;div id=&quot;option2_desc&quot;&gt;
			&lt;&lt;linkdesc&gt;&gt;-1 food&lt;&lt;/linkdesc&gt;&gt;
		&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;div id=&quot;option_yes&quot;&gt;
		&lt;&lt;linkreplace &#39;Help him find his parents&#39;&gt;&gt;
			&lt;&lt;addhours 4&gt;&gt;
			&lt;&lt;run $(&#39;#option_no&#39;).hide()&gt;&gt;
				 &lt;center&gt;
					[img[setup.ImagePath+&#39;places/explore/lost_child3.jpg&#39;]]
				&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			You spend a couple of hours walking together through the quiet forest, trying to coax any information from him about where his parents might be or at least the last place they were all together. After a while, you finally notice a couple in the distance, and he simply rushes towards them, calling out, &lt;strong&gt;&quot;Mom, Dad...&quot;&lt;/strong&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Leave&#39;&gt;&gt;
				&lt;&lt;set $player.godwill++&gt;&gt;
				&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option_no&quot;&gt;
		&lt;&lt;linkreplace &quot;Do not help him find his family&quot;&gt;&gt;
			&lt;&lt;set $player.godwill -= 5&gt;&gt;
			&lt;&lt;run $(&#39;#option_yes&#39;).hide()&gt;&gt;
			He starts crying but doesn&#39;t say a word to you. After a moment, he collapses back onto the ground, tears streaming down his face, and closes his eyes tightly.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Leave&#39;&gt;&gt;
				&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;

&lt;&lt;/linkreplace&gt;&gt;
&lt;div id=&quot;option1&quot;&gt;
  &lt;&lt;link &#39;Leave&#39;&gt;&gt;
	  &lt;&lt;goto &#39;Outside&#39;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="312" name="Explore event: The Elderly Refugee" tags="" position="6743,188" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
As you navigate through the desolate wasteland, you spot a weary group of survivors trudging forward. Among them, you notice an elderly man struggling to keep up, leaning heavily on a makeshift cane. Their face reflects both exhaustion and determination.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt; 
	[img[setup.ImagePath+&#39;places/explore/event_elderly_man.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Approaching the group, you inquire about the elderly refugee&#39;s condition and the reasons behind their struggle to keep pace. The group reluctantly admits that they are considering leaving the elderly man behind, as their slow pace threatens the group&#39;s chances of survival.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if $guests.length &lt; $guesthouseLimit &amp;&amp; ($game.location.guesthouse ?? false)&gt;&gt;
	&lt;&lt;linkreplace &#39;Offer him to come live with you&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;set $tmpGuy.birthDate = setup.getBirthDate(55)&gt;&gt;
		&lt;&lt;run $guests.push($tmpGuy)&gt;&gt;
		Overwhelmed with gratitude, the elderly refugee&#39;s eyes well up with tears. They offer a frail yet appreciative smile, reaching out to you for support.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;anonguy&gt;&gt;
			Thank you, kind soul. Your compassion gives me hope in these dark times. I will do my best to keep up and not burden you. Please, lead the way, and I will follow with all the strength I have left
		&lt;&lt;/anonguy&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="313" name="MC stats" tags="" position="1561,422" size="100,100">
&lt;h2&gt;Your stats&lt;/h2&gt;
&lt;h4&gt;Reputation (&lt;&lt;=$player.reputation&gt;&gt;)&lt;/h4&gt;
&lt;&lt;if $player.reputation &lt; 10&gt;&gt;
	Nobody knows you. When you go around, everyone will try to take advantage of you.
&lt;&lt;elseif $player.reputation &lt; 20&gt;&gt;
	Your name is whispered occasionally, though not with much significance.
&lt;&lt;elseif $player.reputation &lt; 30&gt;&gt;
	Your deeds have started to catch the attention of the local communities.
&lt;&lt;elseif $player.reputation &lt; 50&gt;&gt;
	You&#39;re gaining a following of supporters who admire your achievements.
&lt;&lt;elseif $player.reputation &lt; 100&gt;&gt;
	You&#39;re a well-known figure in multiple regions, often recognized on your travels.
&lt;&lt;else&gt;&gt;
	Your actions have earned you respect and recognition from various communities. People speak of your achievements with admiration and respect.
&lt;&lt;/if&gt;&gt;
&lt;h4&gt;Bounty hunter reputation (&lt;&lt;=$player.reputation_bounty_hunter&gt;&gt;)&lt;/h4&gt;
&lt;&lt;if $player.reputation_bounty_hunter &lt; 1&gt;&gt;
	You are nobody.
&lt;&lt;elseif $player.reputation_bounty_hunter &lt; 10&gt;&gt;
	Few people have seen you but they still laugh at you
&lt;&lt;elseif $player.reputation_bounty_hunter &lt; 20&gt;&gt;
	Your deeds have started to catch the attention of the bounty hunter community.
&lt;&lt;else&gt;&gt;
	People are starting to avoid you and be scared of you.
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;table id=&quot;mc-stats&quot;&gt;
	&lt;tr&gt;&lt;td&gt;People captured:&lt;/td&gt;&lt;td&gt;&lt;&lt;=$player.stats.people_captured ?? 0&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;People killed:&lt;/td&gt;&lt;td&gt;&lt;&lt;=$player.stats.people_killed ?? 0&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Girls impregnated:&lt;/td&gt;&lt;td&gt;&lt;&lt;=$player.stats.girls_impregnated ?? 0&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Slaves sold:&lt;/td&gt;&lt;td&gt;&lt;&lt;=$player.stats.slaves_sold ?? 0&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Slaves killed:&lt;/td&gt;&lt;td&gt;&lt;&lt;=$player.stats.slaves_killed ?? 0&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Slaves released:&lt;/td&gt;&lt;td&gt;&lt;&lt;=$player.stats.slaves_released ?? 0&gt;&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Bedroom&#39;&gt;&gt;
	&lt;&lt;dialogclose&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;style&gt;
	#mc-stats td {
		padding: 10px;
	}
&lt;/style&gt;</tw-passagedata><tw-passagedata pid="314" name="Guy view - guest" tags="sex noredirect girlview" position="5010,145" size="100,100">&lt;&lt;if !$tmpGirl.talked&gt;&gt;
	&lt;&lt;link &#39;Talk&#39;&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship += 3&gt;&gt;
		&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  			&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
 		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set $tmpGirl.talked = true&gt;&gt;
		&lt;&lt;addmins 15&gt;&gt;
		&lt;&lt;set $tmpGirlViewBack = &#39;Guy view - guest&#39;&gt;&gt;
		&lt;&lt;goto &#39;Girl talk&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

	&lt;&lt;if !($player.companions[&#39;guest:&#39; + $guestId] ?? false)&gt;&gt;
		&lt;&lt;link &#39;Add as companion&#39;&gt;&gt;
			&lt;&lt;companionAdd &#39;guest&#39; $guestId&gt;&gt;
			&lt;&lt;run delete $tmpGirl.assignedTo&gt;&gt;
			&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;link &#39;Move him to the basement cell&#39;&gt;&gt;
		&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
		&lt;&lt;goto &#39;Guest move to basement&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	
	&lt;&lt;if !$tmpGirl.assignedTo &amp;&amp; !($player.companions[&#39;guest:&#39; + $guestId] ?? false)&gt;&gt;
		&lt;&lt;link &#39;Assign to&#39;&gt;&gt;
			&lt;&lt;dialog &#39;Assign to&#39;&gt;&gt;
				&lt;&lt;include &#39;Guest view assign to&#39;&gt;&gt;	
			&lt;&lt;/dialog&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if $tmpGirl.assignedTo&gt;&gt;
		&lt;&lt;link &quot;Remove assigned job ($tmpGirl.assignedTo)&quot;&gt;&gt;
			&lt;&lt;run delete $tmpGirl.assignedTo&gt;&gt;
			&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	
	&lt;&lt;if !$tmpGirl.gift&gt;&gt;
		&lt;&lt;link &#39;Give gift&#39;&gt;&gt;
			&lt;&lt;script&gt;&gt;
				Dialog.setup(&quot;Give gift&quot;, &quot;Give gift&quot;);
				Dialog.wiki(Story.get(&quot;Give gift&quot;).processText());
				Dialog.open();
	  		&lt;&lt;/script&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Change name&#39;&gt;&gt;
		&lt;&lt;dialog &#39;Change name&#39;&gt;&gt;	
			What you will call your guest? &lt;&lt;textbox &quot;_tmpGirlName&quot; $tmpGirl.name&gt;&gt;
			&lt;&lt;link &#39;OK&#39;&gt;&gt;
				&lt;&lt;set $tmpGirl.name = _tmpGirlName&gt;&gt;
				&lt;&lt;dialogclose&gt;&gt;	
				&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/dialog&gt;&gt;	
&lt;&lt;/link&gt;&gt;
	
 &lt;&lt;link &#39;Go back&#39;&gt;&gt;
	&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
	&lt;&lt;elseif typeof $charId !== &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $characters[$charId] = $tmpGirl&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;run delete $charId&gt;&gt;
	&lt;&lt;run delete $guestId&gt;&gt;
	&lt;&lt;run delete $slaveId&gt;&gt;
	&lt;&lt;if $tmpGirlBack&gt;&gt;
		&lt;&lt;goto $tmpGirlBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="315" name="Group workout - guests" tags="" position="635,557" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/outside/workout_group.jpg&#39;]]
&lt;/center&gt;

The villagers start to gather, each bringing their unique skills and experiences.
&lt;br /&gt;&lt;br /&gt;

You stands before the crowd, feeling a mix of nerves and excitement. 
&lt;br /&gt;
You  explain the plan for the workout, emphasizing the importance of coming together to strengthen both their bodies and minds. The goal is not only to enhance physical abilities but also to find moments of peace and serenity in the midst of their challenging lives.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;for _workoutGuestI, _workoutGuest range $guests&gt;&gt;
	&lt;&lt;if setup.getAge(_workoutGuest) &lt; 5&gt;&gt;
		&lt;&lt;continue&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set _genderClass = &#39;gender-&#39; + (!_workoutGuest.gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
	&lt;&lt;set $guests[_workoutGuestI].strength++&gt;&gt;
	&lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot; style=&quot;font-weight:bold&quot;&gt;
		&lt;&lt;=_workoutGuest.name&gt;&gt;
	&lt;/span&gt; strength increased by 1
	&lt;br /&gt;
&lt;&lt;/for&gt;&gt;
&lt;br /&gt;
As the event draws to a close, the villagers gather around a makeshift bonfire. They share stories and laughter, forming connections that go beyond mere survival. They realize that, in this post-apocalyptic world, their strength lies not only in their physical abilities but also in their collective spirit.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if setup.percentageChance(20)&gt;&gt;
	&lt;&lt;video &#39;cabin/workout_group1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	Everyone leaves except you and two other girls. They look at each other with smile on their face and instantly starts to make out in front of you
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;cabin/workout_group2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	They giggle as one of the girls decides to get on her knees and other girl helps to open your pants. Look like they&#39;re decided to have fun without asking you your permission. One girl gently licks your already hard dick as other girl pushes her onto your dick with force...
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;cabin/workout_group3&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	Another one of the girls peeks out through the door and notices what&#39;s happening. Instead of showing surprise in her eyes or turning away to leave, she also smiles and comes in your direction. After a moment, she has already knelt down to enjoy your dick.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Fuck one of them&#39;&gt;&gt;
		&lt;&lt;video &#39;cabin/workout_group4&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
			One of the girls bend over and two others get on each of her side and just enjoys the view
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;cabin/workout_group5&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
			They pushes you back against the chair you were sitting before and starts to jerk off as they see you&#39;re very close to cum
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;horny 100&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
		&lt;&lt;horny_reset&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/cabin/workout_group_cum.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		One of the girls took the initiative and pressed her lips against your dick to catch everything that comes out of you.
		&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;energy 100&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="316" name="Guy fuck" tags="sex" position="5137,29" size="100,100">[[Blowjob|Guy fuck - blowjob]]
[[Anal|Guy fuck - anal]]

&lt;&lt;link &#39;End&#39;&gt;&gt;
  	&lt;&lt;if $tmpGirlViewBack &amp;&amp; !tags($tmpGirlViewBack).includes(&#39;girlview&#39;)&gt;&gt;
		&lt;&lt;if typeof $slaveId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $slaves[$slaveId] = $tmpGirl&gt;&gt;
			&lt;&lt;run delete $slaveId&gt;&gt;
		&lt;&lt;elseif typeof $guestId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $guests[$guestId] = $tmpGirl&gt;&gt;
			&lt;&lt;run delete $guestId&gt;&gt;
		&lt;&lt;elseif typeof $charId !== &#39;undefined&#39;&gt;&gt;
			&lt;&lt;set $characters[$charId] = $tmpGirl&gt;&gt;
			&lt;&lt;run delete $charId&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto [[Guy view]]&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="317" name="Guy fuck - blowjob" tags="sex" position="5141,137" size="100,100">&lt;&lt;actionImage $tmpGirl bj&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
&lt;&lt;energy -5&gt;&gt;
&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  	&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;horny 20&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	[[Cum on face|Guy fuck - cum on face]]
	[[Cum in mouth|Guy fuck - cum in mouth]]
&lt;&lt;else&gt;&gt;
	[[Blowjob|Guy fuck - blowjob]]
	[[Deepthroat|Guy fuck - deepthroat]]
	[[Anal|Guy fuck - anal]]

	[[Back|Guy fuck]]
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="318" name="Guy fuck - deepthroat" tags="sex" position="5142,247" size="100,100">&lt;&lt;actionImage $tmpGirl dp&gt;&gt;
&lt;&lt;horny 20&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
&lt;&lt;energy -5&gt;&gt;

&lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship + 1, 100)&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;deepthroat&#39;) &amp;&amp; $tmpGirl.relationship &lt; 100&gt;&gt;
	&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; takes your cock as deep as it can go with a with pleasure in his eyes&lt;br /&gt;
	Relationship increased by 1
	&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	[[Cum on face|Guy fuck - cum on face]]
	[[Cum in mouth|Guy fuck - cum in mouth]]
&lt;&lt;else&gt;&gt;
	[[Blowjob|Guy fuck - blowjob]]
	[[Deepthroat|Guy fuck - deepthroat]]
	[[Anal|Guy fuck - anal]]
	[[Back|Guy fuck]]
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="319" name="Guy fuck - anal" tags="sex" position="5246,134" size="100,100">&lt;&lt;if $tmpGirl.anal &lt; 20&gt;&gt; 
	&lt;center&gt;
	[img[setup.ImagePath+&#39;game/misc/no_anal_guy.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You tried to fuck him in the ass but your dick is too big for him and he can&#39;t relax. 
	&lt;br /&gt;
	He can&#39;t take it in his ass and begs you to stop.
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; submission increased by 1&lt;/strong&gt;
	&lt;&lt;set $tmpGirl.sub = Math.min($tmpGirl.sub+1, 100)&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;actionImage $tmpGirl anal&gt;&gt;
	
	&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;analslut&#39;)&gt;&gt;
	  &lt;&lt;if $tmpGirl.relationship &gt; 10&gt;&gt;
		  &lt;&lt;set $tmpGirl.horny += 20&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
	  &lt;&lt;if $tmpGirl.horny &gt;= 100&gt;&gt;
		  &lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; has an orgasm!&lt;/strong&gt;
		  &lt;&lt;set 
			  $tmpGirl.horny = 0,
			  $tmpGirl.orgasms++
		  &gt;&gt;
		  &lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship+1, 100)&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
  	&lt;&lt;/if&gt;&gt;

	&lt;&lt;horny 20&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $tmpGirl.anal++&gt;&gt;
&lt;&lt;if $tmpGirl.anal &gt; 100&gt;&gt;
	&lt;&lt;set $tmpGirl.anal = 100&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;addmins 5&gt;&gt;
&lt;&lt;energy -5&gt;&gt;
&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
&lt;&lt;if $tmpGirl.relationship &gt; 100&gt;&gt;
  	&lt;&lt;set $tmpGirl.relationship = 100&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	[[Cum in ass|Guy fuck - cum in ass]]
&lt;&lt;else&gt;&gt;
	  [[Blowjob|Guy fuck - blowjob]]
	  [[Anal|Guy fuck - anal]]
	[[Back|Guy fuck]]
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="320" name="Guy fuck - cum in mouth" tags="sex" position="5146,357" size="100,100">&lt;&lt;actionImage $tmpGirl cum_in_mouth&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;

&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;cumslut&#39;) &amp;&amp; $tmpGirl.relationship &lt; 100&gt;&gt;
	&lt;&lt;set $tmpGirl.relationship++&gt;&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; Swallows all cum and even licks his fingers with smile on his face&lt;br /&gt;
	Relationship increased by 1
	&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;

[[Back|Guy fuck]]</tw-passagedata><tw-passagedata pid="321" name="Guy fuck - cum in ass" tags="sex" position="5368,357" size="100,100">&lt;&lt;actionImage $tmpGirl cum_in_ass&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Back|Guy fuck]]</tw-passagedata><tw-passagedata pid="322" name="Guy fuck - cum on face" tags="sex" position="5256,357" size="100,100">&lt;&lt;actionImage $tmpGirl cum_on_face&gt;&gt;
&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;set $player.sexp++&gt;&gt;
&lt;&lt;addmins 5&gt;&gt;
[[Back|Guy fuck]]</tw-passagedata><tw-passagedata pid="323" name="Event: Horse merchant" tags="" position="573,1083" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;=$game.cabinName ?? &#39;&#39;&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;						
	[img[setup.ImagePath+&#39;places/cabin/horse_merchant.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you approach the village gate, you encounter a stranger standing next to a colorful caravan filled with beautiful horses. He introduces himself as Barnaby, the Horse Traveling Merchant. Barnaby explains that he&#39;s passing through the area and offers a selection of horses for sale. He also mentions that he&#39;s a skilled horse trainer and takes great care of his animals...&lt;br /&gt;&lt;br /&gt;
&lt;&lt;anonguy&gt;&gt;
	Would you want to buy a horse?
&lt;&lt;/anonguy&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;linkreplace &#39;Yes&#39;&gt;&gt;
		With excitement, Barnaby shows the traveler various horses and tells that one horse costs &lt;strong class=&quot;iitem&quot;&gt;400 caps&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;if $player.money &gt;= 400&gt;&gt;
			&lt;&lt;linkreplace &#39;Buy horse&#39;&gt;&gt;
				&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
				&lt;&lt;run $(&#39;#option1_desc&#39;).hide()&gt;&gt;
				&lt;&lt;set $player.money -= 400&gt;&gt;
				What you will call your horse? &lt;&lt;textbox &quot;_tmpHorseName&quot; &#39;Bullet&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;link &#39;Leave&#39;&gt;&gt;
					&lt;&lt;set $player.horse = _tmpHorseName&gt;&gt;
					&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
			&lt;div id=&quot;option1_desc&quot;&gt;
				&lt;&lt;linkdesc&gt;&gt;-400 caps&lt;&lt;/linkdesc&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;linkreplace &#39;No&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
		With a gracious smile, Barnaby nodded understandingly, accepting the traveler&#39;s decision.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;anonguy&gt;&gt;
			No worries at all. If you ever change your mind I&#39;ll probably come and check on you again
		&lt;&lt;/anonguy&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		With that, the traveler continued on his way, leaving you and your beautiful horses behind.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
</tw-passagedata><tw-passagedata pid="324" name="Vincent - shop talk" tags="" position="3163,1145" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FARM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
	Listen. One evening, I was sitting and thinking. It seems to me that you could develop your small town more, right? I can&#39;t even imagine how you manage to handle all the product and necessary item shopping.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
He takes a rolled-up paper roll from under the table and rolls it out on his own table.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/farm/vincent_shop_talk.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;vincent&gt;&gt;
Have you ever thought about having your own store that could also serve as a warehouse? The idea is that people passing by your settlement would definitely want to buy or sell something. That store would serve precisely that purpose. 
&lt;br /&gt;
However, you would definitely need to delegate someone to keep everything in order. There are certainly many shopkeepers wandering around the world who would gladly live in your settlement.
&lt;&lt;/vincent&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Grab blueprint and leave&#39;&gt;&gt;
	&lt;&lt;notify 6s&gt;&gt;
	Shop available in workbench
	&lt;&lt;/notify&gt;&gt;
	&lt;&lt;goto &#39;Farm&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="325" name="Shop" tags="Place" position="1098,766" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SHOP&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/shop_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if typeof $storage === &#39;undefined&#39;&gt;&gt;
  &lt;&lt;newinv $storage&gt;&gt;
  &lt;&lt;set $storage to Inventory.create()&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if typeof $player.manageGoods === &#39;undefined&#39;&gt;&gt;
	&lt;&lt;set $player.manageGoods = {}&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;for _shopInventoryItemId, _shopInventoryItem range setup.inventoryManageable&gt;&gt;
	&lt;&lt;if typeof $player.manageGoods[_shopInventoryItemId] === &#39;undefined&#39;&gt;&gt;
		&lt;&lt;set $player.manageGoods[_shopInventoryItemId] = {
			min: 0,
			max: 0
		}&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;if setup.getPersonsForLocation($guests, &#39;shop&#39;).length&gt;&gt;
	&lt;table id=&quot;manage-goods&quot;&gt;
		&lt;tr&gt;
			&lt;td&gt;&lt;/td&gt;
			&lt;td&gt;&lt;/td&gt;
			&lt;td&gt;Storage&lt;/td&gt;
			&lt;td&gt;Min&lt;/td&gt;
			&lt;td&gt;Max&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;for _shopInventoryItemId, _shopInventoryItem range setup.inventoryManageable&gt;&gt;
			&lt;&lt;capture _shopInventoryItemId&gt;&gt;
			&lt;tr&gt;
				&lt;td class=&quot;icon&quot;&gt;
					[img[setup.ImagePath+&#39;game/inventory/&#39; + _shopInventoryItemId + &#39;.png&#39;]]
				&lt;/td&gt;
				&lt;td class=&quot;name&quot;&gt;
					&lt;&lt;=Item.get(_shopInventoryItemId).name&gt;&gt;
				&lt;/td&gt;
				&lt;td class=&quot;qty&quot;&gt;
					&lt;&lt;=$storage.count(_shopInventoryItemId)&gt;&gt;
				&lt;/td&gt;
				&lt;td class=&quot;qty-input&quot;&gt;
					&lt;&lt;numberbox &#96;&quot;$player.manageGoods[_shopInventoryItemId].min&quot;&#96; &#96;setup.shopGetDefaultInput(_shopInventoryItemId, &#39;min&#39;)&#96;&gt;&gt;
				&lt;/td&gt;
				&lt;td&gt;
					&lt;&lt;numberbox &#96;&quot;$player.manageGoods[_shopInventoryItemId].max&quot;&#96; &#96;setup.shopGetDefaultInput(_shopInventoryItemId, &#39;max&#39;)&#96;&gt;&gt;
				&lt;/td&gt;
			&lt;/tr&gt;
			&lt;&lt;/capture&gt;&gt;
		&lt;&lt;/for&gt;&gt;
	&lt;/table&gt;
	&lt;br /&gt;&lt;br /&gt;
	
	&lt;div id=&quot;goods-managament-description&quot;&gt;
		&lt;div class=&quot;icon&quot;&gt;
		⁈
		&lt;/div&gt;
		
		The shopkeeper&#39;s task will be to try to bargain goods for which you have set minimum or maximum values. This means that as soon as the goods go beyond the specified numbers, the seller will either try to buy or sell the particular product.

It should be noted that not every item is in demand, which means that some goods may be sold very slowly while others sell faster.
		&lt;br /&gt;
		&lt;div&gt;
			* min - minimal amount of item you want to have in your storage.
		&lt;/div&gt;
		&lt;div&gt;
			* max - maximum amount of item you want to have in your storage.
		&lt;/div&gt;
	&lt;/div&gt;
&lt;&lt;else&gt;&gt;
	You need to assign someone with &lt;strong&gt;shopkeeper&lt;/strong&gt; trait to this job.
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Storage&#39;&gt;&gt;
	&lt;&lt;script&gt;&gt;
		Dialog.setup(&quot;Storage&quot;, &quot;Storage&quot;);
		Dialog.wiki(Story.get(&quot;Storage&quot;).processText());
		Dialog.open();
	  &lt;&lt;/script&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="326" name="Explore event: Waterfall" tags="" position="6102,579" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/waterfall_girl.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you make your way through a area of the wilderness you hear the faint sounds of
flowing water. Moving closer you come upon a waterfall. 
&lt;br /&gt;&lt;br /&gt;

&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/waterfall_girl.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Continue to walking closer you notice beautiful woman bathing in a small waterfall. Her
remarkably smooth skin and toned body suggest that she is healthy and has been eating well,
unlike the starving wretches you have previously seen.
&lt;br /&gt;
Either she&#39;s horny or the water is a bit cold, because her nipples are hard and her face is
flushed. With great difficulty you take your eyes off her and carefully survey the area. Nobody
else is visible. Female clothes are drying on a nearby rock. The woman appears to be bathing
alone.
&lt;br /&gt;
Your swelling cock is making wearing pants increasingly uncomfortable.
&lt;&lt;horny 100&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if recall($suppCode)&gt;&gt;

&lt;div id=&quot;option1&quot;&gt;
&lt;&lt;linkreplace &#39;Strip and join her in the waterfall&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option2, #option3, #option1_desc&#39;).hide()&gt;&gt;
		  Who needs a better invitation than a naked soon-to-be slave? You walk towards the waterfall
while shedding your gear and clothes. The woman finally notices you when you step into the
water a few feet away from her.
Half expecting her to make a run for it, you flex and pose so she can see that neither fight nor
flight would be successful. Instead she smiles coyly, arches her back, and bites her lower lip
before speaking. She purrs gazing at your fully
erect cock.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;anongirl&gt;&gt;
I&#39;m cold and my clothes are all wet. Could you warm me up?
&lt;&lt;/anongirl&gt;&gt;
	  &lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $player.int &lt; 50&gt;&gt;
	  &lt;center&gt;
		  [img[setup.ImagePath+&#39;places/explore/waterfall_handjob.webp&#39;]]
	  &lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		  You walk forward and embrace this water goddess, eager to fuck the daylights out of her.
  Tracing your calloused hands over her full tits and perky ass produces sultry moans and playful
  giggles. She absolutely feels as delicious as she looked. Her delicate fingers wrap around your
  painfully hard erection and she uses your cock like a joystick to guide you over towards the flat
  grassy bank. All your attention is focused on her as she slides onto all fours and wriggles her
  ass at you in unmistakeable invitation to fuck her.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
			&lt;&lt;run setup.blinkScreen()&gt;&gt;
			&lt;center&gt;
		  		[img[setup.ImagePath+&#39;places/explore/waterfall_wakeup.gif&#39;]]
	 		&lt;/center&gt;
		  &lt;br /&gt;&lt;br /&gt;
		  &lt;strong&gt;Intelligence failed!&lt;/strong&gt;
		  &lt;br /&gt;&lt;br /&gt;
		  Next thing you know the world spins violently and the ground rushes up to meet your face.
		  Consciousness returns slowly. It brings with it a splitting headache and a litany of pain as your
		  naked body is covered in scrapes and bruises. The beautiful woman and her hidden compatriots
		  are long gone and have taken what they wanted from your pack. Thankfully they didn&#39;t bother
		  stealing your clothes
		  &lt;br /&gt;&lt;br /&gt;
		  	&lt;&lt;if $backpack.has(&#39;knife&#39;)&gt;&gt;
				&lt;&lt;drop $backpack &#39;knife&#39; 1&gt;&gt;
				You lost &lt;strong class=&quot;iitem&quot;&gt;1 knife&lt;/strong&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set _lostFood = Math.min($backpack.count(&#39;food&#39;), 100)&gt;&gt;
			&lt;&lt;if _lostFood&gt;&gt;
				&lt;&lt;drop $backpack &#39;food&#39; _lostFood&gt;&gt;
				You lost &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_lostFood&gt;&gt; food&lt;/strong&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set _lostPlastic = Math.min($backpack.count(&#39;plastic&#39;), 100)&gt;&gt;
			&lt;&lt;if _lostPlastic&gt;&gt;
				&lt;&lt;drop $backpack &#39;plastic&#39; _lostPlastic&gt;&gt;
				You lost &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_lostPlastic&gt;&gt; plastic&lt;/strong&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set _lostMoney = Math.min($player.money, 200)&gt;&gt;
			&lt;&lt;if _lostMoney&gt;&gt;
				You lost &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_lostMoney&gt;&gt; caps&lt;/strong&gt;
			&lt;&lt;/if&gt;&gt;
		  	&lt;br /&gt;&lt;br /&gt;
		  	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		  		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
		  	&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;else&gt;&gt;
		You walk forward and embrace this water goddess, eager to fuck the daylights out of her.
		&lt;br /&gt;
		Suddenly she screams &lt;strong&gt;&quot;NOW&quot;&lt;/strong&gt;! When you turn around you see 2 big guys rushing at you.
		&lt;br /&gt;&lt;br /&gt;
		You leap away from the naked woman and snatch up your weapon. You may be naked, but at
		least you had time to arm yourself. Seeing that the charade is over several men spring from
		their concealment and attack you.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Fight&#39;&gt;&gt;
			&lt;&lt;set $enemies = []&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;set $tmpGuy.strength = randomInteger(50,100)&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;set $tmpGuy.strength = randomInteger(50,100)&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			
			&lt;&lt;fight $enemies &#39;Explore event: Waterfall won&#39; &#39;Explore event: Waterfall lost&#39;&gt;&gt;
			&lt;&lt;set $fight.skipEnding = true&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;div id=&quot;option1_desc&quot;&gt;
  &lt;&lt;linkdesc&gt;&gt;
	  Send your companions away
  &lt;&lt;/linkdesc&gt;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;notPatreon&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;option3&quot;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
</tw-passagedata><tw-passagedata pid="327" name="Explore event: Waterfall won" tags="" position="6205,580" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/waterfall_swim.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
In front of the girls&#39; eyes, the guys have fallen to the ground, and shock appears. She jumps back into the water and tries to swim in the opposite direction, but you manage to jump after her and grab her by the hair.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;newgirl&gt;&gt;
&lt;&lt;set 
	$tmpGirl.birthDate = setup.getBirthDate(19),
	$tmpGirl.beauty = 99,
	$tmpGirl.traits = setup.getRandomTraits(3),
	$tmpGirl.race = &#39;white&#39;
&gt;&gt;
&lt;&lt;run delete $slaveId, delete $guestId, delete $charId&gt;&gt;

&lt;&lt;include &#39;NPC info&#39;&gt;&gt;
&lt;br /&gt;
&lt;&lt;anongirl&gt;&gt;
	Please let me go! It was their idea! Please!
&lt;&lt;/anongirl&gt;&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/waterfall_eyes.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Her eyes are filled with a pleading, puppy-like expression, as she hopes for your leniency to let her go; every now and then, she shyly averts her gaze but can&#39;t help stealing glances at your dick.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
	You unzip your pants and press her down on her knees. She instantly understands what you want it and doesn&#39;t resist you because she knows she has no way out
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;explore/waterfall1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;anongirl&gt;&gt;
		Okey! I&#39;ll do what you want but after that I am gommmmmhmhhhmhmh
	&lt;&lt;/anongirl&gt;&gt;
	&lt;br /&gt;
	Instead of letting her suck your hard cock, you catch her by surprise and fuck her mouth instead
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;explore/waterfall4&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	After a while, you turn her around and she ends up on her knees. Without emotions, you embed yourself in her as deeply as you can, and as you pick up the pace, you notice for a brief moment that she enjoys this moment so much that her eyes become uncontrollable.
	&lt;&lt;addmins 30&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;anongirl&gt;&gt;
		Just please! Let me go after all of this is don-- HOLY SHIT
	&lt;&lt;/anongirl&gt;&gt;
	&lt;br /&gt;
	&lt;&lt;video &#39;explore/waterfall5&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	Her eyes become uncontrollable but she tries to hide it and pretends as if she finds it disgusting. She relaxes her legs and opens them even wider, almost performing a split.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;anongirl&gt;&gt;
		Not inside me! Let me swallow it!
	&lt;&lt;/anongirl&gt;&gt;
	&lt;br /&gt;
	&lt;&lt;video &#39;explore/waterfall6&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
		She pushes herself away from you and drops to her knees in front of you. Without waiting a moment, she grabs your dick and takes the tip of it into her mouth, as she quickly continues to jerk you off.
		&lt;br /&gt;
		After some seconds you cum right in her mouth and she... swollows it all... Unexpected..
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;horny_reset&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;if (($game.location.basement ?? false) &amp;&amp; $slaves.length &lt; $basementLimit)&gt;&gt;
	&lt;&lt;link &#39;Capture her&#39;&gt;&gt;
		&lt;&lt;run $slaves.push($tmpGirl)&gt;&gt;
		&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Let her go and leave&#39;&gt;&gt;
	&lt;&lt;set $player.reputation++&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="328" name="Explore event: Waterfall lost" tags="" position="6319,578" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/waterfall_wakeup.gif&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Next thing you know the world spins violently and the ground rushes up to meet your face.
 Consciousness returns slowly. It brings with it a splitting headache and a litany of pain as your
naked body is covered in scrapes and bruises. The beautiful woman and her hidden compatriots
are long gone and have taken what they wanted from your pack. Thankfully they didn&#39;t bother
stealing your clothes
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $backpack.has(&#39;knife&#39;)&gt;&gt;
				&lt;&lt;drop $backpack &#39;knife&#39; 1&gt;&gt;
				You lost &lt;strong class=&quot;iitem&quot;&gt;1 knife&lt;/strong&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set _lostFood = Math.min($backpack.count(&#39;food&#39;), 100)&gt;&gt;
			&lt;&lt;if _lostFood&gt;&gt;
				&lt;&lt;drop $backpack &#39;food&#39; _lostFood&gt;&gt;
				You lost &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_lostFood&gt;&gt; food&lt;/strong&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set _lostPlastic = Math.min($backpack.count(&#39;plastic&#39;), 100)&gt;&gt;
			&lt;&lt;if _lostPlastic&gt;&gt;
				&lt;&lt;drop $backpack &#39;plastic&#39; _lostPlastic&gt;&gt;
				You lost &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_lostPlastic&gt;&gt; plastic&lt;/strong&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;set _lostMoney = Math.min($player.money, 200)&gt;&gt;
			&lt;&lt;if _lostMoney&gt;&gt;
				You lost &lt;strong class=&quot;iitem&quot;&gt;&lt;&lt;=_lostMoney&gt;&gt; caps&lt;/strong&gt;
			&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="329" name="Credits" tags="" position="1233,930" size="100,100">&lt;div id=&quot;credits&quot;&gt;
&lt;h1&gt;Writing contributions by:&lt;/h1&gt;
&lt;h2&gt;NoMaybe&lt;/h2&gt;
&lt;ul&gt;
	&lt;li&gt;Explore event: Waterfall&lt;/li&gt;
	&lt;li&gt;First slave visit in basement&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Arkan Ascantii&lt;/h2&gt;
&lt;ul&gt;
	&lt;li&gt;Explore event: Abandoned mall&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</tw-passagedata><tw-passagedata pid="330" name="Basement - first girl visit" tags="" position="2311,98" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BASEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;basement/first_visit1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You go to visit your new captive &lt;&lt;=setup.displayName($tmpGirl)&gt;&gt;. She sits restlessly in her cell knowing that there are
only a few reasons why you would go to the trouble of keeping her warm, fed, and imprisoned.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;anongirl&gt;&gt;
	Please let me go!
&lt;&lt;/anongirl&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addmins 10&gt;&gt;
You spend a moment telling her why she&#39;s here and what her options are. She&#39;s your slave and she will need to do whatever you ask her to do.
&lt;br /&gt;
She spends a moment weighing her options, but it is clear &lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; knows she would stand nochance of winning a fight.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $tmpGirl.sub &lt; 10&gt;&gt;
	&lt;&lt;anongirl&gt;&gt;
		Oh screw you! I am gonna kill you! You&#39;re dead!
	&lt;&lt;/anongirl&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;anongirl&gt;&gt;
		Yes... Just please don&#39;t hurt me
	&lt;&lt;/anongirl&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Whip her&#39;&gt;&gt;
	&lt;&lt;video &#39;basement/first_visit2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;set $tmpGirl.sub++&gt;&gt;
	&lt;strong&gt;&lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; submission increased by 1&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Continue&#39;&gt;&gt;
	&lt;&lt;goto &#39;Girl view&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="331" name="Event: Food forager" tags="" position="679,1083" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/kid_stealing_food.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You hear a sound coming from a place where food is stored and decide to go check what the sound is. The door to the room is open and the sound keeps getting louder and louder. To your surprise, as you open the door, you see a small child in front of you, who with fearful eyes looks into your eyes, holding a few pieces of food in their hands.
Amongst rooms, you pursued a faint noise to a storage room. Its door revealed a small, wary figure clutching stolen food.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _foodOptions = [$storage.count(&#39;food&#39;), $backpack.count(&#39;food&#39;), 5]&gt;&gt;
&lt;&lt;set _foodGive = Math.min.apply(null, _foodOptions.filter(Boolean))&gt;&gt;
&lt;&lt;if _foodGive &amp;&amp; ($storage.count(&#39;food&#39;) || $backpack.count(&#39;food&#39;))&gt;&gt;
	&lt;&lt;linkreplace &#39;Tell him to take as much as he like&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#option1_desc, #option2&#39;).hide()&gt;&gt;
		&lt;&lt;if $storage.count(&#39;food&#39;) &gt;= _foodGive&gt;&gt;
			&lt;&lt;drop $storage &#39;food&#39; _foodGive&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;drop $backpack &#39;food&#39; _foodGive&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;strong&gt;You lost &lt;&lt;=_foodGive&gt;&gt; food&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
		A child with a wide smile on his face leans over and says &lt;strong&gt;&quot;Thank you so much mister!&quot;&lt;/strong&gt; before taking a few more  food and quickly walking out of the building and disappearing into the nearby forest.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;set $player.godwilll++&gt;&gt;
			&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
		
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;div id=&quot;option1_desc&quot;&gt;
		&lt;&lt;linkdesc&gt;&gt;
		-&lt;&lt;=_foodGive&gt;&gt; food
		&lt;&lt;/linkdesc&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;link &#39;Throw him out&#39;&gt;&gt;
		&lt;&lt;set $player.godwill -= 5&gt;&gt;
		&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="332" name="Octavia - burn settlement" tags="" position="2382,3010" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SETTLEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

Your path is peaceful, paying no attention to anything along the roadside, you count the bees you see undisturbed. Already quite close, you lift your head to look at how far yet, and ahead you spot something terrifying - white smoke where the village of Rodger&#39;s is located...
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/octavia_burn.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Rush to the settlement&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/settlement/octavia_burn2.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	When you have gotten very close, you notice that the grass around the church is on fire and the flames are very close. Chaos reigns all around, and people are rushing in all directions. Some are fleeing, while others are 	trying to get water to extinguish the flames that are increasingly nearing the church.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Help them put out fire&#39;&gt;&gt;
		As soon as you&#39;re ready to grab the bucket and run after water, you hear loud scream behind you and turn around to see who was that
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/finish_church_attack1.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;octavia&gt;&gt;
			I had a feeling that we will met again.. KILL HIM!
		&lt;&lt;/octavia&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/octavia_burn3.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		At that very moment, 3 grounders with loud shouts rush towards you. There is no retreat. You have to fight against them.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
			&lt;&lt;set $enemies = []&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
  	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
	&lt;&lt;newguy&gt;&gt;
  	&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
  	&lt;&lt;fight $enemies &#39;Octavia - burn settlement - won&#39; &#39;Octavia - burn settlement - lost&#39; true&gt;&gt;
	&lt;&lt;set $fight.skipEnding = true&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="333" name="Octavia - burn settlement - lost" tags="" position="2489,3013" size="100,100">&lt;&lt;set $game.death_reason = &#39;stone crushing your head&#39;&gt;&gt;
&lt;&lt;goto &#39;Dead&#39;&gt;&gt;</tw-passagedata><tw-passagedata pid="334" name="Octavia - burn settlement - won" tags="" position="2598,3015" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SETTLEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/octavia_run.webp&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
The girl, upon seeing that you have dealt with her one of the biggest guys, shouts at the others to back off, but she herself runs into the other side of the forest. She casts a quick glance at you and disappears so far that she is no longer noticeable.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Follow her&#39;&gt;&gt;
	Suddenly, after a moment, quite close by, you hear a loud scream. It sounded like a woman. Coming precisely from the same direction where Octavia ran off a moment ago.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Run towards that place&#39;&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/octavia_run2.webp&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;	
		You run about 100 meters at most, and in front of you, you witness a horrifying sight. Octavia, her face filled with pain, is struggling to crawl away slowly, but she can&#39;t... Her leg is trapped between the bear&#39;s jaws, and everything around her is covered in her blood.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/octavia_burn4.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Help her&#39;&gt;&gt;
			With all your strength, you manage to pry the bear&#39;s jaws apart, and Octavia, whimpering, manages to escape to the nearest tree. Leaning against the tree trunk, she doesn&#39;t divert her gaze from you. In her eyes, you see anger.
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;
			[img[setup.ImagePath+&#39;places/settlement/octavia_run3.webp&#39;]]
		&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;octavia&gt;&gt;
				What you&#39;re doing!? KILL ME YOU COWARD! 
			&lt;&lt;/octavia&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;warning &#39;WARNING! YOUR NEXT CHOICES WILL DETERMINE IF YOU TAKE DOM OR SUB ROUTE WITH HER&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;div id=&quot;option1&quot;&gt;
				&lt;&lt;linkreplace &#39;Release her (SUB)&#39;&gt;&gt;
					&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
					&lt;&lt;you&gt;&gt;
						You are free to go! GO!
					&lt;&lt;/you&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;octavia&gt;&gt;
						Are you serious? You weak pathetic looser!
					&lt;&lt;/octavia&gt;&gt;
					&lt;br /&gt;
					&lt;&lt;octavia&gt;&gt;
						You intrigue me.. So strong from the outside but on inside... Pathetic..
					&lt;&lt;/octavia&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;linkreplace &#39;Continue&#39;&gt;&gt;
						&lt;&lt;run $(&#39;#ending&#39;).show()&gt;&gt;
					&lt;&lt;/linkreplace&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;/div&gt;
			&lt;div id=&quot;option2&quot;&gt;
				&lt;&lt;linkreplace &#39;Enslave her (DOM)&#39;&gt;&gt;
					&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
					&lt;&lt;set $characters.octavia.isSub = true&gt;&gt;
					&lt;&lt;set $characters.octavia.sub += 5&gt;&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;places/settlement/octavia_dick_face.webp&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					You stand right in front of her and pull out your dick. She tries to back away from you, but she realizes there&#39;s a tree behind her, and she&#39;s unable to resist on her own. You put your dick on her face and rub it while she grimaces and tries to avoid it.
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;linkreplace &#39;Fuck her mouth&#39;&gt;&gt;
						&lt;&lt;run $(&#39;#ending&#39;).show()&gt;&gt;
					&lt;&lt;/linkreplace&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;div id=&quot;ending&quot; style=&quot;display:none;&quot;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/settlement/octavia_ending.gif&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	At that moment, another loud shout echoes from behind. You glance in that direction and see at least 20 grounders, one of whom has already aimed a bow at you and is ready to shoot. You have no choice but to flee.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Flee&#39;&gt;&gt;
		&lt;&lt;addhours 2&gt;&gt;
		&lt;&lt;set $characters.octavia.quests.burned_settlement = true&gt;&gt;
		&lt;&lt;set $characters.octavia.quests.burn_day = $game.day&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
</tw-passagedata><tw-passagedata pid="335" name="Octavia - eve kidnapped" tags="" position="2384,3120" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SETTLEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.octavia.quests.eve_kidnapped = true&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/eve_kidnapped.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you reached the outskirts of Rodger&#39;s settlement, I see Roger rushing toward you, his eyes wide with panic. His voice was raw as he shouted...
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
	They took her! They took Eve!
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Your heart sank as his words hit you like a punch to the gut.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;you&gt;&gt;
	Who? Who took her?
&lt;&lt;/you&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You demanded, fear and anger intertwining in your voice.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;rodger&gt;&gt;
  The grounders! Octavia and her gang. They dragged her into the forest.
&lt;&lt;/rodger&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Tell me what exactly happened&#39;&gt;&gt;
	&lt;&lt;rodger&gt;&gt;
		Everything happened so suddenly. They just appeared by those trees and that was it. This time, however, there weren&#39;t as many of them, and they also didn&#39;t try to harm us. It seemed more like they were interested in you. They simply took her as a guarantee for you to comply. Octavia specifically said that Eve would stay with them until you arrived.
	&lt;&lt;/rodger&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Go alone&#39;&gt;&gt;
		&lt;&lt;goto &#39;Octavia - eve kidnapped #2&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#39;Ask Rodger to join you&#39;&gt;&gt;
		&lt;&lt;set $characters.octavia.quests.eve_kidnapped_rodger = true&gt;&gt;
		&lt;&lt;goto &#39;Octavia - eve kidnapped #2&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="336" name="Octavia - eve kidnapped #2" tags="" position="2495,3121" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST NEAR SETTLEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _walkImage = &#39;eve_kidnapped_&#39; + ($characters.octavia.quests.eve_kidnapped_rodger ? &#39;rodger&#39; : &#39;alone&#39;)&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/&#39; + _walkImage + &#39;.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You started walking in the direction indicated by Rodger. Along the edge of the path, there were visible traces of blood, but they didn&#39;t look fresh. 
&lt;br /&gt;
Perhaps they were from other times when grounders went away, trying to destroy Roger&#39;s settlement.
&lt;br /&gt;
Suddenly, in the middle of the forest, a river began, and the sounds of people could be heard nearby. It was decided to head in that direction.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Go along the river&#39;&gt;&gt;
	&lt;&lt;video &#39;settlement/eve_kidnapped1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	The sounds become louder, and then, at one moment, on the other side of the river, you notice Grounders. It&#39;s suspicious that there are only women and they all are half-naked.
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;option1&quot;&gt;
		&lt;&lt;linkreplace &#39;Quietly investigate them&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
			&lt;&lt;video &#39;settlement/eve_kidnapped2&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;if $characters.octavia.quests.eve_kidnapped_rodger&gt;&gt;
				&lt;&lt;rodger&gt;&gt;
					There she is! My Eve!
				&lt;&lt;/rodger&gt;&gt;
				&lt;br /&gt;
				Rodger tries to yell so she can hear him but you manage to stop him in time.
				&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;/if&gt;&gt;
				You see that they are carrying &lt;strong&gt;Eve&lt;/strong&gt; closer to the rest of the group, while she&#39;s trying to resist and break free from them. You decide to get closer to check what they will do next
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;video &#39;settlement/eve_kidnapped4&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			To your surprise, they tie Eve to a tree and rip her upper garment. It appears they are attempting to humiliate her or are very intrigued by Eve. They smear her with mud, but at the same time, one of them decides to lick her breasts
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;Get closer&#39;&gt;&gt;
				&lt;&lt;run $(&#39;#ending&#39;).show()&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option2&quot;&gt;
		&lt;&lt;linkreplace &#39;Go straight to them&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
			&lt;&lt;run $(&#39;#ending&#39;).show()&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;div id=&quot;ending&quot; style=&quot;display:none&quot;&gt;
	&lt;&lt;video &#39;settlement/eve_kidnapped5&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	One of the girls notices you and grabs you by the arm. She leads you towards Eve and places you right in front of her. Suddenly, a shout is heard from the side. You look behind, and it&#39;s Octavia.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;octavia&gt;&gt;
		Leave him alone! He&#39;s mine! Bring them all to my tent.
	&lt;&lt;/octavia&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Follow her into a tent&#39;&gt;&gt;
		&lt;&lt;goto &#39;Octavia - eve kidnapped #3&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="337" name="Octavia - eve kidnapped #3" tags="" position="2599,3123" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST NEAR SETTLEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/settlement/eve_kidnapped_table.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You enter the wine tent and sit down at the table opposite her. In the tent, it&#39;s just the two of you, and the others are left behind the door. The tent is full of holes, and through each of these holes, sunlight shines into the tent.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if !$characters.octavia.isSub&gt;&gt;
	&lt;&lt;video &#39;/settlement/eve_kidnapped_sub&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	Suddenly she commands you to strip down and lay on the ground. You follow her commands as that&#39;s the only way she will let all of you go.
	&lt;br /&gt;
	When you&#39;re undressed, she pushes you to the ground and kicks you in the stomach.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;octavia&gt;&gt;
	Now listen carefully! I have such a large army that I could destroy that village in one day if I wanted to. But I am willing to let them be, with one condition..
&lt;&lt;/octavia&gt;&gt;
&lt;br /&gt;
&lt;&lt;octavia&gt;&gt;
Rumors are circulating that a merciless cold is approaching, and as you can see for yourself, some of us are not really prepared for it. Our men are the best when it comes to battles, but they have other weaknesses. I want you to provide us with wolf pelts.
&lt;&lt;/octavia&gt;&gt;

&lt;&lt;set $characters.octavia.quests.canTalk = true&gt;&gt;
&lt;&lt;set $characters.octavia.quests.wolf_pelts_day = $game.day&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Nod with your head&#39;&gt;&gt;
	You nod with your head, and she calls one of her girls. She orders for all of you to be released and set free. As you walk away, you feel that she thoroughly examined you before you left the tent.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;


</tw-passagedata><tw-passagedata pid="338" name="Explore event: Old couple" tags="" position="6639,301" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/old_couple_traveling.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you move along the ruins of the buildings, in the distance you spot an elderly couple. They appear to be very weak and are barely moving forward, seemingly famished.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;linkreplace &#39;Approach them&#39;&gt;&gt;
	Upon seeing that you are approaching them, they come to a complete stop and huddle together. The old woman presses herself against the side of the old man.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;anonguy&gt;&gt;
		Please! Don&#39;t harm us
	&lt;&lt;/anonguy&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;option1&quot;&gt;
		&lt;&lt;linkreplace &#39;Rob them&#39;&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/explore/old_couple_hand.jpg&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			The old man puts his hand in his pocket and after a moment, pulls something out. With trembling hands, he reaches forward and opens his hand. In his hand, there&#39;s only a bottle cap...
			&lt;br /&gt;&lt;br /&gt;
			&lt;div id=&quot;option3&quot;&gt;
				&lt;&lt;linkreplace &#39;Take it&#39;&gt;&gt;
					&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
					&lt;&lt;set $player.godwill -=5&gt;&gt;
					&lt;&lt;set $player.money++&gt;&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;places/explore/old_couple_cry.jpg&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					After you have taken everything they had and walked a few steps away, the old woman starts crying, and both of them fall to their knees, holding each other&#39;s hands..
					&quot;&lt;strong&gt;That was everything we got...&lt;/strong&gt;&quot;
					&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option2&quot;&gt;
	  &lt;&lt;if $backpack.count(&#39;food&#39;) &gt;= 5&gt;&gt;
			&lt;&lt;linkreplace &#39;Offer them food&#39;&gt;&gt;
				&lt;&lt;run $(&#39;#option1, #option2_desc&#39;).hide()&gt;&gt;
				&lt;&lt;drop $backpack &#39;food&#39; 5&gt;&gt;
				&lt;&lt;set $player.godwill++&gt;&gt;
				&lt;center&gt;
						[img[setup.ImagePath+&#39;places/explore/old_couple_cry.jpg&#39;]]
				&lt;/center&gt;
				&lt;br /&gt;&lt;br /&gt;
				The woman dissolves into tears and can&#39;t stop thanking you. They both hold the food to their chests as tightly as possible, until they fall to their knees and touch foreheads, leaning on each other.
				&lt;br /&gt;
				&quot;&lt;strong&gt;Thank you! Thank you!&lt;/strong&gt;&quot;
			&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;linkdesc &#39;option2_desc&#39;&gt;&gt;
				-5 food
			&lt;&lt;/linkdesc&gt;&gt;
	  &lt;&lt;/if&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="339" name="Greenhouse - competition" tags="" position="334,1222" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;GREENHOUSE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/greenhouse/competition.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _randomPersons = setup.getRandomPersonIds($game.greenhouseCompetition, 2)&gt;&gt;
&lt;&lt;set _npc1 = setup.getNpcByKey($game.greenhouseCompetition[_randomPersons[0]])&gt;&gt;
&lt;&lt;set _npc1SplitKey = $game.greenhouseCompetition[_randomPersons[0]].split(&#39;:&#39;)&gt;&gt;
&lt;&lt;set _npc2 = setup.getNpcByKey($game.greenhouseCompetition[_randomPersons[1]])&gt;&gt;
&lt;&lt;set _npc2SplitKey = $game.greenhouseCompetition[_randomPersons[1]].split(&#39;:&#39;)&gt;&gt;

Just as you entered through the door, both &lt;&lt;=setup.displayName(_npc1)&gt;&gt; and &lt;&lt;=setup.displayName(_npc2)&gt;&gt; call you from the middle of the room. A small discussion has arisen between them, and they believe that each of the vegetables they have grown is more beautiful than the others. They want you to determine the winner. Both giggling, they try to grab your attention so that you choose their vegetables specifically.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Decide&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
	You approach closer, and both girls extend their hands with the vegetables they have grown in them. You carefully examine both, one and then the other.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/greenhouse/competition_flash.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	Since you don&#39;t respond immediately and seem to be genuinely giving an honest assessment, &lt;&lt;=setup.displayName(_npc1)&gt;&gt; takes advantage of the moment without the &lt;&lt;=setup.displayName(_npc2)&gt;&gt; noticing. She unbuttons her blouse with a broad smile on her face and winks at you.
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;option2&quot;&gt;
		&lt;&lt;linkreplace _npc1.name&gt;&gt;
			&lt;&lt;run $(&#39;#option3&#39;).hide()&gt;&gt;
		  &lt;strong&gt;Relationship with &lt;&lt;=_npc1.name&gt;&gt; increased by 5&lt;/strong&gt;
		  &lt;br /&gt;
		  &lt;strong&gt;Relationship with &lt;&lt;=_npc2.name&gt;&gt; decreased by 4&lt;/strong&gt;
		  
		  &lt;&lt;setNpcStats _npc2SplitKey[0] _npc2SplitKey[1] &#39;relationship&#39; -4&gt;&gt;
		  &lt;&lt;setNpcStats _npc1SplitKey[0] _npc1SplitKey[1] &#39;relationship&#39; +5&gt;&gt;
		  	&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;=setup.displayName(_npc1)&gt;&gt; flashes a smile without taking her eyes off you. When &lt;&lt;=setup.displayName(_npc2)&gt;&gt; turns away a bit disappointed, &lt;&lt;=setup.displayName(_npc1)&gt;&gt; points to a spot behind the tall plants.
			&lt;br /&gt;&lt;br /&gt;
			
			&lt;&lt;linkreplace &#39;Follow her&#39;&gt;&gt;
				&lt;&lt;video &#39;greenhouse/competition1&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				As soon as you both get behind plants, she grabs your hand and pulls you deeper behind and drops on her knees. She unbuttons her top, unzips your pants and takes your cock inside her mouth.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;places/greenhouse/competition_cum.webp&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;horny_reset&gt;&gt;
					Playfully she opens her mouth wide open and with tongue movements tries to catch each drop of your warm cum...
					&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;link &#39;Leave&#39;&gt;&gt;
				&lt;&lt;goto &#39;Greenhouse&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option3&quot;&gt;
		&lt;&lt;linkreplace _npc2.name&gt;&gt;
			&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
		  &lt;center&gt;
			[img[setup.ImagePath+&#39;places/greenhouse/competition_happy.gif&#39;]]
		  &lt;/center&gt;
		  &lt;br /&gt;&lt;br /&gt;
		  &lt;&lt;=setup.displayName(_npc2)&gt;&gt; Starts to jump from happiness and is very pleased with your decision.
		  &lt;br /&gt;&lt;br /&gt;
		  &lt;strong&gt;Relationship with &lt;&lt;=_npc2.name&gt;&gt; increased by 5&lt;/strong&gt;
		  &lt;br /&gt;
		  &lt;strong&gt;Relationship with &lt;&lt;=_npc1.name&gt;&gt; decreased by 4&lt;/strong&gt;
		  
		  &lt;&lt;setNpcStats _npc1SplitKey[0] _npc1SplitKey[1] &#39;relationship&#39; -4&gt;&gt;
		  &lt;&lt;setNpcStats _npc2SplitKey[0] _npc2SplitKey[1] &#39;relationship&#39; +5&gt;&gt;
		  &lt;br /&gt;&lt;br /&gt;
		  &lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Greenhouse&#39;&gt;&gt;
		  &lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Let them sort it out on their own&#39;&gt;&gt;
		&lt;&lt;goto &#39;Greenhouse&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="340" name="Blair - date" tags="" position="451,2409" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	So what should we do?
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if recall($suppCode)&gt;&gt;
	&lt;&lt;link &#39;Go to skyscraper&#39;&gt;&gt;
		&lt;&lt;goto &#39;Blair - date [skyscraper]&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;div class=&quot;link-internal disabled&quot; style=&quot;background: #ccc&quot;&gt;
		Go to skyscraper
		&lt;&lt;notPatreonIcon&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;


&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Kitchen-room&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="341" name="Blair - date [skyscraper]" tags="" position="566,2411" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

The air was thick with uncertainty, but your determination to create a meaningful memory propelled them forward. Armed with a few scavenged supplies and a sense of adventure, you navigated through the shattered streets, dodging shadows and weaving through the remnants of the past.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;people/blair/skyscraper1.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Your path led you through hauntingly empty boulevards, where shattered storefronts stood as testament to the lives that were once lived. They shared stories along the way, each tale a tiny candle of warmth against the encroaching darkness. Laughter echoed through the desolate landscape, a reminder that even in the harshest of times, humanity&#39;s spirit could not be extinguished.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Do you remember? How looked this place before?
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;dialog1&quot;&gt;
  &lt;&lt;link &#39;Yes.. It was something...&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#dialog1&#39;).hide()&gt;&gt;
		&lt;&lt;run $(&#39;#dialog1-continue&#39;).show()&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &quot;No. Haven&#39;t been on this part of  the town&quot;&gt;&gt;
  		&lt;&lt;run $(&#39;#dialog1&#39;).hide()&gt;&gt;
		&lt;&lt;run $(&#39;#dialog1-continue&#39;).show()&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;dialog1-continue&quot; style=&quot;display:none;&quot;&gt;
	&lt;&lt;addhours 4&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;people/blair/skyscraper2.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
	Finally, after a heart-pounding journey through uncertainty and danger, you stood before the towering skyscraper that still managed to scrape the sky. Its upper floors were missing, a testament to the ravages of time and disaster, yet its skeletal frame remained resolute. With a mixture of excitement and trepidation, you began your ascent, using the remains of staircases and makeshift ladders to climb toward your destination.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Climb&#39;&gt;&gt;
		As you ascended, the world beneath you transformed. The city, once a barren wasteland, revealed its forgotten beauty from this new vantage point. The moonlight bathed the ruins in a soft glow, creating an otherworldly ambiance that defied the surrounding devastation. You and Blair found yourself pausing to take in the view, the weight of the world momentarily lifted as they marveled at the stark contrast between destruction and the indomitable human spirit.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;people/blair/skyscraper3.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		After what seemed like an eternity, you reached the highest intact floor of the skyscraper. A breathtaking panorama unfolded before you — a tapestry of broken buildings, silent streets, and a sky awash with stars. Amidst the solitude, you found solace in each other&#39;s company. You shared a simple meal you had brought along, savoring the flavors and the moment as if it were a feast fit for kings.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;you&gt;&gt;
			Can you believe we&#39;re actually doing this? Scaling a half-ruined skyscraper for a date?
		&lt;&lt;/you&gt;&gt;
		&lt;br /&gt;
		&lt;&lt;blair&gt;&gt;
			I never thought a date would involve so much climbing, but it&#39;s kind of exhilarating, don&#39;t you think? Plus, the view better be worth it.
		&lt;&lt;/blair&gt;&gt;
		&lt;br /&gt;
		&lt;&lt;blair&gt;&gt;
			Well, I must admit, I&#39;m glad we&#39;re doing this together. It&#39;s like we&#39;re exploring a lost world.
		&lt;&lt;/blair&gt;&gt;
		&lt;br /&gt;
		&lt;&lt;you&gt;&gt;
			It&#39;s strange how these circumstances can bring people closer. We&#39;re living through a story that&#39;s uniquely ours.
		&lt;&lt;/you&gt;&gt;
		&lt;br /&gt;
		&lt;&lt;blair&gt;&gt;
			You know, it&#39;s funny. In a world where everything has fallen apart, I feel like I&#39;ve found something truly valuable.
		&lt;&lt;/blair&gt;&gt;
		&lt;br /&gt;
			...
		&lt;br /&gt;
		
		&lt;&lt;blair&gt;&gt;
			We should probably go back
		&lt;&lt;/blair&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Blair - date [skyscraper] fuck&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="342" name="Blair - date [skyscraper] fuck" tags="" position="677,2413" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You descend one floor down, and Blair leans against the spot where there used to be a window, briefly enjoying the view with a smile. After a moment, she turns around, sensually sways her hips, and playfully winks.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;blair&gt;&gt;
	Maybe we could have some fun here?
&lt;&lt;/blair&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;blair/date_skyscraper1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Approach her&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
	&lt;&lt;video &#39;blair/date_skyscraper2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You lean in, attempting to take her nipples into your mouth, but she resists and lowers herself onto her knees. She pulls down your panties and with giggle grabs your dick in her hand.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Fuck her against the window&#39;&gt;&gt;
		&lt;&lt;video &#39;blair/date_skyscraper4&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You grab her hand and spin her around. Pressing her palms against the wall, before you even enter her, she moans because she knows something wonderful will follow. You shove your hard dick inside her wet pussy and as you thrust it inside her, she slowly gets closer to the window.
		&lt;br /&gt;&lt;br /&gt;
		&lt;div id=&quot;option3&quot;&gt;
			&lt;&lt;linkreplace &#39;Fuck her gently&#39;&gt;&gt;
				&lt;&lt;run $(&#39;#option4&#39;).hide()&gt;&gt;
				&lt;&lt;run $(&#39;#ending&#39;).show()&gt;&gt;
				&lt;&lt;video &#39;blair/date_skyscraper6&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				You switch places and you lean against the wall. She sensually climbs on top of you. Holding onto the metal pipe above you, she slowly settles onto you. She leans in and slowly starts to take control.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;blair&gt;&gt;
					Oh yes! Who&#39;s your mistress? 
				&lt;&lt;/blair&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;/div&gt;
		&lt;div id=&quot;option4&quot;&gt; 
			&lt;&lt;linkreplace &#39;Fuck her hard&#39;&gt;&gt;
				&lt;&lt;run $(&#39;#option3&#39;).hide()&gt;&gt;
				&lt;&lt;run $(&#39;#ending&#39;).show()&gt;&gt;
				&lt;&lt;video &#39;blair/date_skyscraper5&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				Excited, you push her down to the ground and step onto her face with your foot. She doesn&#39;t resist and is accustomed to you treating her like that, and she enjoys it.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;blair&gt;&gt;
					Oh fuck yes! 
				&lt;&lt;/blair&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;/div&gt;
		&lt;div id=&quot;ending&quot; style=&quot;display:none;&quot;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;people/blair/date_skyscraper_cum.webp&#39;]]
			&lt;/center&gt;	
			&lt;br /&gt;&lt;br /&gt;
			You decide not to pull out and cum right inside her pussy. As you take out your dick, your sperm drops out of her. 
		
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;blair&gt;&gt;
				Now we can go back :)
			&lt;&lt;/blair&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Leave&#39;&gt;&gt;
				&lt;&lt;horny_reset&gt;&gt;
				&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
				&lt;&lt;addhours 4&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;/div&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;link &#39;Tell that you should probably leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
		&lt;&lt;addhours 4&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="343" name="Blair - morning surprise" tags="" position="334,2289" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;script&gt;&gt;
	setTimeout(function() {
		setup.blinkScreen()
	}, 100);
&lt;&lt;/script&gt;&gt;
&lt;&lt;video &#39;blair/morning_surprise1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You barely open your eyes and in front of you, you see Blair, who has already woken up your dick and he is in her tight mouth. At that very moment, the sound of a door is heard, indicating that someone is coming to your room.
&lt;br /&gt;
Blair manages to hide under blanket as she&#39;s a bit shy when others are around.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;blair/morning_surprise2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _randomGuest = setup.getRandomPersonIdsGirls($guests, 1)&gt;&gt;
After few seconds &lt;&lt;=setup.displayName($guests[_randomGuest[0]])&gt;&gt; enters the room and tells you that she wanted to clean up a bit.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Let Blair continue&#39;&gt;&gt;
	&lt;&lt;video &#39;blair/morning_surprise3&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;=setup.displayName($guests[_randomGuest[0]])&gt;&gt; makes some small talk and takes some things off the ground while Blair somewhat awkwardly sucks your dick...
&lt;br /&gt;
After some talking, &lt;&lt;=setup.displayName($guests[_randomGuest[0]])&gt;&gt; leaves.
&lt;br /&gt;&lt;br /&gt;
  &lt;&lt;linkreplace &#39;Fuck Blair&#39;&gt;&gt;
		&lt;&lt;video &#39;blair/morning_surprise4&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		She gets in doggy and lets you as fuck as you like. When noone is in the roam she gets wild and lets out screams as loud as she can. Probably didn&#39;t realize that the walls are thin.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
			&lt;&lt;horny_reset&gt;&gt;
			&lt;&lt;video &#39;blair/morning_surprise5&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			As you pull out you put your dick on her ass and continue to jerk. She continues to moan as she watches at your pumping dick over her shoulder... After few seconds you cum all over her ass...
			&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;/linkreplace&gt;&gt;
  &lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="344" name="Event: The uninvited couple" tags="" position="457,1223" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
On the first floor, you hear some murmuring and knocking noises. There are also voices audible. One is a woman&#39;s, the other a man&#39;s. You are almost certain that they are not any of your fellow guests.
&lt;br /&gt;&lt;br /&gt;
You decide to check first floor.
&lt;br /&gt;
&lt;br /&gt;
As you reached the lower level, the faint sound of clinking caught your attention. Your heart raced as you crept towards the source of the noise, my worn-out boots barely making a sound on the debris-strewn floor. Through a cracked doorway, you glimpsed a flicker of movement.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;cabin/uninvited_couple1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Peering around the corner, your eyes widened at the sight: a couple, their tattered clothing and gaunt faces reflecting the harshness of their lives. They were rifling through the stash of canned food you had managed to scavenge over time. Your fists clenched instinctively, anger and desperation surging within you. &lt;br /&gt;
The sound was enough to alert the couple.
&lt;br /&gt;&lt;br /&gt;
&lt;strong&gt;
They tried to explain that they hadn&#39;t eaten for several days and they had no choice but to try to find some food here. They are so desperately hungry that they can&#39;t think properly or stand on their feet anymore.
&lt;/strong&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _foodOptions = [$storage.count(&#39;food&#39;), $backpack.count(&#39;food&#39;), 20]&gt;&gt;
&lt;&lt;set _foodGive = Math.min.apply(null, _foodOptions.filter(Boolean))&gt;&gt;

&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;linkreplace &#39;Offer the food if you can fuck the girl&#39;&gt;&gt;
		&lt;&lt;set $player.godwill--&gt;&gt;
		&lt;&lt;run $(&#39;#option1_desc, #option2, #option3&#39;).hide()&gt;&gt;
		&lt;&lt;if $backpack.count(&#39;food&#39;) &gt;= _foodGive&gt;&gt;
			&lt;&lt;drop $backpack &#39;food&#39; _foodGive&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;drop $storage &#39;food&#39; _foodGive&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
		&lt;&lt;anongirl&gt;&gt;
			Fuck you! Who do you think you are!
		&lt;&lt;/anongirl&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;anonguy&gt;&gt;
			Babe...
		&lt;&lt;/anonguy&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;video &#39;cabin/uninvited_couple2&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;anongirl&gt;&gt;
			Okey... I&#39;ll do it. But don&#39;t expect me to be happy about it...
		&lt;&lt;/anongirl&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Tell her to undress&#39;&gt;&gt;
			&lt;&lt;video &#39;cabin/uninvited_couple3&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			She starts undressing while her man has knelt down and is gathering all the food cans, not even attempting to look at her.
			&lt;br /&gt;&lt;br /&gt;
			&lt;div id=&quot;option3&quot;&gt;
				&lt;&lt;linkreplace &#39;Tell her to suck you&#39;&gt;&gt;
					&lt;&lt;set _sucked = true&gt;&gt;
					&lt;&lt;video &#39;cabin/uninvited_couple4&#39;&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					You sit down in the chair, and the girl kneels down. She looks at her man one last time, who with a broad smile on his face, can&#39;t stop watching the cans of food he&#39;s gathered. The girl&#39;s gaze becomes mocking, and she seems intent on making him feel uncomfortable, starting to enthusiastically suck on your dick while looking at you.
					&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;/div&gt;
			&lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
				&lt;&lt;if !_sucked&gt;&gt;
					&lt;&lt;run $(&#39;#option3&#39;).hide()&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;video &#39;cabin/uninvited_couple5&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				She reclines on her side on the carpet, facing her man who still hasn&#39;t even looked in your direction. You slowly slide your dick into her, and she unexpectedly tenses up and then relaxes. She&#39;s no longer concerned about what her man is doing; she&#39;s completely surrendered to you.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
					&lt;&lt;horny_reset&gt;&gt;
					&lt;&lt;video &#39;cabin/uninvited_couple6&#39;&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					You cum right inside her and she enjoys every drip of you as she continues to moan while your sperm is leaking out of her wet pussy.
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;anonguy&gt;&gt;
						Hey! What the hell! Babe! How could you allow that? We should leave.
					&lt;&lt;/anonguy&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;link &#39;Escort them outside&#39;&gt;&gt;
						&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;linkdesc &#39;option1_desc&#39;&gt;&gt;
		-&lt;&lt;=_foodGive&gt;&gt; food
	&lt;&lt;/linkdesc&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;option2&quot;&gt;
	&lt;&lt;linkreplace &#39;Give them food and tell them to get lost&#39;&gt;&gt;
		&lt;&lt;set $player.godwill++&gt;&gt;
		&lt;&lt;run $(&#39;#option2_desc, #option1, #option3&#39;).hide()&gt;&gt;
		&lt;&lt;if $backpack.count(&#39;food&#39;) &gt;= _foodGive&gt;&gt;
			&lt;&lt;drop $backpack &#39;food&#39; _foodGive&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;drop $storage &#39;food&#39; _foodGive&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/cabin/uninvited_couple.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;anongirl&gt;&gt;
				Really? Thank you so much!!
			&lt;&lt;/anongirl&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			Both the man and the woman wear a grateful smile on their faces. They quickly pack the food into their bags as if fearing you might change your mind.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Escort them outside&#39;&gt;&gt;
				&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;linkdesc &#39;option2_desc&#39;&gt;&gt;
		-&lt;&lt;=_foodGive&gt;&gt; food
	&lt;&lt;/linkdesc&gt;&gt;
&lt;/div&gt;

&lt;div id=&quot;option3&quot;&gt;
	&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
		&lt;&lt;set $enemies = []&gt;&gt;
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;set $tmpGirl.strength += 10&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGirl)&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;set $tmpGuy.strength += 10&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;fight $enemies &#39;Wood cabin&#39; &#39;Wood cabin&#39; true&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
</tw-passagedata><tw-passagedata pid="345" name="Travel event: tree ambush" tags="" position="7790,33" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
As the sun cast its feeble rays across the barren land, you trudged onward, your senses sharp and alert for any sign of danger. You had learned to be cautious, for in this new world, survival was a constant battle.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/travel/tree_ambush.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
With each step you took, the unease grew stronger. Suddenly, a rustle in the tree to your right jolted you to a halt. You heart raced as I instinctively dropped into a defensive crouch, your eyes scanning the surroundings. That&#39;s when You saw them – three men, clad in makeshift armor, emerging from behind the colossal tree.
&lt;br /&gt;&lt;br /&gt;
Their faces were etched with determination, and their eyes bore a hardness that spoke of survival at any cost. They carried crude weapons, each one a stark reminder of the brutality that defined this new world.
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
		&lt;&lt;set $enemies = []&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;fight $enemies &#39;Settlement&#39; &#39;Settlement&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;&lt;linkreplace &#39;Run away&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
	&lt;&lt;if $player.strength &gt; 50 &amp;&amp; setup.percentageChance(50)&gt;&gt;
		&lt;&lt;goto &#39;Settlement&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;br /&gt;
		&lt;strong&gt;You failed!&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
			&lt;&lt;set $enemies = []&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;fight $enemies &#39;Settlement&#39; &#39;Settlement&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="346" name="Travel event: city ambush" tags="" position="7897,33" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
As the sun dipped below the decaying skyscrapers, casting an eerie orange glow across the desolate landscape, you cautiously made your way through the ruins of what was once a bustling city. The air was thick with the scent of rust and dampness, a stark reminder of the world that had crumbled into chaos. Broken glass and twisted metal crunched underfoot as you navigated the debris-filled streets, your steps echoing in the silence.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/travel/city_ambush.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Suddenly, three figures emerged from the darkness of the alley, their silhouettes sharp against the fading light. Adorned in makeshift armor and wielding a mix of scavenged weapons, they exuded an air of predatory confidence. You swallowed hard, your heart pounding in your chest as you assessed the situation.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;anonguy&gt;&gt;
Looks like we&#39;ve got ourselves a wanderer.
&lt;&lt;/anonguy&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;anonguy&gt;&gt;
	What&#39;s in your backpack? How about you give it to us.
&lt;&lt;/anonguy&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
		&lt;&lt;set $enemies = []&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;newguy&gt;&gt;
		&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
		&lt;&lt;fight $enemies &#39;Underground city&#39; &#39;Underground city&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;&lt;linkreplace &#39;Run away&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
	&lt;&lt;if $player.strength &gt; 50 &amp;&amp; setup.percentageChance(50)&gt;&gt;
		&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;br /&gt;
		&lt;strong&gt;You failed!&lt;/strong&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Fight them&#39;&gt;&gt;
			&lt;&lt;set $enemies = []&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;newguy&gt;&gt;
			&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
			&lt;&lt;fight $enemies &#39;Underground city&#39; &#39;Underground city&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="347" name="Explore event: Tits bar" tags="" position="6636,421" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
[img[setup.ImagePath+&#39;places/explore/event_tits_bar.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Venturing through the desolation of the post-apocalyptic world, you found yourself lost amidst the twisted remains of what used to be a thriving town. The air was thick with an eerie silence, broken only by the faint sound of the wind rustling through the skeletal structures. As the sun dipped below the horizon, casting long shadows over the wasteland, you stumbled upon an incongruous sight: a dimly lit bar standing isolated in the midst of nowhere.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;explore/event_tits_bar1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Curiosity piqued, you cautiously approached the establishment. Its façade was weathered, the sign above the entrance barely readable, spelling out &quot;The tits bar&quot; in fading letters. Door was locked but you noticed a door bell. You pressed it...
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;explore/event_tits_bar2&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
After a moment, the door opened. From it emerged an older-year woman, with bare breasts. Without saying anything, she unlocked the door and let you in.
&lt;br /&gt;
The interior took you by surprise. A bar. A damn bar in the middle of nowhere. You carefully looked around to see if you were drawing any unnecessary attention, but it seemed that no one even noticed that you had entered.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Sit down&#39;&gt;&gt;
	&lt;&lt;video &#39;explore/event_tits_bar3&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You sat down in the only available seat, directly facing the stage. After a moment, the song ended and the next one began. A woman emerged from the adjacent room. For a moment, you thought your eyes were playing tricks on you, but no - she had three breasts. She noticed you and after a while, she approached and without saying anything, began dancing in front of you.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;anongirl&gt;&gt;
		For 50 caps I might let you have fun with them in other room.
	&lt;&lt;/anongirl&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $player.money &gt;= 50 || true&gt;&gt;
		&lt;&lt;linkreplace &#39;Pay her&#39;&gt;&gt;
			&lt;&lt;set $player.money -= 50&gt;&gt;
			  &lt;&lt;video &#39;explore/event_tits_bar4&#39;&gt;&gt;
			  &lt;br /&gt;&lt;br /&gt;
			  She grabbed you by the hand and led you into the adjacent room. She didn&#39;t allow you to touch her, but she herself got down on her knees and took your belongings into her mouth.
			  &lt;br /&gt;&lt;br /&gt;
			  &lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
			  		&lt;&lt;video &#39;explore/event_tits_bar5&#39;&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					She didn&#39;t even consider taking off her own clothes. It seems you&#39;re just another one of her clients. It appears she&#39;s enjoying herself as well. Especially when you unexpectedly thrust your dick deeper into her pussy.
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;linkreplace &#39;Cum on her breasts&#39;&gt;&gt;
						  &lt;&lt;horny_reset&gt;&gt;
						&lt;&lt;video &#39;explore/event_tits_bar6&#39;&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						She knelt on the floor in front of you and with an intriguing gaze, observed as you glanced at her three breasts. It didn&#39;t seem like anything new to her.
						&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;/linkreplace&gt;&gt;
			  &lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="348" name="Basement - Offer slave girl to slave guy: choose" tags="" position="2307,223" size="100,100">&lt;&lt;set _availableGirlSlaves = setup.getAvailablePersons18yo($slaves)&gt;&gt;
&lt;&lt;run console.log(_availableGirlSlaves)&gt;&gt;
&lt;&lt;if (_availableGirlSlaves[0] ?? []).length&gt;&gt;
	&lt;&lt;for _offerSlaveSlaveI, _offerSlaveSlave range _availableGirlSlaves[0]&gt;&gt;
		&lt;&lt;capture _offerSlaveSlaveI, _offerSlaveSlave&gt;&gt;
			&lt;&lt;set _genderClass = &#39;gender-&#39; + (!$slaves[_offerSlaveSlave].gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
			&lt;div&gt;
				&lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
					&lt;&lt;link $slaves[_offerSlaveSlave].name&gt;&gt;
						&lt;&lt;set $slaveOfferId = _offerSlaveSlave&gt;&gt;
						&lt;&lt;set $tmpGirl.offerSlave = true&gt;&gt;
						&lt;&lt;dialogclose&gt;&gt;
						&lt;&lt;goto &#39;Basement - Offer slave girl to slave guy: fuck&#39;&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				&lt;/span&gt;
			&lt;/div&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Back&#39;&gt;&gt;
	&lt;&lt;dialogclose&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="349" name="Basement - Offer slave girl to slave guy: fuck" tags="" position="2313,336" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BASEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;if setup.getAge($tmpGirl) &gt; 55&gt;&gt;
	What the hell have you imagined? I&#39;m not interested in your whores.
&lt;&lt;else&gt;&gt;
	He nods affirmatively and &lt;&lt;=setup.displayName($slaves[$slaveOfferId])&gt;&gt; approaches closer to his cell door. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;basement/slave_offer_slave1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	He immediately unbuttons his pants and with a smile on his face looks at &lt;&lt;=setup.displayName($slaves[$slaveOfferId])&gt;&gt;. Unhappy, &lt;&lt;=setup.displayName($slaves[$slaveOfferId])&gt;&gt;, however, kneels down, taking &lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; dick in her mouth. In an instant, he starts to shove his dick as deep as he can but you&#39;ve trained &lt;&lt;=setup.displayName($slaves[$slaveOfferId])&gt;&gt; as she isn&#39;t bothered by that at all.
	&lt;br /&gt;
	After few good thrusts he asks her to turn around. She obeys. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;basement/slave_offer_slave2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	He grabs her by the hips and pulls her as close as possible to his cell bars. She hesitates, but after a moment, it seems that she slowly starts to enjoy this whole process. It doesn&#39;t last long, and after a few more thrusts, he&#39;s done.	
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;
		Relationship with &lt;&lt;=$tmpGirl.name&gt;&gt; increased by 5
		&lt;&lt;set $tmpGirl.relationship += 5&gt;&gt;
	&lt;/strong&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;set $tmpGirl.horny = 0&gt;&gt;
	&lt;&lt;set $guests[$slaveOfferId].horny = 0&gt;&gt;
	&lt;&lt;run delete $slaveOfferId&gt;&gt;
	&lt;&lt;goto &#39;Guy view&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="350" name="Girl customize" tags="girlview sex no-redirect" position="3566,105" size="100,100">
&lt;&lt;link &#39;Change name&#39;&gt;&gt;
	&lt;&lt;dialog &#39;Change name&#39;&gt;&gt;	
		What you will call your guest? &lt;&lt;textbox &quot;_tmpGirlName&quot; $tmpGirl.name&gt;&gt;
		&lt;&lt;link &#39;OK&#39;&gt;&gt;
			&lt;&lt;set $tmpGirl.name = _tmpGirlName&gt;&gt;
			&lt;&lt;dialogclose&gt;&gt;	
			&lt;&lt;goto &#39;Girl customize&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/dialog&gt;&gt;	
&lt;&lt;/link&gt;&gt;
&lt;&lt;if !$tmpGirl.piercedBoobs &amp;&amp; $backpack.has(&#39;piercing&#39;)&gt;&gt;
	&lt;&lt;link &#39;Pierce her nipples&#39;&gt;&gt;
		&lt;&lt;goto &#39;Girl customize - pierce boob&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $tmpGirl.piercedBoobs&gt;&gt;
	&lt;&lt;link &#39;Remove piercings from her nipples&#39;&gt;&gt;
		&lt;&lt;goto &#39;Girl customize - pierce boob remove&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Back&#39;&gt;&gt;
	&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="351" name="Girl customize - pierce boob" tags="girlview no-redirect" position="3567,221" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIPPLES PIERCING&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $guestId !== null &amp;&amp; $tmpGirl.sub &lt; 20&gt;&gt;
	&lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; doesn&#39;t want to do that.
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;Submission too low&lt;/strong&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set $tmpGirl.piercedBoobs = true&gt;&gt;
	&lt;&lt;drop $backpack &#39;piercing&#39; 1&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;game/misc/nipple_piercing.webp&#39;]]
	&lt;/center&gt;
	&lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; feels a brief, sharp sensation as the needle passes through the nipple tissue. That feels uncomfortable but is generally tolerable.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;addmins 60&gt;&gt;
	After few minutes it&#39;s done and she shows her nipples pierced.
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Back&#39;&gt;&gt;
	&lt;&lt;goto &#39;Girl customize&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="352" name="Girl customize - pierce boob remove" tags="girlview no-redirect" position="3576,333" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;NIPPLES PIERCING&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
You take out piercing out of the &lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; boobs.
She feels strange without it but her nipples will heal in no time.
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;addmins 60&gt;&gt;
&lt;&lt;pickup $backpack &#39;piercing&#39; 1&gt;&gt;
&lt;&lt;set $tmpGirl.piercedBoobs = false&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Back&#39;&gt;&gt;
	&lt;&lt;goto &#39;Girl customize&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="353" name="Guy punish" tags="" position="5016,355" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BASEMENT&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _isMasochist = ($tmpGirl.traits ?? []).includes(&#39;masochist&#39;)&gt;&gt;

&lt;&lt;set _relStats = 1&gt;&gt;
&lt;&lt;set _subStats = 1&gt;&gt;
&lt;&lt;set _punishView = &#39;punish&#39;&gt;&gt;
&lt;&lt;if $punishType === &#39;paddle&#39;&gt;&gt;
	&lt;&lt;set 
		_relStats = 2,
		_subStats = 2,
		_punishView = _punishView + &#39;_paddle&#39;
	&gt;&gt;
&lt;&lt;elseif $punishType === &#39;beat&#39;&gt;&gt;
	&lt;&lt;set _punishView = _punishView + &#39;_hit&#39;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set _relChanged = true, _subChanged = true&gt;&gt;
&lt;&lt;if _isMasochist &amp;&amp; $punishType !== &#39;beat&#39;&gt;&gt;
	&lt;&lt;set 
		_relStats = 0, 
		_relChanged = false
	&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $punishType&gt;&gt;
	&lt;&lt;actionImage $tmpGirl _punishView&gt;&gt;

	&lt;&lt;set $tmpGirl.relationship -= _relStats&gt;&gt;
	&lt;&lt;if $tmpGirl.relationship &lt; -100&gt;&gt;
		&lt;&lt;set $tmpGirl.relationship = -100&gt;&gt;
		&lt;&lt;set _relChanged = false&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;set $tmpGirl.sub += _subStats&gt;&gt;
	&lt;&lt;if $tmpGirl.sub &gt; 100&gt;&gt;
		&lt;&lt;set $tmpGirl.sub = 100&gt;&gt;
		&lt;&lt;set _subChanged = false&gt;&gt;
	&lt;&lt;/if&gt;&gt;

	&lt;&lt;addmins 60&gt;&gt;
	&lt;&lt;energy -10&gt;&gt;

	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $punishType == &#39;beat&#39;&gt;&gt;
		&lt;strong&gt;
			You&#39;ve properly swung a few times and punched &lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; right in the face. He can&#39;t do anything because he&#39;s tied to a chair, but after a few punches, it seems like he&#39;s slowly starting to give in.
		&lt;/strong&gt;
	&lt;&lt;elseif _isMasochist&gt;&gt;
		&lt;strong&gt;&lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; moans in enjoyment while looking over his shoulder straight in your eyes. 
		&lt;&lt;set $tmpGirl.horny = Math.min($tmpGirl.horny + 10, 100)&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;strong&gt;&lt;&lt;print $tmpGirl.name&gt;&gt;&lt;/strong&gt; yells in pain as you  punish him. 
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if _relChanged&gt;&gt;
		&lt;strong&gt;&lt;&lt;print $tmpGirl.name&gt;&gt;&lt;/strong&gt; relationship decreased by &lt;&lt;=_relStats&gt;&gt;&lt;br /&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;&lt;if _subChanged&gt;&gt;
		&lt;strong&gt;&lt;&lt;print $tmpGirl.name&gt;&gt;&lt;/strong&gt; submission increased by &lt;&lt;=_subStats&gt;&gt;&lt;br /&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;center&gt;
	  [img[setup.ImagePath+&#39;places/basement/guy_punish.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You enter his basement cell, and he is already waiting for you. Fear is visible in his eyes, while his hands are tied behind his back.
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $player.energy &gt;= 10 &amp;&amp; hasTime(1)&gt;&gt;
	&lt;&lt;link &#39;Hit him&#39;&gt;&gt;
		&lt;&lt;set $punishType = &#39;beat&#39;&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Punish (slap)&#39;&gt;&gt;
  		&lt;&lt;set $punishType = &#39;slap&#39;&gt;&gt;
	  	&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;if $backpack.has(&#39;paddle&#39;)&gt;&gt;
	  &lt;&lt;link &#39;Punish (paddle)&#39;&gt;&gt;
	  	&lt;&lt;set $punishType = &#39;paddle&#39;&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
	  &lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;link &#39;Back&#39;&gt;&gt;
	&lt;&lt;run delete $punishType&gt;&gt;
	&lt;&lt;goto &#39;Guy view&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="354" name="Girl fuck - lick pussy" tags="sex" position="3014,343" size="100,100">&lt;&lt;actionImage $tmpGirl pussy_lick&gt;&gt;

&lt;&lt;set $tmpGirl.horny += 20&gt;&gt;
&lt;&lt;if $tmpGirl.horny &gt;= 100&gt;&gt;
	&lt;&lt;if ($tmpGirl.traits ?? []).includes(&#39;squirter&#39;)&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;actionImage $tmpGirl squirt_lick&gt;&gt;
	&lt;&lt;/if&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;&lt;&lt;=$tmpGirl.name&gt;&gt; has an orgasm!&lt;/strong&gt;
	&lt;&lt;set 
		$tmpGirl.horny = 0,
		$tmpGirl.orgasms++
	&gt;&gt;
	&lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship+1, 100)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;addmins 10&gt;&gt;
&lt;&lt;energy -5&gt;&gt;
&lt;&lt;set $tmpGirl.relationship = Math.min($tmpGirl.relationship+1, 100)&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
[[Lick her|Girl fuck - lick pussy]]
[[Blowjob|Girl fuck - blowjob]]
[[Pussy|Girl fuck - pussy]]
[[Anal|Girl fuck - anal]]
[[Back|Girl fuck]]
</tw-passagedata><tw-passagedata pid="355" name="Bathhouse" tags="Place" position="1507,773" size="100,100">&lt;&lt;set _bathSchedule = {
	garden: {
		from: &#39;16:00&#39;,
		to: &#39;20:00&#39;,
		p: 30
	},
	forest: {
		from: &#39;16:00&#39;,
		to: &#39;08:00&#39;,
		p: 30
	},
	kitchen: {
		from: &#39;12:00&#39;,
		to: &#39;20:00&#39;,
		p: 10
	},
	scavenger: {
		from: &#39;20:00&#39;,
		to: &#39;23:00&#39;,
		p: 50
	},
	mistress: {
		from: &#39;23:00&#39;,
		to: &#39;24:00&#39;,
		p: 100
	},
	streets: {
		from: &#39;08:00&#39;,
		to: &#39;12:00&#39;,
		p: 50
	}
}&gt;&gt;

&lt;h1 class=&quot;ptitle&quot;&gt;BATHHOUSE&lt;/h1&gt;
&lt;div id=&quot;place-head&quot;&gt;
[img[setup.ImagePath+&#39;places/cabin/bathhouse_head.jpg&#39;]]
&lt;/div&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;table id=&quot;slaves&quot;&gt;
	&lt;&lt;for _bathGuestI, _bathGuest range $guests&gt;&gt;
		&lt;&lt;capture _bathGuestI, _bathGuest&gt;&gt;
		&lt;&lt;if _bathGuest.location !== &#39;bathhouse&#39;&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set _genderClass = &#39;gender-&#39; + (!_bathGuest.gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
           		 &lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
                      &lt;&lt;link _bathGuest.name&gt;&gt;
                        &lt;&lt;set $tmpGirl to $guests[_bathGuestI]&gt;&gt;
                        &lt;&lt;set $tmpGirl.location = &#39;bathhouse&#39;&gt;&gt;
                        &lt;&lt;set $tmpGirlBack = &#39;Bathhouse&#39;&gt;&gt;
                        &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
                        &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
                        &lt;&lt;run delete $slaveId&gt;&gt;
						&lt;&lt;run delete $charId&gt;&gt;
                        &lt;&lt;set $guestId = _bathGuestI&gt;&gt;
                        &lt;&lt;set $tmpGirlViewBack = (!_bathGuest.gender ? &#39;Girl&#39; : &#39;Guy&#39;) + &#39; view&#39;&gt;&gt;
                        &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
                      &lt;&lt;/link&gt;&gt;
                  &lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;if !_bathGuest.gender&gt;&gt;
					Beauty score: &lt;&lt;=_bathGuest.beauty&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge(_bathGuest)&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;if _bathGuest.assignedTo&gt;&gt;
					(&lt;&lt;=_bathGuest.assignedTo&gt;&gt;)
				&lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
	
	&lt;&lt;for _bathSlaveI, _bathSlave range $slaves&gt;&gt;
		&lt;&lt;capture _bathSlaveI, _bathSlave&gt;&gt;
		&lt;&lt;if _bathSlave.location !== &#39;bathhouse&#39;&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;set _genderClass = &#39;gender-&#39; + (!_bathSlave.gender ? &#39;girl&#39; : &#39;guy&#39;)&gt;&gt;
		&lt;tr&gt;
			&lt;td style=&quot;width: 300px&quot;&gt;
           		 &lt;span @class=&quot;&#39;&#39;+_genderClass+&#39;&#39;&quot;&gt;
                      &lt;&lt;link _bathSlave.name&gt;&gt;
                        &lt;&lt;set $tmpGirl to $slaves[_bathSlaveI]&gt;&gt;
                        &lt;&lt;set $tmpGirl.location = &#39;bathhouse&#39;&gt;&gt;
                        &lt;&lt;set $tmpGirlBack = &#39;Bathhouse&#39;&gt;&gt;
                        &lt;&lt;set $tmpGirlCapture to false&gt;&gt;
                        &lt;&lt;set $tmpGirl.rape to false&gt;&gt;
                        &lt;&lt;run delete $guestId&gt;&gt;
						&lt;&lt;run delete $charId&gt;&gt;
                        &lt;&lt;set $slaveId = _bathSlaveI&gt;&gt;
                        &lt;&lt;set $tmpGirlViewBack = (!_bathSlave.gender ? &#39;Girl&#39; : &#39;Guy&#39;) + &#39; view&#39;&gt;&gt;
                        &lt;&lt;goto &#96;$tmpGirlViewBack&#96;&gt;&gt;
                      &lt;&lt;/link&gt;&gt;
                  &lt;/span&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;if !_bathSlave.gender&gt;&gt;
					Beauty score: &lt;&lt;=_bathSlave.beauty&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				Age: &lt;&lt;=setup.getAge(_bathSlave)&gt;&gt;
			&lt;/td&gt;
			&lt;td&gt;
				&lt;&lt;if _bathSlave.assignedTo&gt;&gt;
					(&lt;&lt;=_bathSlave.assignedTo&gt;&gt;)
				&lt;&lt;/if&gt;&gt;
			&lt;/td&gt;
		&lt;/tr&gt;
		&lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt; 
&lt;/table&gt;

&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if hasTime(1)&gt;&gt;
	&lt;&lt;link &#39;Wait 30 minutes&#39;&gt;&gt;
		&lt;&lt;addmins 30&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="356" name="Event: Bathhouse talk" tags="" position="574,1224" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
Stepping outside, you hear voices. You decide to go and see what&#39;s happening. A couple of girls are looking at the garden and discussing something among themselves.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/bathhouse_talk.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _randomGuests = setup.getAvailablePersons18yo($guests)&gt;&gt;

As they sat around the fire, &lt;&lt;=setup.displayName($guests[_randomGuests[0][0]])&gt;&gt; cleared her throat and caught the attention of the others.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;say $guests[_randomGuests[0][0]].name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
	Ladies, I&#39;ve been thinking. We&#39;ve been through so much, and it&#39;s high time we consider our own well-being
&lt;&lt;/say&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;=setup.displayName($guests[_randomGuests[0][1]])&gt;&gt;, a woman with a twinkle of mischief in her eyes, raised an eyebrow.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;say $guests[_randomGuests[0][1]].name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
	What do you have in mind, &lt;&lt;=$guests[_randomGuests[0][0]].name&gt;&gt;? More scavenging runs for supplies?
&lt;&lt;/say&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;say $guests[_randomGuests[0][0]].name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
	No, &lt;&lt;=$guests[_randomGuests[0][1]].name&gt;&gt;, not quite. I&#39;ve been hearing murmurs of exhaustion among us. Washing ourselves under rainwater and whatever springs we find has become tiresome. We deserve a chance to relax and take care of ourselves.
	&lt;br /&gt;
	How about we ask &lt;&lt;=$player.name&gt;&gt; to build us something like bathhouse? maybe also with sauna?
&lt;&lt;/say&gt;&gt;
&lt;br /&gt;
&lt;&lt;=setup.displayName($guests[_randomGuests[0][3]])&gt;&gt; leaned forward, her eyes alight with a newfound idea. The women exchanged glances, intrigued by the concept.
&lt;br /&gt;
&lt;&lt;=setup.displayName($guests[_randomGuests[0][2]])&gt;&gt;&#39;s lips curled into a determined smile.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;say $guests[_randomGuests[0][3]].name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
	A sauna? Now that&#39;s an idea. We&#39;ll create a place where we can wash away the dirt and relax our tired bodies. A sanctuary amidst the chaos.
&lt;&lt;/say&gt;&gt;
&lt;br /&gt;
With a renewed sense of purpose, the women began to sketch out their ideas, discussing how they could repurpose salvaged materials, create a heating system, and design a space that would bring a semblance of normalcy to their lives.
&lt;br /&gt;&lt;br /&gt;
They continued their conversation for a while as you stood behind and listened to everything. After a moment, one of them turned around and noticed you were behind. The other girls also turned and asked if you liked the idea and if you were ready to do it.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &quot;Anything for you, girls&quot;&gt;&gt;
	&lt;&lt;notify 6s&gt;&gt;Bathhouse available in workbench!&lt;&lt;/notify&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;I&#39;ll think about it&quot;&gt;&gt;
	&lt;&lt;notify 6s&gt;&gt;Bathhouse available in workbench!&lt;&lt;/notify&gt;&gt;
	&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="357" name="Event: guard caught intruder" tags="" position="688,1226" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;newgirl&gt;&gt;
&lt;&lt;set _randomGuests = setup.getAvailablePersons18yo($guests)&gt;&gt;
As you come out of your room in the morning, one of your daughters comes running towards you, loudly saying that one of your guards managed to catch a woman in the morning light who was trying to enter the resource room. He was able to apprehend her, and she is currently tied up behind the house. You decide to go and see what is really happening there.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;cabin/intruder_caught1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Just as you have circled around the house and come into her line of sight, she starts screaming hysterically. Fear is visible in her eyes, but you can&#39;t understand what she&#39;s saying because there&#39;s something dirty shoved into her mouth. Her screams are so loud that you&#39;re starting to get annoyed. 
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option-slap&quot;&gt;
	&lt;&lt;linkreplace &#39;Slap her&#39;&gt;&gt;
		&lt;&lt;video &#39;cabin/intruder_caught2&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		You havedown and slapped her across the face. Instantly, she falls silent and just quietly watches you, waiting to see what you will do next.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;if recall($suppCode)&gt;&gt;
			&lt;&lt;linkreplace &#39;Fuck her&#39;&gt;&gt;
				&lt;&lt;set _intruderFucked = true&gt;&gt;
				&lt;&lt;run $(&#39;#option-slave, #option-release&#39;).hide()&gt;&gt;
				&lt;&lt;video &#39;cabin/intruder_caught4&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				You lean in to look into her eyes and remove the dirty cloth from her mouth. Meanwhile, &lt;&lt;=setup.displayName($guests[_randomGuests[0][0]])&gt;&gt; notices you and decides to approach. Upon arrival, she starts laughing and flirtatiously says to you that she also wants to join in or at least watch and that you should start with her delicious mouth.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;linkreplace &#39;Fuck her mouth&#39;&gt;&gt;
					&lt;&lt;video &#39;cabin/intruder_caught3&#39;&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					While you untie your pants, &lt;&lt;=setup.displayName($guests[_randomGuests[0][0]])&gt;&gt; rips open girl&#39;s blouse and giggles as she stand behind her, holding her hair so she can&#39;t move her head.
					&lt;br /&gt;
					You shove your dick inside the helpless girl and make her gag on your cock. 
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;say $guests[_randomGuests[0][0]].name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
						I got an idea. Tie me too. I want to feel like her. Helpless. I want to watch as close as I can.
					&lt;&lt;/say&gt;&gt;
					&lt;br /&gt;
					&lt;&lt;linkreplace &#39;Tie them both and bring them inside&#39;&gt;&gt;
						At &lt;&lt;=setup.displayName($guests[_randomGuests[0][0]])&gt;&gt;&#39;s request, you tie her up as well, and you lead them into your room. &lt;&lt;=setup.displayName($guests[_randomGuests[0][0]])&gt;&gt; lies down next to the girl with a wide smile, as she watchines other girl being thrown into the bed in the doggy position.
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;video &#39;cabin/intruder_caught5&#39;&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						You gently slide your dick inside intruders pussy but instead of taking it slow, you just start to pound her already wet pussy as fast and deep as you can. &lt;&lt;=setup.displayName($guests[_randomGuests[0][0]])&gt;&gt; just watches and moans together with the girl as she fantasies being in her place.
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;video &#39;cabin/intruder_caught6&#39;&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
							&lt;&lt;horny_reset&gt;&gt;
							&lt;&lt;run $(&#39;#option-slave, #option-release&#39;).show()&gt;&gt;
							&lt;center&gt;
								[img[setup.ImagePath+&#39;places/cabin/intruder_cum.webp&#39;]]
							&lt;/center&gt;
							&lt;br /&gt;&lt;br /&gt;
							Her legs start trembling, and after a moment, you pull out and cum your warm cum all over her back as her hands are tied behind her back and she tries to push you away from her.
							&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;/linkreplace&gt;&gt;
					&lt;&lt;/linkreplace&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;else&gt;&gt;
			&lt;div class=&quot;link-internal disabled&quot; style=&quot;background: #ccc&quot;&gt;
				Fuck her
				&lt;&lt;notPatreonIcon&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;

&lt;&lt;if ($game.location.basement ?? false) &amp;&amp; $slaves.length &lt; $basementLimit&gt;&gt;
	&lt;div id=&quot;option-slave&quot;&gt;
		&lt;&lt;link &#39;Enslave her&#39;&gt;&gt;
			&lt;&lt;set $tmpGirl.capture = false&gt;&gt;
			&lt;&lt;set $slaves.push($tmpGirl)&gt;&gt;
			&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
			&lt;&lt;statsAdd &#39;people_captured&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/if&gt;&gt;
&lt;div id=&quot;option-release&quot;&gt;
	&lt;&lt;linkreplace &#39;Release her&#39;&gt;&gt;
		&lt;&lt;if !_intruderFucked&gt;&gt;
			&lt;&lt;run $(&#39;#option-slap&#39;).hide()&gt;&gt;
			&lt;&lt;set $player.reputation++&gt;&gt;
			&lt;&lt;set $player.godwill--&gt;&gt;
		&lt;&lt;/if&gt;&gt;
		&lt;&lt;run $(&#39;#option-slave&#39;).hide()&gt;&gt;
		
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/cabin/intruder_release.gif&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		You untie the girl and with tears in her eyes, she quietly mouths a thank you. She hesitates, saying that you will never see her again and she&#39;s very sorry. 
		&lt;br /&gt;&lt;br /&gt;
							
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Wood cabin&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;

</tw-passagedata><tw-passagedata pid="358" name="NPC schedule" tags="" position="8,154" size="100,100">&lt;&lt;set _bathSchedule = {
	garden: {
		from: &#39;16:00&#39;,
		to: &#39;20:00&#39;,
		p: 10
	},
	forest: {
		from: &#39;16:00&#39;,
		to: &#39;08:00&#39;,
		p: 20
	},
	kitchen: {
		from: &#39;12:00&#39;,
		to: &#39;20:00&#39;,
		p: 10
	},
	scavenger: {
		from: &#39;20:00&#39;,
		to: &#39;23:00&#39;,
		p: 30
	},
	mistress: {
		from: &#39;23:00&#39;,
		to: &#39;24:00&#39;,
		p: 70
	},
	streets: {
		from: &#39;10:00&#39;,
		to: &#39;12:00&#39;,
		p: 20
	}
}
&gt;&gt;

&lt;&lt;for _scheduleGuestI, _scheduleGuest range $guests&gt;&gt;
	&lt;&lt;capture _scheduleGuestI, _scheduleGuest&gt;&gt;
		&lt;&lt;set $guests[_scheduleGuestI].location = &#39;&#39;&gt;&gt;
		&lt;&lt;if _scheduleGuest.gender || setup.getAge(_scheduleGuest) &lt; 18&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt; 

		&lt;&lt;if (!_scheduleGuest.washedBathhouse &amp;&amp;
			(((!_scheduleGuest.assignedTo || typeof _bathSchedule[_scheduleGuest.assignedTo] === &#39;undefined&#39;) &amp;&amp; setup.percentageChance(5)) || 
			(typeof _bathSchedule[_scheduleGuest.assignedTo] !== &#39;undefined&#39; &amp;&amp; (timeBetween(_bathSchedule[_scheduleGuest.assignedTo].from, _bathSchedule[_scheduleGuest.assignedTo].to) &amp;&amp; setup.percentageChance(_bathSchedule[_scheduleGuest.assignedTo].p))))
			)&gt;&gt;
				&lt;&lt;set $guests[_scheduleGuestI].washedBathhouse = true&gt;&gt;
				&lt;&lt;set _beautyInc = randomInteger(1, 2)&gt;&gt;
				&lt;&lt;if !($guests[_scheduleGuestI].washDays ?? false)&gt;&gt;
					&lt;&lt;set $guests[_scheduleGuestI].washBeauty = _beautyInc&gt;&gt;
					&lt;&lt;set $guests[_scheduleGuestI].beauty = Math.min($guests[_scheduleGuestI].beauty + (_beautyInc * 2), 100)&gt;&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;set $guests[_scheduleGuestI].beauty -= $guests[_scheduleGuestI].washBeauty * $guests[_scheduleGuestI].washDays&gt;&gt;
					&lt;&lt;set $guests[_scheduleGuestI].beauty = Math.min($guests[_scheduleGuestI].beauty + ($guests[_scheduleGuestI].washBeauty * 2), 100)&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;set $guests[_scheduleGuestI].washDays = 2&gt;&gt;
				&lt;&lt;set $guests[_scheduleGuestI].location = &#39;bathhouse&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;for _scheduleSlaveI, _scheduleSlave range $slaves&gt;&gt;
	&lt;&lt;capture _scheduleSlaveI, _scheduleSlave&gt;&gt;
		&lt;&lt;set $slaves[_scheduleSlaveI].location = &#39;&#39;&gt;&gt;
		&lt;&lt;if _scheduleSlave.gender || setup.getAge(_scheduleSlave) &lt; 18&gt;&gt;
			&lt;&lt;continue&gt;&gt;
		&lt;&lt;/if&gt;&gt;

		&lt;&lt;if (!_scheduleSlave.washedBathhouse &amp;&amp;
			(((!_scheduleSlave.assignedTo || typeof _bathSchedule[_scheduleSlave.assignedTo] === &#39;undefined&#39;) &amp;&amp; setup.percentageChance(5)) || 
			(typeof _bathSchedule[_scheduleSlave.assignedTo] !== &#39;undefined&#39; &amp;&amp; (timeBetween(_bathSchedule[_scheduleSlave.assignedTo].from, _bathSchedule[_scheduleSlave.assignedTo].to) &amp;&amp; setup.percentageChance(_bathSchedule[_scheduleSlave.assignedTo].p))))
			)&gt;&gt;
				&lt;&lt;set $slaves[_scheduleSlaveI].washedBathhouse = true&gt;&gt;
				&lt;&lt;set _beautyInc = randomInteger(1, 2)&gt;&gt;
				&lt;&lt;if !($slaves[_scheduleSlaveI].washDays ?? false)&gt;&gt;
					&lt;&lt;set $slaves[_scheduleSlaveI].washBeauty = _beautyInc&gt;&gt;
					&lt;&lt;set $slaves[_scheduleSlaveI].beauty = Math.min($slaves[_scheduleSlaveI].beauty + (_beautyInc * 2), 100)&gt;&gt;
				&lt;&lt;else&gt;&gt;
					&lt;&lt;set $slaves[_scheduleSlaveI].beauty -= $slaves[_scheduleSlaveI].washBeauty * $slaves[_scheduleSlaveI].washDays&gt;&gt;
					&lt;&lt;set $slaves[_scheduleSlaveI].beauty = Math.min($slaves[_scheduleSlaveI].beauty + ($slaves[_scheduleSlaveI].washBeauty * 2), 100)&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;set $slaves[_scheduleSlaveI].washDays = 2&gt;&gt;
				&lt;&lt;set $slaves[_scheduleSlaveI].location = &#39;bathhouse&#39;&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

</tw-passagedata><tw-passagedata pid="359" name="Dom - quest #2" tags="" position="3785,1460" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_invite1.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You turn around the corner where your girls are standing and you see that Dom and some of his people are already waiting for you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;
	Get ready. I need one more thing you to do. Follow me
&lt;&lt;/dom&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Follow him&#39;&gt;&gt;
	Just like before, all of you went to his place of residence together. This time, however, there was one bodyguard less, which means that it is very likely that he is slowly starting to trust you.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/streets/dom_invite2.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	You walk up the stairs, and they leave you alone for a moment while they go to another room.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Sit down&#39;&gt;&gt;
		Just as you were attempting to sit down, quickly footsteps approached you from behind — Dom&#39;s wife, Isabel,  came up behind you. In a slightly anxious and quiet voice, she tries to tell you something.
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/streets/dom_wife.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;isabel&gt;&gt;
			Please don&#39;t. I know what he will want you to do and I beg you, don&#39;t! She&#39;s my old friend, I would never forgive you or him. I hope there is still good in you...
		&lt;&lt;/isabel&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		She barely managed to finish her sentence as Dom returned to the room and sat down opposite you.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;dom&gt;&gt;
			You have proven that you can accomplish things that my men have been trying for some time now, but the result has not been forthcoming. This task won&#39;t be difficult. More or less, I want to determine where you stand and where your loyalty lies.
		&lt;&lt;/dom&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Listen carefully&#39;&gt;&gt;
			&lt;&lt;dom&gt;&gt;
				I have one ungrateful employee who suddenly decided she no longer wants to work for me. And that&#39;s not the worst part; it turns out she has two daughters whom she has been hiding from me all these years.
			&lt;&lt;/dom&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;video &#39;streets/dom_quest2_1&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			While Dom patiently tells his story, you notice that Isabel is nervously eavesdropping on your conversation from the stairs. It seems that she is genuinely concerned about this person.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;dom&gt;&gt;
				I even know where she is located - after all, I did say that the task wouldn&#39;t be difficult.
			&lt;&lt;/dom&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;dom&gt;&gt;
				The task is simple - I want you to kill her. And the daughters... I want you to bring them back to me. One important thing... I want them to witness it all!
				&lt;br /&gt;
				So that they receive a lesson and know that nothing like this should happen again in the future.
			&lt;&lt;/dom&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Go to her location&#39;&gt;&gt;
				&lt;&lt;goto &#39;Dom quest #2 2&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="360" name="Dom quest #2 2" tags="" position="3785,1570" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
Guided by the vague directions provided by Dom, you embarked on a journey fraught with danger and uncertainty. As wilderness seemed to stretch on endlessly, you clung to the hope that the meeting with Adelaide would be a turning point.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_quest2_road.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you approach the edge of the forest, you notice faint wisps of smoke rising from within the woods. It seems that it&#39;s quite close to the road, and you decide to turn and walk through this area, so as not to give away your position and to remain unnoticed by anyone.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_quest2_tent.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You slowly and quietly approach the source of the smoke and notice that they are already there. They sit quietly by the tent, discussing something in hushed voices.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Approach them&#39;&gt;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/streets/dom_quest2_tent2.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	Suddenly, one of them turns around and spots you. They all rush into the tent and unexpectedly start screaming loudly in your direction. After a moment, it seems they understand what&#39;s happening. The eldest, who appears to be their mother, rushes out of the tent half-crying and positions herself in front of you, blocking the way, kissing your feet, just so you wouldn&#39;t reach her daughters.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/streets/dom_quest2_tent3.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;say &#39;Mother&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
		NO, NO!! I BEG YOU! Enough! Tell him that I will go back to him, just leave her alone. They will disappear and you will never see them. I beg you so much. Our life is already pitiful as it is. They are everything I have left...
	&lt;&lt;/say&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She asks you to wait and wants to tell you her life story. You have a feeling that she&#39;s simply stalling, trying to figure out a way to escape.
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;option1&quot;&gt;
	&lt;&lt;linkreplace &quot;Listen&quot;&gt;&gt;
		&lt;&lt;set _listen = true&gt;&gt;
		Tears welled in her eyes as she described the pain she had endured, the compromises she had made, and the sacrifices that had been exacted from her. Through her narrative, you came to understand the harsh reality that  mother had faced, the brutality she had been subjected to in order to protect them.&lt;br /&gt;
		She  you that Dom didn&#39;t give her any respect. She was used on streets, basements, slums..
		&lt;br /&gt;&lt;br /&gt;
		
		Her husband, girls father... He was a beacon of hope in those dark times. A man who believed in a better world, who fought to bring light to the shadows. But he was taken from us before they even had the chance to know him.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;say &#39;Mother&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
			Please, forget that you saw us, and we will leave immediately and never show up here again. I beg you earnestly
		&lt;&lt;/say&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;div id=&quot;option_cant&quot;&gt;
		&lt;&lt;linkreplace &quot;Tell her that you can&#39;t do that&quot;&gt;&gt;
			&lt;&lt;set _optionCant = true&gt;&gt;
			In her desperation, she simply falls face-first to the ground and clutches onto your leg. For a moment, there is a tomb-like silence. The only thing that can be heard is the mother&#39;s sobbing...
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;say &#39;Daughter&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
				Mister... Please... We&#39;re very good at gardening...
			&lt;&lt;/say&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;div id=&quot;option3&quot;&gt;
				&lt;div id=&quot;option4&quot;&gt;
			  		&lt;&lt;linkreplace &#39;Keep quiet&#39;&gt;&gt;
					Silence once again fills the surroundings, as they await your response or reaction, but you remain silent, not producing a sound. Signs of disappointment appear on their faces, and the daughters make eye contact, reassuringly gesturing to each other. After a moment, they call for their mother, and for a few seconds, a quiet argument ensues among them. The mother seems dissatisfied with something, but ultimately sighs, and with tear-filled eyes, she walks away from the tent, taking twenty steps away.
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;say &#39;Daughter&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
						Mister... 
					&lt;&lt;/say&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;places/streets/dom_quest2_unbutton.webp&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					Both girls, with slightly trembling hands, start to open their shirts while the mother has walked a few more steps ahead. After few seconds one of them is done and you see two beautiful small breasts&quot;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;say &#39;Daughter&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
						Perhaps we can convince you somehow? 
					&lt;&lt;/say&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;linkreplace &#39;Join them&#39;&gt;&gt;
						&lt;&lt;set _fucked = true&gt;&gt;
						&lt;&lt;set $player.godwill--&gt;&gt;
						&lt;&lt;video &#39;streets/dom_quest2_tent1&#39;&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						As soon as you enter the tent, one of the girls approaches you and slowly begins to undress you. The other one seems more shy, hesitating on the side for a moment, while the first one has already reached down your bulge and slides hand across it. After a moment second girl decides to join too. 
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;video &#39;streets/dom_quest2_tent2&#39;&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						She firmly grabs your hard dick in her hand and slowly starts to stroke it while you force her to lick her sisters natural breasts. She obeys...
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;video &#39;streets/dom_quest2_tent3&#39;&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;say &#39;Daughter&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
							Forgive my sister. She isn&#39;t used to this.
						&lt;&lt;/say&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						She barely finishes her sentence when she has already dropped to her knees, took away her sisters hand from your dick and puts it inside her mouth. 
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;video &#39;streets/dom_quest2_tent4&#39;&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						Second sister still is hesitating but look like she&#39;s enjoying the view as she massages her pussy while looking at your dick sliding in and out of her sisters mouth. She gathers courage but instead of blowing you, she decides to get on your dick. She starts slow but slowly picks up the phase. 
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;video &#39;streets/dom_quest2_tent5&#39;&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						You decide to fuck firt daughter as you throw her on her back and shove dick inside her. You maintain a steady pace as she makes very load scream of pleasure. Look like you hit the right spot as she tries to put her legs together and get off you for a moment to enjoy it. 
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
							&lt;center&gt;
								[img[setup.ImagePath+&#39;places/streets/dom_quest2_cum.webp&#39;]]
							&lt;/center&gt;
							&lt;br /&gt;&lt;br /&gt;
							She manages to get you out of her pussy but by surprise other daugther&#39;s mouth is already there and she catches almost every cum droplet as you cum. 
							&lt;&lt;horny_reset&gt;&gt;
							&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;/linkreplace&gt;&gt;
					&lt;&lt;/linkreplace&gt;&gt;
			  		&lt;&lt;/linkreplace&gt;&gt;
			  	&lt;/div&gt;
			  &lt;&lt;if (($game.location.guesthouse ?? false) &amp;&amp; ($guests.length + 3) &lt; $guesthouseLimit)&gt;&gt;
				  &lt;&lt;linkreplace &#39;Invite them to live with you&#39;&gt;&gt;
					  	&lt;&lt;run $(&#39;#option2, #option5&#39;).hide()&gt;&gt;
						&lt;&lt;newgirl&gt;&gt;
						&lt;&lt;set _mother = $tmpGirl&gt;&gt;
						&lt;&lt;set _mother.race = &#39;white&#39;&gt;&gt;
						&lt;&lt;set _mother.birthDate = setup.getBirthDate(41)&gt;&gt;
						&lt;&lt;set _mother.traits = [&#39;gardener&#39;, &#39;analslut&#39;, &#39;shopkeeper&#39;]&gt;&gt;
						&lt;&lt;set _mother.sub = 90&gt;&gt;
						&lt;&lt;set _mother.relationship = 100&gt;&gt;
						&lt;&lt;newgirl&gt;&gt;
						&lt;&lt;set _daughter1 = $tmpGirl&gt;&gt;
						&lt;&lt;set _daughter1.race = &#39;white&#39;&gt;&gt;
						&lt;&lt;set _daughter1.birthDate = setup.getBirthDate(19)&gt;&gt;
						&lt;&lt;set _daughter1.traits = [&#39;gardener&#39;]&gt;&gt;
						&lt;&lt;set _daughter1.family = {
							mother: _mother.id
						}&gt;&gt;
						&lt;&lt;set _daughter1.relationship = 80&gt;&gt;
						&lt;&lt;newgirl&gt;&gt;
						&lt;&lt;set _daughter2 = $tmpGirl&gt;&gt;
						&lt;&lt;set _daughter2.race = &#39;white&#39;&gt;&gt;
						&lt;&lt;set _daughter2.birthDate = setup.getBirthDate(20)&gt;&gt;
						&lt;&lt;set _daughter2.traits = [&#39;gardener&#39;]&gt;&gt;
						&lt;&lt;set _daughter2.family = {
							mother: _mother.id
						}&gt;&gt;
						&lt;&lt;set _daughter2.relationship = 80&gt;&gt;
						&lt;&lt;set _mother.family = {
							kids: [
							_daughter1.id,
							_daughter2.id
						]}&gt;&gt;
						&lt;&lt;run $guests.push(_mother, _daughter1, _daughter2)&gt;&gt;
						&lt;&lt;if !_fucked&gt;&gt;
							&lt;&lt;run $(&#39;#option4&#39;).hide()&gt;&gt;
						&lt;&lt;/if&gt;&gt;
						&lt;center&gt;
							[img[setup.ImagePath+&#39;places/streets/dom_quest2_happy.jpg&#39;]]
						&lt;/center&gt;
						&lt;br /&gt;&lt;br /&gt;
						Their faces light up and a smile appears on them. They look at each other, and hope is visible in their eyes.
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;say &#39;Daughter&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
							Really? Thank you! 
						&lt;&lt;/say&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;set $player.godwill += 10&gt;&gt;
						&lt;&lt;say &#39;Mother&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
							I&#39;ll be forever in your debt. Thank you!
						&lt;&lt;/say&gt;&gt;
						&lt;br /&gt;&lt;br /&gt;
						You tell them as accurately as possible, the way for them to get from here to your camp.
						&lt;br /&gt;&lt;br /&gt;
						&lt;&lt;link &#39;Go back to Dom&#39;&gt;&gt;
							&lt;&lt;goto &#39;Dom quest #2 3&#39;&gt;&gt;
						&lt;&lt;/link&gt;&gt;
				  &lt;&lt;/linkreplace&gt;&gt;
			  &lt;&lt;/if&gt;&gt;
			&lt;/div&gt;
			
		&lt;&lt;/linkreplace&gt;&gt;
		&lt;/div&gt;
	&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option5&quot;&gt;
		&lt;&lt;linkreplace &#39;Tell them to go away as far as they can&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option2&#39;).hide()&gt;&gt;
			&lt;&lt;if !_fucked&gt;&gt;
				&lt;&lt;run $(&#39;#option4&#39;).hide()&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if !_listen&gt;&gt;
				&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/streets/dom_quest2_happy.jpg&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			Their faces light up and a smile appears on them. They look at each other, and hope is visible in their eyes.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;say &#39;Daughter&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
				Really? Thank you! 
			&lt;&lt;/say&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;set $player.godwill += 10&gt;&gt;
			&lt;&lt;say &#39;Mother&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
				I&#39;ll be forever in your debt. Thank you!
			&lt;&lt;/say&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Go back to Dom&#39;&gt;&gt;
				&lt;&lt;goto &#39;Dom quest #2 3&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option2&quot;&gt;
		&lt;&lt;linkreplace &#39;Kill her&#39;&gt;&gt;
			&lt;&lt;if !_listen&gt;&gt;
				&lt;&lt;run $(&#39;#option1&#39;).hide()&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if !_optionCant&gt;&gt;
				&lt;&lt;run $(&#39;#option_cant&#39;).hide()&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;run $(&#39;#option5&#39;).hide()&gt;&gt;
			&lt;&lt;set $characters.dom.quests.quest2_killed = true&gt;&gt;
			&lt;&lt;set $player.godwill -= 20&gt;&gt;
			&lt;&lt;set $player.reputation++&gt;&gt;
			&lt;&lt;run $(&#39;#option3&#39;).hide()&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/streets/dom_quest2_dead.jpg&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			You find a metal object nearby and forcefully strike mother on the head. Instantly, she collapses to the ground, her skull cracks open, and blood begins to pour out in torrents. One of the daughters freezes in shock, motionless, while the other one starts screaming hysterically at you.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Bring girls back to Dom&#39;&gt;&gt;
				&lt;&lt;goto &#39;Dom quest #2 3&#39;&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;&lt;widget _domQuest2Invite&gt;&gt;
	
&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="361" name="Dom quest #2 3" tags="" position="3785,1679" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_invite1.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;
	So how did it go?
&lt;&lt;/dom&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set $characters.dom.quests.quest2_done = true&gt;&gt;
&lt;&lt;if $characters.dom.quests.quest2_killed&gt;&gt;
	&lt;&lt;set $characters.dom.quests.quest3_start_day = ($game.day + 7)&gt;&gt;
	Dom notices that you have returned with both daughters and they are covered in blood. He immediately understands that you have successfully and decisively completed your task and nods at you approvingly.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;dom&gt;&gt;
		I knew I could rely on you. Congratulations. I will contact you in the near future.
	&lt;&lt;/dom&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	He orders one of his subordinates to undress the daughters and place collars around them. That she does as well, and afterward, they leave the room.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/streets/dom_quest2_collar.webp&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	In the corner of the room, you see Isabel. It&#39;s evident that her eyes are wet, and a tear runs down her cheek, although she tries to hide it. She definitely looks disappointed.
	&lt;br /&gt;
	As you walk past her to the exit, she quietly whispers to you..
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;isabel&gt;&gt;
		You bastard...
	&lt;&lt;/isabel&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;dom&gt;&gt;
		Wait.. Where are they? 
	&lt;&lt;/dom&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Tell him that they managed to run away&#39;&gt;&gt;
		&lt;&lt;set $characters.dom.quests.quest3_start_day = ($game.day + 15)&gt;&gt;
		&lt;&lt;dom&gt;&gt;
			That&#39;s bullshit! I know that! I don&#39;t know why expected that much from you.. Get lost! I will need to think what to do with you
		&lt;&lt;/dom&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		In anger, Dom takes one of his whiskey glasses, which stands right in front of him on the table, and throws it against the wall.
		&lt;br /&gt;
		You look at Isabel is she&#39;s trying to hide her smile.&lt;br /&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;center&gt;
			[img[setup.ImagePath+&#39;places/streets/dom_quest2_isabel_smile.jpg&#39;]]
		&lt;/center&gt;
		&lt;br /&gt;&lt;br /&gt;
		She is definitely surprised by your response, and a small shock is visible on her face. She smiles flirtatiously and after a moment, leaves the room.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;goto &#39;Underground city&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/if&gt;&gt;






</tw-passagedata><tw-passagedata pid="362" name="Slave market - VIP introduction" tags="" position="2295,1691" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;SLAVE MARKET&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
Suddenly, a woman emerges from the adjacent room, all dressed in black with a large scar on her face. She is dressed too elegantly for such a place. Well, she points at you and says...
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;say &#39;Slave merchant&#39; setup.ImagePath+&#39;/people/slave_merchant.jpg&#39;&gt;&gt;
	Could you follow me?
&lt;&lt;/say&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Follow her&#39;&gt;&gt;
	You decide to follow her into the adjacent room. Behind the first set of doors, a dark corridor follows that you walk through. She doesn&#39;t speak to you, but simply leads you deeper. After a moment, you notice a set of large wooden doors that are already partially open, and light from that room shines faintly through the gap.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Go inside&#39;&gt;&gt;
		Upon entering through the doors, a large room unfolds in front of you with at least 4 meters high ceilings. A small stage has been set up by one of the walls, and quite a few people are sitting around it. It looks like some sort of auction, but not for the regular audience. After a while, you notice that a couple of girls are being brought in from the adjacent room, in chains.
		&lt;&lt;video &#39;slave_market/vip1&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		The girls are brought to the stage and undressed in front of everyone. A person who loudly shouts over everyone is calling out prices for which the girls can be bought. It&#39;s mentioned that all the girls are innocent and none of them have ever been beaten with whips.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;slave_market/vip2&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		Suddenly, another girl is brought in from the adjacent room. She looks a bit different from the others and seems to be new to this. She&#39;s placed in the middle of the floor, and she gets branded with a hot metal onto her back.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;slave_market/vip3&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;say &#39;Slave merchant&#39; setup.ImagePath+&#39;/people/slave_merchant.jpg&#39;&gt;&gt;
			Interested in her? I wanted to talk about something else. We have noticed you. The slaves you have provided to us have been very valuable, so we wanted to thank you in our own way.
		&lt;&lt;/say&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		The girl who was just branded looks at you with tearful eyes, and at some point, your gazes meet.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;newgirl&gt;&gt;
		&lt;&lt;set 
			$tmpGirl.traits = setup.getRandomTraits(3),
			$tmpGirl.birthDate = setup.getBirthDate(19),
			$tmpGirl.race = &#39;white&#39;,
			$tmpGirl.beauty = 90,
			$tmpGirl.hair = &#39;blonde&#39;,
			$tmpGirl.breasts = &#39;big&#39;,
			$tmpGirl.virgin = true,
			$tmpGirl.orgasms = 0
		&gt;&gt;
		&lt;&lt;set _forceKnown = true&gt;&gt;
		&lt;&lt;include &#39;NPC info&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;say &#39;Slave merchant&#39; setup.ImagePath+&#39;/people/slave_merchant.jpg&#39;&gt;&gt;
			As a thank you, we would like to offer you some slightly more exceptional girls. This means that in the future, the girls we provide will be somewhat more beautiful and intelligent than the others in the market. We hope you will appreciate this.
		&lt;&lt;/say&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Ask about girl who was just branded&#39;&gt;&gt;
			&lt;&lt;say &#39;Slave merchant&#39; setup.ImagePath+&#39;/people/slave_merchant.jpg&#39;&gt;&gt;
				Are you sure? We know nothing about her yet. But if you desire her so much, you can have her for 300 caps.
			&lt;&lt;/say&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;if $player.money &gt;= 300&gt;&gt;
				&lt;&lt;if $slaves.length &lt; $basementLimit&gt;&gt;
					&lt;&lt;linkreplace &#39;Buy her&#39;&gt;&gt;
						&lt;&lt;run $slaves.push($tmpGirl)&gt;&gt;
						&lt;&lt;set _bought = true&gt;&gt;
						&lt;&lt;run $(&#39;#option_buy&#39;).hide()&gt;&gt;
						&lt;&lt;set $player.money -= 300&gt;&gt;
						&lt;center&gt;
							[img[setup.ImagePath+&#39;places/slave_market/vip_bought.webp&#39;]]
						&lt;/center&gt;
						&lt;br /&gt;&lt;br /&gt;
						She collects your money and meanwhile one of her colleagues puts a collar around the girl you just bought
						&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;/linkreplace&gt;&gt;
					&lt;&lt;linkdesc &#39;option_buy&#39;&gt;&gt;
						-300 caps
					&lt;&lt;/linkdesc&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;if _bought&gt;&gt;
			  	&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;goto &#39;Slave market&#39;&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="363" name="Explore event: Abandoned mall" tags="" position="6098,690" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;FOREST&lt;/h1&gt;
&lt;&lt;run delete $slaveId&gt;&gt;
&lt;&lt;run delete $guestId&gt;&gt;
&lt;&lt;run delete $charId&gt;&gt;
&lt;&lt;set $tmpGirlCapture = true&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/abandoned_mall.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Exploring through the city you stumble upon a burnt out shopping center. While not filled with anything of day to day importance perhaps you will find something of use inside.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Explore&#39;&gt;&gt;
	You root around in the dim light cast from the broken atrium windows for some time before stumbling upon a an old drugstore.
	&lt;br /&gt;
	While most of its contents are long looted amidst the back you find a small stash of makeup. While not useful to you, perhaps someone at your settlement could use it. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;strong&gt;You collected &lt;strong class=&quot;iitem&quot;&gt;1 cosmetics&lt;/strong&gt;&lt;/strong&gt;
	&lt;&lt;pickup $backpack &#39;cosmetics&#39; 1&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;if $player.int &gt;= 50&gt;&gt;
		&lt;&lt;linkreplace &#39;Listen&#39;&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/explore/abandoned_mall2.jpg&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			You take a moment to observe before diving into the decrepit building. At the edge fo your hearing you only just barely make out a sniffling sound to your side in the old parking garage. Check out the noise tucked away in the corner hiding you spot a girl
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;newgirl&gt;&gt;
			&lt;&lt;include &#39;NPC info&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;say &#39;Unknown girl&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
				Please leave me alone! I am just looking for food
			&lt;&lt;/say&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;if $backpack.count(&#39;food&#39;) &gt;= 5&gt;&gt;
				&lt;&lt;linkreplace &#39;Offer her food&#39;&gt;&gt;
					&lt;&lt;set _gaveFood = true&gt;&gt;
					&lt;&lt;run $(&#39;#option_food&#39;).hide()&gt;&gt;
					&lt;&lt;set $player.godwill++&gt;&gt;
					&lt;&lt;set $player.reputation++&gt;&gt;
					&lt;&lt;drop $backpack &#39;food&#39; 5&gt;&gt;
					&lt;&lt;say &#39;Unknown girl&#39; setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
						Thank you so much sir!
					&lt;&lt;/say&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;/linkreplace&gt;&gt;
				&lt;&lt;linkdesc &#39;option_food&#39;&gt;&gt;
					-5 food
				&lt;&lt;/linkdesc&gt;&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;if $game.location.basement &amp;&amp; $tmpGirlCapture &amp;&amp; $slaves.length &lt; $basementLimit &amp;&amp; $player.energy &gt;= 30&gt;&gt;
				&lt;&lt;link &#39;Capture her&#39;&gt;&gt;
					&lt;&lt;if _gaveFood&gt;&gt;
						&lt;&lt;set $player.reputation--&gt;&gt;
					&lt;&lt;/if&gt;&gt;
					&lt;&lt;set $tmpGirl.capture = false&gt;&gt;
					&lt;&lt;set $slaves.push($tmpGirl)&gt;&gt;
					&lt;&lt;addhours 1&gt;&gt;
					&lt;&lt;energy -30&gt;&gt;
					&lt;&lt;goto &#39;Basement&#39;&gt;&gt;
					&lt;&lt;statsAdd &#39;people_captured&#39;&gt;&gt;
				&lt;&lt;/link&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;run delete $tmpGirlCapture&gt;&gt;
	&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;

</tw-passagedata><tw-passagedata pid="364" name="Dom - quest #3" tags="" position="3895,1461" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_invite1.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You turn around the corner where your girls are standing and you see that Dom and some of his people are already waiting for you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;
	Very good that you&#39;re here! Quickly! We don&#39;t have much time! Let&#39;s hit the road. I&#39;ll explain everything on the way.
&lt;&lt;/dom&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Follow him&#39;&gt;&gt;
	Instead of going to his place as usual, you turn in the other direction. It seems like you&#39;re heading overseas. On the way there, a few more people join Dom. As you walk briskly, Dom starts telling what really happened.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;dom&gt;&gt;
		There&#39;s a problem. Underground city might soon face issues with fuel generators because we&#39;re running out of fuel. It was arranged for a diplomat from another city to come, and we would discuss the deal details, but he was supposed to be here the day before yesterday... This morning, another person from the same city arrived and said that the diplomat was supposed to be here.
	&lt;&lt;/dom&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/streets/dom_quest3_people.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	While he&#39;s talking, more people have joined you, and you all emerge above ground. Dom points to the west, and you all start heading in that direction at a brisk pace.
	&lt;br /&gt;&lt;br /&gt;
	You continue on the road for several hours when suddenly, out of nowhere, a sandstorm appears. It&#39;s evident that panic sets in among the people, and those who were moving slowly suddenly collapse on the ground, and the rest don&#39;t even attempt to gather them. They are left to fate&#39;s mercy. After a while, however, in the distance, you spot something - it looks like an abandoned hotel by the side of the road.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/streets/dom_quest3_hotel.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;dom&gt;&gt;
		Let&#39;s go there. Need to wait till storm calms down. 
	&lt;&lt;/dom&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Go inside&#39;&gt;&gt;
		The sandstorm is so fierce that you can barely manage to open the doors. After a moment, you are inside, and the wind forcefully slams the doors shut behind you. All around, you can hear murmurs and whispers, but you don&#39;t see anyone...
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Tear the curtains from the window&#39;&gt;&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/streets/dom_quest3_attack.jpg&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			Tearing the curtains from the windows lets in light, illuminating the room ever so slightly. Suddenly, from behind, you hear a shout, and as you turn around, you see that many people have emerged from the previously dark corners of the room, now bathed in light. They all rush towards you all, and a fight ensues. Some of them have knives, while others wield metal pipes. A couple of them decide to attack you as well.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;link &#39;Fight&#39;&gt;&gt;
				&lt;&lt;set $enemies = []&gt;&gt;
				&lt;&lt;newguy&gt;&gt;
				&lt;&lt;if setup.percentageChance(10)&gt;&gt;
					&lt;&lt;set 
						$tmpGuy.inventory = [],
						$tmpGuy.inventory.push(&#39;knife&#39;)
					&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
				&lt;&lt;newguy&gt;&gt;
				&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
				&lt;&lt;newguy&gt;&gt;
				&lt;&lt;run $enemies.push($tmpGuy)&gt;&gt;
				&lt;&lt;set $game.death_reason = &#39;stab wounds&#39;&gt;&gt;
  				&lt;&lt;fight $enemies &#39;Dom - quest #3 2&#39; &#39;Dead&#39;&gt;&gt;
				&lt;&lt;set 
					$fight.canRunAway = false,
					$fight.skipEnding = true
				&gt;&gt;
			&lt;&lt;/link&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="365" name="Bedroom: horny guest" tags="" position="49,1616" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _guest = $guests[$guestId]&gt;&gt;
You sit down on  your bed when suddenly your doors open and &lt;&lt;=setup.displayName(_guest)&gt;&gt; stands in the doors with only her nightshirt. 
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/bedroom/guest_visit.gif&#39;]]
&lt;/center&gt;
&lt;&lt;set $tmpGirl = _guest&gt;&gt;
&lt;&lt;include &#39;NPC info&#39;&gt;&gt;
&lt;br /&gt;
&lt;&lt;say $tmpGirl.name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
	Hey! What you&#39;re doing? Maybe want to have some fun?
&lt;&lt;/say&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;set _linkName = &#39;Fuck &#39; + $tmpGirl.name&gt;&gt;
&lt;&lt;if $charactersInLocation[&#39;bedroom&#39;].includes(&#39;blair&#39;) &amp;&amp; timeBetween(&#39;22:00&#39;,&#39;23:59&#39;) &amp;&amp; $characters.blair.relationship &gt;= 90&gt;&gt;
	&lt;&lt;blair&gt;&gt;
		Don&#39;t leave me out. Can I join?
	&lt;&lt;/blair&gt;&gt;
	&lt;&lt;set _blairJoin = true&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link _linkName&gt;&gt;
	&lt;&lt;run delete $charId&gt;&gt;
	&lt;&lt;run delete $slaveId&gt;&gt;
	&lt;&lt;set $tmpGirl.location = &#39;bedroom&#39;&gt;&gt;
	&lt;&lt;set $tmpGirlCapture to false&gt;&gt;
	&lt;&lt;set $tmpGirl.rape to false&gt;&gt;
	&lt;&lt;set $tmpGirlViewBack = &#39;Sleep eval&#39;&gt;&gt;
	&lt;&lt;set $tmpGirlBack = &#39;Sleep eval&#39;&gt;&gt;
	&lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;&lt;if _blairJoin&gt;&gt;
	&lt;&lt;if recall($suppCode)&gt;&gt;
		&lt;&lt;link &#39;Fuck them both&#39;&gt;&gt;
			&lt;&lt;goto &#39;Bedroom: horny guest - threesome Blair&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;div class=&quot;link-internal disabled&quot; style=&quot;background: #ccc&quot;&gt;
			Fuck them both
			&lt;&lt;notPatreonIcon&gt;&gt;
		&lt;/div&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Maybe some other time&#39;&gt;&gt;
	&lt;&lt;goto &#39;Bedroom&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;






</tw-passagedata><tw-passagedata pid="366" name="Bedroom: horny guest - threesome Blair" tags="" position="166,1618" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;BEDROOM&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;

&lt;&lt;set _fuckActionMapping = {
	1: &#39;%name% and Blair exchange glances with each other and playfully smile at each other before Blair places her hand on your chest and forcefully pushes you down. %name% spits on your dick before Blair puts it in her mouth and starts to suck you off while %name% focuses on your balls&#39;,
	2: &#39;As you lie on the bed on your back, Blair gets on you in reverse cowgirl position and slides onto your dick. %name% meanwhile massages her ass and in a moment starts to help her with the movements&#39;,
	3: &quot;They both lie on their backs as you fuck Blair&#39;s pussy while other girl rubs her clit as she watches you both. %name% asks to fuck her too.&quot;,
	4: &quot;You switch to %name%&#39;s pussy. The difference is noticeable immediately. If Blair was quiet, then %name% immediately starts moaning loudly throughout the room without any hesitation.&quot;,
	5: &#39;%name% drops on her knees and is ready to swallow your dick but instead of that you cum all over her face without a chance to warn her. She opens her mouth and puts her tongue out to catch each drop of you cum&#39;,
}&gt;&gt;

&lt;&lt;set _videoName = &#39;/bedroom/guest_visit_threesome&#39; + ($fuckAction ?? 1)&gt;&gt;
&lt;&lt;video &#96;_videoName&#96;&gt;&gt;
&lt;&lt;if $fuckAction !== 5&gt;&gt;
	&lt;&lt;horny 20&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;= _fuckActionMapping[($fuckAction ?? 1)].replaceAll(&#39;%name%&#39;, $guests[$guestId].name)&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if $fuckAction !== 5&gt;&gt;
	&lt;&lt;link &#39;Double blowjob&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $fuckAction = 1&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  	&lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Fuck Blair reverse cowgirl&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $fuckAction = 2&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;link &#39;Fuck Blair&#39;&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $fuckAction = 3&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  &lt;&lt;set _linkName = &#39;Fuck &#39; + $guests[$guestId].name&gt;&gt;
   &lt;&lt;link _linkName&gt;&gt;
	  &lt;&lt;addmins 10&gt;&gt;
	  &lt;&lt;set $fuckAction = 4&gt;&gt;
	  &lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
  &lt;&lt;/link&gt;&gt;
  
  &lt;&lt;if $player.horny &gt;= 100&gt;&gt;
	&lt;&lt;link &#39;Cum&#39;&gt;&gt;
		&lt;&lt;addmins 5&gt;&gt;
		&lt;&lt;set $fuckAction = 5&gt;&gt;
		&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;goto &#96;passage()&#96;&gt;&gt; 
	&lt;&lt;/link&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $fuckAction === 5&gt;&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Sleep eval&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="367" name="Dom - quest #3 2" tags="" position="3896,1571" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;OUTSIDE&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_quest3_attack_done.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
After you have dealt with the people who attacked you, you look around. Almost everyone lies on the floor, except for two who are fighting Dom. All your other allies have been killed. Dom successfully deals with the last two, and with a face covered in blood, looks at you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;dom&gt;&gt;
	Good job! We should look for that diplomat..
&lt;&lt;/dom&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Help him search&#39;&gt;&gt;
  &lt;strong&gt;Suddenly, one of the opponents rises from the ground and heads towards Dom. You notice that he has a knife in his hands.&lt;/strong&gt;
  &lt;br /&gt;&lt;br /&gt;
  &lt;div id=&quot;options&quot;&gt;
  	&lt;&lt;link &#39;Warn him&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#ending&#39;).show()&gt;&gt;
		&lt;&lt;run $(&#39;#options&#39;).hide()&gt;&gt;
		&lt;&lt;set $player.godwill++&gt;&gt;
		&lt;&lt;set $player.reputation += 10&gt;&gt;
		&lt;&lt;set $characters.dom.quests.quest3_warned = true&gt;&gt;
	&lt;&lt;/link&gt;&gt;
	&lt;&lt;link &#39;Do not warn him&#39;&gt;&gt;
		&lt;&lt;run $(&#39;#ending&#39;).show()&gt;&gt;
		&lt;&lt;set $player.godwill -= 5&gt;&gt;
		&lt;&lt;run $(&#39;#options&#39;).hide()&gt;&gt;
	&lt;&lt;/link&gt;&gt;
  &lt;/div&gt;
  &lt;div id=&quot;ending&quot; style=&quot;display:none&quot;&gt;
  	  &lt;center&gt;
	  	[img[setup.ImagePath+&#39;places/streets/dom_quest3_stab.gif&#39;]]
  	  &lt;/center&gt;
	  &lt;br /&gt;&lt;br /&gt;
	  In the last moment, Dom manages to spin around and sees the opponent coming at him with a knife, but it&#39;s already too late. The opponent grabs Dom by the neck and, with a determined force, thrusts the knife towards him.
		&lt;br /&gt;
		Before you can do anything, a few more of Dom&#39;s people burst through the door, but in the meantime, the opponent has inflicted a few more stabs, and Dom simply slumps against the wall.
		&lt;br /&gt;&lt;br /&gt;
		Dom&#39;s men shouts that we need to get him back to the city
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;link &#39;Help them get him to Underground city&#39;&gt;&gt;
			&lt;&lt;goto &#39;Dom - quest #3 3&#39;&gt;&gt;
		&lt;&lt;/link&gt;&gt;
  &lt;/div&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="368" name="Dom - quest #3 3" tags="" position="3900,1677" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;STREETS&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;addhours 4&gt;&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/streets/dom_quest3_bed.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
You hastily return to the underground city. When you arrive there, Dom is barely alive. Doctors were called in early, and they might be able to help him. They take him into a special room and close the door in front of you. An hour passes, then two...
&lt;br /&gt;&lt;br /&gt;
The doors open, and a couple of people come out, announcing that the situation is extremely critical, and Dom has fallen into a coma. It&#39;s unknown when he might wake up.
&lt;br /&gt;&lt;br /&gt;
Isabel comes out of the room and shouts at everyone.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;isabel&gt;&gt;
	EVERYONE OUT! NOW! Except those who were with him the whole time.
&lt;&lt;/isabel&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You are the only one left in the room because everyone else who was with you has died.
&lt;br /&gt;
She asks you to sit down, and she sits down next to you on the couch.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Sit down&#39;&gt;&gt;
	&lt;&lt;isabel&gt;&gt;
		What happened there? Why are you the only ones left alive?
	&lt;&lt;/isabel&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You take a deep breath and begin to recount what exactly happened. She doesn&#39;t seem to be deeply concerned about Dom&#39;s health, but more interested in why and how he survived. As you finish telling the whole story, there&#39;s a moment of silence. Then, she calls out to someone from the next room, a girl wrapped like a gift, who enters the room.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;isabel&gt;&gt;
		At the moment, Dom is in a coma, and it&#39;s unclear how long it will last or if he will recover at all. You are our only hope right now, especially with this fuel crisis in the city. With these shortages, we will soon run out of electricity... That&#39;s why I want to take care of you. Dom would definitely want that too.
	&lt;&lt;/isabel&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;streets/dom_quest3_award1&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;isabel&gt;&gt;
		You can do with her mouth whatever you want.
	&lt;&lt;/isabel&gt;&gt;
	&lt;br /&gt;
	When the girl approaches you, to your surprise, she is not the one who helps you get  your dick out, but it&#39;s Isabel as she giggles.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;streets/dom_quest3_award2&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;isabel&gt;&gt;
	Don&#39;t get your hopes up
	&lt;&lt;/isabel&gt;&gt;
	&lt;br /&gt;
	She opens your zipper and slides her warm hand inside your pants and grabs your hard dick. She jerks it for a moment as other girl is already on her knees in front of you and is waiting...
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;streets/dom_quest3_award3&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She pulls out your cock and nods at the girl waiting on her knees. Girl starts to suck you off but instead of Isabel stepping away, she continues to jerk you off. As you try to kiss her lips, she turns her cheek and doesn&#39;t allow you to do that. 
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;video &#39;streets/dom_quest3_award4&#39;&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
Isabel steps back and allows you to express yourself. You grab girls hair and push your dick all the way in her mouth. She looks playful and doesn&#39;t mind to give you some pleasure
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
		&lt;&lt;video &#39;streets/dom_quest3_award5&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		Your warn the girl that you&#39;ll cum and Isabel overhearing that decides to step back in. She grabs your dick and strokes it, while other girl opens her mouth widely and waits for your cum.&lt;br /&gt;
		As you finish and girls mouth is full, Isabel leans towards her mouth and playfully gives her a kiss with mouth full of your cum.&lt;br /&gt;
		You continue to press your hard dick against girl lips as Isabel kisses her and she barely touched your dick with her lips.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;isabel&gt;&gt;
			You should go now. I hope you&#39;ll help us in this difficult time.
		&lt;&lt;/isabel&gt;&gt;
		&lt;br /&gt;
		&lt;&lt;link &#39;Leave&#39;&gt;&gt;
			&lt;&lt;set $characters.dom.quests.quest3_done = true&gt;&gt;
			&lt;&lt;set $characters.dom.quests.quest3_done_day = $game.day&gt;&gt;
			&lt;&lt;goto &#39;Streets&#39;&gt;&gt;
			&lt;&lt;horny_reset&gt;&gt;
		&lt;&lt;/link&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="369" name="Event: Kitchen stuck" tags="" position="286,1625" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;KITCHEN&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;video &#39;kitchen/stuck1&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Entering the kitchen, you see &lt;&lt;=setup.displayName($tmpGirl)&gt;&gt;. She&#39;s pulling something by the sink. You decide to ask if everything is okay, to which she replies that her hand is stuck while cleaning the drain.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;say $tmpGirl.name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
	Could you help me please?
&lt;&lt;/say&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;div id=&quot;option_help&quot;&gt;
  &lt;&lt;link &#39;Help her&#39;&gt;&gt;
	&lt;&lt;run $(&#39;#option_fun, #option_help&#39;).hide()&gt;&gt;
	&lt;&lt;run $(&#39;#option_end&#39;).show()&gt;&gt;
	&lt;&lt;set $player.godwill++&gt;&gt;
  &lt;&lt;/link&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;option_fun&quot;&gt;
	&lt;&lt;linkreplace &#39;Have some fun&#39;&gt;&gt;
		&lt;&lt;set _hadFun = true&gt;&gt;
		&lt;&lt;addmins 30&gt;&gt;
		&lt;&lt;set $guests[$guestId].horny = 0&gt;&gt;
		&lt;&lt;run $(&#39;#option_help&#39;).hide()&gt;&gt;
		&lt;&lt;video &#39;kitchen/stuck2&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;say $tmpGirl.name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
			Really? You think this is the right time? Ohh... god...
		&lt;&lt;/say&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;video &#39;kitchen/stuck3&#39;&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		As you grab her top and pull it, one of her breasts falls out swings as you fuck her tight pussy. She&#39;s clearly enjoying it as she doesn&#39;t resist in any way.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
			&lt;&lt;video &#39;kitchen/stuck4&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			You pull out and cum all over her back as she still manages to get her hand out of the drain. Cum drops from her back on the ground.
			&lt;&lt;horny_reset&gt;&gt;
			&lt;&lt;run $(&#39;#option_end&#39;).show()&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;/div&gt;
&lt;div id=&quot;option_end&quot; style=&quot;display:none;&quot;&gt;
	&lt;center&gt;
		[img[setup.ImagePath+&#39;places/kitchen/stuck.jpg&#39;]]
	&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;=setup.displayName($tmpGirl)&gt;&gt; manages to pull out the trapped arm, and she sighs in relief.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;say $tmpGirl.name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
		Thank you so much!
	&lt;&lt;/say&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;link &#39;Leave&#39;&gt;&gt;
		&lt;&lt;goto &#39;Kitchen-room&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="370" name="Event: Guest invite shower" tags="sex no-redirect" position="288,1735" size="100,100">&lt;br /&gt;
&lt;&lt;if $tmpGirl.relationship &gt; 30&gt;&gt;
	&lt;&lt;if $tmpGirl.washedBathhouse&gt;&gt;
		&lt;&lt;say $tmpGirl.name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
			Sorry, I will have to decline. I already was in bathhouse today. Maybe some other time
		&lt;&lt;/say&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;set _isOk = true&gt;&gt;
		&lt;&lt;say $tmpGirl.name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
			Oh, I like where this is going. Lead the way. 
		&lt;&lt;/say&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;say $tmpGirl.name setup.ImagePath+&#39;/people/anongirl.png&#39;&gt;&gt;
		Sorry, I wouldn&#39;t be comfortable there together with you.
	&lt;&lt;/say&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;if _isOk&gt;&gt;
	&lt;&lt;link &#39;Go to the shower&#39;&gt;&gt;
		&lt;&lt;set $oldTmpGirlLocation = $tmpGirl.location&gt;&gt;
		&lt;&lt;set $tmpGirl.location = &#39;shower&#39;&gt;&gt;
		&lt;&lt;goto &#39;Girl fuck&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Back&#39;&gt;&gt;
  	&lt;&lt;if $tmpGirlViewBack&gt;&gt;
		&lt;&lt;goto $tmpGirlViewBack&gt;&gt;
	&lt;&lt;else&gt;&gt;
		&lt;&lt;goto [[Girl view]]&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/link&gt;&gt;
</tw-passagedata><tw-passagedata pid="371" name="Laura - toxic rain" tags="" position="332,2626" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;CITY&lt;/h1&gt;
&lt;&lt;newgirl&gt;&gt;
&lt;&lt;set 
	$tmpGirl.name = &#39;Laura&#39;,
	$tmpGirl.birthDate = setup.getBirthDate(40),
	$tmpGirl.hair = &#39;brown&#39;,
	$tmpGirl.race = &#39;white&#39;,
	$tmpGirl.breasts = &#39;big&#39;,
	$tmpGirl.quests = {
		metOnDay: $game.day
	}
&gt;&gt;
&lt;&lt;set $characters.laura = $tmpGirl&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/toxic_rain1.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
As you ventured through the desolate streets of the ruined city, the acrid stench of decay hung in the air. The once towering skyscrapers now stood as skeletal remnants of the past, their shattered windows like empty eye sockets. Your footsteps echoed off the cracked pavement as you navigated the eerie silence.
&lt;br /&gt;&lt;br /&gt;
Then, a low rumble filled the atmosphere, and you looked up to see dark clouds gathering overhead. It had been years since anyone had witnessed rain in this apocalyptic wasteland. The first few drops fell, and you raised your face to the sky, feeling the cool sensation on your skin. It was almost refreshing, a stark contrast to the constant dust and dryness of this world.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/toxic_rain2.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
However, your joy was short-lived. As the rain continued to fall, an intense burning sensation started to gnaw at your exposed skin. Panic set in as you realized something was horribly wrong. You needed shelter, fast.
&lt;br /&gt;&lt;br /&gt;
Frantically, you sought refuge in an old, crumbling building, descending into its dimly lit basement. The rain&#39;s acidic touch had left painful welts on your skin. It was a dire situation, and you feared for your survival.
&lt;br /&gt;&lt;br /&gt;
As you explored the basement, your eyes landed on a set of heavily reinforced, locked doors. Desperation drove you to investigate further. You called out, pounding on the doors, hoping for any sign of life.
&lt;br /&gt;&lt;br /&gt;
To your astonishment, a voice responded from the other side. &quot;&lt;strong&gt;Who&#39;s there?&lt;/strong&gt;&quot; it called out, filled with both surprise and trepidation.
&lt;br /&gt;&lt;br /&gt;
&quot;It&#39;s me,&quot; you replied hastily. &quot;I sought shelter from the rain. It&#39;s burning my skin.&quot;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/toxic_rain3.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
After a series of clicks and mechanical noises, the doors creaked open, revealing a dimly lit laboratory. Inside, you found a woman, her lab coat spattered with various chemicals, and her hands gloved and covered with protective gear. She was slightly disheveled but had an air of determined intellect about her.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;laura&gt;&gt;
	Quickly, get inside!
&lt;&lt;/laura&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
She urged, pulling you in and sealing the doors behind you.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;laura&gt;&gt;
	My name is Dr. Laura Finch, a scientist. I&#39;ve been researching this rain, trying to understand its properties.
&lt;&lt;/laura&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
You explained the burning sensation you had felt, and Dr. Finch nodded gravely.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;laura&gt;&gt;
Yes, it&#39;s highly acidic. It&#39;s not just rain; it&#39;s a result of the environmental catastrophe that has befallen our world. The atmosphere is filled with toxic compounds, and this rain is one of its manifestations
&lt;&lt;/laura&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &quot;Ask on what else she&#39;s working&quot;&gt;&gt;
	Dr. Laura Finch led you further into her makeshift laboratory, which was filled with an assortment of scientific equipment and notes scrawled across chalkboards. She spoke with a hint of excitement in her voice, her eyes shining with a determined glint.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;laura&gt;&gt;
		One of my projects involves a growth potion. This concoction could accelerate the aging process, allowing people to reach maturity and physical peak faster, hopefully making them more resilient to the dangers of this world.
	&lt;&lt;/laura&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	She carefully picked up a vial filled with a mysterious liquid and continued...
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;laura&gt;&gt;
		I&#39;ve made progress, but I&#39;m missing a few critical ingredients to complete the formula. With those, I could potentially create a significant breakthrough in our struggle to survive.
	&lt;&lt;/laura&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Ask about missing ingredients&#39;&gt;&gt;
		&lt;&lt;laura&gt;&gt;
			I require samples of irradiated fungal glowing mushrooms and an enzyme. Mushrooms I might find somewhere on my own but enzyme would be tricky one.
			&lt;br /&gt;
			The enzyme I need can only be extracted from the sperm of males who haven&#39;t been exposed to the initial nuclear radiation. It&#39;s a complex biological process, and these specific conditions are crucial for the enzyme&#39;s purity.
		&lt;&lt;/laura&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &quot;Tell her you wasn&#39;t exposed to the initial radiation&quot;&gt;&gt;
			Dr. Laura Finch eyes you warily, her scientific skepticism evident in her expression. She&#39;s heard similar claims before, and as a scientist in this unforgiving world, she&#39;s learned to trust cautiously. Her doubts are understandable, given the desperation of others who have tried to deceive her.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;laura&gt;&gt;
				Nice try. I bet you want me to extract it from you?
			&lt;&lt;/laura&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;...&#39;&gt;&gt;
				She takes a deep breath and a second later, she hand you a small cum where she expects you will cum. After that she goes away to other room.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;laura&gt;&gt;
					Call me when you&#39;re close. 
				&lt;&lt;/laura&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;linkreplace &#39;Take dick out and jerk off&#39;&gt;&gt;
					&lt;center&gt;
					  [img[setup.ImagePath+&#39;places/explore/toxic_rain_jerk.webp&#39;]]
				  &lt;/center&gt;
				  &lt;br /&gt;&lt;br /&gt;
				  		You take out your dick and slowly start to jerk yourself off. As Laura goes out of the room she takes a quick peek what your packing as she&#39;s exiting the room. &lt;br /&gt;
						Your dick slowly grows bigger and harder as you put more pressure on it.
				  &lt;br /&gt;&lt;br /&gt;
				  &lt;&lt;linkreplace &#39;Call for her&#39;&gt;&gt;
				  	&lt;center&gt;
					 	 [img[setup.ImagePath+&#39;places/explore/toxic_rain_cum.webp&#39;]]
				  	&lt;/center&gt;
				  	&lt;br /&gt;&lt;br /&gt;
				  		She enters the room slowly and confidently, looks at your dick, grabs it, and places it under the previously prepared transparent cup. The moment she wraps her hand around your dick you cum...
				  	&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;laura&gt;&gt;
						I hope this was worth it.. If tests will come back positive. I&#39;ll find you. You should leave now.
					&lt;&lt;/laura&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;link &#39;Leave&#39;&gt;&gt;
						&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
					&lt;&lt;/link&gt;&gt;
				  &lt;&lt;/linkreplace&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;</tw-passagedata><tw-passagedata pid="372" name="Laura - successful test" tags="" position="439,2622" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
Finally, one day, as you go about your daily tasks within your village, you notice a figure standing at the gate. Your heart skips a beat when you recognize Dr. Finch, her lab coat still bearing traces of the chemicals she&#39;s been working with. She holds a small paper in her hand.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/toxic_rain3.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;laura&gt;&gt;
	You bastard! You wasn&#39;t lying! Tests came back positive! 
	Can we talk? We need to talk!
&lt;&lt;/laura&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Invite her in&#39;&gt;&gt;
	As you approach the gates, you reach out to a rusted lever, a makeshift mechanism for opening and closing the entrance. With a firm pull, the gates creak open, revealing the bustling life within the village. The moment the gates start to move, you notice Dr. Finch&#39;s eyes widening in amazement.
	&lt;br /&gt;&lt;br /&gt;
	&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/laura_first_visit.jpg&#39;]]
&lt;/center&gt;
	&lt;br /&gt;&lt;br /&gt;
	As you both step inside, Dr. Finch takes in the sights and sounds of your village. She gazes at the resourceful architecture, the communal gardens, and the people going about their daily tasks. It&#39;s a place built on determination and cooperation, a sanctuary in the midst of chaos.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;laura&gt;&gt;
		Did you build all of this?
	&lt;&lt;/laura&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	&lt;div id=&quot;option_continue_button1&quot;&gt;
		&lt;&lt;linkreplace &#39;Yes&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option_continue&#39;).show()&gt;&gt;
			&lt;&lt;run $(&#39;#option_continue_button2&#39;).hide()&gt;&gt;
			&lt;&lt;you&gt;&gt;
				Yes. I did all this by myself. 
			&lt;&lt;/you&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option_continue_button2&quot;&gt;
		&lt;&lt;linkreplace &#39;Not just me, but everyone here&#39;&gt;&gt;
			&lt;&lt;run $(&#39;#option_continue&#39;).show()&gt;&gt;
			&lt;&lt;run $(&#39;#option_continue_button1&#39;).hide()&gt;&gt;
			&lt;&lt;you&gt;&gt;
				Not just me, but everyone here. We came together after the world changed and decided to create a haven where people could support one another and find a sense of purpose.
			&lt;&lt;/you&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	&lt;div id=&quot;option_continue&quot; style=&quot;display:none&quot;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;laura&gt;&gt;
			I&#39;m truly impressed with what you&#39;ve built here,
		&lt;&lt;/laura&gt;&gt;
		&lt;br /&gt;
		&lt;&lt;laura&gt;&gt;
			But there&#39;s something important we need to discuss regarding the sperm test results. It&#39;s a matter that requires discretion.
		&lt;&lt;/laura&gt;&gt;
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Go to your bedroom&#39;&gt;&gt;
			Dr. Finch nods in agreement, understanding the importance of discretion in your conversation. Together, you make your way to your bedroom, a small but cozy space where you can speak freely without the risk of eavesdropping.
			&lt;br /&gt;&lt;br /&gt;
			&lt;center&gt;
				[img[setup.ImagePath+&#39;places/cabin/laura_first_visit2.jpg&#39;]]
			&lt;/center&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;laura&gt;&gt;
				While analyzing the test results I also discovered something fascinating related to the growth potion. It appears that your genetic makeup has a unique compatibility with the enzyme we need for the potion&#39;s development.
			&lt;&lt;/laura&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;laura&gt;&gt;
				The possibilities are truly unlimited. With your unique genetic compatibility, we could create a potion that not only accelerates the growth of crops, producing larger and more bountiful harvests to help feed our community, but it could also be used for human applications.
			&lt;&lt;/laura&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;laura&gt;&gt;
				Imagine a potion that allows humans to age faster, reaching physical maturity and peak condition in a matter of days rather than years.
				&lt;br /&gt;
				But there&#39;s one more thing... I first need to make more tests and I am out of samples. I need them to continue my work. Can you help me with that?
			&lt;&lt;/laura&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;div id=&quot;option_cum1&quot;&gt;
				&lt;&lt;linkreplace &#39;How about you help me this time?&#39;&gt;&gt;
					&lt;&lt;run $(&#39;#option_cum2&#39;).hide()&gt;&gt;
					&lt;&lt;run $(&#39;#option_test&#39;).show()&gt;&gt;
					&lt;&lt;set $characters.laura.relationship++&gt;&gt;
					&lt;&lt;laura&gt;&gt;
						Eh, as much as I wouldn&#39;t like that. I really want those samples as they could benefit the world so much. 
					&lt;&lt;/laura&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;/div&gt;
			&lt;div id=&quot;option_cum2&quot;&gt;
				&lt;&lt;linkreplace &quot;I will do that right now&quot;&gt;&gt;
					&lt;&lt;run $(&#39;#option_cum1&#39;).hide()&gt;&gt;
					&lt;&lt;run $(&#39;#option_test&#39;).show()&gt;&gt;
					&lt;&lt;set $characters.laura.relationship +=2&gt;&gt;
					&lt;&lt;laura&gt;&gt;
						I have better idea. Take your pants off. I&#39;ll do it myself so we don&#39;t waste any of your samples.
					&lt;&lt;/laura&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;/div&gt;
			&lt;div id=&quot;option_test&quot; style=&quot;display:none;&quot;&gt;
				&lt;br /&gt;&lt;br /&gt;
				You pull down your pants and lay down on your bed. Before she starts she takes out gloves and puts them on with smile on her face. She gazes at your balls in amazement. 
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;video &#39;laura/sample_gloves&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				She firmly grabs your dick and slowly starts to jerk it off while still not taking eyes off your balls. 
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;video &#39;laura/sample_bj&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;laura&gt;&gt;
					If you don&#39;t hurry, this will take us the whole day.
				&lt;&lt;/laura&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				She significantly speeds up her hand movements and starts squeezing your balls with her other hand.
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;video &#39;laura/sample_bj2&#39;&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
					&lt;center&gt;
						[img[setup.ImagePath+&#39;people/laura/sample_cum.gif&#39;]]
					&lt;/center&gt;
					&lt;br /&gt;&lt;br /&gt;
					Before you cum she puts another sample cup in front of your dick and collects are cum you shoot out. 
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;laura&gt;&gt;
						Perfect! I can continue my research. I&#39;ll be back after few days with results. 
					&lt;&lt;/laura&gt;&gt;
					&lt;br /&gt;&lt;br /&gt;
					&lt;&lt;link &#39;Leave&#39;&gt;&gt;
						&lt;&lt;set $characters.laura.quests.successful_test = true&gt;&gt;
						&lt;&lt;set $characters.laura.quests.lastTestDay = $game.day&gt;&gt;
						&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
					&lt;&lt;/link&gt;&gt;
					&lt;&lt;horny_reset&gt;&gt;
				&lt;&lt;/linkreplace&gt;&gt;
			&lt;/div&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;/div&gt;
	
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="373" name="Laura - first vials" tags="" position="545,2624" size="100,100">&lt;h1 class=&quot;ptitle&quot;&gt;&lt;&lt;cabinName&gt;&gt;&lt;/h1&gt;
&lt;br /&gt;&lt;br /&gt;
As you go about your morning routine within the village, you spot a familiar figure standing at the gates. It&#39;s Dr. Laura Finch, her lab coat slightly dusty from her journey, and in her hand, she holds a collection of vials containing the samples you provided.
&lt;br /&gt;
A rush of curiosity and anticipation washes over you as you approach her.
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/explore/toxic_rain3.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
She smiles warmly, her eyes reflecting a mixture of excitement and determination.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;laura&gt;&gt;
	I&#39;ve got the first vials ready! The samples have been processed, and we&#39;re now at a point where we can begin testing the initial formulations of the growth potion.
&lt;&lt;/laura&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
Your heart leaps with excitement at the news. The moment you&#39;ve been waiting for has arrived. The potential of the growth potion, with its implications for the future of your post-apocalyptic world, feels more real than ever.

Together, you and Dr. Finch proceed into the village, discussing the next steps in the testing. The conversation is filled with anticipation as you prepare to embark on a new phase of your journey, one that could bring about profound changes and a brighter future in a world filled with challenges.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;laura&gt;&gt;
How do you propose we test it? And remember, we should start with just two vials per person. Giving more could lead to severe consequences, even death.
&lt;&lt;/laura&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
As you consider the best approach to testing the growth potion, you decide not to share the full details with Dr. Laura Finch, particularly if it involves infants or young children. You believe that revealing such information might not align with her ethical stance or could potentially raise concerns about the safety and well-being of the participants.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;laura&gt;&gt;
	Anyway, here you go. In the future you&#39;ll need to help me with other ingredients as my last place was raided. 
&lt;&lt;/laura&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;center&gt;
	[img[setup.ImagePath+&#39;places/cabin/laura_vials.jpg&#39;]]
&lt;/center&gt;
&lt;br /&gt;&lt;br /&gt;
Dr. Laura Finch carefully hands you four vials containing the initial formulations of the growth potion. The vials gleam in the soft morning light, their contents holding the promise of profound change and potential for your post-apocalyptic world.
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;linkreplace &#39;Take vials&#39;&gt;&gt;
	&lt;&lt;pickup $backpack &#39;growth_potion&#39; 4&gt;&gt;
	&lt;strong&gt;You picked up &lt;strong class=&quot;iitem&quot;&gt;4 growth potions&lt;/strong&gt;&lt;/strong&gt;
	&lt;br /&gt;&lt;br /&gt;
	As you accept the four vials containing the initial formulations of the growth potion from Dr. Laura Finch, you notice a slight blush coloring her cheeks.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;laura&gt;&gt;
		I know we have the initial vials, but to ensure the potency and reliability of the potion, I might need a few more samples for further testing. It&#39;s essential for the success of our research. 
	&lt;&lt;/laura&gt;&gt;
	&lt;br /&gt;&lt;br /&gt;
	You pause for a moment, considering the implications of her request. It&#39;s clear that Dr. Finch is committed to her work and believes that these samples are crucial for the project&#39;s success. At the same time, you&#39;re aware of the delicate nature of the request.
	&lt;br /&gt;&lt;br /&gt;
	&lt;&lt;linkreplace &#39;Invite her to your bedroom&#39;&gt;&gt;
		Dr. Finch agrees, and you both make your way to your bedroom. Once inside, she takes out a pair of gloves, a clear indication of the sensitive nature of the task at hand. The gloves serve as a reminder of the importance of maintaining a sterile and controlled environment for the sample collection.
		&lt;br /&gt;&lt;br /&gt;
		&lt;&lt;linkreplace &#39;Tell her you will need some motivation&#39;&gt;&gt;
			&lt;&lt;laura&gt;&gt;
				I had a feeling that you would say that.
			&lt;&lt;/laura&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			She takes of leather jacket and reveals that she&#39;s wearing silk robe. She opens it sexually and her breasts flashes out. This time look like she wants to enjoy the moment a bit more and grabs your dick but starts with slow movements.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;video &#39;laura/sample2_1&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;laura&gt;&gt;
				How are you feeling? Is this enough of motivation?
			&lt;&lt;/laura&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;video &#39;laura/sample2_2&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			She slowly slides her hand across her breasts and pinches her nipples as he jerks you off and talks with you in the same time.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;video &#39;laura/sample2_3&#39;&gt;&gt;
			&lt;br /&gt;&lt;br /&gt;
			After approximately 10 minutes, she returns to the previous pace. It&#39;s possible she got bored or she simply wants to get back to sample testing.
			&lt;br /&gt;&lt;br /&gt;
			&lt;&lt;linkreplace &#39;Cum&#39;&gt;&gt;
				&lt;center&gt;
					[img[setup.ImagePath+&#39;people/laura/sample_cum.gif&#39;]]
				&lt;/center&gt;
				&lt;br /&gt;&lt;br /&gt;
				Before you cum she puts another sample cup in front of your dick and collects are cum you shoot out. 
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;laura&gt;&gt;
					I will return in a couple of days. Hopefully, by then, you will have found a way to test them.
				&lt;&lt;/laura&gt;&gt;
				&lt;br /&gt;&lt;br /&gt;
				&lt;&lt;link &#39;Leave&#39;&gt;&gt;
					&lt;&lt;set $characters.laura.quests.first_vials = true&gt;&gt;
					&lt;&lt;set $characters.laura.quests.lastTestDay = $game.day&gt;&gt;
					&lt;&lt;goto &#39;Outside&#39;&gt;&gt;
				&lt;&lt;/link&gt;&gt;
				&lt;&lt;horny_reset&gt;&gt;
			&lt;&lt;/linkreplace&gt;&gt;
		&lt;&lt;/linkreplace&gt;&gt;
	&lt;&lt;/linkreplace&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;
</tw-passagedata><tw-passagedata pid="374" name="Child view" tags="girlview sex no-redirect" position="4010,103" size="100,100">&lt;&lt;if $backpack.has(&#39;growth_potion&#39;)&gt;&gt;
	&lt;&lt;link &#39;Give growth potion&#39;&gt;&gt;
		&lt;&lt;goto &#39;Give growth potion&#39;&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Nursery&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata><tw-passagedata pid="375" name="Give growth potion" tags="WIP" position="4011,208" size="100,100">&lt;&lt;warning &#39;End of content. Growth mechanics will be added in 0.23 or 0.24 release&#39;&gt;&gt;
&lt;br /&gt;&lt;br /&gt;
&lt;&lt;link &#39;Leave&#39;&gt;&gt;
	&lt;&lt;goto &#39;Child view&#39;&gt;&gt;
&lt;&lt;/link&gt;&gt;</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.freeze(Object.defineProperties({},{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),Object.freeze({space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;return depth<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?acc.push.apply(acc,_toConsumableArray(flat.call(cur,depth-1))):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _nativeMathRandom=Math.random,_regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(array){if("object"!==_typeof(array)||null===array||!Object.prototype.hasOwnProperty.call(array,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var length=array.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments,1));return array[index]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=_toConsumableArray(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return this[index]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){var value=Number(num);return Number.isNaN(value)?NaN:value.clamp(min,max)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return 1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var min=Number(arguments[0]),max=Number(arguments[1]);if(min>max){var _ref2=[max,min];min=_ref2[0],max=_ref2[1]}return Math.min(Math.max(this,min),max)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){function padString(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?_toConsumableArray(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return padString(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","(".concat(this.toString(),")")]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",_toConsumableArray(this)]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",_toConsumableArray(this)]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if("string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[code,data]]}}),Object.defineProperty(JSON,"_real_stringify",{value:JSON.stringify}),Object.defineProperty(JSON,"stringify",{configurable:!0,writable:!0,value:function(_value,replacer,space){return JSON._real_stringify(_value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}return void 0===value&&(value=["(revive:eval)","undefined"]),value}),space)}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,(function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(ex){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(ex){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var match,re=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),names=[];null!==(match=re.exec(this));)match[1]?names.push(match[1]):match[2]&&names.push(match[2]);return names}})}();var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze({userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi})),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=_toConsumableArray(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze({audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent})),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){var _this=this;if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){jQuery(element).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){var _this2=this;if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){jQuery(document).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this2).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.changeEvent,handlerFn):$(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.errorEvent,handlerFn):$(element).off(vendor.errorEvent)}}}}))}(),_ref3=Object.freeze(Object.defineProperties({},{clone:{value:function clone(orig){return"object"!==_typeof(orig)||null===orig?orig:orig instanceof String?String(orig):orig instanceof Number?Number(orig):orig instanceof Boolean?Boolean(orig):"function"==typeof orig.clone?orig.clone(!0):orig.nodeType&&"function"==typeof orig.cloneNode?orig.cloneNode(!0):(orig instanceof Array?copy=new Array(orig.length):orig instanceof Date?copy=new Date(orig.getTime()):orig instanceof Map?(copy=new Map,orig.forEach((function(val,key){return copy.set(key,clone(val))}))):orig instanceof RegExp?copy=new RegExp(orig):orig instanceof Set?(copy=new Set,orig.forEach((function(val){return copy.add(clone(val))}))):copy=Object.create(Object.getPrototypeOf(orig)),Object.keys(orig).forEach((function(name){return copy[name]=clone(orig[name])})),copy);var copy}},convertBreaks:{value:function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),output.appendChild(para),para=document.createElement("p");continue}if(!para.hasChildNodes()){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":para.hasChildNodes()&&(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}para.hasChildNodes()&&output.appendChild(para),source.appendChild(output)}},safeActiveElement:{value:function(){try{return document.activeElement||null}catch(ex){return null}}},setDisplayTitle:{value:function(title){if("string"!=typeof title)throw new TypeError("story display title must be a string (received: ".concat(Util.getType(title),")"));var render=document.createDocumentFragment();new Wikifier(render,title);var text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim();document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text;var storyTitle=document.getElementById("story-title");null!==storyTitle&&jQuery(storyTitle).empty().append(render)}},setPageElement:{value:function(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=Array.isArray(titles)?titles:[titles];jQuery(el).empty();for(var i=0,iend=ids.length;i<iend;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}},throwError:{value:function(place,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(place),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}},stringFrom:{value:function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}return value instanceof Node?value.textContent:"function"==typeof value.toString?value.toString():Object.prototype.toString.call(value);case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}}})),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setDisplayTitle=_ref3.setDisplayTitle,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,stringFrom=_ref3.stringFrom;!function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function oneClickFnWrapper(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",0),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?oneClickFnWrapper(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true")})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true")}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled")}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))}});var Util=function(){var toString,utilGetType="[object Object]"===(toString=Object.prototype.toString).call(new Map)?function(O){if(null===O)return"null";if(O instanceof Map)return"Map";if(O instanceof Set)return"Set";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType}:function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType};function utilToEnum(obj){var pEnum=Object.create(null);if(obj instanceof Array)obj.forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Set)Array.from(obj).forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Map)obj.forEach((function(val,key){return pEnum[String(key)]=val}));else{if("object"!==_typeof(obj)||null===obj||Object.getPrototypeOf(obj)!==Object.prototype)throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,obj)}return Object.freeze(pEnum)}function utilToStringTag(obj){return Object.prototype.toString.call(obj).slice(8,-1)}var _illegalSlugCharsRe=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,_isInvalidSlugRe=/^-*$/;var _illegalFilenameCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g;var _markupCharsRe=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,_hasMarkupCharsRe=new RegExp(_markupCharsRe.source),_markupCharsMap=utilToEnum({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"});var _htmlCharsRe=/[&<>"'`]/g,_hasHtmlCharsRe=new RegExp(_htmlCharsRe.source),_htmlCharsMap=utilToEnum({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"});function utilEscape(str){if(null==str)return"";var val=String(str);return val&&_hasHtmlCharsRe.test(val)?val.replace(_htmlCharsRe,(function(ch){return _htmlCharsMap[ch]})):val}var _escapedHtmlRe=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,_hasEscapedHtmlRe=new RegExp(_escapedHtmlRe.source,"i"),_escapedHtmlMap=utilToEnum({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"});function utilUnescape(str){if(null==str)return"";var val=String(str);return val&&_hasEscapedHtmlRe.test(val)?val.replace(_escapedHtmlRe,(function(entity){return _escapedHtmlMap[entity.toLowerCase()]})):val}var _nowSource=Has.performance?performance:Date;var _cssTimeRe=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;var utilScrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),utilHasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches};return Object.freeze(Object.defineProperties({},{getType:{value:utilGetType},isBoolean:{value:function(obj){return"boolean"==typeof obj||"string"==typeof obj&&("true"===obj||"false"===obj)}},isIterable:{value:function(obj){return null!=obj&&"function"==typeof obj[Symbol.iterator]}},isNumeric:{value:function(obj){var num;switch(_typeof(obj)){case"number":num=obj;break;case"string":num=Number(obj);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}},sameValueZero:{value:function(a,b){return a===b||a!=a&&b!=b}},toEnum:{value:utilToEnum},toStringTag:{value:utilToStringTag},slugify:{value:function(str){var base=String(str).trim(),_legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return _isInvalidSlugRe.test(_legacy)?base.replace(_illegalSlugCharsRe,"").replace(/[_\s\u2013\u2014-]+/g,"-"):_legacy}},sanitizeFilename:{value:function(str){return String(str).trim().replace(_illegalFilenameCharsRE,"")}},escapeMarkup:{value:function(str){if(null==str)return"";var val=String(str);return val&&_hasMarkupCharsRe.test(val)?val.replace(_markupCharsRe,(function(ch){return _markupCharsMap[ch]})):val}},escape:{value:utilEscape},unescape:{value:utilUnescape},charAndPosAt:{value:function(text,position){var str=String(text),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}},now:{value:function(){return _nowSource.now()}},fromCssTime:{value:function(cssTime){var match=_cssTimeRe.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}},toCssTime:{value:function(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=utilToStringTag(msec)}throw new Error("invalid milliseconds: ".concat(what))}return"".concat(msec,"ms")}},fromCssProperty:{value:function(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}},parseUrl:{value:function(url){var el=document.createElement("a"),queryObj=Object.create(null);el.href=url,el.search&&el.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];queryObj[key]=value}));var pathname=el.host&&"/"!==el.pathname[0]?"/".concat(el.pathname):el.pathname;return{href:el.href,protocol:el.protocol,host:el.host,hostname:el.hostname,port:el.port,path:"".concat(pathname).concat(el.search),pathname:pathname,query:el.search,search:el.search,queries:queryObj,searches:queryObj,hash:el.hash}}},newExceptionFrom:{value:function(original,exceptionType,override){if("object"!==_typeof(original)||null===original)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var ex=new exceptionType(original.message);void 0!==original.name&&(ex.name=original.name),void 0!==original.code&&(ex.code=original.code),void 0!==original.columnNumber&&(ex.columnNumber=original.columnNumber),void 0!==original.description&&(ex.description=original.description),void 0!==original.fileName&&(ex.fileName=original.fileName),void 0!==original.lineNumber&&(ex.lineNumber=original.lineNumber),void 0!==original.number&&(ex.number=original.number),void 0!==original.stack&&(ex.stack=original.stack);var overrideType=_typeof(override);if("undefined"!==overrideType)if("object"===overrideType&&null!==override)Object.assign(ex,override);else{if("string"!==overrideType)throw new Error("Util.newExceptionFrom override parameter must be an object or string");ex.message=override}return ex}},scrubEventKey:{value:utilScrubEventKey},hasMediaQuery:{value:utilHasMediaQuery},random:{value:Math.random},entityEncode:{value:utilEscape},entityDecode:{value:utilUnescape},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=(_adapters=[],_initialized=null,Object.freeze(Object.defineProperties({},{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("no valid storage adapters found")}}}))),_adapters,_initialized,_ok,_WebStorageAdapter;SimpleStore.adapters.push((_ok=!1,_WebStorageAdapter=function(){function _WebStorageAdapter(storageId,persistent){_classCallCheck(this,_WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_WebStorageAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&this._engine.hasOwnProperty(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:_WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,_WebStorageAdapter._serialize(value))}catch(ex){if(/quota.?(?:exceeded|reached)/i.test(ex.name+ex.message))throw Util.newExceptionFrom(ex,Error,"".concat(this.name," quota exceeded"));throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key||(this._engine.removeItem(this._prefix+key),0))}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromUTF16(str))}}]),_WebStorageAdapter}(),Object.freeze(Object.defineProperties({},{init:{value:function(){function hasWebStorage(storeId){try{var store=window[storeId],tid="_sc_".concat(String(Date.now()));store.setItem(tid,tid);var result=store.getItem(tid)===tid;return store.removeItem(tid),result}catch(ex){}return!1}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _WebStorageAdapter(storageId,persistent)}}})))),SimpleStore.adapters.push(function(){var _MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,_CookieAdapter=function(){function _CookieAdapter(storageId,persistent){_classCallCheck(this,_CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_CookieAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(this._prefixRe.test(key))""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==_CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=_CookieAdapter._getCookie(this._prefix+key);return null===value?null:_CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,_CookieAdapter._serialize(value),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromBase64(str))}}]),_CookieAdapter}();return Object.freeze(Object.defineProperties({},{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));_CookieAdapter._setCookie(tid,_CookieAdapter._serialize(tid),undefined),_ok=_CookieAdapter._deserialize(_CookieAdapter._getCookie(tid))===tid,_CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""===document.cookie)return;for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);""!==value&&function(){var persist=!sessionTestRe.test(key);_CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),_CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}()}}}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _CookieAdapter(storageId,persistent)}}}))}());var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?DebugView.disable():DebugView.enable()}}]),DebugView}(),NodeTyper=function(){var NodeTyper=function(){function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(Util.getType(config),")"));if(!(config.hasOwnProperty("targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}return _createClass(NodeTyper,[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _Util$charAndPosAt=Util.charAndPosAt(this.nodeValue,0),char=_Util$charAndPosAt.char,start=_Util$charAndPosAt.start,end=_Util$charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}]),NodeTyper}();return NodeTyper}(),PRNGWrapper=function(){function PRNGWrapper(seed,useEntropy){_classCallCheck(this,PRNGWrapper),Object.defineProperties(this,new Math.seedrandom(seed,useEntropy,(function(prng,seed){return{_prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}})))}return _createClass(PRNGWrapper,null,[{key:"marshal",value:function(prng){if(!prng||!prng.hasOwnProperty("seed")||!prng.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:prng.seed,pull:prng.pull}}},{key:"unmarshal",value:function(prngObj){if(!prngObj||!prngObj.hasOwnProperty("seed")||!prngObj.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var prng=new PRNGWrapper(prngObj.seed,!1),i=prngObj.pull;i>0;--i)prng.random();return prng}}]),PRNGWrapper}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}return _createClass(StyleWrapper,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),StyleWrapper}()),_imageMarkupRe,_hasImageMarkupRe,Diff=(Op=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3}),Object.freeze(Object.defineProperties({},{Op:{value:Op},diff:{value:function diff(orig,dest){for(var aOpRef,objToString=Object.prototype.toString,origIsArray=orig instanceof Array,keys=[].concat(Object.keys(orig),Object.keys(dest)).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),diffed={},keyIsAOpRef=function(key){return key===aOpRef},i=0,klen=keys.length;i<klen;++i){var key=keys[i],origP=orig[key],destP=dest[key];if(orig.hasOwnProperty(key))if(dest.hasOwnProperty(key)){if(origP===destP)continue;if(_typeof(origP)===_typeof(destP))if("function"==typeof origP)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,destP]);else if("object"!==_typeof(origP)||null===origP)diffed[key]=[Op.Copy,destP];else{var origPType=objToString.call(origP);if(origPType===objToString.call(destP))if(origP instanceof Date)Number(origP)!==Number(destP)&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Map)diffed[key]=[Op.Copy,clone(destP)];else if(origP instanceof RegExp)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Set)diffed[key]=[Op.Copy,clone(destP)];else if("[object Object]"!==origPType)diffed[key]=[Op.Copy,clone(destP)];else{var recurse=diff(origP,destP);null!==recurse&&(diffed[key]=recurse)}else diffed[key]=[Op.Copy,clone(destP)]}else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}else if(origIsArray&&Util.isNumeric(key)){var nKey=Number(key);if(!aOpRef){aOpRef="";do{aOpRef+="~"}while(keys.some(keyIsAOpRef));diffed[aOpRef]=[Op.SpliceArray,nKey,nKey]}nKey<diffed[aOpRef][1]&&(diffed[aOpRef][1]=nKey),nKey>diffed[aOpRef][2]&&(diffed[aOpRef][2]=nKey)}else diffed[key]=Op.Delete;else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}return Object.keys(diffed).length>0?diffed:null}},patch:{value:function patch(orig,diffed){for(var keys=Object.keys(diffed||{}),patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],diffedP=diffed[key];if(diffedP===Op.Delete)delete patched[key];else if(diffedP instanceof Array)switch(diffedP[0]){case Op.SpliceArray:patched.splice(diffedP[1],diffedP[2]-diffedP[1]+1);break;case Op.Copy:patched[key]=clone(diffedP[1]);break;case Op.CopyDate:patched[key]=new Date(diffedP[1])}else patched[key]=patch(patched[key],diffedP)}return patched}}}))),Op,L10n=(_patternRe=/\{\w+\}/g,_hasPatternRe=new RegExp(_patternRe.source),Object.freeze(Object.defineProperties({},{init:{value:function(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach((function(id){try{var value;switch(id){case"identity":value=strings.identity;break;case"aborting":value=strings.aborting;break;case"cancel":value=strings.cancel;break;case"close":value=strings.close;break;case"ok":value=strings.ok;break;case"errorTitle":value=strings.errors.title;break;case"errorNonexistentPassage":value=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":value=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":value=strings.errors.saveIdMismatch;break;case"warningDegraded":value=strings.warnings.degraded;break;case"debugViewTitle":value=strings.debugView.title;break;case"debugViewToggle":value=strings.debugView.toggle;break;case"uiBarToggle":value=strings.uiBar.toggle;break;case"uiBarBackward":value=strings.uiBar.backward;break;case"uiBarForward":value=strings.uiBar.forward;break;case"uiBarJumpto":value=strings.uiBar.jumpto;break;case"jumptoTitle":value=strings.jumpto.title;break;case"jumptoTurn":value=strings.jumpto.turn;break;case"jumptoUnavailable":value=strings.jumpto.unavailable;break;case"savesTitle":value=strings.saves.title;break;case"savesDisallowed":value=strings.saves.disallowed;break;case"savesIncapable":value=strings.saves.incapable;break;case"savesLabelAuto":value=strings.saves.labelAuto;break;case"savesLabelDelete":value=strings.saves.labelDelete;break;case"savesLabelExport":value=strings.saves.labelExport;break;case"savesLabelImport":value=strings.saves.labelImport;break;case"savesLabelLoad":value=strings.saves.labelLoad;break;case"savesLabelClear":value=strings.saves.labelClear;break;case"savesLabelSave":value=strings.saves.labelSave;break;case"savesLabelSlot":value=strings.saves.labelSlot;break;case"savesUnavailable":value=strings.saves.unavailable;break;case"savesUnknownDate":value=strings.saves.unknownDate;break;case"settingsTitle":value=strings.settings.title;break;case"settingsOff":value=strings.settings.off;break;case"settingsOn":value=strings.settings.on;break;case"settingsReset":value=strings.settings.reset;break;case"restartTitle":value=strings.restart.title;break;case"restartPrompt":value=strings.restart.prompt;break;case"shareTitle":value=strings.share.title;break;case"alertTitle":break;case"autoloadTitle":value=strings.autoload.title;break;case"autoloadCancel":value=strings.autoload.cancel;break;case"autoloadOk":value=strings.autoload.ok;break;case"autoloadPrompt":value=strings.autoload.prompt;break;case"macroBackText":value=strings.macros.back.text;break;case"macroReturnText":value=strings.macros.return.text}value&&(l10nStrings[id]=value.replace(/%\w+%/g,(function(pat){return"{".concat(pat.slice(1,-1),"}")})))}catch(ex){}}))}},get:{value:function(ids,overrides){if(!ids)return"";var selectedId,id=((Array.isArray(ids)?ids:[ids]).some((function(id){return!!l10nStrings.hasOwnProperty(id)&&(selectedId=id,!0)})),selectedId);if(!id)return"";for(var processed=l10nStrings[id],iteration=0;_hasPatternRe.test(processed);){if(++iteration>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");_patternRe.lastIndex=0,processed=processed.replace(_patternRe,(function(pat){var subId=pat.slice(1,-1);return overrides&&overrides.hasOwnProperty(subId)?overrides[subId]:l10nStrings.hasOwnProperty(subId)?l10nStrings[subId]:void 0}))}return processed}}}))),_patternRe,_hasPatternRe,strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveDiskLoadFailed:"failed to load save file from disk",errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",alertTitle:"Alert",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=(_debug=!1,_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosIfAssignmentError=!0,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesId="untitled-story",_savesSlots=8,_savesTryDiskOnMobile=!0,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,_errHistoryModeDeprecated="Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code",Object.freeze({get debug(){return _debug},set debug(value){_debug=Boolean(value)},get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)},get mode(){throw new Error(_errHistoryModeDeprecated)},set mode(_){throw new Error(_errHistoryModeDeprecated)},get tracking(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")},set tracking(_){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}}),macros:Object.freeze({get ifAssignmentError(){return _macrosIfAssignmentError},set ifAssignmentError(value){_macrosIfAssignmentError=Boolean(value)},get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_navigationOverride=value}}),passages:Object.freeze({get descriptions(){return _passagesDescriptions},set descriptions(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"Object"!==valueType&&"function"!==valueType)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(valueType,")"))}_passagesDescriptions=value},get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=Util.getType(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value}}),saves:Object.freeze({get autoload(){return _savesAutoload},set autoload(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"string"!==valueType&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){return _savesAutosave},set autosave(value){if(null!=value){var valueType=Util.getType(value);if("string"===valueType)return void(_savesAutosave=[value]);if("boolean"!==valueType&&("Array"!==valueType||!value.every((function(item){return"string"==typeof item})))&&"function"!==valueType)throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}_savesAutosave=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(Util.getType(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_savesIsAllowed=value},get slots(){return _savesSlots},set slots(value){if(!Number.isSafeInteger(value)||value<0)throw new TypeError("Config.saves.slots must be a non-negative integer (received: ".concat(Util.getType(value),")"));_savesSlots=value},get tryDiskOnMobile(){return _savesTryDiskOnMobile},set tryDiskOnMobile(value){_savesTryDiskOnMobile=Boolean(value)},get version(){return _savesVersion},set version(value){_savesVersion=value},get onLoad(){throw new Error("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead")},set onLoad(value){console.warn("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead"),Save.onLoad.add(value)},get onSave(){throw new Error("Config.saves.onSave has been deprecated, use the Save.onSave API instead")},set onSave(value){console.warn("Config.saves.onSave has been deprecated, use the Save.onSave API instead"),Save.onSave.add(value)}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=Util.getType(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesDescriptions,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesAutoload,_savesAutosave,_savesIsAllowed,_savesVersion,_debug,_addVisitedLinkClass,_cleanupWikifierOutput,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosIfAssignmentError,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesId,_savesSlots,_savesTryDiskOnMobile,_uiStowBarInitially,_uiUpdateStoryElements,_errHistoryModeDeprecated,SimpleAudio=function(){var _hasPromise,_gestureEventNames=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(Util.parseUrl(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!src.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!src.hasOwnProperty("format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this3=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this3._error=!1})).on("error.AudioTrack",(function(){return _this3._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this3._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this3.audio)switch(mesg){case"loadwithscreen":if(_this3.hasSource()){var lockId=LoadScreen.lock();_this3.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this3.load();break;case"mute":_this3._updateAudioMute();break;case"rate":_this3._updateAudioRate();break;case"stop":_this3.stop();break;case"volume":_this3._updateAudioVolume();break;case"unload":_this3.unload()}else unsubscribe(_this3)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){jQuery(this.audio).triggerHandler(eventName)}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this4=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this4.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this5=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this5.isPlaying()?resolve():(jQuery(_this5.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this5).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this5.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this6=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioTrack_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),_this6.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this7=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this7._trigger(":fading"),_this7._faderId=setInterval((function(){_this7.isPlaying()?(_this7.volume(Math.clamp(_this7.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this7.volume()&&_this7.pause(),_this7.volume()===to&&(_this7.fadeStop(),_this7._trigger(":faded"))):_this7.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop){return null==_loop?this.audio.loop:(this.audio.loop=!!_loop,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this8=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this8.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}]),AudioTrack}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioList,[{key:"_create",value:function(trackList){var _this9=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!trackObj.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=trackObj.hasOwnProperty("own")&&trackObj.own,rate=trackObj.hasOwnProperty("rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=trackObj.hasOwnProperty("volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this9._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this10=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioList_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioList_playWhenAllowed"),_this10.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop2){return null==_loop2?this._loop:(this._loop=!!_loop2,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this11=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIdx=this.queue.findIndex((function(trackObj){return trackObj===_this11.current}));if(-1!==firstIdx)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIdx+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),AudioList}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop3){if(null==_loop3)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop3),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}]),AudioRunner}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parentheticals');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(":"!==parent.id[0])throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(":"!==id[0]||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!desc.hasOwnProperty("id")&&!desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(desc.hasOwnProperty("id")&&desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(desc.hasOwnProperty("id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(desc.hasOwnProperty("sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(desc.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(desc.hasOwnProperty("own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(desc.hasOwnProperty("volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;default:ids=":"===id[0]?_groups.get(id):[id]}if(idObj.hasOwnProperty("not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_tempVariables={};function stateMarshal(noDelta){var stateObj={index:_activeIndex};return noDelta?stateObj.history=clone(_history):stateObj.delta=historyDeltaEncode(_history),_expired.length>0&&(stateObj.expired=_toConsumableArray(_expired)),null!==_prng&&(stateObj.seed=_prng.seed),stateObj}function stateUnmarshal(stateObj,noDelta){if(null==stateObj)throw new Error("state object is null or undefined");if(!stateObj.hasOwnProperty(noDelta?"history":"delta")||0===stateObj[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!stateObj.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==_prng&&!stateObj.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&stateObj.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(stateObj.history):historyDeltaDecode(stateObj.delta),_activeIndex=stateObj.index,_expired=stateObj.hasOwnProperty("expired")?_toConsumableArray(stateObj.expired):[],stateObj.hasOwnProperty("seed")&&(_prng.seed=stateObj.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=PRNGWrapper.unmarshal({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),jQuery.event.trigger(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngInit(seed,useEntropy){var scriptSection;if(!historyIsEmpty())throw scriptSection="the Story JavaScript",new Error("State.prng.init must be called during initialization, within either ".concat(scriptSection," or the StoryInit special passage"));_prng=new PRNGWrapper(seed,useEntropy),_active.pull=_prng.pull}function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");store&&store.hasOwnProperty(key)&&(1===Object.keys(store).length?storage.delete("metadata"):(delete store[key],storage.set("metadata",store)))}return Object.freeze(Object.defineProperties({},{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:new PRNGWrapper(_prng.seed,!1)}},restore:{value:function(){if(session.has("state")){var stateObj=session.get("state");return null!=stateObj&&(stateUnmarshal(stateObj),!0)}return!1}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(stateObj){return stateUnmarshal(stateObj,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:prngInit},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return _prng?_prng.pull:NaN}},seed:{get:function(){return _prng?_prng.seed:null}}}))},random:{value:function(){return _prng?_prng.random():Math.random()}},clearTemporary:{value:function(){TempVariables=_tempVariables={}}},temporary:{get:function(){return _tempVariables}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = evalTwineScript$Data$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:function(){storage.delete("metadata")}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get("metadata");return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)}},keys:{value:function(){var store=storage.get("metadata");return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get("metadata")||{};store[key]=value,storage.set("metadata",store)}}},size:{get:function(){var store=storage.get("metadata");return store?Object.keys(store).length:0}}}))},initPRNG:{value:prngInit},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(targets,selector,handler,one,namespace){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var fn,opts;if("function"==typeof selector?(fn=selector,opts={namespace:one,one:!!handler}):(fn=handler,opts={namespace:namespace,one:!!one,selector:selector}),"function"!=typeof fn)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(targets).ariaClick(opts,fn)}function insertElement(place,type,id,classNames,text,title){var $el=jQuery(document.createElement(type));return id&&$el.attr("id",id),classNames&&$el.addClass(classNames),title&&$el.attr("title",title),text&&$el.text(text),place&&$el.appendTo(place),$el[0]}function insertText(place,text){jQuery(place).append(document.createTextNode(text))}function removeChildren(node){jQuery(node).empty()}function removeElement(node){jQuery(node).remove()}function fade(el,options){var current,intervalId,direction="in"===options.fade?1:-1,proxy=el.cloneNode(!0);function setOpacity(el,opacity){el.style.zoom=1,el.style.filter="alpha(opacity=".concat(Math.floor(100*opacity),")"),el.style.opacity=opacity}el.parentNode.replaceChild(proxy,el),"in"===options.fade?(current=0,proxy.style.visibility="visible"):current=1,setOpacity(proxy,current),intervalId=window.setInterval((function(){current+=.05*direction,setOpacity(proxy,Math.easeInOut(current)),(1===direction&&current>=1||-1===direction&&current<=0)&&(el.style.visibility="in"===options.fade?"visible":"hidden",proxy.parentNode.replaceChild(el,proxy),proxy=null,window.clearInterval(intervalId),options.onComplete&&options.onComplete())}),25)}function scrollWindowTo(el,incrementBy){var increment=null!=incrementBy?Number(incrementBy):.1;Number.isNaN(increment)||!Number.isFinite(increment)||increment<0?increment=.1:increment>1&&(increment=1);var intervalId,start=window.scrollY?window.scrollY:document.body.scrollTop,end=function(el){var posTop=function(el){var curtop=0;for(;el.offsetParent;)curtop+=el.offsetTop,el=el.offsetParent;return curtop}(el),posBottom=posTop+el.offsetHeight,winTop=window.scrollY?window.scrollY:document.body.scrollTop,winHeight=window.innerHeight?window.innerHeight:document.body.clientHeight,winBottom=winTop+winHeight;return posTop>=winTop&&posBottom>winBottom&&el.offsetHeight<winHeight?posTop-(winHeight-el.offsetHeight)+20:posTop}(el),distance=Math.abs(start-end),direction=start>end?-1:1,progress=0;intervalId=window.setInterval((function(){progress+=increment,window.scroll(0,start+direction*(distance*Math.easeInOut(progress))),progress>=1&&window.clearInterval(intervalId)}),25)}function toStringOrDefault(value){return stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0,iend=needles.length;i<iend;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0,iend=needles.length;i<iend&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new Error("random min parameter must be an integer");if(!Number.isInteger(max))throw new Error("random max parameter must be an integer");if(min>max){var _ref6=[max,min];min=_ref6[0],max=_ref6[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new Error("randomFloat max parameter must be a number");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(Util.getType(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0,iend=passages.length;i<iend;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0,iend=needles.length;i<iend&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0,iend=played.length;i<iend;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref8=function(){function slugifyUrl(url){return Util.parseUrl(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(url,'".')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(url)),type:"text/javascript",src:url})}))}function addStyle(url){return new Promise((function(resolve,reject){jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'".')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){var tokenTable=Util.toEnum({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),parseRe=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),notSpaceRe=/\S/,varTest=new RegExp("^".concat(Patterns.variable)),withColonTestRe=/^\s*:/,withNotTestRe=/^\s+not\b/;function parse(rawCodeString){if(0!==parseRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var match,code=rawCodeString;null!==(match=parseRe.exec(code));)if(match[1]){var rawTemplate=match[1],parsedTemplate=parseTemplate(rawTemplate);parsedTemplate!==rawTemplate&&(code=code.splice(match.index,rawTemplate.length,parsedTemplate),parseRe.lastIndex+=parsedTemplate.length-rawTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;if(varTest.test(token))token=token[0];else if("is"===token){var start=parseRe.lastIndex,ahead=code.slice(start);withNotTestRe.test(ahead)&&(code=code.splice(start,ahead.search(notSpaceRe)),token="isnot")}else{var _ahead=code.slice(parseRe.lastIndex);if(withColonTestRe.test(_ahead))continue}tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),parseRe.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRe=/\$\{/g,templateGroupParseRe=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function parseTemplate(rawTemplateLiteral){if(0!==templateGroupStartRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start of template literal");for(var startMatch,template=rawTemplateLiteral;null!==(startMatch=templateGroupStartRe.exec(template));){var startIdx=startMatch.index+2,endIdx=startIdx,depth=1,endMatch=void 0;for(templateGroupParseRe.lastIndex=startIdx;null!==(endMatch=templateGroupParseRe.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIdx=endMatch.index;break}if(endIdx>startIdx){var parseIndex=parseRe.lastIndex,rawGroup=template.slice(startIdx,endIdx);parseRe.lastIndex=0;var parsedGroup=parse(rawGroup);parseRe.lastIndex=parseIndex,template=template.splice(startIdx,rawGroup.length,parsedGroup),templateGroupStartRe.lastIndex+=parsedGroup.length-rawGroup.length}}return template}return parse}();function evalJavaScript(code,output,data){return function(code,output,evalJavaScript$Data$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,evalTwineScript$Data$){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output,data)}return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){var Lexer=function(){function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(Lexer,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}]),Lexer}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var _optionsStack,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==destination?this.output=document.createDocumentFragment():destination.jquery?this.output=destination[0]:this.output=destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}},{key:"isExternalLink",value:function(link){return!Story.has(link)&&(new RegExp("^".concat(Patterns.url),"gim").test(link)||/[/.?#]/.test(link))}}]),Wikifier}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.freeze(Object.defineProperties({},{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(idx){return _optionsStack[idx]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(Util.getType(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.freeze(Object.defineProperties({},{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!parser.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!parser.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!parser.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(parser.hasOwnProperty("profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&_profiles.hasOwnProperty(profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!_profiles.hasOwnProperty(profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[Util.fromCssProperty(match[1])]=match[2].trim();else if(match[3])css.styles[Util.fromCssProperty(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){var macroParser=null;function getMacroContextShadowView(){for(var macro=macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser');return macroParser}(),view=new Set,context=macro.context;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return _toConsumableArray(view)}return function(code){var shadowStore={};return getMacroContextShadowView().forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}}()},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return throwError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return throwError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,throwError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return throwError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return throwError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.parse(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(markup.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=markup.hasOwnProperty("text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.title)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),markup.hasOwnProperty("align")&&(arg.align=markup.align),markup.hasOwnProperty("text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):link,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",markup.hasOwnProperty("link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,el=(Config.debug?debugView:w).output;if(markup.hasOwnProperty("link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.title),source=passage.text.trim())}el.src=source,markup.hasOwnProperty("text")&&(el.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return throwError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this12=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1;do{cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}!function(){++w.nextMatch;for(var css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1,$cell=void 0;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this12.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}()}++col}}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this13=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this13.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this13.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref10){var name=_ref10.name,value=_ref10.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return throwError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")&&(this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)),terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.freeze(Object.defineProperties({},{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return _macros.hasOwnProperty(name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return _tags.hasOwnProperty(name)}return Object.freeze(Object.defineProperties({},{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:macros.hasOwnProperty(name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(MacroContext,[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return _toConsumableArray(this._shadows)}},{key:"shadowView",get:function(){var view=new Set;return this.contextSelectAll((function(ctx){return ctx._shadows})).forEach((function(ctx){return ctx._shadows.forEach((function(name){return view.add(name)}))})),_toConsumableArray(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextHas",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return!0;return!1}},{key:"contextSelect",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return context;return null}},{key:"contextSelectAll",value:function(filter){for(var result=[],context=this;null!==(context=context.parent);)filter(context)&&result.push(context);return result}},{key:"addShadow",value:function(){var _this14=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this14._shadows.add(name)}))}},{key:"createShadowWrapper",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore={},this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return throwError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}]),MacroContext}();return MacroContext}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,jsVarRe:new RegExp("State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var match,jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var store=State[match[1]],name=match[2];store.hasOwnProperty(name)&&delete store[name]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}for(var match,remember=storage.get("remember")||{},jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];remember[name]=State.variables[name]}if(!storage.set("remember",remember))return this.error("unknown error, cannot remember: ".concat(this.args.raw));Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var remember=storage.get("remember");remember&&Object.keys(remember).forEach((function(name){return State.variables[name]=remember[name]}))}}),Macro.add("forget",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var match,remember=storage.get("remember"),jsVarRe=this.self.jsVarRe,needStore=!1;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];State.variables.hasOwnProperty(name)&&delete State.variables[name],remember&&remember.hasOwnProperty(name)&&(needStore=!0,delete remember[name])}if(needStore)if(0===Object.keys(remember).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",remember))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var output=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("include",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.domId," macro-").concat(this.name)).attr("data-passage",passage.title).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?Util.escape(result):result)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=Util.fromCssTime(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=Util.fromCssTime(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId;TempState.macroTypeQueue.push({id:selfId,handler:function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents);var passage=State.passage,turn=State.turns;if(!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){Util.scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?jQuery.event.trigger(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),$wrapper.trigger(":typingstop"),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};$wrapper.trigger(":typingstart"),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],elseifWsRe:/^\s*if\b/i,ifAssignRe:/[^!=&^|<>*/%+-]=[^=>]/,handler:function(){var i;try{var len=this.payload.length,elseifWsRe=this.self.elseifWsRe,ifAssignRe=this.self.ifAssignRe;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return elseifWsRe.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#"+i+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""));if(Config.macros.ifAssignmentError&&ifAssignRe.test(this.payload[i].args.full))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#"+i+")":"",": ").concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("for",{skipArgs:!0,tags:null,hasRangeRe:new RegExp("^\\S".concat(Patterns.anyChar,"*?\\s+range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.hasRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat("object"===_typeof(ex)?ex.message:ex))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat("object"===_typeof(ex)?ex.message:ex))}}}catch(ex){return this.error("bad conditional expression: ".concat("object"===_typeof(ex)?ex.message:ex))}finally{TempState.break=null}},handleForRange:function(payload,indexVar,valueVar,rangeExp){var rangeList,first=!0;try{rangeList=this.self.toRangeList(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var i=0;i<rangeList.length;++i)if(indexVar.name&&(State[indexVar.type][indexVar.name]=rangeList[i][0]),State[valueVar.type][valueVar.name]=rangeList[i][1],new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(ex){return this.error("object"===_typeof(ex)?ex.message:ex)}finally{TempState.break=null}},toRangeList:function(rangeExp){var value,list,evalJavaScript=Scripting.evalJavaScript;try{value=evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(value)){case"string":list=[];for(var i=0;i<value.length;){var obj=Util.charAndPosAt(value,i);list.push([i,obj.char]),i=1+obj.end}break;case"object":if(Array.isArray(value))list=value.map((function(val,i){return[i,val]}));else if(value instanceof Set)list=_toConsumableArray(value).map((function(val,i){return[i,val]}));else if(value instanceof Map)list=_toConsumableArray(value.entries());else{if("Object"!==Util.toStringTag(value))throw new Error("unsupported range expression type: ".concat(Util.toStringTag(value)));list=Object.keys(value).map((function(key){return[key,value[key]]}))}break;default:throw new Error("unsupported range expression type: ".concat(_typeof(value)))}return list}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this15=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else $link.wikiWithOptions({profile:"core"},this.args[0]),passage=this.args.length>1?this.args[1]:undefined;null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this15.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this16=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var options=[],tagCount={option:0,optionsfrom:0},selectedIdx=-1,_i5=1;_i5<len;++_i5){var payload=this.payload[_i5];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return this.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"));var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==selectedIdx)return this.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(selectedIdx+1," & #").concat(tagCount.option,")"));selectedIdx=options.length-1}}else{var _ret=function(){if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this16.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result=void 0;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this16.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}if("object"!==_typeof(result)||null===result)return{v:_this16.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=Util.toStringTag(result);if("Object"!==oType)return{v:_this16.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}();if("object"===_typeof(_ret))return _ret.v}}if(-1===selectedIdx)if(config.autoselect){var sameValueZero=Util.sameValueZero,curValue=State.getVar(varName),curValueIdx=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));selectedIdx=-1===curValueIdx?0:curValueIdx}else selectedIdx=0;if("cycle"===this.name){var lastIdx=options.length-1;if(config.once&&selectedIdx===lastIdx)jQuery(this.output).wikiWithOptions({profile:"core"},options[selectedIdx].label);else{var cycleIdx=selectedIdx;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},options[selectedIdx].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.createShadowWrapper((function(){var $this=$(this);cycleIdx=(cycleIdx+1)%options.length,State.setVar(varName,options[cycleIdx].value),$this.empty().wikiWithOptions({profile:"core"},options[cycleIdx].label),config.once&&cycleIdx===lastIdx&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(selectedIdx).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[selectedIdx].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this17=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper((function(){if("linkreplace"===_this17.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this17.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this17.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this17.name,"-in"))}),Engine.minDomActionDelay)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=Util.slugify(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.createShadowWrapper((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),checkValue=this.args[1],el=document.createElement("input");switch(TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=Util.slugify(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),this.args[i].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[i].passage),this.args[i].hasOwnProperty("title")&&$image.attr("title",this.args[i].title),this.args[i].hasOwnProperty("align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var passage,text,$image,$link,momentIndex=-1;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(passage=this.args[0].link)):(1===this.args[0].count||(text=this.args[0].text),passage=this.args[0].link):1===this.args.length&&(text=this.args[0])),null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),$image&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append($image||document.createTextNode(text||L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this18=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this18.name,"-in"))}),Engine.minDomActionDelay)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){var _this19=this;if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim(),oldFmtRe=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(id,this.args.slice(1).map((function(source){if(oldFmtRe.test(source)){if(Config.debug)return _this19.error('track ID "'.concat(id,'": format specifier migration required, "format:formatId;" → "formatId|"'));source=source.replace(oldFmtRe,"$1|")}return source})))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var playlist=Macro.get("playlist");if(null!==playlist.from&&"createplaylist"!==playlist.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"copy":case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="createplaylist"),Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{from:null,handler:function(){var list,args,action,from=this.self.from;if(null===from)return this.error("no playlists have been created");if("createplaylist"===from){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));list=SimpleAudio.lists.get(id),args=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");list=SimpleAudio.lists.get("setplaylist"),args=this.args.slice(0)}for(var fadeTo,loop,mute,shuffle,volume,fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var playlist=Macro.get("playlist");if(null!==playlist.from&&"setplaylist"!==playlist.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.createShadowWrapper((function(){return $.wiki(contents)})),Engine.minDomActionDelay)}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.minDomActionDelay):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this20=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this20.payload[0].contents);var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.minDomActionDelay)})),delay)},registerInterval:function(callback,delay){var _this21=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this21)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content);var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.minDomActionDelay)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName)){if(!Macro.get(widgetName).isWidget)return this.error('cannot clobber existing macro "'.concat(widgetName,'"'));Macro.delete(widgetName)}try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};State.temporary.hasOwnProperty("args")&&(shadowStore._args=State.temporary.args),State.temporary.args=_toConsumableArray(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,this.addShadow("_args"),isNonVoid&&(State.temporary.hasOwnProperty("contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),State.variables.hasOwnProperty("args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{shadowStore.hasOwnProperty("_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(shadowStore.hasOwnProperty("_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),shadowStore.hasOwnProperty("$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}})}();var Dialog=function(){var _$overlay=null,_$dialog=null,_$dialogTitle=null,_$dialogBody=null,_lastActive=null,_scrollbarWidth=0,_dialogObserver=null;function dialogClose(ev){return _$dialogBody.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),_dialogObserver?(_dialogObserver.disconnect(),_dialogObserver=null):_$dialogBody.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),_$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),_$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),_$dialogTitle.empty(),_$dialogBody.empty().removeClass(),null!==_lastActive&&(jQuery(_lastActive).focus(),_lastActive=null),ev&&ev.data&&"function"==typeof ev.data.closeFn&&ev.data.closeFn(ev),_$dialogBody.trigger(":dialogclose"),_$dialogBody.trigger(":dialogclosed"),Dialog}function dialogIsOpen(classNames){return _$dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return _$dialogBody.hasClass(cn)})))}function dialogOpen(options,closeFn){_$dialogBody.trigger(":dialogopening");var top=jQuery.extend({top:50},options).top;return dialogIsOpen()||(_lastActive=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),_$overlay.addClass("open"),null!==_$dialogBody[0].querySelector("img")&&_$dialogBody.imagesLoaded().always((function(){return _resizeHandler({data:{top:top}})})),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),_$dialog.css(_calcPosition(top)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),Has.mutationObserver?(_dialogObserver=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){_resizeHandler({data:{top:top}});break}}))).observe(_$dialogBody[0],{childList:!0,subtree:!0}):_$dialogBody.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),jQuery(document).one("click.dialog-close",".ui-close",{closeFn:closeFn},(function(ev){dialogClose(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||jQuery(this).trigger("click")})),_$dialogBody.trigger(":dialogopen"),_$dialogBody.trigger(":dialogopened"),Dialog}function _calcPosition(topPos){var top=null!=topPos?topPos:50,$parent=jQuery(window),dialogPos={left:"",right:"",top:"",bottom:""};_$dialog.css(dialogPos);var horzSpace=$parent.width()-_$dialog.outerWidth(!0)-1,vertSpace=$parent.height()-_$dialog.outerHeight(!0)-1;return horzSpace<=32+_scrollbarWidth&&(vertSpace-=_scrollbarWidth),vertSpace<=32+_scrollbarWidth&&(horzSpace-=_scrollbarWidth),dialogPos.left=dialogPos.right=horzSpace<=32?16:horzSpace/2>>0,dialogPos.top=vertSpace<=32?dialogPos.bottom=16:vertSpace/2>top?top:dialogPos.bottom=vertSpace/2>>0,Object.keys(dialogPos).forEach((function(key){""!==dialogPos[key]&&(dialogPos[key]+="px")})),dialogPos}function _resizeHandler(ev){var top=ev&&ev.data&&void 0!==ev.data.top?ev.data.top:50;"block"===_$dialog.css("display")&&(_$dialog.css({display:"none"}),_$dialog.css(jQuery.extend({display:""},_calcPosition(top))))}return Object.freeze(Object.defineProperties({},{append:{value:function(){var _$dialogBody2;return(_$dialogBody2=_$dialogBody).append.apply(_$dialogBody2,arguments),Dialog}},body:{value:function(){return _$dialogBody.get(0)}},close:{value:dialogClose},init:{value:function(){if(!document.getElementById("ui-dialog")){_scrollbarWidth=function(){var scrollbarWidth;try{var inner=document.createElement("p"),outer=document.createElement("div");inner.style.width="100%",inner.style.height="200px",outer.style.position="absolute",outer.style.left="0px",outer.style.top="0px",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),scrollbarWidth=w1-w2}catch(ex){}return scrollbarWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("close"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');_$overlay=jQuery($elems.find("#ui-overlay").get(0)),_$dialog=jQuery($elems.find("#ui-dialog").get(0)),_$dialogTitle=jQuery($elems.find("#ui-dialog-title").get(0)),_$dialogBody=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:dialogIsOpen},open:{value:dialogOpen},resize:{value:function(data){return _resizeHandler("object"===_typeof(data)?{data:data}:undefined)}},setup:{value:function(title,classNames){return _$dialogBody.empty().removeClass(),null!=classNames&&_$dialogBody.addClass(classNames),_$dialogTitle.empty().append((null!=title?String(title):"")||" "),_$dialogBody.get(0)}},wiki:{value:function(){var _$dialogBody3;return(_$dialogBody3=_$dialogBody).wiki.apply(_$dialogBody3,arguments),Dialog}},addClickHandler:{value:function(targets,options,startFn,doneFn,closeFn){return jQuery(targets).ariaClick((function(ev){ev.preventDefault(),"function"==typeof startFn&&startFn(ev),dialogOpen(options,closeFn),"function"==typeof doneFn&&doneFn(ev)}))}}}))}(),Engine=function(){var States=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),_initDebugViews=[],_state=States.Idle,_lastPlay=null,_outlinePatch=null,_updating=null;function engineGo(offset){var succeded=State.go(offset);return succeded&&engineShow(),succeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({type:":passageinit",passage:passage}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.title),document.body.className&&(document.body.className=""),_lastPlay=Util.now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.domId,"data-passage":passage.title,"data-tags":dataTags}).addClass("passage ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({type:":passagestart",content:passageEl,passage:passage}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:passageEl,passage:passage}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?_toConsumableArray(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(40,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).addClass("passage-in").appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),40),Story.has("StoryDisplayTitle")?null===_updating&&Config.ui.updateStoryElements||setDisplayTitle(Story.get("StoryDisplayTitle").processText()):Config.passages.displayTitles&&passage.title!==Config.passages.start&&(document.title="".concat(passage.title," | ").concat(Story.title)),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({type:":passagedisplay",content:passageEl,passage:passage}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),null!==_updating?_updating.forEach((function(pair){jQuery(pair.element).empty(),new Wikifier(pair.element,Story.get(pair.passage).processText().trim())})):Config.ui.updateStoryElements&&UIBar.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));switch(jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":passage.tags.some((function(tag){return Config.saves.autosave.includes(tag)}))&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",content:passageEl,passage:passage}),_state=States.Idle,_lastPlay=Util.now(),passageEl}function _hideOutlines(){_outlinePatch.set("*:focus{outline:none;}")}return Object.freeze(Object.defineProperties({},{States:{value:States},minDomActionDelay:{value:40},init:{value:function(){var _lastOutlineEvent;jQuery("#init-no-js,#init-lacking").remove(),function(){var $elems=jQuery(document.createDocumentFragment()),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$elems.append(markup);var $passages=$elems.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end(),$elems.find("[data-init-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(el).empty().wiki(Story.get(passage).processText().trim())}));var updating=[];$elems.find("[data-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&updating.push({passage:passage,element:el})})),updating.length>0&&(_updating=updating),Config.ui.updateStoryElements=!1}else $elems.append('<div id="story" role="main"><div id="passages" aria-live="polite"></div></div>');$elems.insertBefore("body>script#script-sugarcube")}(),_outlinePatch=new StyleWrapper(jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)),_hideOutlines(),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",(function(ev){ev.type!==_lastOutlineEvent&&(_lastOutlineEvent=ev.type,"keydown"===ev.type?_outlinePatch.clear():_hideOutlines())}))}},start:{value:function(){if(Story.getAllInit().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.title," [init-tagged]"),"".concat(passage.title," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.title," [init-tagged]"),"object"===_typeof(ex)?ex.message:ex)}})),Story.has("StoryInit"))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit","object"===_typeof(ex)?ex.message:ex)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(jQuery(document.documentElement).focus(),State.restore())engineShow();else{var loadStart=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(loadStart=!Save.autosave.load())}loadStart&&enginePlay(Config.passages.start)}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(idx){var succeded=State.goTo(idx);return succeded&&engineShow(),succeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}}}))}(),Passage=(_tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,function(){function Passage(title,el){var _this22=this;_classCallCheck(this,Passage),Object.defineProperties(this,{title:{value:Util.unescape(title)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-".concat(Util.slugify(this.title))},classes:{value:Object.freeze(0===this.tags.length?[]:_this22.tags.filter((function(tag){return!_tagsToSkip.test(tag)})).map((function(tag){return Util.slugify(tag)})))}})}return _createClass(Passage,[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=Util.escapeMarkup(this.title),mesg="".concat(L10n.get("errorTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return this.element.textContent.replace(/\r/g,"")}},{key:"description",value:function(){var descriptions=Config.passages.descriptions;switch(_typeof(descriptions)){case"boolean":if(descriptions)return this.title;break;case"object":if(descriptions.hasOwnProperty(this.title))return descriptions[this.title];break;case"function":var result=descriptions.call(this);if(result)return result}return null===this._excerpt&&(this._excerpt=Passage.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),this._excerpt=Passage.getExcerptFromNode(frag),frag}}],[{key:"getExcerptFromNode",value:function(node,count){if(!node.hasChildNodes())return"";var excerpt=node.textContent.trim();if(""!==excerpt){var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})"));excerpt=excerpt.replace(/\s+/g," ").match(excerptRe)}return excerpt?"".concat(excerpt[1],"…"):"…"}},{key:"getExcerptFromText",value:function(text,count){if(""===text)return"";var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})")),excerpt=text.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(excerptRe);return excerpt?"".concat(excerpt[1],"…"):"…"}}]),Passage}()),_tagsToSkip,Save=function(){var Type=Util.toEnum({Autosave:"autosave",Disk:"disk",Serialize:"serialize",Slot:"slot"}),_slotsUBound=-1,_onLoadHandlers=new Set,_onSaveHandlers=new Set;function savesObjGet(){var saves=storage.get("saves");return null===saves?{autosave:null,slots:_appendSlots([],Config.saves.slots)}:saves}function savesObjClear(){return storage.delete("saves"),!0}function autosaveOk(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function slotsOk(){return"cookie"!==storage.name&&-1!==_slotsUBound}function slotsCount(){if(!slotsOk())return 0;for(var saves=savesObjGet(),count=0,i=0,iend=saves.slots.length;i<iend;++i)null!==saves.slots[i]&&++count;return count}function _appendSlots(array,num){for(var i=0;i<num;++i)array.push(null);return array}function _savesObjIsEmpty(saves){for(var slots=saves.slots,isSlotsEmpty=!0,i=0,iend=slots.length;i<iend;++i)if(null!==slots[i]){isSlotsEmpty=!1;break}return null===saves.autosave&&isSlotsEmpty}function _savesObjSave(saves){return _savesObjIsEmpty(saves)?(storage.delete("saves"),!0):storage.set("saves",saves)}function _savesObjUpdate(saveObj){if(null==saveObj||"object"!==_typeof(saveObj))return!1;var updated=!1;return saveObj.hasOwnProperty("state")&&saveObj.state.hasOwnProperty("delta")&&saveObj.state.hasOwnProperty("index")||(saveObj.hasOwnProperty("data")?(delete saveObj.mode,saveObj.state={delta:State.deltaEncode(saveObj.data)},delete saveObj.data):saveObj.state.hasOwnProperty("delta")?saveObj.state.hasOwnProperty("index")||delete saveObj.state.mode:(delete saveObj.state.mode,saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history),saveObj.state.index=saveObj.state.delta.length-1,updated=!0),saveObj.state.hasOwnProperty("rseed")&&(saveObj.state.seed=saveObj.state.rseed,delete saveObj.state.rseed,saveObj.state.delta.forEach((function(_,i,delta){delta[i].hasOwnProperty("rcount")&&(delta[i].pull=delta[i].rcount,delete delta[i].rcount)})),updated=!0),(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired||saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired&&delete saveObj.state.expired,(saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.expired=[],saveObj.state.hasOwnProperty("unique")&&(saveObj.state.expired.push(saveObj.state.unique),delete saveObj.state.unique),saveObj.state.hasOwnProperty("last")&&(saveObj.state.expired.push(saveObj.state.last),delete saveObj.state.last)),updated=!0),updated}function _marshal(supplemental,details){if(null!=supplemental&&"object"!==_typeof(supplemental))throw new Error("supplemental parameter must be an object");var saveObj=Object.assign({},supplemental,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(saveObj.version=Config.saves.version),_onSaveHandlers.forEach((function(fn){return fn(saveObj,details)})),saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history,saveObj}function _unmarshal(saveObj){try{if(_savesObjUpdate(saveObj),!saveObj||!saveObj.hasOwnProperty("id")||!saveObj.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(saveObj.state.history=State.deltaDecode(saveObj.state.delta),delete saveObj.state.delta,_onLoadHandlers.forEach((function(fn){return fn(saveObj)})),saveObj.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(saveObj.state),Engine.show()}catch(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("aborting"),".")),!1}return!0}return Object.freeze(Object.defineProperties({},{init:{value:function(){if("cookie"===storage.name)return savesObjClear(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.slots=0,!1;var saves=savesObjGet(),updated=!1;Array.isArray(saves)&&(saves={autosave:null,slots:saves},updated=!0),Config.saves.slots!==saves.slots.length&&(Config.saves.slots<saves.slots.length?(saves.slots.reverse(),saves.slots=saves.slots.filter((function(val){return!(null===val&&this.count>0)||(--this.count,!1)}),{count:saves.slots.length-Config.saves.slots}),saves.slots.reverse()):Config.saves.slots>saves.slots.length&&_appendSlots(saves.slots,Config.saves.slots-saves.slots.length),updated=!0),_savesObjUpdate(saves.autosave)&&(updated=!0);for(var i=0;i<saves.slots.length;++i)_savesObjUpdate(saves.slots[i])&&(updated=!0);return _savesObjIsEmpty(saves)&&(storage.delete("saves"),updated=!1),updated&&_savesObjSave(saves),_slotsUBound=saves.slots.length-1,!0}},get:{value:savesObjGet},clear:{value:savesObjClear},ok:{value:function(){return autosaveOk()||slotsOk()}},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:autosaveOk},has:{value:function(){return null!==savesObjGet().autosave}},get:{value:function(){return savesObjGet().autosave}},load:{value:function(){var saves=savesObjGet();return null!==saves.autosave&&_unmarshal(saves.autosave)}},save:{value:function(title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var saves=savesObjGet(),supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.autosave=_marshal(supplemental,{type:Type.Autosave}),_savesObjSave(saves)}},delete:{value:function(){var saves=savesObjGet();return saves.autosave=null,_savesObjSave(saves)}}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:slotsOk},length:{get:function(){return _slotsUBound+1}},isEmpty:{value:function(){return 0===slotsCount()}},count:{value:slotsCount},has:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])}},get:{value:function(slot){if(slot<0||slot>_slotsUBound)return null;var saves=savesObjGet();return slot>=saves.slots.length?null:saves.slots[slot]}},load:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])&&_unmarshal(saves.slots[slot])}},save:{value:function(slot,title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),!1;if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();if(slot>=saves.slots.length)return!1;var supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.slots[slot]=_marshal(supplemental,{type:Type.Slot}),_savesObjSave(saves)}},delete:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length)&&(saves.slots[slot]=null,_savesObjSave(saves))}}}))},export:{value:function(filename,metadata){if("function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed()){var str,now,MM,DD,hh,mm,ss,baseName=null==filename?Story.domId:(str=filename,Util.sanitizeFilename(str).replace(/[_\s\u2013\u2014-]+/g,"-")),saveName="".concat(baseName,"-").concat((now=new Date,MM=now.getMonth()+1,DD=now.getDate(),hh=now.getHours(),mm=now.getMinutes(),ss=now.getSeconds(),MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(now.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)),".save"),supplemental=null==metadata?{}:{metadata:metadata},saveObj=LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Disk})));saveAs(new Blob([saveObj],{type:"text/plain;charset=UTF-8"}),saveName)}else Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed"))}},import:{value:function(event){var file=event.target.files[0],reader=new FileReader;jQuery(reader).one("loadend",(function(){if(reader.error){var ex=reader.error;UI.alert("".concat(L10n.get("errorSaveDiskLoadFailed").toUpperFirst()," (").concat(ex.name,": ").concat(ex.message,").</p><p>").concat(L10n.get("aborting"),"."))}else{var saveObj;try{saveObj=JSON.parse(/\.json$/i.test(file.name)||/^\{/.test(reader.result)?reader.result:LZString.decompressFromBase64(reader.result))}catch(ex){}_unmarshal(saveObj)}})),reader.readAsText(file)}},serialize:{value:function(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),null;var supplemental=null==metadata?{}:{metadata:metadata};return LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Serialize})))}},deserialize:{value:function(base64Str){var saveObj;try{saveObj=JSON.parse(LZString.decompressFromBase64(base64Str))}catch(ex){}return _unmarshal(saveObj)?saveObj.metadata:null}},onLoad:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));_onLoadHandlers.add(handler)}},clear:{value:function(){_onLoadHandlers.clear()}},delete:{value:function(handler){return _onLoadHandlers.delete(handler)}},size:{get:function(){return _onLoadHandlers.size}}}))},onSave:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));_onSaveHandlers.add(handler)}},clear:{value:function(){_onSaveHandlers.clear()}},delete:{value:function(handler){return _onSaveHandlers.delete(handler)}},size:{get:function(){return _onSaveHandlers.size}}}))}}))}(),Setting=function(){var Types=Util.toEnum({Header:0,Toggle:1,List:2,Range:3}),_definitions=[];function settingsCreate(){return Object.create(null)}function settingsSave(){var savedSettings=settingsCreate();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function settingsLoad(){var defaultSettings=settingsCreate(),loadedSettings=storage.get("settings")||settingsCreate();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),window.SugarCube.settings=settings=Object.assign(defaultSettings,loadedSettings)}function settingsClear(){return window.SugarCube.settings=settings=settingsCreate(),storage.delete("settings"),!0}function definitionsAdd(type,name,def){if(arguments.length<3){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),arguments.length<3&&errors.push("definition"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(definitionsHas(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name,label:"string"==typeof def.label?def.label.trim():""};if("string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.Toggle:definition.default=!!def.default;break;case Types.List:if(!def.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!def.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!def.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!def.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var stepValidate=function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min},fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(stepValidate(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function definitionsHas(name){return _definitions.some((function(definition){return definition.name===name}))}function definitionsGet(name){return _definitions.find((function(definition){return definition.name===name}))}return Object.freeze(Object.defineProperties({},{Types:{value:Types},init:{value:function(){if(storage.has("options")){var old=storage.get("options");null!==old&&(window.SugarCube.settings=settings=Object.assign(settingsCreate(),old)),settingsSave(),storage.delete("options")}settingsLoad(),_definitions.forEach((function(def){if(def.hasOwnProperty("onInit")){var thisArg={name:def.name,value:settings[def.name],default:def.default};def.hasOwnProperty("list")&&(thisArg.list=def.list),def.onInit.call(thisArg)}}))}},create:{value:settingsCreate},save:{value:settingsSave},load:{value:settingsLoad},clear:{value:settingsClear},reset:{value:function(name){if(0===arguments.length)settingsClear(),settingsLoad();else{if(null==name||!definitionsHas(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=definitionsGet(name);def.type!==Types.Header&&(settings[name]=def.default)}return settingsSave()}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},add:{value:definitionsAdd},addHeader:{value:function(name,desc){definitionsAdd(Types.Header,name,{desc:desc})}},addToggle:{value:function(){for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];definitionsAdd.apply(void 0,[Types.Toggle].concat(args))}},addList:{value:function(){for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];definitionsAdd.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];definitionsAdd.apply(void 0,[Types.Range].concat(args))}},isEmpty:{value:function(){return 0===_definitions.length}},has:{value:definitionsHas},get:{value:definitionsGet},delete:{value:function definitionsDelete(name){definitionsHas(name)&&delete settings[name];for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1),definitionsDelete(name);break}}}}))}(),Story=function(){var _passages={},_inits=[],_scripts=[],_styles=[],_widgets=[],_title="",_ifId="",_domId="";function _storySetTitle(rawTitle){if(null==rawTitle)throw new Error("story title must not be null or undefined");var title=Util.unescape(String(rawTitle)).trim();if(""===title)throw new Error("story title must not be empty or consist solely of whitespace");if(document.title=_title=title,""===(_domId=Util.slugify(_title)))if(""!==_ifId)_domId=_ifId;else for(var i=0,len=_title.length;i<len;++i){var _Util$charAndPosAt2=Util.charAndPosAt(_title,i),char=_Util$charAndPosAt2.char,start=_Util$charAndPosAt2.start,end=_Util$charAndPosAt2.end;_domId+=char.codePointAt(0).toString(16),i+=end-start}}return Object.freeze(Object.defineProperties({},{load:{value:function(){var validationCodeTags=["init","widget"],validationNoCodeTagPassages=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"];function validateStartingPassage(passage){if(passage.tags.includesAny(validationCodeTags))throw new Error('starting passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(passage.tags.filter((function(tag){return validationCodeTags.includes(tag)})).sort().join('", "'),'"'))}function validateSpecialPassages(passage){if(validationNoCodeTagPassages.includes(passage.title)){for(var _len19=arguments.length,tags=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++)tags[_key19-1]=arguments[_key19];throw new Error('special passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(tags.sort().join('", "'),'"'))}var codeTags=[].concat(validationCodeTags),foundTags=[];if(passage.tags.forEach((function(tag){codeTags.includes(tag)&&foundTags.push.apply(foundTags,_toConsumableArray(codeTags.delete(tag)))})),foundTags.length>1)throw new Error('passage "'.concat(passage.title,'" contains multiple special tags; invalid: "').concat(foundTags.sort().join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.title,validateStartingPassage(passage),_passages[passage.title]=passage):passage.tags.includes("init")?(validateSpecialPassages(passage,"init"),_inits.push(passage)):passage.tags.includes("widget")?(validateSpecialPassages(passage,"widget"),_widgets.push(passage)):_passages[passage.title]=passage})),_ifId=$storydata.attr("ifid"),_storySetTitle("Apocalyptic World"),Config.saves.id=Story.domId}},init:{value:function(){var storyStyle;storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(_styles.map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"});for(var i=0;i<_scripts.length;++i)try{Scripting.evalJavaScript(_scripts[i].text)}catch(ex){console.error(ex),Alert.error(_scripts[i].title,"object"===_typeof(ex)?ex.message:ex)}for(var _i8=0;_i8<_widgets.length;++_i8)try{Wikifier.wikifyEval(_widgets[_i8].processText())}catch(ex){console.error(ex),Alert.error(_widgets[_i8].title,"object"===_typeof(ex)?ex.message:ex)}}},title:{get:function(){return _title}},domId:{get:function(){return _domId}},ifId:{get:function(){return _ifId}},add:{value:function(passage){if(!(passage instanceof Passage))throw new TypeError("Story.add passage parameter must be an instance of Passage");var title=passage.title;return!_passages.hasOwnProperty(title)&&(_passages[title]=passage,!0)}},has:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":return _passages.hasOwnProperty(String(title));case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has title parameter cannot be ".concat(type))}},get:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":var id=String(title);return _passages.hasOwnProperty(id)?_passages[id]:new Passage(id||"(unknown)");case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get title parameter cannot be ".concat(type))}},getAllInit:{value:function(){return Object.freeze(Array.from(_inits))}},getAllRegular:{value:function(){return Object.freeze(Object.assign({},_passages))}},getAllScript:{value:function(){return Object.freeze(Array.from(_scripts))}},getAllStylesheet:{value:function(){return Object.freeze(Array.from(_styles))}},getAllWidget:{value:function(){return Object.freeze(Array.from(_widgets))}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return Util.sameValueZero(m,value)}))&&results.push(passage):Util.sameValueZero(passage[key],value)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof predicate)throw new TypeError("Story.lookupWith predicate parameter must be a function");var results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];predicate(passage)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}}}))}(),UI=function(){function uiAssembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug,cleanState=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim());var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.cleanupWikifierOutput=cleanState,Config.debug=debugState}return list}function uiOpenAlert(message){jQuery(Dialog.setup(L10n.get("alertTitle"),"alert")).append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertOk","ok"]),"</button></li>")+"</ul>");for(var _len20=arguments.length,args=new Array(_len20>1?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];Dialog.open.apply(Dialog,args)}function uiBuildAutoload(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>".concat(L10n.get("autoloadPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadOk","ok"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadCancel","cancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){isAutoloadOk&&Save.autosave.load()||Engine.play(Config.passages.start)}))})),!0}function uiBuildJumpto(){var list=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(idx){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(idx)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("jumptoTurn")," ").concat(expired+i+1,": ").concat(passage.description()))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoUnavailable"),"</em></a></li>"))}function uiBuildRestart(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>".concat(L10n.get("restartPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartOk","ok"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartCancel","cancel"]),"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function uiBuildSaves(){var savesAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed();function createActionItem(bId,bClass,bText,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId)).html(bText);return bClass&&$btn.addClass(bClass),bAction?$btn.ariaClick(bAction):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var $dialogBody=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),savesOk=Save.ok(),fileOk=Has.fileAPI&&(Config.saves.tryDiskOnMobile||!Browser.isMobile.any());if(savesOk&&$dialogBody.append(function(){function createButton(bId,bClass,bText,bSlot,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId,"-").concat(bSlot)).addClass(bId).html(bText);return bClass&&$btn.addClass(bClass),bAction?"auto"===bSlot?$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelAuto"))},(function(){return bAction()})):$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelSlot")," ").concat(bSlot+1)},(function(){return bAction(bSlot)})):$btn.ariaDisabled(!0),$btn}var saves=Save.get(),$tbody=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var $tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo($tdSlot),saves.autosave?($tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),"auto",(function(){jQuery(document).one(":dialogclosed",(function(){return Save.autosave.load()}))}))),jQuery(document.createElement("div")).text(saves.autosave.title).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.autosave.date?"".concat(new Date(saves.autosave.date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo($tdDesc),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto",(function(){Save.autosave.delete(),uiBuildSaves()})))):($tdLoad.append(createButton("load",null,L10n.get("savesLabelLoad"),"auto")),$tdDesc.addClass("empty").text("•  •  •"),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}for(var i=0,iend=saves.slots.length;i<iend;++i){var _$tdSlot=jQuery(document.createElement("td")),_$tdLoad=jQuery(document.createElement("td")),_$tdDesc=jQuery(document.createElement("td")),_$tdDele=jQuery(document.createElement("td"));_$tdSlot.append(document.createTextNode(i+1)),saves.slots[i]?(_$tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),i,(function(slot){jQuery(document).one(":dialogclosed",(function(){return Save.slots.load(slot)}))}))),jQuery(document.createElement("div")).text(saves.slots[i].title).appendTo(_$tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.slots[i].date?"".concat(new Date(saves.slots[i].date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo(_$tdDesc),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i,(function(slot){Save.slots.delete(slot),uiBuildSaves()})))):(_$tdLoad.append(createButton("save","ui-close",L10n.get("savesLabelSave"),i,savesAllowed?Save.slots.save:null)),_$tdDesc.addClass("empty").text("•  •  •"),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i))),jQuery(document.createElement("tr")).append(_$tdSlot).append(_$tdLoad).append(_$tdDesc).append(_$tdDele).appendTo($tbody)}return jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}()),savesOk||fileOk){var $btnBar=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody);return fileOk&&($btnBar.append(createActionItem("export","ui-close",L10n.get("savesLabelExport"),savesAllowed?function(){return Save.export()}:null)),$btnBar.append(createActionItem("import",null,L10n.get("savesLabelImport"),(function(){return $dialogBody.find("#saves-import-file").trigger("click")}))),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",(function(ev){jQuery(document).one(":dialogclosed",(function(){return Save.import(ev)})),Dialog.close()})).appendTo($dialogBody)),savesOk&&$btnBar.append(createActionItem("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),uiBuildSaves()}:null)),!0}return uiOpenAlert(L10n.get("savesIncapable")),!1}function uiBuildSettings(){var $dialogBody=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach((function(control){if(control.type===Setting.Types.Header){var _name=control.name,_id=Util.slugify(_name),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id)).wiki(_name),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id)).wiki(control.desc).appendTo($header))}var $control,name=control.name,id=Util.slugify(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wiki(control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wiki(control.label),null==settings[name]&&(settings[name]=control.default),control.type){case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),settings[name]?$control.addClass("enabled").text(L10n.get("settingsOn")):$control.text(L10n.get("settingsOff")),$control.ariaClick((function(){settings[name]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[name]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[name]=!0),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default})}));break;case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(settings[name])).attr("tabindex",0).on("change",(function(){settings[name]=control.list[Number(this.value)],Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,list:control.list})}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:settings[name],tabindex:0}).on("change input",(function(){settings[name]=Number(this.value),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,min:control.min,max:control.max,step:control.step})})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$control.trigger("change"))}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsOk","ok"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function uiBuildShare(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(uiAssembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:uiAssembleLinkList},alert:{value:uiOpenAlert},jumpto:{value:function(){uiBuildJumpto(),Dialog.open.apply(Dialog,arguments)}},restart:{value:function(){uiBuildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){uiBuildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){uiBuildSettings(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){uiBuildShare(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:uiBuildAutoload},buildJumpto:{value:uiBuildJumpto},buildRestart:{value:uiBuildRestart},buildSaves:{value:uiBuildSaves},buildSettings:{value:uiBuildSettings},buildShare:{value:uiBuildShare},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:uiBuildAutoload},buildDialogJumpto:{value:uiBuildJumpto},buildDialogRestart:{value:uiBuildRestart},buildDialogSaves:{value:uiBuildSaves},buildDialogSettings:{value:uiBuildSettings},buildDialogShare:{value:uiBuildShare},buildLinkListFromPassage:{value:uiAssembleLinkList}}))}(),UIBar=function(){var _$uiBar=null;function uiBarStow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay));return this}function uiBarUpdate(){if(Story.has("StoryDisplayTitle")&&setDisplayTitle(Story.get("StoryDisplayTitle").processText()),_$uiBar){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var menuStory=document.getElementById("menu-story");if(null!==menuStory&&(jQuery(menuStory).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",menuStory)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}}return Object.freeze(Object.defineProperties({},{destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),this}},init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarToggle"),backwardLabel=L10n.get("uiBarBackward"),jumptoLabel=L10n.get("uiBarJumpto"),forwardLabel=L10n.get("uiBarForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),this}},start:{value:function(){_$uiBar&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&uiBarStow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},(function(){return Engine.backward()})),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove(),Story.has("StoryDisplayTitle")?setDisplayTitle(Story.get("StoryDisplayTitle").processText()):jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||uiBarUpdate(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}},stow:{value:uiBarStow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay)),this}},update:{value:uiBarUpdate},setStoryElements:{value:uiBarUpdate}}))}(),DebugBar=function(){var _variableRe=new RegExp("^".concat(Patterns.variable,"$")),_numericKeyRe=/^\d+$/,_watchList=[],_$debugBar=null,_$watchBody=null,_$watchList=null,_$turnSelect=null,_stowed=!0;function debugBarStow(){_$debugBar.css("right","-".concat(_$debugBar.outerWidth(),"px")),_stowed=!0,_updateSession()}function debugBarUnstow(){_$debugBar.css("right",0),_stowed=!1,_updateSession()}function debugBarToggle(){_stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){_variableRe.test(varName)&&(_watchList.pushUnique(varName),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return _watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return _watchList.pushUnique("_".concat(name))})),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchClear(){for(var i=_watchList.length-1;i>=0;--i)_watchList.pop();_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDelete(varName){_watchList.delete(varName),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDisable(){_debugBarWatchDisableNoUpdate(),_updateSession()}function debugBarWatchEnable(){_debugBarWatchEnableNoUpdate(),_updateSession()}function debugBarWatchIsEnabled(){return!_$watchBody.attr("hidden")}function debugBarWatchToggle(){_$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function _debugBarWatchDisableNoUpdate(){_$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function _debugBarWatchEnableNoUpdate(){_$watchBody.removeAttr("aria-hidden hidden")}function _clearSession(){session.delete("debugState")}function _hasSession(){return session.has("debugState")}function _updateSession(){session.set("debugState",{stowed:_stowed,watchList:_watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function _updateWatchBody(){if(0!==_watchList.length){for(var delLabel=L10n.get("debugBarDeleteWatch"),$table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),_loop4=function(i,len){var varName=_watchList[i],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary,$row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));$delBtn.addClass("watch-delete").attr("data-name",varName).ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(_toWatchString(store[varKey])),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row.appendTo($tbody)},i=0,len=_watchList.length;i<len;++i)_loop4(i);$table.append($tbody),_$watchBody.empty().append($table)}else _$watchBody.empty().append("<div>".concat(L10n.get("debugBarNoWatches"),"</div>"))}function _updateWatchList(){var svn=Object.keys(State.variables),tvn=Object.keys(State.temporary);if(0!==svn.length||0!==tvn.length){var names=[].concat(_toConsumableArray(svn.map((function(name){return"$".concat(name)}))),_toConsumableArray(tvn.map((function(name){return"_".concat(name)})))).sort(),options=document.createDocumentFragment();names.delete(_watchList);for(var i=0,len=names.length;i<len;++i)jQuery(document.createElement("option")).val(names[i]).appendTo(options);_$watchList.empty().append(options)}else _$watchList.empty()}function _updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(Util.escape(State.history[i].title))).appendTo(options);_$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function _toWatchString(value){if(null===value)return"null";switch(_typeof(value)){case"number":if(Number.isNaN(value))return"NaN";if(!Number.isFinite(value))return"Infinity";case"boolean":case"symbol":case"undefined":return String(value);case"string":return JSON.stringify(value);case"function":return"Function"}var objType=Util.toStringTag(value);if("Date"===objType)return"Date {".concat(value.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(value.toString());var result=[];if(value instanceof Array||value instanceof Set){for(var list=value instanceof Array?value:Array.from(value),i=0,len=list.length;i<len;++i)result.push(list.hasOwnProperty(i)?_toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!_numericKeyRe.test(key)})).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return value instanceof Map?(value.forEach((function(val,key){return result.push("".concat(_toWatchString(key)," → ").concat(_toWatchString(val)))})),"".concat(objType,"(").concat(value.size,") {").concat(result.join(", "),"}")):(Object.keys(value).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(value[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.freeze(Object.defineProperties({},{init:{value:function(){var barToggleLabel=L10n.get("debugBarToggle"),watchAddLabel=L10n.get("debugBarAddWatch"),watchAllLabel=L10n.get("debugBarWatchAll"),watchNoneLabel=L10n.get("debugBarWatchNone"),watchToggleLabel=L10n.get("debugBarWatchToggle"),viewsToggleLabel=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>".concat(L10n.get("debugBarNoWatches"),"</div>>")+"</div><div>"+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarLabelWatch"),"</button>")+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarLabelAdd"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-none" tabindex="0" title="'.concat(watchNoneLabel,'" aria-label="').concat(watchNoneLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarLabelViews"),"</button>")+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("debugBarLabelTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div>'+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),_$debugBar=jQuery("#debug-bar"),_$watchBody=jQuery(_$debugBar.find("#debug-bar-watch").get(0)),_$watchList=jQuery(_$debugBar.find("#debug-bar-watch-list").get(0)),_$turnSelect=jQuery(_$debugBar.find("#debug-bar-turn-select").get(0));var $barToggle=jQuery(_$debugBar.find("#debug-bar-toggle").get(0)),$watchToggle=jQuery(_$debugBar.find("#debug-bar-watch-toggle").get(0)),$watchInput=jQuery(_$debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery(_$debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery(_$debugBar.find("#debug-bar-watch-all").get(0)),$watchNone=jQuery(_$debugBar.find("#debug-bar-watch-none").get(0)),$viewsToggle=jQuery(_$debugBar.find("#debug-bar-views-toggle").get(0));$barToggle.ariaClick(debugBarToggle),$watchToggle.ariaClick(debugBarWatchToggle),$watchInput.on(":addwatch",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$watchInput.trigger(":addwatch"))})),$watchAdd.ariaClick((function(){return $watchInput.trigger(":addwatch")})),$watchAll.ariaClick(debugBarWatchAddAll),$watchNone.ariaClick(debugBarWatchClear),_$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$viewsToggle.ariaClick((function(){DebugView.toggle(),_updateSession()})),jQuery(document).on(":historyupdate.debug-bar",_updateTurnSelect).on(":passageend.debug-bar",(function(){_updateWatchBody(),_updateWatchList()})).on(":enginerestart.debug-bar",_clearSession),_hasSession()||DebugView.enable()}},isStowed:{value:function(){return _stowed}},start:{value:function(){(function(){if(!_hasSession())return!1;var debugState=session.get("debugState");_stowed=debugState.stowed,_watchList.push.apply(_watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?_debugBarWatchEnableNoUpdate():_debugBarWatchDisableNoUpdate();debugState.viewsEnabled?DebugView.enable():DebugView.disable()})(),_stowed?debugBarStow():debugBarUnstow(),_updateTurnSelect(),_updateWatchBody(),_updateWatchList()}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.freeze(Object.defineProperties({},{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.freeze(Object.defineProperties({},{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.minDomActionDelay,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&jQuery(document).trigger("readystatechange")}}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:36,patch:1,prerelease:null,build:9717,date:new Date("2021-12-22T05:37:33.467Z"),extensions:{},toString:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)},short:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.title," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")},long:function(){return"".concat(this.title," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery((function(){try{var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var $window=$(window),vprCheckId=setInterval((function(){$window.width()&&(clearInterval(vprCheckId),UIBar.start(),Config.debug&&DebugBar.start(),jQuery.event.trigger({type:":storyready"}),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.minDomActionDelay))}),Engine.minDomActionDelay);Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))})}catch(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
